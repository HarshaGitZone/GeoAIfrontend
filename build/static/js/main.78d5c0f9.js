/*! For license information please see main.78d5c0f9.js.LICENSE.txt */
(()=>{var e={228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(t in r=arguments[n])e[t]=r[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function r(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function a(e){return"_leaflet_id"in e||(e._leaflet_id=++o),e._leaflet_id}function s(e,t,n){var i,r,o,a;return a=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(e.apply(n,arguments),setTimeout(a,t),i=!0)},o}function l(e,t,n){var i=t[1],r=t[0],o=i-r;return e===i&&n?e:((e-r)%o+o)%o+r}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function d(e){return h(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function f(e,t,n){var i=[];for(var r in e)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"===typeof i&&(i=i(t)),i})}var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var b=0;function w(e){var t=+new Date,n=Math.max(0,16-(t-b));return b=t+n,window.setTimeout(e,n)}var D=window.requestAnimationFrame||x("RequestAnimationFrame")||w,E=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function C(e,t,n){if(!n||D!==w)return D.call(window,r(e,t));e.call(t)}function A(e){e&&E.call(window,e)}var S={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:a,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:y,indexOf:v,emptyImageUrl:_,requestFn:D,cancelFn:E,requestAnimFrame:C,cancelAnimFrame:A};function T(){}function F(e){if("undefined"!==typeof L&&L&&L.Mixin){e=y(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}T.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=t.__super__=this.prototype,o=i(r);for(var a in o.constructor=t,t.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(t[a]=this[a]);return e.statics&&n(t,e.statics),e.includes&&(F(e.includes),n.apply(null,[o].concat(e.includes))),n(o,e),delete o.statics,delete o.includes,o.options&&(o.options=r.options?i(r.options):{},n(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;e<t;e++)o._initHooks[e].call(this)}},t},T.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},T.mergeOptions=function(e){return n(this.prototype.options,e),this},T.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var k={on:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t);else for(var r=0,o=(e=d(e)).length;r<o;r++)this._on(e[r],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var i in e)this._off(i,e[i],t);else{e=d(e);for(var r=1===arguments.length,o=0,a=e.length;o<a;o++)r?this._off(e[o]):this._off(e[o],t,n)}else delete this._events;return this},_on:function(e,t,n,i){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var r={fn:t,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(r)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var i,r,o;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var a=this._listens(e,t,n);if(!1!==a){var s=i[a];this._firingCount&&(s.fn=c,this._events[e]=i=i.slice()),i.splice(a,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(r=0,o=i.length;r<o;r++)i[r].fn=c;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var r=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(e,t,n,i){"string"!==typeof e&&console.warn('"string" type argument expected');var r=t;"function"!==typeof t&&(i=!!t,r=void 0,n=void 0);var o=this._events&&this._events[e];if(o&&o.length&&!1!==this._listens(e,r,n))return!0;if(i)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t,n,i))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var r=0,o=i.length;r<o;r++)if(i[r].fn===t&&i[r].ctx===n)return r;return!1},once:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var r=0,o=(e=d(e)).length;r<o;r++)this._on(e[r],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[a(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[a(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};k.addEventListener=k.on,k.removeEventListener=k.clearAllEventListeners=k.off,k.addOneTimeEventListener=k.once,k.fireEvent=k.fire,k.hasEventListeners=k.listens;var P=T.extend(k);function M(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var I=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function j(e,t,n){return e instanceof M?e:y(e)?new M(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new M(e.x,e.y):new M(e,t,n)}function N(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function O(e,t){return!e||e instanceof N?e:new N(e,t)}function B(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function z(e,t){return e instanceof B?e:new B(e,t)}function R(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function V(e,t,n){return e instanceof R?e:y(e)&&"object"!==typeof e[0]?3===e.length?new R(e[0],e[1],e[2]):2===e.length?new R(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new R(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new R(e,t,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(e){return this.clone()._add(j(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(j(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new M(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new M(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(e){var t=(e=j(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=j(e)).x===this.x&&e.y===this.y},contains:function(e){return e=j(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},N.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof M||"number"===typeof e[0]||"x"in e)t=n=j(e);else if(t=(e=O(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof M?j(e):O(e))instanceof N?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=O(e);var t=this.min,n=this.max,i=e.min,r=e.max,o=r.x>=t.x&&i.x<=n.x,a=r.y>=t.y&&i.y<=n.y;return o&&a},overlaps:function(e){e=O(e);var t=this.min,n=this.max,i=e.min,r=e.max,o=r.x>t.x&&i.x<n.x,a=r.y>t.y&&i.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,r=Math.abs(t.y-n.y)*e;return O(j(t.x-i,t.y-r),j(n.x+i,n.y+r))},equals:function(e){return!!e&&(e=O(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},B.prototype={extend:function(e){var t,n,i=this._southWest,r=this._northEast;if(e instanceof R)t=e,n=e;else{if(!(e instanceof B))return e?this.extend(V(e)||z(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return i||r?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new R(t.lat,t.lng),this._northEast=new R(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,r=Math.abs(t.lng-n.lng)*e;return new B(new R(t.lat-i,t.lng-r),new R(n.lat+i,n.lng+r))},getCenter:function(){return new R((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new R(this.getNorth(),this.getWest())},getSouthEast:function(){return new R(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof R||"lat"in e?V(e):z(e);var t,n,i=this._southWest,r=this._northEast;return e instanceof B?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=r.lat&&t.lng>=i.lng&&n.lng<=r.lng},intersects:function(e){e=z(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),o=r.lat>=t.lat&&i.lat<=n.lat,a=r.lng>=t.lng&&i.lng<=n.lng;return o&&a},overlaps:function(e){e=z(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),o=r.lat>t.lat&&i.lat<n.lat,a=r.lng>t.lng&&i.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=z(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},R.prototype={equals:function(e,t){return!!e&&(e=V(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return q.distance(this,V(e))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return z([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new R(this.lat,this.lng,this.alt)}};var U={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new N(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new R(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,r=t.lng-n.lng;if(0===i&&0===r)return e;var o=e.getSouthWest(),a=e.getNorthEast();return new B(new R(o.lat-i,o.lng-r),new R(a.lat-i,a.lng-r))}},q=n({},U,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,r=t.lat*n,o=Math.sin((t.lat-e.lat)*n/2),a=Math.sin((t.lng-e.lng)*n/2),s=o*o+Math.cos(i)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),Z=6378137,H={R:Z,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),r=Math.sin(i*t);return new M(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new R((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=Z*Math.PI;return new N([-e,-e],[e,e])}()};function G(e,t,n,i){if(y(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function W(e,t,n,i){return new G(e,t,n,i)}G.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new M((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Y=n({},q,{code:"EPSG:3857",projection:H,transformation:function(){var e=.5/(Math.PI*H.R);return W(e,.5,-e,.5)}()}),X=n({},Y,{code:"EPSG:900913"});function K(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $(e,t){var n,i,r,o,a,s,l="";for(n=0,r=e.length;n<r;n++){for(i=0,o=(a=e[n]).length;i<o;i++)l+=(i?"L":"M")+(s=a[i]).x+" "+s.y;l+=t?Oe.svg?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,J="ActiveXObject"in window,ee=J&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Ne("webkit"),ie=Ne("android"),re=Ne("android 2")||Ne("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ae=ie&&Ne("Google")&&oe<537&&!("AudioNode"in window),se=!!window.opera,le=!te&&Ne("chrome"),ce=Ne("gecko")&&!ne&&!se&&!J,ue=!le&&Ne("safari"),he=Ne("phantom"),de="OTransition"in Q,pe=0===navigator.platform.indexOf("Win"),fe=J&&"transition"in Q,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,ge="MozPerspective"in Q,ye=!window.L_DISABLE_3D&&(fe||me||ge)&&!de&&!he,ve="undefined"!==typeof orientation||Ne("mobile"),_e=ve&&ne,xe=ve&&me,be=!window.PointerEvent&&window.MSPointerEvent,we=!(!window.PointerEvent&&!be),De="ontouchstart"in window||!!window.TouchEvent,Ee=!window.L_NO_TOUCH&&(De||we),Ce=ve&&se,Ae=ve&&ce,Se=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Te=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Fe=!!document.createElement("canvas").getContext,ke=!(!document.createElementNS||!K("svg").createSVGRect),Pe=!!ke&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Me=!ke&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Ie=0===navigator.platform.indexOf("Mac"),je=0===navigator.platform.indexOf("Linux");function Ne(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Oe={ie:J,ielt9:ee,edge:te,webkit:ne,android:ie,android23:re,androidStock:ae,opera:se,chrome:le,gecko:ce,safari:ue,phantom:he,opera12:de,win:pe,ie3d:fe,webkit3d:me,gecko3d:ge,any3d:ye,mobile:ve,mobileWebkit:_e,mobileWebkit3d:xe,msPointer:be,pointer:we,touch:Ee,touchNative:De,mobileOpera:Ce,mobileGecko:Ae,retina:Se,passiveEvents:Te,canvas:Fe,svg:ke,vml:Me,inlineSvg:Pe,mac:Ie,linux:je},Be=Oe.msPointer?"MSPointerDown":"pointerdown",Le=Oe.msPointer?"MSPointerMove":"pointermove",ze=Oe.msPointer?"MSPointerUp":"pointerup",Re=Oe.msPointer?"MSPointerCancel":"pointercancel",Ve={touchstart:Be,touchmove:Le,touchend:ze,touchcancel:Re},Ue={touchstart:Qe,touchmove:$e,touchend:$e,touchcancel:$e},qe={},Ze=!1;function He(e,t,n){return"touchstart"===t&&Ke(),Ue[t]?(n=Ue[t].bind(this,n),e.addEventListener(Ve[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ge(e,t,n){Ve[t]?e.removeEventListener(Ve[t],n,!1):console.warn("wrong event specified:",t)}function We(e){qe[e.pointerId]=e}function Ye(e){qe[e.pointerId]&&(qe[e.pointerId]=e)}function Xe(e){delete qe[e.pointerId]}function Ke(){Ze||(document.addEventListener(Be,We,!0),document.addEventListener(Le,Ye,!0),document.addEventListener(ze,Xe,!0),document.addEventListener(Re,Xe,!0),Ze=!0)}function $e(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],qe)t.touches.push(qe[n]);t.changedTouches=[t],e(t)}}function Qe(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Wt(t),$e(e,t)}function Je(e){var t,n,i={};for(n in e)t=e[n],i[n]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,i=0;function r(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var r=Xt(e);if(!r.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||r.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var o=Date.now();o-i<=et?2===++n&&t(Je(e)):n=1,i=o}}}else n=e.detail}return e.addEventListener("click",r),{dblclick:t,simDblclick:r}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var it,rt,ot,at,st,lt=Ct(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=Ct(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function ht(e){return"string"===typeof e?document.getElementById(e):e}function dt(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function pt(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function ft(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function yt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function vt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=wt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function _t(e,t){if(void 0!==e.classList)for(var n=d(t),i=0,r=n.length;i<r;i++)e.classList.add(n[i]);else if(!vt(e,t)){var o=wt(e);bt(e,(o?o+" ":"")+t)}}function xt(e,t){void 0!==e.classList?e.classList.remove(t):bt(e,h((" "+wt(e)+" ").replace(" "+t+" "," ")))}function bt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function wt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function Dt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Et(e,t)}function Et(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(r){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function Ct(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function At(e,t,n){var i=t||new M(0,0);e.style[lt]=(Oe.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function St(e,t){e._leaflet_pos=t,Oe.any3d?At(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Tt(e){return e._leaflet_pos||new M(0,0)}if("onselectstart"in document)it=function(){Bt(window,"selectstart",Wt)},rt=function(){zt(window,"selectstart",Wt)};else{var Ft=Ct(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(Ft){var e=document.documentElement.style;ot=e[Ft],e[Ft]="none"}},rt=function(){Ft&&(document.documentElement.style[Ft]=ot,ot=void 0)}}function kt(){Bt(window,"dragstart",Wt)}function Pt(){zt(window,"dragstart",Wt)}function Mt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(It(),at=e,st=e.style.outlineStyle,e.style.outlineStyle="none",Bt(window,"keydown",It))}function It(){at&&(at.style.outlineStyle=st,at=void 0,st=void 0,zt(window,"keydown",It))}function jt(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Nt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Ot={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:ht,getStyle:dt,create:pt,remove:ft,empty:mt,toFront:gt,toBack:yt,hasClass:vt,addClass:_t,removeClass:xt,setClass:bt,getClass:wt,setOpacity:Dt,testProp:Ct,setTransform:At,setPosition:St,getPosition:Tt,get disableTextSelection(){return it},get enableTextSelection(){return rt},disableImageDrag:kt,enableImageDrag:Pt,preventOutline:Mt,restoreOutline:It,getSizedParentNode:jt,getScale:Nt};function Bt(e,t,n,i){if(t&&"object"===typeof t)for(var r in t)Ut(e,r,t[r],n);else for(var o=0,a=(t=d(t)).length;o<a;o++)Ut(e,t[o],n,i);return this}var Lt="_leaflet_events";function zt(e,t,n,i){if(1===arguments.length)Rt(e),delete e[Lt];else if(t&&"object"===typeof t)for(var r in t)qt(e,r,t[r],n);else if(t=d(t),2===arguments.length)Rt(e,function(e){return-1!==v(t,e)});else for(var o=0,a=t.length;o<a;o++)qt(e,t[o],n,i);return this}function Rt(e,t){for(var n in e[Lt]){var i=n.split(/\d/)[0];t&&!t(i)||qt(e,i,null,null,n)}}var Vt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ut(e,t,n,i){var r=t+a(n)+(i?"_"+a(i):"");if(e[Lt]&&e[Lt][r])return this;var o=function(t){return n.call(i||e,t||window.event)},s=o;!Oe.touchNative&&Oe.pointer&&0===t.indexOf("touch")?o=He(e,t,o):Oe.touch&&"dblclick"===t?o=tt(e,o):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Vt[t]||t,o,!!Oe.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,Jt(e,t)&&s(t)},e.addEventListener(Vt[t],o,!1)):e.addEventListener(t,s,!1):e.attachEvent("on"+t,o),e[Lt]=e[Lt]||{},e[Lt][r]=o}function qt(e,t,n,i,r){r=r||t+a(n)+(i?"_"+a(i):"");var o=e[Lt]&&e[Lt][r];if(!o)return this;!Oe.touchNative&&Oe.pointer&&0===t.indexOf("touch")?Ge(e,t,o):Oe.touch&&"dblclick"===t?nt(e,o):"removeEventListener"in e?e.removeEventListener(Vt[t]||t,o,!1):e.detachEvent("on"+t,o),e[Lt][r]=null}function Zt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Ht(e){return Ut(e,"wheel",Zt),this}function Gt(e){return Bt(e,"mousedown touchstart dblclick contextmenu",Zt),e._leaflet_disable_click=!0,this}function Wt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Yt(e){return Wt(e),Zt(e),this}function Xt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Kt(e,t){if(!t)return new M(e.clientX,e.clientY);var n=Nt(t),i=n.boundingClientRect;return new M((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var $t=Oe.linux&&Oe.chrome?window.devicePixelRatio:Oe.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qt(e){return Oe.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/$t:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Jt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var en={__proto__:null,on:Bt,off:zt,stopPropagation:Zt,disableScrollPropagation:Ht,disableClickPropagation:Gt,preventDefault:Wt,stop:Yt,getPropagationPath:Xt,getMousePosition:Kt,getWheelDelta:Qt,isExternalTarget:Jt,addListener:Bt,removeListener:zt},tn=P.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Tt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),St(this._el,n),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=P.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(V(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Oe.any3d&&!Oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Bt(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(V(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),r=this.getSize().divideBy(2),o=(e instanceof M?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(o));return this.setView(a,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():z(e);var n=j(t.paddingTopLeft||t.padding||[0,0]),i=j(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,n.add(i));if((r="number"===typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0)return{center:e.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),r),s=this.project(e.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(e,t){if(!(e=z(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=j(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){_t(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Oe.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),r=this.project(e),o=this.getSize(),a=this._zoom;e=V(e),t=void 0===t?a:t;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,t),c=r.distanceTo(i)||1,u=1.42,h=u*u;function d(e){var t=(l*l-s*s+(e?-1:1)*h*h*c*c)/(2*(e?l:s)*h*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function f(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return p(e)/f(e)}var g=d(0);function y(e){return s*(f(g)/f(g+u*e))}function v(e){return s*(f(g)*m(g+u*e)-p(g))/h}function _(e){return 1-Math.pow(1-e,1.5)}var x=Date.now(),b=(d(1)-g)/u,w=n.duration?1e3*n.duration:1e3*b*.8;function D(){var n=(Date.now()-x)/w,o=_(n)*b;n<=1?(this._flyToFrame=C(D,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(v(o)/c)),a),this.getScaleZoom(s/y(o),a),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),D.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=z(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,z(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=j((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=j(t.paddingBottomRight||t.padding||[0,0]),r=this.project(this.getCenter()),o=this.project(e),a=this.getPixelBounds(),s=O([a.min.add(n),a.max.subtract(i)]),l=s.getSize();if(!s.contains(o)){this._enforcingBounds=!0;var c=o.subtract(s.getCenter()),u=s.extend(o).getSize().subtract(l);r.x+=c.x<0?-u.x:u.x,r.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(r),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=t.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new R(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:t,bounds:n,timestamp:e.timestamp};for(var a in e.coords)"number"===typeof e.coords[a]&&(o[a]=e.coords[a]);this.fire("locationfound",o)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)ft(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new B(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=z(e),n=j(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(n),c=O(this.project(s,i),this.project(a,i)).getSize(),u=Oe.any3d?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,p=t?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),u&&(i=Math.round(i/(u/100))*(u/100),i=t?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(V(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(j(e),t)},layerPointToLatLng:function(e){var t=j(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(V(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(V(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(z(e))},distance:function(e,t){return this.options.crs.distance(V(e),V(t))},containerPointToLayerPoint:function(e){return j(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return j(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(j(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(e)))},mouseEventToContainerPoint:function(e){return Kt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ht(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Bt(t,"scroll",this._onScroll,this),this._containerId=a(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Oe.any3d,_t(e,"leaflet-container"+(Oe.touch?" leaflet-touch":"")+(Oe.retina?" leaflet-retina":"")+(Oe.ielt9?" leaflet-oldie":"")+(Oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=dt(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),St(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(e.markerPane,"leaflet-zoom-hide"),_t(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){St(this._mapPane,new M(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,n)._move(e,t)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){St(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[a(this._container)]=this;var t=e?zt:Bt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Oe.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],r="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(t,!0)){if(r&&!Jt(o,e))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||s||r||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Mt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var r=n({},e);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var o=this._findEventTargets(e,t);if(i){for(var a=[],s=0;s<i.length;s++)i[s].listens(t,!0)&&a.push(i[s]);o=a.concat(o)}if(o.length){"contextmenu"===t&&Wt(e);var l=o[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(s=0;s<o.length;s++)if(o[s].fire(t,c,!0),c.originalEvent._stopped||!1===o[s].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Tt(this._mapPane)||new M(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return O([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),r=this.getSize().divideBy(2),o=new N(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,t);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?e:this.unproject(i.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new N(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=O(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),r=i.min.subtract(e.min),o=i.max.subtract(e.max);return new M(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=Oe.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];At(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();At(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(C(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var on=T.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return _t(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),an=function(e){return new on(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function i(i,r){var o=t+i+" "+t+r;e[i+r]=pt("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ft(this._controlCorners[e]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sn=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return on.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(a(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Gt(t),Ht(t);var i=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Bt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=pt("a",e+"-toggle",t);r.href="#",r.title="Layers",r.setAttribute("role","button"),Bt(r,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Wt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",i),this._separator=pt("div",e+"-separator",i),this._overlaysList=pt("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&a(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(a(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(t),t.layerId=a(e.layer),Bt(t,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(t),o.appendChild(r),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||r.push(t);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=n[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Bt(e,"click",Wt),this.expand();var t=this;setTimeout(function(){zt(e,"click",Wt),t._preventClick=!1})}}),ln=function(e,t,n){return new sn(e,t,n)},cn=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,r){var o=pt("a",n,i);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Gt(o),Bt(o,"click",Yt),Bt(o,"click",r,this),Bt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";xt(this._zoomInButton,t),xt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(_t(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(_t(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},hn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,i,r=3.2808399*e;r>5280?(t=r/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),dn=function(e){return new hn(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Oe.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Gt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new fn).addTo(this)});var mn=function(e){return new fn(e)};on.Layers=sn,on.Zoom=cn,on.Scale=hn,on.Attribution=fn,an.layers=ln,an.zoom=un,an.scale=dn,an.attribution=mn;var gn=T.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var yn={Events:k},vn=Oe.touch?"touchstart mousedown":"mousedown",_n=P.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){p(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Bt(this._dragStartTarget,vn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,vn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!vt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(_n._dragging=this,this._preventOutline&&Mt(this._element),kt(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=jt(this._element);this._startPoint=new M(t.clientX,t.clientY),this._startPos=Tt(this._element),this._parentScale=Nt(n);var i="mousedown"===e.type;Bt(document,i?"mousemove":"touchmove",this._onMove,this),Bt(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new M(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Wt(e),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),St(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){xt(document.body,"leaflet-dragging"),this._lastTarget&&(xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),Pt(),rt();var t=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function xn(e,t,n){var i,r,o,a,s,l,c,u,h,d=[1,4,2,8];for(r=0,c=e.length;r<c;r++)e[r]._code=In(e[r],t);for(a=0;a<4;a++){for(u=d[a],i=[],r=0,o=(c=e.length)-1;r<c;o=r++)s=e[r],l=e[o],s._code&u?l._code&u||((h=Mn(l,s,u,t,n))._code=In(h,t),i.push(h)):(l._code&u&&((h=Mn(l,s,u,t,n))._code=In(h,t),i.push(h)),i.push(s));e=i}return e}function bn(e,t){var n,i,r,o,a,s,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");On(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=V([0,0]),d=z(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(h=wn(e));var p=e.length,f=[];for(n=0;n<p;n++){var m=V(e[n]);f.push(t.project(V([m.lat-h.lat,m.lng-h.lng])))}for(s=l=c=0,n=0,i=p-1;n<p;i=n++)r=f[n],o=f[i],a=r.y*o.x-o.y*r.x,l+=(r.x+o.x)*a,c+=(r.y+o.y)*a,s+=3*a;u=0===s?f[0]:[l/s,c/s];var g=t.unproject(j(u));return V([g.lat+h.lat,g.lng+h.lng])}function wn(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var o=V(e[r]);t+=o.lat,n+=o.lng,i++}return V([t/i,n/i])}var Dn,En={__proto__:null,clipPolygon:xn,polygonCenter:bn,centroid:wn};function Cn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Tn(e=kn(e,n),n)}function An(e,t,n){return Math.sqrt(Nn(e,t,n,!0))}function Sn(e,t,n){return Nn(e,t,n)}function Tn(e,t){var n=e.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Fn(e,i,t,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(e[r]);return o}function Fn(e,t,n,i,r){var o,a,s,l=0;for(a=i+1;a<=r-1;a++)(s=Nn(e[a],e[i],e[r],!0))>l&&(o=a,l=s);l>n&&(t[o]=1,Fn(e,t,n,i,o),Fn(e,t,n,o,r))}function kn(e,t){for(var n=[e[0]],i=1,r=0,o=e.length;i<o;i++)jn(e[i],e[r])>t&&(n.push(e[i]),r=i);return r<o-1&&n.push(e[o-1]),n}function Pn(e,t,n,i,r){var o,a,s,l=i?Dn:In(e,n),c=In(t,n);for(Dn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;s=In(a=Mn(e,t,o=l||c,n,r),n),o===l?(e=a,l=s):(t=a,c=s)}}function Mn(e,t,n,i,r){var o,a,s=t.x-e.x,l=t.y-e.y,c=i.min,u=i.max;return 8&n?(o=e.x+s*(u.y-e.y)/l,a=u.y):4&n?(o=e.x+s*(c.y-e.y)/l,a=c.y):2&n?(o=u.x,a=e.y+l*(u.x-e.x)/s):1&n&&(o=c.x,a=e.y+l*(c.x-e.x)/s),new M(o,a,r)}function In(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function jn(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function Nn(e,t,n,i){var r,o=t.x,a=t.y,s=n.x-o,l=n.y-a,c=s*s+l*l;return c>0&&((r=((e.x-o)*s+(e.y-a)*l)/c)>1?(o=n.x,a=n.y):r>0&&(o+=s*r,a+=l*r)),s=e.x-o,l=e.y-a,i?s*s+l*l:new M(o,a)}function On(e){return!y(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Bn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),On(e)}function Ln(e,t){var n,i,r,o,a,s,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");On(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=V([0,0]),h=z(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=wn(e));var d=e.length,p=[];for(n=0;n<d;n++){var f=V(e[n]);p.push(t.project(V([f.lat-u.lat,f.lng-u.lng])))}for(n=0,i=0;n<d-1;n++)i+=p[n].distanceTo(p[n+1])/2;if(0===i)c=p[0];else for(n=0,o=0;n<d-1;n++)if(a=p[n],s=p[n+1],(o+=r=a.distanceTo(s))>i){l=(o-i)/r,c=[s.x-l*(s.x-a.x),s.y-l*(s.y-a.y)];break}var m=t.unproject(j(c));return V([m.lat+u.lat,m.lng+u.lng])}var zn={__proto__:null,simplify:Cn,pointToSegmentDistance:An,closestPointOnSegment:Sn,clipSegment:Pn,_getEdgeIntersection:Mn,_getBitCode:In,_sqClosestPointOnSegment:Nn,isFlat:On,_flat:Bn,polylineCenter:Ln},Rn={project:function(e){return new M(e.lng,e.lat)},unproject:function(e){return new R(e.y,e.x)},bounds:new N([-180,-90],[180,90])},Vn={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=o*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),o/2);return i=-n*Math.log(Math.max(s,1e-10)),new M(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-e.y/i),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=o*Math.sin(s),t=Math.pow((1-t)/(1+t),o/2),s+=c=Math.PI/2-2*Math.atan(a*t)-s;return new R(s*n,e.x*n/i)}},Un={__proto__:null,LonLat:Rn,Mercator:Vn,SphericalMercator:H},qn=n({},q,{code:"EPSG:3395",projection:Vn,transformation:function(){var e=.5/(Math.PI*Vn.R);return W(e,.5,-e,.5)}()}),Zn=n({},q,{code:"EPSG:4326",projection:Rn,transformation:W(1/180,1,-1/180,.5)}),Hn=n({},U,{projection:Rn,transformation:W(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});U.Earth=q,U.EPSG3395=qn,U.EPSG3857=Y,U.EPSG900913=X,U.EPSG4326=Zn,U.Simple=Hn;var Gn=P.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[a(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[a(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=a(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=a(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return a(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?y(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[a(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=a(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wn=Gn.extend({initialize:function(e,t){var n,i;if(p(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return a(e)}}),Yn=function(e,t){return new Wn(e,t)},Xn=Wn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Wn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Wn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new B;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Kn=function(e,t){return new Xn(e,t)},$n=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"===typeof i&&(i=[i,i]);var r=j(i),o=j("shadow"===t&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Oe.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Qn(e){return new $n(e)}var Jn=$n.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Jn.imagePath&&(Jn.imagePath=this._detectIconPath()),(this.options.imagePath||Jn.imagePath)+$n.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var i=t.exec(e);return i&&i[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=dt(e,"background-image")||dt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ei=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=Tt(t._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=O(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!l.contains(o)){var c=j((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),St(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=C(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=Tt(t._icon),r=t._map.layerPointToLatLng(i);n&&St(n,i),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ti=Gn.extend({options:{icon:new Jn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=V(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=V(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),_t(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(n,"focus",this._panOnFocus,this);var r=e.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(_t(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&St(this._icon,e),this._shadow&&St(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Dt(this._icon,e),this._shadow&&Dt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?j(t.iconSize):j(0,0),i=t.iconAnchor?j(t.iconAnchor):j(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(e,t){return new ti(e,t)}var ii=Gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ri=ii.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=V(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=V(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ii.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new N(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function oi(e,t){return new ri(e,t)}var ai=ri.extend({initialize:function(e,t,i){if("number"===typeof t&&(t=n({},i,{radius:t})),p(this,t),this._latlng=V(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===q.distance){var r=Math.PI/180,o=this._mRadius/q.R/r,a=n.project([t+o,e]),s=n.project([t-o,e]),l=a.add(s).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(o*r)-Math.sin(t*r)*Math.sin(c*r))/(Math.cos(t*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function si(e,t,n){return new ai(e,t,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,r=null,o=Nn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var h=o(e,t=l[c-1],n=l[c],!0);h<i&&(i=h,r=o(e,t,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ln(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=V(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new B,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return On(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=On(e),i=0,r=e.length;i<r;i++)n?(t[i]=V(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new M(e,e);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i,r,o=e[0]instanceof R,a=e.length;if(o){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(e[i]),n.extend(r[i]);t.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,r,o,a,s,l=this._parts;for(t=0,i=0,r=this._rings.length;t<r;t++)for(n=0,o=(s=this._rings[t]).length;n<o-1;n++)(a=Pn(s[n],s[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===s[n+1]&&n!==o-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=Cn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(s=this._parts[n]).length)-1;i<a;r=i++)if((t||0!==i)&&An(e,s[r],s[i])<=l)return!0;return!1}});function ci(e,t){return new li(e,t)}li._flat=Bn;var ui=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=li.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof R&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){li.prototype._setLatLngs.call(this,e),On(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return On(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new M(t,t);if(e=new N(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=xn(this._rings[r],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,r,o,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(t=this._parts[r]).length)-1;o<l;a=o++)n=t[o],i=t[a],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||li.prototype._containsPoint.call(this,e,!0)}});function hi(e,t){return new ui(e,t)}var di=Xn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,r=y(e)?e:e.features;if(r){for(t=0,n=r.length;t<n;t++)((i=r[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var a=pi(e,o);return a?(a.feature=xi(e),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(e,a),this.addLayer(a)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function pi(e,t){var n,i,r,o,a="Feature"===e.type?e.geometry:e,s=a?a.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||mi;if(!s&&!a)return null;switch(a.type){case"Point":return fi(c,e,n=u(s),t);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=u(s[r]),l.push(fi(c,e,n,t));return new Xn(l);case"LineString":case"MultiLineString":return i=gi(s,"LineString"===a.type?0:1,u),new li(i,t);case"Polygon":case"MultiPolygon":return i=gi(s,"Polygon"===a.type?1:2,u),new ui(i,t);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=pi({geometry:a.geometries[r],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Xn(l);case"FeatureCollection":for(r=0,o=a.features.length;r<o;r++){var d=pi(a.features[r],t);d&&l.push(d)}return new Xn(l);default:throw new Error("Invalid GeoJSON object.")}}function fi(e,t,n,i){return e?e(t,n):new ti(n,i&&i.markersInheritOptions&&i)}function mi(e){return new R(e[1],e[0],e[2])}function gi(e,t,n){for(var i,r=[],o=0,a=e.length;o<a;o++)i=t?gi(e[o],t-1,n):(n||mi)(e[o]),r.push(i);return r}function yi(e,t){return void 0!==(e=V(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function vi(e,t,n,i){for(var r=[],o=0,a=e.length;o<a;o++)r.push(t?vi(e[o],On(e[o])?0:t-1,n,i):yi(e[o],i));return!t&&n&&r.length>0&&r.push(r[0].slice()),r}function _i(e,t){return e.feature?n({},e.feature,{geometry:t}):xi(t)}function xi(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var bi={toGeoJSON:function(e){return _i(this,{type:"Point",coordinates:yi(this.getLatLng(),e)})}};function wi(e,t){return new di(e,t)}ti.include(bi),ai.include(bi),ri.include(bi),li.include({toGeoJSON:function(e){var t=!On(this._latlngs);return _i(this,{type:(t?"Multi":"")+"LineString",coordinates:vi(this._latlngs,t?1:0,!1,e)})}}),ui.include({toGeoJSON:function(e){var t=!On(this._latlngs),n=t&&!On(this._latlngs[0]),i=vi(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),_i(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Wn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),_i(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(n)i.push(r.geometry);else{var o=xi(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?_i(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Di=wi,Ei=Gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=z(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&yt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=z(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=r(this.fire,this,"load"),t.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;At(this._image,n,t)},_reset:function(){var e=this._image,t=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();St(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){Dt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Ci=function(e,t,n){return new Ei(e,t,n)},Ai=Ei.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=r(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[t.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var s=pt("source");s.src=this._url[a],t.appendChild(s)}}}});function Si(e,t,n){return new Ai(e,t,n)}var Ti=Ei.extend({_initImage:function(){var e=this._image=this._url;_t(e,"leaflet-image-layer"),this._zoomAnimated&&_t(e,"leaflet-zoom-animated"),this.options.className&&_t(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Fi(e,t,n){return new Ti(e,t,n)}var ki=Gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof R||y(e))?(this._latlng=V(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Dt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Dt(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Dt(this._container,0),this._removeTimeout=setTimeout(r(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=V(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&yt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Xn){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=j(this.options.offset),n=this._getAnchor();this._zoomAnimated?St(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,i){var r=t;return r instanceof e||(r=new e(i).setContent(t)),n&&r.setLatLng(n),r}}),Gn.include({_initOverlay:function(e,t,n,i){var r=n;return r instanceof e?(p(r,i),r._source=this):(r=t&&!i?t:new e(i,this)).setContent(n),r}});var Pi=ki.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,ki.prototype.openOn.call(this,e)},onAdd:function(e){ki.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",Zt))},onRemove:function(e){ki.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",Zt))},getEvents:function(){var e=ki.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Gt(t),Ht(this._contentNode),Bt(t,"contextmenu",Zt),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=pt("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Bt(i,"click",function(e){Wt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(t.height=r+"px",_t(e,o)):xt(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();St(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(dt(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,r=new M(this._containerLeft,-n-this._containerBottom);r._add(Tt(this._container));var o=e.layerPointToContainerPoint(r),a=j(this.options.autoPanPadding),s=j(this.options.autoPanPaddingTopLeft||a),l=j(this.options.autoPanPaddingBottomRight||a),c=e.getSize(),u=0,h=0;o.x+i+l.x>c.x&&(u=o.x+i-c.x+l.x),o.x-u-s.x<0&&(u=o.x-s.x),o.y+n+l.y>c.y&&(h=o.y+n-c.y+l.y),o.y-h-s.y<0&&(h=o.y-s.y),(u||h)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,h]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Mi=function(e,t){return new Pi(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Pi,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Gn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Pi,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Xn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Yt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ii?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Ii=ki.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){ki.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){ki.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=ki.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(e),s=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=j(this.options.offset),h=this._getAnchor();"top"===s?(t=l/2,n=c):"bottom"===s?(t=l/2,n=0):"center"===s?(t=l/2,n=c/2):"right"===s?(t=0,n=c/2):"left"===s?(t=l,n=c/2):a.x<o.x?(s="right",t=0,n=c/2):(s="left",t=l+2*(u.x+h.x),n=c/2),e=e.subtract(j(t,n,!0)).add(u).add(h),xt(r,"leaflet-tooltip-right"),xt(r,"leaflet-tooltip-left"),xt(r,"leaflet-tooltip-top"),xt(r,"leaflet-tooltip-bottom"),_t(r,"leaflet-tooltip-"+s),St(r,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Dt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ji=function(e,t){return new Ii(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Ii,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Gn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ii,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Xn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Bt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Bt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Ni=$n.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=j(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Oi(e){return new Ni(e)}$n.Default=Jn;var Bi=Gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ft(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof M?e:new M(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),r=0,o=n.length;r<o;r++)t=n[r].style.zIndex,n[r]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Oe.ielt9){Dt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(e-r.loaded)/200);Dt(r.el,o),o<1?t=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(A(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(ft(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],r=this._map;return i||((i=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,r.getCenter(),r.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ft(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),o=Math.floor(t/2),a=n-1,s=new M(+r,+o);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>i&&this._retainParent(r,o,a,i))},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var o=2*t;o<2*t+2;o++){var a=new M(r,o);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var r=Math.round(t);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),r=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();Oe.any3d?At(e.el,r,i):St(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),r=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*i);return new N(r.subtract(o),r.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new N(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new M(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new M(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:a.push(p)}}if(a.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return z(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),r=i.add(n);return[t.unproject(i,e.z),t.unproject(r,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new B(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new M(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(ft(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){_t(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Oe.ielt9&&this.options.opacity<1&&Dt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),r(this._tileReady,this,e));this._initTile(o),this.createTile.length<2&&C(r(this._tileReady,this,e,null,o)),St(o,n),this._tiles[i]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(Dt(n.el,0),A(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(_t(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Oe.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new M(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new N(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Li(e){return new Bi(e)}var zi=Bi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Oe.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Bt(n,"load",r(this._tileOnLoad,this,t,n)),Bt(n,"error",r(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Oe.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Oe.ielt9?setTimeout(r(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=_;var n=this._tiles[e].coords;ft(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",_),Bi.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==_))return Bi.prototype._tileReady.call(this,e,t,n)}});function Ri(e,t){return new zi(e,t)}var Vi=zi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var r in t)r in this.options||(i[r]=t[r]);var o=(t=p(this,t)).detectRetina&&Oe.retina?2:1,a=this.getTileSize();i.width=a.x*o,i.height=a.y*o,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,zi.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=O(n.project(t[0]),n.project(t[1])),r=i.min,o=i.max,a=(this._wmsVersion>=1.3&&this._crs===Zn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=zi.prototype.getTileUrl.call(this,e);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Ui(e,t){return new Vi(e,t)}zi.WMS=Vi,Ri.wms=Ui;var qi=Gn.extend({options:{padding:.1},initialize:function(e){p(this,e),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,t),o=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(e,t));Oe.any3d?At(this._container,o,n):St(this._container,o)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new N(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zi=qi.extend({options:{tolerance:0},getEvents:function(){var e=qi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Bt(e,"mousemove",this._onMouseMove,this),Bt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Bt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,ft(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){qi.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=Oe.retina?2:1;St(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[a(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[a(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;r.push(t)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,r,o,a=e._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],l[i?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(t.x,t.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(xt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(_t(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Hi(e){return Oe.canvas?new Zi(e):null}var Gi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Wi={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qi.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Gi("shape");_t(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Gi("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;ft(t),e.removeInteractiveTarget(t),delete this._layers[a(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,r=e._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(t||(t=e._stroke=Gi("stroke")),r.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=y(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(r.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=Gi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){yt(e._container)}},Yi=Oe.vml?Gi:K,Xi=qi.extend({_initContainer:function(){this._container=Yi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){qi.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),St(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Yi("path");e.options.className&&_t(t,e.options.className),e.options.interactive&&_t(t,"leaflet-interactive"),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ft(e._path),e.removeInteractiveTarget(e._path),delete this._layers[a(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,$(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){yt(e._path)}});function Ki(e){return Oe.svg||Oe.vml?new Xi(e):null}Oe.vml&&Xi.include(Wi),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Hi(e)||Ki(e)}});var $i=ui.extend({initialize:function(e,t){ui.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=z(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Qi(e,t){return new $i(e,t)}Xi.create=Yi,Xi.pointsToPath=$,di.geometryToLayer=pi,di.coordsToLatLng=mi,di.coordsToLatLngs=gi,di.latLngToCoords=yi,di.latLngsToCoords=vi,di.getFeature=_i,di.asFeature=xi,nn.mergeOptions({boxZoom:!0});var Ji=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),it(),kt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Bt(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new N(this._point,this._startPoint),n=t.getSize();St(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ft(this._box),xt(this._container,"leaflet-crosshair")),rt(),Pt(),zt(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var t=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Ji),nn.mergeOptions({doubleClickZoom:!0});var er=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,r=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});nn.addInitHook("addHandler","doubleClickZoom",er),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tr=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){xt(this._map._container,"leaflet-grab"),xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=z(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-t+n)%e+t-n,o=(i+t+n)%e-t-n,a=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=r.multiplyBy(a/o),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),h=c/(n.inertiaDeceleration*a),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=t._limitOffset(d,t.options.maxBounds),C(function(){t.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",tr),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nr=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Bt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},r=this.keyCodes;for(t=0,n=r.left.length;t<n;t++)i[r.left[t]]=[-1*e,0];for(t=0,n=r.right.length;t<n;t++)i[r.right[t]]=[e,0];for(t=0,n=r.down.length;t<n;t++)i[r.down[t]]=[0,e];for(t=0,n=r.up.length;t<n;t++)i[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},r=this.keyCodes;for(t=0,n=r.zoomIn.length;t<n;t++)i[r.zoomIn[t]]=e;for(t=0,n=r.zoomOut.length;t<n;t++)i[r.zoomOut[t]]=-e},_addHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=j(t).multiplyBy(3)),i.options.maxBounds&&(t=i._limitOffset(j(t),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(t)));i.panTo(r)}else i.panBy(t)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Yt(e)}}});nn.addInitHook("addHandler","keyboard",nr),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ir=gn.extend({addHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Qt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Yt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,a=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,a&&("center"===e.options.scrollWheelZoom?e.setZoom(t+a):e.setZoomAround(this._lastMousePos,t+a))}});nn.addInitHook("addHandler","scrollWheelZoom",ir);var rr=600;nn.mergeOptions({tapHold:Oe.touchNative&&Oe.safari&&Oe.mobile,tapTolerance:15});var or=gn.extend({addHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new M(t.clientX,t.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Bt(document,"touchend",Wt),Bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),rr),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){zt(document,"touchend",Wt),zt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new M(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",or),nn.mergeOptions({touchZoom:Oe.touch,bounceAtZoomLimits:!0});var ar=gn.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),Wt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&o<1||this._zoom>t.getMaxZoom()&&o>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var s=r(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(s,this,!0),Wt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,A(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",ar),nn.BoxZoom=Ji,nn.DoubleClickZoom=er,nn.Drag=tr,nn.Keyboard=nr,nn.ScrollWheelZoom=ir,nn.TapHold=or,nn.TouchZoom=ar,e.Bounds=N,e.Browser=Oe,e.CRS=U,e.Canvas=Zi,e.Circle=ai,e.CircleMarker=ri,e.Class=T,e.Control=on,e.DivIcon=Ni,e.DivOverlay=ki,e.DomEvent=en,e.DomUtil=Ot,e.Draggable=_n,e.Evented=P,e.FeatureGroup=Xn,e.GeoJSON=di,e.GridLayer=Bi,e.Handler=gn,e.Icon=$n,e.ImageOverlay=Ei,e.LatLng=R,e.LatLngBounds=B,e.Layer=Gn,e.LayerGroup=Wn,e.LineUtil=zn,e.Map=nn,e.Marker=ti,e.Mixin=yn,e.Path=ii,e.Point=M,e.PolyUtil=En,e.Polygon=ui,e.Polyline=li,e.Popup=Pi,e.PosAnimation=tn,e.Projection=Un,e.Rectangle=$i,e.Renderer=qi,e.SVG=Xi,e.SVGOverlay=Ti,e.TileLayer=zi,e.Tooltip=Ii,e.Transformation=G,e.Util=S,e.VideoOverlay=Ai,e.bind=r,e.bounds=O,e.canvas=Hi,e.circle=si,e.circleMarker=oi,e.control=an,e.divIcon=Oi,e.extend=n,e.featureGroup=Kn,e.geoJSON=wi,e.geoJson=Di,e.gridLayer=Li,e.icon=Qn,e.imageOverlay=Ci,e.latLng=V,e.latLngBounds=z,e.layerGroup=Yn,e.map=rn,e.marker=ni,e.point=j,e.polygon=hi,e.polyline=ci,e.popup=Mi,e.rectangle=Qi,e.setOptions=p,e.stamp=a,e.svg=Ki,e.svgOverlay=Fi,e.tileLayer=Ri,e.tooltip=ji,e.transformation=W,e.version=t,e.videoOverlay=Si;var sr=window.L;e.noConflict=function(){return window.L=sr,this},window.L=e}(t)},356:(e,t,n)=>{e.exports=n(9645).last},392:(e,t,n)=>{var i=n(4460);function r(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}r.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=i.gexp(i.glog(this.get(n))+i.glog(e.get(o)));return new r(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=i.glog(this.get(0))-i.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(o=0;o<e.getLength();o++)n[o]^=i.gexp(i.glog(e.get(o))+t);return new r(n,0).mod(e)}},e.exports=r},418:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return"0"===n&&Object.is(Number(t),-0)?"-0":n}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},870:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1153:(e,t,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},1203:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&i.isLength(e.length)}},1293:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:r=!1,trailing:o=!0,maxWait:a}=n,s=Array(2);let l;r&&(s[0]="leading"),o&&(s[1]="trailing");let c=null;const u=i.debounce(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];l=e.apply(this,n),c=null},t,{edges:s}),h=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return null!=a&&(null===c&&(c=Date.now()),Date.now()-c>=a)?(l=e.apply(this,n),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,n),l)};return h.cancel=u.cancel,h.flush=()=>(u.flush(),l),h}},1444:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(418),r=n(3272);t.toPath=function(e){if(Array.isArray(e))return e.map(r.toKey);if("symbol"===typeof e)return[e];const t=[],n=(e=i.toString(e)).length;if(0===n)return t;let o=0,a="",s="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),o++);o<n;){const i=e[o];s?"\\"===i&&o+1<n?(o++,a+=e[o]):i===s?s="":a+=i:l?'"'===i||"'"===i?s=i:"]"===i?(l=!1,t.push(a),a=""):a+=i:"["===i?(l=!0,a&&(t.push(a),a="")):"."===i?a&&(t.push(a),a=""):a+=i,o++}return a&&t.push(a),t}},1497:(e,t,n)=>{"use strict";var i=n(3218);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},1612:(e,t,n)=>{var i=n(3343),r=n(5436),o=n(8813),a=n(9898),s=n(392);function l(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=l.prototype;c.addData=function(e){var t=new i(e);this.dataList.push(t),this.dataCache=null},c.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=r.getRSBlocks(e,this.errorCorrectLevel),n=new o,i=0,s=0;s<t.length;s++)i+=t[s].dataCount;for(s=0;s<this.dataList.length;s++){var l=this.dataList[s];n.put(l.mode,4),n.put(l.getLength(),a.getLengthInBits(l.mode,e)),l.write(n)}if(n.getLengthInBits()<=8*i)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},c.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(this.modules[e+n][t+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},c.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=a.getLostPoint(this);(0==n||e>i)&&(e=i,t=n)}return t},c.createMovieClip=function(e,t,n){var i=e.createEmptyMovieClip(t,n);this.make();for(var r=0;r<this.modules.length;r++)for(var o=1*r,a=0;a<this.modules[r].length;a++){var s=1*a;this.modules[r][a]&&(i.beginFill(0,100),i.moveTo(s,o),i.lineTo(s+1,o),i.lineTo(s+1,o+1),i.lineTo(s,o+1),i.endFill())}return i},c.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},c.setupPositionAdjustPattern=function(){for(var e=a.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var i=e[t],r=e[n];if(null==this.modules[i][r])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)this.modules[i+o][r+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},c.setupTypeNumber=function(e){for(var t=a.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++){i=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},c.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,i=a.getBCHTypeInfo(n),r=0;r<15;r++){var o=!e&&1==(i>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(r=0;r<15;r++){o=!e&&1==(i>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!e},c.mapData=function(e,t){for(var n=-1,i=this.moduleCount-1,r=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var l=0;l<2;l++)if(null==this.modules[i][s-l]){var c=!1;o<e.length&&(c=1==(e[o]>>>r&1)),a.getMask(t,i,s-l)&&(c=!c),this.modules[i][s-l]=c,-1==--r&&(o++,r=7)}if((i+=n)<0||this.moduleCount<=i){i-=n,n=-n;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(e,t,n){for(var i=r.getRSBlocks(e,t),s=new o,c=0;c<n.length;c++){var u=n[c];s.put(u.mode,4),s.put(u.getLength(),a.getLengthInBits(u.mode,e)),u.write(s)}var h=0;for(c=0;c<i.length;c++)h+=i[c].dataCount;if(s.getLengthInBits()>8*h)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*h+")");for(s.getLengthInBits()+4<=8*h&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*h)&&(s.put(l.PAD0,8),!(s.getLengthInBits()>=8*h));)s.put(l.PAD1,8);return l.createBytes(s,i)},l.createBytes=function(e,t){for(var n=0,i=0,r=0,o=new Array(t.length),l=new Array(t.length),c=0;c<t.length;c++){var u=t[c].dataCount,h=t[c].totalCount-u;i=Math.max(i,u),r=Math.max(r,h),o[c]=new Array(u);for(var d=0;d<o[c].length;d++)o[c][d]=255&e.buffer[d+n];n+=u;var p=a.getErrorCorrectPolynomial(h),f=new s(o[c],p.getLength()-1).mod(p);l[c]=new Array(p.getLength()-1);for(d=0;d<l[c].length;d++){var m=d+f.getLength()-l[c].length;l[c][d]=m>=0?f.get(m):0}}var g=0;for(d=0;d<t.length;d++)g+=t[d].totalCount;var y=new Array(g),v=0;for(d=0;d<i;d++)for(c=0;c<t.length;c++)d<o[c].length&&(y[v++]=o[c][d]);for(d=0;d<r;d++)for(c=0;c<t.length;c++)d<l[c].length&&(y[v++]=l[c][d]);return y},e.exports=l},2086:(e,t,n)=>{"use strict";n(5082)},2104:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(1203),r=n(9921);t.isArrayLikeObject=function(e){return r.isObjectLike(e)&&i.isArrayLike(e)}},2132:(e,t,n)=>{"use strict";var i=n(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(870),o=n(4803),a=n(5093);function s(e,t,n,u){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,i){if(null==t)return!0;if(Array.isArray(t))return l(e,t,n,i);if(t instanceof Map)return function(e,t,n,i){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[r,o]of t.entries()){if(!1===n(e.get(r),o,r,e,t,i))return!1}return!0}(e,t,n,i);if(t instanceof Set)return c(e,t,n,i);const r=Object.keys(t);if(null==e||o.isPrimitive(e))return 0===r.length;if(0===r.length)return!0;if(null!==i&&void 0!==i&&i.has(t))return i.get(t)===e;null===i||void 0===i||i.set(t,e);try{for(let a=0;a<r.length;a++){const s=r[a];if(!o.isPrimitive(e)&&!(s in e))return!1;if(void 0===t[s]&&void 0!==e[s])return!1;if(null===t[s]&&null!==e[s])return!1;if(!n(e[s],t[s],s,e,t,i))return!1}return!0}finally{null===i||void 0===i||i.delete(t)}}(e,t,n,u);case"function":return Object.keys(t).length>0?s(e,i({},t),n,u):a.isEqualsSameValueZero(e,t);default:return r.isObject(e)?"string"!==typeof t||""===t:a.isEqualsSameValueZero(e,t)}}function l(e,t,n,i){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const r=new Set;for(let o=0;o<t.length;o++){const a=t[o];let s=!1;for(let l=0;l<e.length;l++){if(r.has(l))continue;let c=!1;if(n(e[l],a,o,e,t,i)&&(c=!0),c){r.add(l),s=!0;break}}if(!s)return!1}return!0}function c(e,t,n,i){return 0===t.size||e instanceof Set&&l([...e],[...t],n,i)}t.isMatchWith=function e(t,n,i){return"function"!==typeof i?e(t,n,()=>{}):s(t,n,function e(t,n,r,o,a,l){const c=i(t,n,r,o,a,l);return void 0!==c?Boolean(c):s(t,n,e,l)},new Map)},t.isSetMatch=c},2204:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(5316),r=n(7312),o=n(3799);t.sortBy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const s=n.length;return s>1&&o.isIterateeCall(e,n[0],n[1])?n=[]:s>2&&o.isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),i.orderBy(e,r.flatten(n),["asc"])}},2330:(e,t,n)=>{"use strict";var i=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useState,a=i.useEffect,s=i.useLayoutEffect,l=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(i){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=o({inst:{value:n,getSnapshot:t}}),r=i[0].inst,u=i[1];return s(function(){r.value=n,r.getSnapshot=t,c(r)&&u({inst:r})},[e,n,t]),a(function(){return c(r)&&u({inst:r}),e(function(){c(r)&&u({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},2489:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2715:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(9599),r=n(7330),o=n(3808),a=n(8845);t.iteratee=function(e){if(null==e)return i.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?a.matchesProperty(e[0],e[1]):o.matches(e);case"string":case"symbol":case"number":return r.property(e)}}},2730:(e,t,n)=>{"use strict";var i=n(5043),r=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var O,B=Object.assign;function L(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function R(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function V(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case D:return"Fragment";case w:return"Portal";case C:return"Profiler";case E:return"StrictMode";case F:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=Z(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function oe(e,t){var n=Z(t.value),i=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,De=null,Ee=null;function Ce(e){if(e=_r(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=br(t),we(e.stateNode,e.type,t))}}function Ae(e){De?Ee?Ee.push(e):Ee=[e]:De=e}function Se(){if(De){var e=De,t=Ee;if(Ee=De=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Fe(){}var ke=!1;function Pe(e,t,n){if(ke)return e(t,n);ke=!0;try{return Te(e,t,n)}finally{ke=!1,(null!==De||null!==Ee)&&(Fe(),Se())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Ie=!1}function Ne(e,t,n,i,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Be=null,Le=!1,ze=null,Re={onError:function(e){Oe=!0,Be=e}};function Ve(e,t,n,i,r,o,a,s,l){Oe=!1,Be=null,Ne.apply(Re,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Ue(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Ze(r),e;if(a===i)return Ze(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ke=r.unstable_requestPaint,$e=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~r;0!==s?i=ht(s):0!==(o&=a)&&(i=ht(o))}else 0!==(a=n&~r)?i=ht(a):0!==o&&(i=ht(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var _t=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,Dt,Et,Ct,At=!1,St=[],Tt=null,Ft=null,kt=null,Pt=new Map,Mt=new Map,It=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Ot(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=_r(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Bt(e){var t=vr(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,function(){Dt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_r(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function zt(e,t,n){Lt(e)&&n.delete(t)}function Rt(){At=!1,null!==Tt&&Lt(Tt)&&(Tt=null),null!==Ft&&Lt(Ft)&&(Ft=null),null!==kt&&Lt(kt)&&(kt=null),Pt.forEach(zt),Mt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Rt)))}function Ut(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var i=St[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==Ft&&Vt(Ft,e),null!==kt&&Vt(kt,e),Pt.forEach(t),Mt.forEach(t),n=0;n<It.length;n++)(i=It[n]).blockedOn===e&&(i.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Bt(n),null===n.blockedOn&&It.shift()}var qt=x.ReactCurrentBatchConfig,Zt=!0;function Ht(e,t,n,i){var r=_t,o=qt.transition;qt.transition=null;try{_t=1,Wt(e,t,n,i)}finally{_t=r,qt.transition=o}}function Gt(e,t,n,i){var r=_t,o=qt.transition;qt.transition=null;try{_t=4,Wt(e,t,n,i)}finally{_t=r,qt.transition=o}}function Wt(e,t,n,i){if(Zt){var r=Xt(e,t,n,i);if(null===r)Zi(e,t,i,Yt,n),Nt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Tt=Ot(Tt,e,t,n,i,r),!0;case"dragenter":return Ft=Ot(Ft,e,t,n,i,r),!0;case"mouseover":return kt=Ot(kt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Pt.set(o,Ot(Pt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Mt.set(o,Ot(Mt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Nt(e,i),4&t&&-1<jt.indexOf(e)){for(;null!==r;){var o=_r(r);if(null!==o&&bt(o),null===(o=Xt(e,t,n,i))&&Zi(e,t,i,Yt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Zi(e,t,i,null,n)}}var Yt=null;function Xt(e,t,n,i){if(Yt=null,null!==(e=vr(e=be(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,i=n.length,r="value"in $t?$t.value:$t.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=B({},cn,{view:0,detail:0}),dn=on(hn),pn=B({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(B({},pn,{dataTransfer:0})),gn=on(B({},hn,{relatedTarget:0})),yn=on(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(vn),xn=on(B({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Dn[e])&&!!t[e]}function Cn(){return En}var An=B({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=on(An),Tn=on(B({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Fn=on(B({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),kn=on(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=B({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(Pn),In=[9,13,27,32],jn=u&&"CompositionEvent"in window,Nn=null;u&&"documentMode"in document&&(Nn=document.documentMode);var On=u&&"TextEvent"in window&&!Nn,Bn=u&&(!jn||Nn&&8<Nn&&11>=Nn),Ln=String.fromCharCode(32),zn=!1;function Rn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,i){Ae(i),0<(t=Gi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Yn(e){Li(e,0)}function Xn(e){if(W(xr(e)))return e}function Kn(e,t){if("change"===e)return t}var $n=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}Qn=Jn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){Gn&&(Gn.detachEvent("onpropertychange",ni),Wn=Gn=null)}function ni(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Hn(t,Wn,e,be(e)),Pe(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Wn=n,(Gn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function oi(e,t){if("click"===e)return Xn(t)}function ai(e,t){if("input"===e||"change"===e)return Xn(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!si(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,yi=null,vi=null,_i=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==gi||gi!==Y(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Gi(yi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Di={},Ei={};function Ci(e){if(Di[e])return Di[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ei)return Di[e]=n[t];return e}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ai=Ci("animationend"),Si=Ci("animationiteration"),Ti=Ci("animationstart"),Fi=Ci("transitionend"),ki=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){ki.set(e,t),l(t,[e])}for(var Ii=0;Ii<Pi.length;Ii++){var ji=Pi[Ii];Mi(ji.toLowerCase(),"on"+(ji[0].toUpperCase()+ji.slice(1)))}Mi(Ai,"onAnimationEnd"),Mi(Si,"onAnimationIteration"),Mi(Ti,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Fi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ni));function Bi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,s,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(o(198));var u=Be;Oe=!1,Be=null,Le||(Le=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function Li(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;Bi(r,s,c),o=l}else for(a=0;a<i.length;a++){if(l=(s=i[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;Bi(r,s,c),o=l}}}if(Le)throw e=ze,Le=!1,ze=null,e}function zi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(qi(t,e,2,!1),n.add(i))}function Ri(e,t,n){var i=0;t&&(i|=4),qi(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Vi]){e[Vi]=!0,a.forEach(function(t){"selectionchange"!==t&&(Oi.has(t)||Ri(t,!1,e),Ri(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Ri("selectionchange",!1,t))}}function qi(e,t,n,i){switch(Kt(t)){case 1:var r=Ht;break;case 4:r=Gt;break;default:r=Wt}n=r.bind(null,t,n,e),r=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Zi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=vr(s)))return;if(5===(l=a.tag)||6===l){i=o=a;continue e}s=s.parentNode}}i=i.return}Pe(function(){var i=o,r=be(n),a=[];e:{var s=ki.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Fn;break;case Ai:case Si:case Ti:l=yn;break;case Fi:l=kn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Me(f,d))&&u.push(Hi(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,r),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xr(l),p=null==c?s:xr(c),(s=new u(m,f+"leave",l,n,r)).target=h,s.relatedTarget=p,m=null,vr(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Wi(p))f++;for(p=0,m=d;m;m=Wi(m))p++;for(;0<f-p;)u=Wi(u),f--;for(;0<p-f;)d=Wi(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wi(u),d=Wi(d)}u=null}else u=null;null!==l&&Yi(a,s,l,u,!1),null!==c&&null!==h&&Yi(a,h,c,u,!0)}if("select"===(l=(s=i?xr(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Zn(s))if($n)g=ai;else{g=ri;var y=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=oi);switch(g&&(g=g(e,i))?Hn(a,g,n,r):(y&&y(e,s,i),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=i?xr(i):window,e){case"focusin":(Zn(y)||"true"===y.contentEditable)&&(gi=y,yi=i,vi=null);break;case"focusout":vi=yi=gi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,xi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(a,n,r)}var v;if(jn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Un?Rn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Bn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==_?"onCompositionEnd"===_&&Un&&(v=en()):(Qt="value"in($t=r)?$t.value:$t.textContent,Un=!0)),0<(y=Gi(i,_)).length&&(_=new xn(_,e,null,n,r),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Vn(n))&&(_.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!jn&&Rn(e,t)?(e=en(),Jt=Qt=$t=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=v))}Li(a,t)})}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Me(e,n))&&i.unshift(Hi(e,o,r)),null!=(o=Me(e,t))&&i.push(Hi(e,o,r))),e=e.return}return i}function Wi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var o=t._reactName,a=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Me(n,o))&&a.unshift(Hi(n,l,s)):r||null!=(l=Me(n,o))&&a.push(Hi(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Xi,"\n").replace(Ki,"")}function Qi(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(o(425))}function Ji(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ut(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ut(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function vr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function _r(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function br(e){return e[pr]||null}var wr=[],Dr=-1;function Er(e){return{current:e}}function Cr(e){0>Dr||(e.current=wr[Dr],wr[Dr]=null,Dr--)}function Ar(e,t){Dr++,wr[Dr]=e.current,e.current=t}var Sr={},Tr=Er(Sr),Fr=Er(!1),kr=Sr;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Sr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ir(){Cr(Fr),Cr(Tr)}function jr(e,t,n){if(Tr.current!==Sr)throw Error(o(168));Ar(Tr,t),Ar(Fr,n)}function Nr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,q(e)||"Unknown",r));return B({},n,i)}function Or(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,kr=Tr.current,Ar(Tr,e),Ar(Fr,Fr.current),!0}function Br(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Nr(e,t,kr),i.__reactInternalMemoizedMergedChildContext=e,Cr(Fr),Cr(Tr),Ar(Tr,e)):Cr(Fr),Ar(Fr,n)}var Lr=null,zr=!1,Rr=!1;function Vr(e){null===Lr?Lr=[e]:Lr.push(e)}function Ur(){if(!Rr&&null!==Lr){Rr=!0;var e=0,t=_t;try{var n=Lr;for(_t=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Lr=null,zr=!1}catch(r){throw null!==Lr&&(Lr=Lr.slice(e+1)),We(Je,Ur),r}finally{_t=t,Rr=!1}}return null}var qr=[],Zr=0,Hr=null,Gr=0,Wr=[],Yr=0,Xr=null,Kr=1,$r="";function Qr(e,t){qr[Zr++]=Gr,qr[Zr++]=Hr,Hr=e,Gr=t}function Jr(e,t,n){Wr[Yr++]=Kr,Wr[Yr++]=$r,Wr[Yr++]=Xr,Xr=e;var i=Kr;e=$r;var r=32-at(i)-1;i&=~(1<<r),n+=1;var o=32-at(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Kr=1<<32-at(t)+r|n<<r|i,$r=o+e}else Kr=1<<o|n<<r|i,$r=e}function eo(e){null!==e.return&&(Qr(e,1),Jr(e,1,0))}function to(e){for(;e===Hr;)Hr=qr[--Zr],qr[Zr]=null,Gr=qr[--Zr],qr[Zr]=null;for(;e===Xr;)Xr=Wr[--Yr],Wr[Yr]=null,$r=Wr[--Yr],Wr[Yr]=null,Kr=Wr[--Yr],Wr[Yr]=null}var no=null,io=null,ro=!1,oo=null;function ao(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xr?{id:Kr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=cr(n.nextSibling);var i=no;t&&so(e,t)?ao(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=cr(e.nextSibling)}function fo(){io=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _o(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===D?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&_o(o)===t.type)?((i=r(t,n.props)).ref=yo(e,t,n),i.return=e,i):((i=jc(n.type,n.key,n.props,null,e.mode,i)).ref=yo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=Nc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case w:return(t=Lc(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Nc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case M:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||N(n))return null!==r?null:h(e,t,n,i,null);vo(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case M:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||N(i))return h(t,e=e.get(n)||null,i,r,null);vo(t,i)}return null}function m(r,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(r,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(r,h),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(r,h),ro&&Qr(r,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return ro&&Qr(r,m),c}for(h=i(r,h);m<s.length;m++)null!==(g=f(h,r,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(r,e)}),ro&&Qr(r,m),c}function g(r,s,l,c){var u=N(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=p(r,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(r,m),s=a(_,s,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(r,m),ro&&Qr(r,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(r,v.value,c))&&(s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return ro&&Qr(r,g),u}for(m=i(r,m);!v.done;g++,v=l.next())null!==(v=f(m,r,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(r,e)}),ro&&Qr(r,g),u}return function e(i,o,a,l){if("object"===typeof a&&null!==a&&a.type===D&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===D){if(7===u.tag){n(i,u.sibling),(o=r(u,a.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&_o(c)===u.type){n(i,u.sibling),(o=r(u,a.props)).ref=yo(i,u,a),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===D?((o=Nc(a.props.children,i.mode,l,a.key)).return=i,i=o):((l=jc(a.type,a.key,a.props,null,i.mode,l)).ref=yo(i,o,a),l.return=i,i=l)}return s(i);case w:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(i,o.sibling),(o=r(o,a.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Lc(a,i.mode,l)).return=i,i=o}return s(i);case M:return e(i,o,(u=a._init)(a._payload),l)}if(te(a))return m(i,o,a,l);if(N(a))return g(i,o,a,l);vo(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,a)).return=i,i=o):(n(i,o),(o=Bc(a,i.mode,l)).return=i,i=o),s(i)):n(i,o)}}var bo=xo(!0),wo=xo(!1),Do=Er(null),Eo=null,Co=null,Ao=null;function So(){Ao=Co=Eo=null}function To(e){var t=Do.current;Cr(Do),e._currentValue=t}function Fo(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){Eo=e,Ao=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(Ao!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===Eo)throw Error(o(308));Co=e,Eo.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Mo=null;function Io(e){null===Mo?Mo=[e]:Mo.push(e)}function jo(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Io(t)):(n.next=r.next,r.next=n),t.interleaved=n,No(e,i)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oo=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ro(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Tl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,No(e,n)}return null===(r=i.interleaved)?(t.next=t,Io(i)):(t.next=r.next,r.next=t),i.interleaved=t,No(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Uo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,i){var r=e.updateQueue;Oo=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=B({},h,d);break e;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=h}}function Zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var Ho={},Go=Er(Ho),Wo=Er(Ho),Yo=Er(Ho);function Xo(e){if(e===Ho)throw Error(o(174));return e}function Ko(e,t){switch(Ar(Yo,t),Ar(Wo,e),Ar(Go,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(Go),Ar(Go,t)}function $o(){Cr(Go),Cr(Wo),Cr(Yo)}function Qo(e){Xo(Yo.current);var t=Xo(Go.current),n=le(t,e.type);t!==n&&(Ar(Wo,e),Ar(Go,n))}function Jo(e){Wo.current===e&&(Cr(Go),Cr(Wo))}var ea=Er(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ia(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ra=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function ga(e,t,n,i,r,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:es,e=n(i,r),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ra.current=ts,e=n(i,r)}while(ha)}if(ra.current=Qa,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function ya(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function _a(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=_a(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=la,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=i):c=c.next=d,sa.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==a);null===c?s=i:c.next=l,si(i,t.memoizedState)||(_s=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,sa.lanes|=a,Ol|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=_a(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);si(a,t.memoizedState)||(_s=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Da(){}function Ea(e,t){var n=sa,i=_a(),r=t(),a=!si(i.memoizedState,r);if(a&&(i.memoizedState=r,_s=!0),i=i.queue,Oa(Sa.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,Aa.bind(null,n,i,r,t),void 0,null),null===Fl)throw Error(o(349));0!==(30&aa)||Ca(n,t,r)}return r}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Aa(e,t,n,i){t.value=n,t.getSnapshot=i,Ta(t)&&Fa(e)}function Sa(e,t,n){return n(function(){Ta(t)&&Fa(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(i){return!0}}function Fa(e){var t=No(e,1);null!==t&&nc(t,e,1,-1)}function ka(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,sa,e),[t.memoizedState,e]}function Pa(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ma(){return _a().memoizedState}function Ia(e,t,n,i){var r=va();sa.flags|=e,r.memoizedState=Pa(1|t,n,void 0,void 0===i?null:i)}function ja(e,t,n,i){var r=_a();i=void 0===i?null:i;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==i&&ma(i,a.deps))return void(r.memoizedState=Pa(t,n,o,i))}sa.flags|=e,r.memoizedState=Pa(1|t,n,o,i)}function Na(e,t){return Ia(8390656,8,e,t)}function Oa(e,t){return ja(2048,8,e,t)}function Ba(e,t){return ja(4,2,e,t)}function La(e,t){return ja(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ra(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4,4,za.bind(null,t,e),n)}function Va(){}function Ua(e,t){var n=_a();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=_a();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Za(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(si(n,t)||(n=mt(),sa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ha(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var i=oa.transition;oa.transition={};try{e(!1),t()}finally{_t=n,oa.transition=i}}function Ga(){return _a().memoizedState}function Wa(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ka(t,n);else if(null!==(n=jo(e,t,n,i))){nc(n,e,i,ec()),$a(n,t,i)}}function Ya(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ka(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,a)){var l=t.interleaved;return null===l?(r.next=r,Io(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=jo(e,t,r,i))&&(nc(n,e,i,r=ec()),$a(n,t,i))}}function Xa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Qa={readContext:Po,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Po,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Na,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ia(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ia(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ia(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Wa.bind(null,sa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:ka,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=sa,r=va();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Fl)throw Error(o(349));0!==(30&aa)||Ca(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Na(Sa.bind(null,i,a,e),[e]),i.flags|=2048,Pa(9,Aa.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Fl.identifierPrefix;if(ro){var n=$r;t=":"+t+"R"+(n=(Kr&~(1<<32-at(Kr)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Po,useCallback:Ua,useContext:Po,useEffect:Oa,useImperativeHandle:Ra,useInsertionEffect:Ba,useLayoutEffect:La,useMemo:qa,useReducer:ba,useRef:Ma,useState:function(){return ba(xa)},useDebugValue:Va,useDeferredValue:function(e){return Za(_a(),la.memoizedState,e)},useTransition:function(){return[ba(xa)[0],_a().memoizedState]},useMutableSource:Da,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1},ts={readContext:Po,useCallback:Ua,useContext:Po,useEffect:Oa,useImperativeHandle:Ra,useInsertionEffect:Ba,useLayoutEffect:La,useMemo:qa,useReducer:wa,useRef:Ma,useState:function(){return wa(xa)},useDebugValue:Va,useDeferredValue:function(e){var t=_a();return null===la?t.memoizedState=e:Za(t,la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],_a().memoizedState]},useMutableSource:Da,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function is(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var rs={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=zo(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,r))&&(nc(t,e,r,i),Vo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=zo(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,r))&&(nc(t,e,r,i),Vo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=zo(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ro(e,r,i))&&(nc(t,e,i,n),Vo(t,e,i))}};function os(e,t,n,i,r,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function as(e,t,n){var i=!1,r=Sr,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(r=Mr(t)?kr:Tr.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Pr(e,r):Sr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rs,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&rs.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Bo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Po(o):(o=Mr(t)?kr:Tr.current,r.context=Pr(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(is(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&rs.enqueueReplaceState(r,r.state,null),qo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Zl||(Zl=!0,Hl=i),hs(0,t)},n}function fs(e,t,n){(n=zo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof i&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ds;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Ro(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vs=x.ReactCurrentOwner,_s=!1;function xs(e,t,n,i){t.child=null===e?wo(t,null,n,i):bo(t,e.child,n,i)}function bs(e,t,n,i,r){n=n.render;var o=t.ref;return ko(t,r),i=ga(e,t,n,i,o,r),n=ya(),null===e||_s?(ro&&n&&eo(t),t.flags|=1,xs(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Zs(e,t,r))}function ws(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Mc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ds(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Zs(e,t,r)}return t.flags|=1,(e=Ic(o,i)).ref=t.ref,e.return=t,t.child=e}function Ds(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(_s=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Zs(e,t,r);0!==(131072&e.flags)&&(_s=!0)}}return As(e,t,n,i,r)}function Es(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Il,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Il,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Ar(Il,Ml),Ml|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Ar(Il,Ml),Ml|=i;return xs(e,t,r,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function As(e,t,n,i,r){var o=Mr(n)?kr:Tr.current;return o=Pr(t,o),ko(t,r),n=ga(e,t,n,i,o,r),i=ya(),null===e||_s?(ro&&i&&eo(t),t.flags|=1,xs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Zs(e,t,r))}function Ss(e,t,n,i,r){if(Mr(n)){var o=!0;Or(t)}else o=!1;if(ko(t,r),null===t.stateNode)qs(e,t),as(t,n,i),ls(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pr(t,c=Mr(n)?kr:Tr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==c)&&ss(t,a,i,c),Oo=!1;var d=t.memoizedState;a.state=d,qo(t,i,a,r),l=t.memoizedState,s!==i||d!==l||Fr.current||Oo?("function"===typeof u&&(is(t,n,u,i),l=t.memoizedState),(s=Oo||os(t,n,s,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Lo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pr(t,l=Mr(n)?kr:Tr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,i,l),Oo=!1,d=t.memoizedState,a.state=d,qo(t,i,a,r);var f=t.memoizedState;s!==h||d!==f||Fr.current||Oo?("function"===typeof p&&(is(t,n,p,i),f=t.memoizedState),(c=Oo||os(t,n,c,i,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Ts(e,t,n,i,o,r)}function Ts(e,t,n,i,r,o){Cs(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Br(t,n,!1),Zs(e,t,o);i=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=bo(t,e.child,null,o),t.child=bo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=i.state,r&&Br(t,n,!0),t.child}function Fs(e){var t=e.stateNode;t.pendingContext?jr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&jr(0,t.context,!1),Ko(e,t.containerInfo)}function ks(e,t,n,i,r){return fo(),mo(r),t.flags|=256,xs(e,t,n,i),t.child}var Ps,Ms,Is,js,Ns={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var i,r=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ar(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,r,0,null),e=Nc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ns,e):Ls(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,i=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Oc({mode:"visible",children:i.children},r,0,null),(a=Nc(a,r,s,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&bo(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ns,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,zs(e,t,s,i=us(a=Error(o(419)),i,void 0))}if(l=0!==(s&e.childLanes),_s||l){if(null!==(i=Fl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==a.retryLane&&(a.retryLane=r,No(e,r),nc(i,e,r,-1))}return mc(),zs(e,t,s,i=us(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,io=cr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Wr[Yr++]=Kr,Wr[Yr++]=$r,Wr[Yr++]=Xr,Kr=e.id,$r=e.overflow,Xr=t),t=Ls(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(s){s=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ic(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?s=Ic(i,s):(s=Nc(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,r}return e=(s=e.child).sibling,r=Ic(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ls(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,i){return null!==i&&mo(i),bo(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Rs(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Fo(e.return,t,n)}function Vs(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Us(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(xs(e,t,i.children,n),0!==(2&(i=ea.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Rs(e,n,t);else if(19===e.tag)Rs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ar(ea,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Vs(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ta(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Vs(t,!0,n,null,o);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ws(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Mr(t.type)&&Ir(),Gs(t),null;case 3:return i=t.stateNode,$o(),Cr(Fr),Cr(Tr),ia(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ms(e,t),Gs(t),null;case 5:Jo(t);var r=Xo(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=Xo(Go.current),ho(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[dr]=t,i[pr]=a,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Ni.length;r++)zi(Ni[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":K(i,a),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},zi("invalid",i);break;case"textarea":re(i,a),zi("invalid",i)}for(var l in ve(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":G(i),J(i,a,!0);break;case"textarea":G(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[pr]=i,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ni.length;r++)zi(Ni[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":K(e,i),r=X(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=B({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(a in ve(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zi("scroll",e):null!=u&&_(e,a,u,l))}switch(n){case"input":G(e),J(e,i,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+Z(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)js(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=Xo(Yo.current),Xo(Go.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(a=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Gs(t),null;case 13:if(Cr(ea),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[dr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return $o(),Ms(e,t),null===e&&Ui(t.stateNode.containerInfo),Gs(t),null;case 10:return To(t.type._context),Gs(t),null;case 19:if(Cr(ea),null===(a=t.memoizedState))return Gs(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Hs(a,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Hs(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ar(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Ul&&(t.flags|=128,i=!0,Hs(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ta(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ro)return Gs(t),null}else 2*$e()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,i=!0,Hs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=ea.current,Ar(ea,i?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ys(e,t){switch(to(t),t.tag){case 1:return Mr(t.type)&&Ir(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $o(),Cr(Fr),Cr(Tr),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Cr(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(ea),null;case 4:return $o(),null;case 10:return To(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ms=function(){},Is=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Xo(Go.current);var o,a=null;switch(n){case"input":r=X(e,r),i=X(e,i),a=[];break;case"select":r=B({},r,{value:void 0}),i=B({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(u in ve(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},js=function(e,t,n,i){n!==i&&(t.flags|=4)};var Xs=!1,Ks=!1,$s="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Ec(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(t,n,o)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[mr],delete t[gr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Ks||Js(n,t);case 6:var i=ul,r=hl;ul=null,dl(e,t,n),hl=r,null!==(ul=i)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ut(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!Ks&&(Js(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Ec(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ks=(i=Ks)||null!==n.memoizedState,dl(e,t,n),Ks=i):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach(function(t){var i=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ec(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&i&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),yl(e),512&i&&null!==n&&Js(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(g){Ec(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(r,a),_e(l,s);var u=_e(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):_(r,h,d,u)}switch(l){case"input":Q(r,a);break;case"textarea":oe(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Vl=$e())),4&i&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||h,ml(t,e),Ks=u):ml(t,e),yl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(i,n,g)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){bl(d);continue}}null!==f?(f.return=p,Qs=f):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&i&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),cl(e,sl(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qs=e,_l(e,t,n)}function _l(e,t,n){for(var i=0!==(1&e.mode);null!==Qs;){var r=Qs,o=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Xs;if(!a){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Xs;var c=Ks;if(Xs=a,(Ks=l)&&!c)for(Qs=r;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?wl(r):null!==l?(l.return=a,Qs=l):wl(r);for(;null!==o;)Qs=o,_l(o,t,n),o=o.sibling;Qs=r,Xs=s,Ks=c}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Qs=o):xl(e)}}function xl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ks)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Zo(t,a,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Zo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(o(163))}Ks||512&t.flags&&rl(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function bl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Ec(t,r,l)}}var o=t.return;try{rl(t)}catch(l){Ec(t,o,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Dl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Al=x.ReactCurrentOwner,Sl=x.ReactCurrentBatchConfig,Tl=0,Fl=null,kl=null,Pl=0,Ml=0,Il=Er(0),jl=0,Nl=null,Ol=0,Bl=0,Ll=0,zl=null,Rl=null,Vl=0,Ul=1/0,ql=null,Zl=!1,Hl=null,Gl=null,Wl=!1,Yl=null,Xl=0,Kl=0,$l=null,Ql=-1,Jl=0;function ec(){return 0!==(6&Tl)?$e():-1!==Ql?Ql:Ql=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,i){if(50<Kl)throw Kl=0,$l=null,Error(o(185));yt(e,n,i),0!==(2&Tl)&&e===Fl||(e===Fl&&(0===(2&Tl)&&(Bl|=n),4===jl&&sc(e,Pl)),ic(e,i),1===n&&0===Tl&&0===(1&t.mode)&&(Ul=$e()+500,zr&&Ur()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=r[a];-1===l?0!==(s&n)&&0===(s&i)||(r[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var i=dt(e,e===Fl?Pl:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){zr=!0,Vr(e)}(lc.bind(null,e)):Vr(lc.bind(null,e)),ar(function(){0===(6&Tl)&&Ur()}),n=null;else{switch(xt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Fc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ql=-1,Jl=0,0!==(6&Tl))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=dt(e,e===Fl?Pl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Tl;Tl|=2;var a=fc();for(Fl===e&&Pl===t||(ql=null,Ul=$e()+500,dc(e,t));;)try{vc();break}catch(l){pc(e,l)}So(),Cl.current=a,Tl=r,null!==kl?t=0:(Fl=null,Pl=0,t=jl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=oc(e,r))),1===t)throw n=Nl,dc(e,0),sc(e,i),ic(e,$e()),n;if(6===t)sc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!si(o(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(a=ft(e))&&(i=a,t=oc(e,a))),1===t))throw n=Nl,dc(e,0),sc(e,i),ic(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:bc(e,Rl,ql);break;case 3:if(sc(e,i),(130023424&i)===i&&10<(t=Vl+500-$e())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(bc.bind(null,e,Rl,ql),t);break}bc(e,Rl,ql);break;case 4:if(sc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-at(i);a=1<<s,(s=t[s])>r&&(r=s),i&=~a}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){e.timeoutHandle=ir(bc.bind(null,e,Rl,ql),i);break}bc(e,Rl,ql);break;default:throw Error(o(329))}}}return ic(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Rl,Rl=n,null!==t&&ac(t)),e}function ac(e){null===Rl?Rl=e:Rl.push.apply(Rl,e)}function sc(e,t){for(t&=~Ll,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Tl))throw Error(o(327));wc();var t=dt(e,0);if(0===(1&t))return ic(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Nl,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Rl,ql),ic(e,$e()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Ul=$e()+500,zr&&Ur())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&wc();var t=Tl;Tl|=1;var n=Sl.transition,i=_t;try{if(Sl.transition=null,_t=1,e)return e()}finally{_t=i,Sl.transition=n,0===(6&(Tl=t))&&Ur()}}function hc(){Ml=Il.current,Cr(Il)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==kl)for(n=kl.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ir();break;case 3:$o(),Cr(Fr),Cr(Tr),ia();break;case 5:Jo(i);break;case 4:$o();break;case 13:case 19:Cr(ea);break;case 10:To(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Fl=e,kl=e=Ic(e.current,null),Pl=Ml=t,jl=0,Nl=null,Ll=Bl=Ol=0,Rl=zl=null,null!==Mo){for(t=0;t<Mo.length;t++)if(null!==(i=(n=Mo[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var a=o.next;o.next=r,i.next=a}n.pending=i}Mo=null}return e}function pc(e,t){for(;;){var n=kl;try{if(So(),ra.current=Qa,ua){for(var i=sa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,Al.current=null,null===n||null===n.return){jl=1,Nl=t,kl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==jl&&(jl=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,ps(0,c,t));break e;case 1:l=c;var v=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Qa,null===e?Qa:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Fl||0===(268435455&Ol)&&0===(268435455&Bl)||sc(Fl,Pl)}function gc(e,t){var n=Tl;Tl|=2;var i=fc();for(Fl===e&&Pl===t||(ql=null,dc(e,t));;)try{yc();break}catch(r){pc(e,r)}if(So(),Tl=n,Cl.current=i,null!==kl)throw Error(o(261));return Fl=null,Pl=0,jl}function yc(){for(;null!==kl;)_c(kl)}function vc(){for(;null!==kl&&!Xe();)_c(kl)}function _c(e){var t=Dl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?xc(e):kl=t,Al.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ws(n,t,Ml)))return void(kl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(kl=n);if(null===e)return jl=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===jl&&(jl=5)}function bc(e,t,n){var i=_t,r=Sl.transition;try{Sl.transition=null,_t=1,function(e,t,n,i){do{wc()}while(null!==Yl);if(0!==(6&Tl))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,a),e===Fl&&(kl=Fl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Fc(tt,function(){return wc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Sl.transition,Sl.transition=null;var s=_t;_t=1;var l=Tl;Tl|=4,Al.current=null,function(e,t){if(er=Zt,pi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==a||0!==i&&3!==d.nodeType||(c=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=s),p===a&&++h===i&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Zt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(tr),Zt=!!er,tr=er=null,e.current=n,vl(n,e,r),Ke(),Tl=l,_t=s,Sl.transition=a}else e.current=n;if(Wl&&(Wl=!1,Yl=e,Xl=r),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Zl)throw Zl=!1,e=Hl,Hl=null,e;0!==(1&Xl)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===$l?Kl++:(Kl=0,$l=e):Kl=0,Ur()}(e,t,n,i)}finally{Sl.transition=r,_t=i}return null}function wc(){if(null!==Yl){var e=xt(Xl),t=Sl.transition,n=_t;try{if(Sl.transition=null,_t=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Tl))throw Error(o(331));var r=Tl;for(Tl|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var p=(h=Qs).sibling,f=h.return;if(ol(h),h===u){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qs=v;break e}Qs=a.return}}var _=e.current;for(Qs=_;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=_;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Ec(l,l.return,w)}if(l===s){Qs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qs=b;break e}Qs=l.return}}if(Tl=r,Ur(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{_t=n,Sl.transition=t}}return!1}function Dc(e,t,n){e=Ro(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Dc(e,e,n);else for(;null!==t;){if(3===t.tag){Dc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gl||!Gl.has(i))){t=Ro(t,e=fs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Fl===e&&(Pl&n)===n&&(4===jl||3===jl&&(130023424&Pl)===Pl&&500>$e()-Vl?dc(e,0):Ll|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=No(e,t))&&(yt(e,t,n),ic(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Ac(e,n)}function Fc(e,t){return We(e,t)}function kc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,i){return new kc(e,t,n,i)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,i,r,a){var s=2;if(i=e,"function"===typeof e)Mc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case D:return Nc(n.children,r,a,t);case E:s=8,r|=8;break;case C:return(e=Pc(12,n,t,2|r)).elementType=C,e.lanes=a,e;case F:return(e=Pc(13,n,t,r)).elementType=F,e.lanes=a,e;case k:return(e=Pc(19,n,t,r)).elementType=k,e.lanes=a,e;case I:return Oc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case S:s=9;break e;case T:s=11;break e;case P:s=14;break e;case M:s=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Nc(e,t,n,i){return(e=Pc(7,e,i,t)).lanes=n,e}function Oc(e,t,n,i){return(e=Pc(22,e,i,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Rc(e,t,n,i,r,o,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(o),e}function Vc(e){if(!e)return Sr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Mr(n))return Nr(e,n,t)}return t}function Uc(e,t,n,i,r,o,a,s,l){return(e=Rc(n,i,!0,e,0,o,0,s,l)).context=Vc(null),n=e.current,(o=zo(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Ro(n,o,r),e.current.lanes=r,yt(e,r,i),ic(e,i),e}function qc(e,t,n,i){var r=t.current,o=ec(),a=tc(r);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Ro(r,t,a))&&(nc(e,r,a,o),Vo(e,r,a)),a}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Dl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fr.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Fs(t),fo();break;case 5:Qo(t);break;case 1:Mr(t.type)&&Or(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Ar(Do,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Ar(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ar(ea,1&ea.current),null!==(e=Zs(e,t,n))?e.sibling:null);Ar(ea,1&ea.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Us(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(ea,ea.current),i)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Zs(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ro&&0!==(1048576&t.flags)&&Jr(t,Gr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;qs(e,t),e=t.pendingProps;var r=Pr(t,Tr.current);ko(t,n),r=ga(null,t,i,e,r,n);var a=ya();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(i)?(a=!0,Or(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Bo(t),r.updater=rs,t.stateNode=r,r._reactInternals=t,ls(t,i,e,n),t=Ts(null,t,i,!0,a,n)):(t.tag=0,ro&&a&&eo(t),xs(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(i),e=ns(i,e),r){case 0:t=As(null,t,i,e,n);break e;case 1:t=Ss(null,t,i,e,n);break e;case 11:t=bs(null,t,i,e,n);break e;case 14:t=ws(null,t,i,ns(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,As(e,t,i,r=t.elementType===i?r:ns(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ss(e,t,i,r=t.elementType===i?r:ns(i,r),n);case 3:e:{if(Fs(t),null===e)throw Error(o(387));i=t.pendingProps,r=(a=t.memoizedState).element,Lo(e,t),qo(t,i,null,n);var s=t.memoizedState;if(i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ks(e,t,i,n,r=cs(Error(o(423)),t));break e}if(i!==r){t=ks(e,t,i,n,r=cs(Error(o(424)),t));break e}for(io=cr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=wo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=Zs(e,t,n);break e}xs(e,t,i,n)}t=t.child}return t;case 5:return Qo(t),null===e&&co(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==a&&nr(i,a)&&(t.flags|=32),Cs(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Bs(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=bo(t,null,i,n):xs(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,bs(e,t,i,r=t.elementType===i?r:ns(i,r),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value,Ar(Do,i._currentValue),i._currentValue=s,null!==a)if(si(a.value,s)){if(a.children===r.children&&!Fr.current){t=Zs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=zo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Fo(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Fo(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,ko(t,n),i=i(r=Po(r)),t.flags|=1,xs(e,t,i,n),t.child;case 14:return r=ns(i=t.type,t.pendingProps),ws(e,t,i,r=ns(i.type,r),n);case 15:return Ds(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ns(i,r),qs(e,t),t.tag=1,Mr(i)?(e=!0,Or(t)):e=!1,ko(t,n),as(t,i,r),ls(t,i,r,n),Ts(null,t,i,!0,e,n);case 19:return Us(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof r){var s=r;r=function(){var e=Zc(a);s.call(e)}}qc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Zc(a);o.call(e)}}var a=Uc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[fr]=a.current,Ui(8===e.nodeType?e.parentNode:e),uc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var s=i;i=function(){var e=Zc(l);s.call(e)}}var l=Rc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fr]=l.current,Ui(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,i)}),l}(n,t,e,r,i);return Zc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[fr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Bt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,$e()),0===(6&Tl)&&(Ul=$e()+500,Ur()))}break;case 13:uc(function(){var t=No(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Dt=function(e){if(13===e.tag){var t=tc(e),n=No(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Et=function(){return _t},Ct=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=br(i);if(!r)throw Error(o(90));W(i),Q(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Fe=uc;var eu={usingClientEntryPoint:!1,Events:[_r,xr,br,Ae,Se,cc]},tu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(o(299));var n=!1,i="",r=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Rc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(o(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",s=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,r,0,a,s),e[fr]=t.current,Ui(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(o(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$c(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},2777:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2897:(e,t,n)=>{var i=n(3693);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var i,r=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!o)return!1;for(i in e);return"undefined"===typeof i||t.call(e,i)},s=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(r)return r(e,n).value}return e[n]};e.exports=function e(){var t,n,i,r,c,u,h=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"===typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!==typeof h&&"function"!==typeof h)&&(h={});d<p;++d)if(null!=(t=arguments[d]))for(n in t)i=l(h,n),h!==(r=l(t,n))&&(f&&r&&(a(r)||(c=o(r)))?(c?(c=!1,u=i&&o(i)?i:[]):u=i&&a(i)?i:{},s(h,{name:n,newValue:e(f,u,r)})):"undefined"!==typeof r&&s(h,{name:n,newValue:r}));return h}},3245:(e,t,n)=>{"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=u(n(5173)),o=u(n(7742)),a=u(n(1612)),s=n(5043),l=u(s),c=u(n(7686));function u(e){return e&&e.__esModule?e:{default:e}}var h={bgColor:r.default.oneOfType([r.default.object,r.default.string]),fgColor:r.default.oneOfType([r.default.object,r.default.string]),level:r.default.string,size:r.default.number,value:r.default.string.isRequired},d=(0,s.forwardRef)(function(e,t){var n=e.bgColor,r=void 0===n?"#FFFFFF":n,s=e.fgColor,u=void 0===s?"#000000":s,h=e.level,d=void 0===h?"L":h,p=e.size,f=void 0===p?256:p,m=e.value,g=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["bgColor","fgColor","level","size","value"]),y=new a.default(-1,o.default[d]);y.addData(m),y.make();var v=y.modules;return l.default.createElement(c.default,i({},g,{bgColor:r,bgD:v.map(function(e,t){return e.map(function(e,n){return e?"":"M "+n+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:u,fgD:v.map(function(e,t){return e.map(function(e,n){return e?"M "+n+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:f,viewBoxSize:v.length}))});d.displayName="QRCode",d.propTypes=h,t.Ay=d},3272:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3343:(e,t,n)=>{var i=n(5957);function r(e){this.mode=i.MODE_8BIT_BYTE,this.data=e}r.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=r},3693:(e,t,n)=>{var i=n(7736);e.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3757:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(4704),r=n(1203),o=n(870),a=n(5093);t.isIterateeCall=function(e,t,n){return!!o.isObject(n)&&(!!("number"===typeof t&&r.isArrayLike(n)&&i.isIndex(t)&&t<n.length||"string"===typeof t&&t in n)&&a.isEqualsSameValueZero(n[t],e))}},3808:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(8268),r=n(5261);t.matches=function(e){return e=r.cloneDeep(e),t=>i.isMatch(t,e)}},3821:(e,t,n)=>{e.exports=n(2204).sortBy},4066:function(e,t,n){var i=n(2897).default,r=n(3693).default;e.exports=function(){"use strict";var e={},t={};function n(n,i,r){if(t[n]=r,"index"===n){var o="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",a={};return t.shared(a),t.index(e,a),"undefined"!==typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),e}}return n("shared",["exports"],function(e){function t(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})}function n(e,t){this.x=e,this.y=t}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o,a;"function"==typeof SuppressedError&&SuppressedError,n.prototype={clone(){return new n(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_rotateAround(e,t){const n=Math.cos(e),i=Math.sin(e),r=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-i*(this.y-t.y),this.y=r,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:n},n.convert=function(e){if(e instanceof n)return e;if(Array.isArray(e))return new n(+e[0],+e[1]);if(void 0!==e.x&&void 0!==e.y)return new n(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};var s=function(){if(a)return o;function e(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}return a=1,o=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var r=this.sampleCurveX(n)-e;if(Math.abs(r)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var a=0,s=1;for(n=e,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-e)<t));i++)e>r?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},o}(),l=i(s);let c,u;function h(){return null==c&&(c="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),c}function d(){if(null==u&&(u=!1,h())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let i=0;i<e*e;i++){const n=4*i;t.fillStyle="rgb(".concat(n,",").concat(n+1,",").concat(n+2,")"),t.fillRect(i%e,Math.floor(i/e),1,1)}const n=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&n[t]!==t){u=!0;break}}}return u||!1}var p=1e-6,f="undefined"!=typeof Float32Array?Float32Array:Array;function m(){var e=new f(9);return f!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function g(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y(){var e=new f(3);return f!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function v(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)}function _(e,t,n){var i=new f(3);return i[0]=e,i[1]=t,i[2]=n,i}function x(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function b(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function w(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=r*l-o*s,e[1]=o*a-i*l,e[2]=i*s-r*a,e}var D,E=v;function C(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,e[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,e[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,e[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,e}function A(){var e=new f(4);return f!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function S(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zyx",o=Math.PI/360;t*=o,i*=o,n*=o;var a=Math.sin(t),s=Math.cos(t),l=Math.sin(n),c=Math.cos(n),u=Math.sin(i),h=Math.cos(i);switch(r){case"xyz":e[0]=a*c*h+s*l*u,e[1]=s*l*h-a*c*u,e[2]=s*c*u+a*l*h,e[3]=s*c*h-a*l*u;break;case"xzy":e[0]=a*c*h-s*l*u,e[1]=s*l*h-a*c*u,e[2]=s*c*u+a*l*h,e[3]=s*c*h+a*l*u;break;case"yxz":e[0]=a*c*h+s*l*u,e[1]=s*l*h-a*c*u,e[2]=s*c*u-a*l*h,e[3]=s*c*h+a*l*u;break;case"yzx":e[0]=a*c*h+s*l*u,e[1]=s*l*h+a*c*u,e[2]=s*c*u-a*l*h,e[3]=s*c*h-a*l*u;break;case"zxy":e[0]=a*c*h-s*l*u,e[1]=s*l*h+a*c*u,e[2]=s*c*u+a*l*h,e[3]=s*c*h-a*l*u;break;case"zyx":e[0]=a*c*h-s*l*u,e[1]=s*l*h+a*c*u,e[2]=s*c*u-a*l*h,e[3]=s*c*h+a*l*u;break;default:throw new Error("Unknown angle order "+r)}return e}function T(){var e=new f(2);return f!=Float32Array&&(e[0]=0,e[1]=0),e}function F(e,t){var n=new f(2);return n[0]=e,n[1]=t,n}y(),D=new f(4),f!=Float32Array&&(D[0]=0,D[1]=0,D[2]=0,D[3]=0),y(),_(1,0,0),_(0,1,0),A(),A(),m(),T();const k=8192;function P(e,t,n){return t*(k/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}function M(e,t){return(e%t+t)%t}function I(e,t,n){return e*(1-n)+t*n}function j(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function N(e,t,n,i){const r=new l(e,t,n,i);return e=>r.solve(e)}const O=N(.25,.1,.25,1);function B(e,t,n){return Math.min(n,Math.max(t,e))}function L(e,t,n){const i=n-t,r=((e-t)%i+i)%i+t;return r===t?n:r}function z(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)for(const t in r)e[t]=r[t];return e}let R=1;function V(e,t,n){const i={};for(const r in e)i[r]=t.call(this,e[r],r,e);return i}function U(e,t,n){const i={};for(const r in e)t.call(this,e[r],r,e)&&(i[r]=e[r]);return i}function q(e){return Array.isArray(e)?e.map(q):"object"==typeof e&&e?V(e,q):e}const Z={};function H(e){Z[e]||("undefined"!=typeof console&&console.warn(e),Z[e]=!0)}function G(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function W(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let Y=null;function X(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $(e,n,i,r,o){return t(this,void 0,void 0,function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const a=null==t?void 0:t.format;if(!a||!a.startsWith("BGR")&&!a.startsWith("RGB"))throw new Error("Unrecognized format ".concat(a));const s=a.startsWith("BGR"),l=new Uint8ClampedArray(r*o*4);if(yield t.copyTo(l,function(e,t,n,i,r){const o=4*Math.max(-t,0),a=(Math.max(0,n)-n)*i*4+o,s=4*i,l=Math.max(0,t),c=Math.max(0,n);return{rect:{x:l,y:c,width:Math.min(e.width,t+i)-l,height:Math.min(e.height,n+r)-c},layout:[{offset:a,stride:s}]}}(e,n,i,r,o)),s)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}})}let Q,J;function ee(e,t,n,i){return e.addEventListener(t,n,i),{unsubscribe:()=>{e.removeEventListener(t,n,i)}}}function te(e){return e*Math.PI/180}function ne(e){return e/Math.PI*180}const ie={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},re={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},oe="AbortError";class ae extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;super(e instanceof Error?e.message:e),this.name=oe,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function se(e){return e.name===oe}const le={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ce(e){return le.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const ue="global-dispatcher";class he extends Error{constructor(e,t,n,i){super("AJAXError: ".concat(t," (").concat(e,"): ").concat(n)),this.status=e,this.statusText=t,this.url=n,this.body=i}}const de=()=>W(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,pe=function(e,n){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=ce(e.url);if(t)return t(e,n);if(W(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:ue},n)}if(!(/^file:/.test(i=e.url)||/^file:/.test(de())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,n){return t(this,void 0,void 0,function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:de(),signal:n.signal});let i,r;"json"!==e.type||t.headers.has("Accept")||t.headers.set("Accept","application/json");try{i=yield fetch(t)}catch(t){if(se(t))throw t;throw new he(0,t.message,e.url,new Blob)}if(!i.ok){const t=yield i.blob();throw new he(i.status,i.statusText,e.url,t)}r="arrayBuffer"===e.type||"image"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text();const o=yield r;return n.signal.throwIfAborted(),{data:o,cacheControl:i.headers.get("Cache-Control"),expires:i.headers.get("Expires")}})}(e,n);if(W(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:ue},n)}var i;return function(e,t){return new Promise((n,i)=>{var r;const o=new XMLHttpRequest;o.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(o.responseType="arraybuffer");for(const t in e.headers)o.setRequestHeader(t,e.headers[t]);"json"===e.type&&(o.responseType="text",(null===(r=e.headers)||void 0===r?void 0:r.Accept)||o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===e.credentials,o.onerror=()=>{i(new Error(o.statusText))},o.onload=()=>{if(!t.signal.aborted)if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let t=o.response;if("json"===e.type)try{t=JSON.parse(o.response)}catch(e){return void i(e)}n({data:t,cacheControl:o.getResponseHeader("Cache-Control"),expires:o.getResponseHeader("Expires")})}else{const t=new Blob([o.response],{type:o.getResponseHeader("Content-Type")});i(new he(o.status,o.statusText,e.url,t))}},t.signal.addEventListener("abort",()=>{o.abort(),i(new ae(t.signal.reason))}),o.send(e.body)})}(e,n)};function fe(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function me(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ge(e,t,n){if(n&&n[e]){const i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}class ye{constructor(e){z(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class ve extends ye{constructor(e){super("error",z({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class _e{on(e,t){return this._listeners=this._listeners||{},me(e,t,this._listeners),{unsubscribe:()=>{this.off(e,t)}}}off(e,t){return ge(e,t,this._listeners),ge(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},me(e,t,this._oneTimeListeners),this):new Promise(t=>this.once(e,t))}fire(e,t){"string"==typeof e&&(e=new ye(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of i)ge(n,o,this._oneTimeListeners),o.call(this,e);const r=this._eventedParent;r&&(z(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(e))}else e instanceof ve&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var xe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const be=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function we(e,t){const n={};for(const i in e)"ref"!==i&&(n[i]=e[i]);return be.forEach(e=>{e in t&&(n[e]=t[e])}),n}function De(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!De(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!De(e[n],t[n]))return!1;return!0}return e===t}function Ee(e,t){e.push(t)}function Ce(e,t,n){Ee(n,{command:"addSource",args:[e,t[e]]})}function Ae(e,t,n){Ee(t,{command:"removeSource",args:[e]}),n[e]=!0}function Se(e,t,n,i){Ae(e,n,i),Ce(e,t,n)}function Te(e,t,n){let i;for(i in e[n])if(Object.prototype.hasOwnProperty.call(e[n],i)&&"data"!==i&&!De(e[n][i],t[n][i]))return!1;for(i in t[n])if(Object.prototype.hasOwnProperty.call(t[n],i)&&"data"!==i&&!De(e[n][i],t[n][i]))return!1;return!0}function Fe(e,t,n,i,r,o){e=e||{},t=t||{};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(De(e[a],t[a])||n.push({command:o,args:[i,a,t[a],r]}));for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&!Object.prototype.hasOwnProperty.call(e,a)&&(De(e[a],t[a])||n.push({command:o,args:[i,a,t[a],r]}))}function ke(e){return e.id}function Pe(e,t){return e[t.id]=t,e}class Me{constructor(e,t,n,i){this.message=(e?"".concat(e,": "):"")+n,i&&(this.identifier=i),null!=t&&t.__line__&&(this.line=t.__line__)}}function Ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n)for(const t in r)e[t]=r[t];return e}class je extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Ne{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[n,i]of t)this.bindings[n]=i}concat(e){return new Ne(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Oe={kind:"null"},Be={kind:"number"},Le={kind:"string"},ze={kind:"boolean"},Re={kind:"color"},Ve={kind:"projectionDefinition"},Ue={kind:"object"},qe={kind:"value"},Ze={kind:"collator"},He={kind:"formatted"},Ge={kind:"padding"},We={kind:"colorArray"},Ye={kind:"numberArray"},Xe={kind:"resolvedImage"},Ke={kind:"variableAnchorOffsetCollection"};function $e(e,t){return{kind:"array",itemType:e,N:t}}function Qe(e){if("array"===e.kind){const t=Qe(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}const Je=[Oe,Be,Le,ze,Re,Ve,He,Ue,$e(qe),Ge,Ye,We,Xe,Ke];function et(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!et(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of Je)if(!et(e,t))return null}return"Expected ".concat(Qe(e)," but found ").concat(Qe(t)," instead.")}function tt(e,t){return t.some(t=>t.kind===e.kind)}function nt(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}function it(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const rt=.96422,ot=.82521,at=4/29,st=6/29,lt=3*st*st,ct=st*st*st,ut=Math.PI/180,ht=180/Math.PI;function dt(e){return(e%=360)<0&&(e+=360),e}function pt(e){let t,n,[i,r,o,a]=e;const s=mt((.2225045*(i=ft(i))+.7168786*(r=ft(r))+.0606169*(o=ft(o)))/1);i===r&&r===o?t=n=s:(t=mt((.4360747*i+.3850649*r+.1430804*o)/rt),n=mt((.0139322*i+.0971045*r+.7141733*o)/ot));const l=116*s-16;return[l<0?0:l,500*(t-s),200*(s-n),a]}function ft(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mt(e){return e>ct?Math.pow(e,1/3):e/lt+at}function gt(e){let[t,n,i,r]=e,o=(t+16)/116,a=isNaN(n)?o:o+n/500,s=isNaN(i)?o:o-i/200;return o=1*vt(o),a=rt*vt(a),s=ot*vt(s),[yt(3.1338561*a-1.6168667*o-.4906146*s),yt(-.9787684*a+1.9161415*o+.033454*s),yt(.0719453*a-.2289914*o+1.4052427*s),r]}function yt(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function vt(e){return e>st?e*e*e:lt*(e-at)}const _t=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function xt(e,t){return _t(e,t)?e[t]:void 0}function bt(e){return parseInt(e.padEnd(2,e),16)/255}function wt(e,t){return Dt(t?e/100:e,0,1)}function Dt(e,t,n){return Math.min(Math.max(t,e),n)}function Et(e){return!e.some(Number.isNaN)}const Ct={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function At(e,t,n){return e+n*(t-e)}function St(e,t,n){return e.map((e,i)=>At(e,t[i],n))}class Tt{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.r=e,this.g=t,this.b=n,this.a=i,r||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,n,i]))}static parse(e){if(e instanceof Tt)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=xt(Ct,e);if(t){const[e,n,i]=t;return[e/255,n/255,i/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let n=1;return[bt(e.slice(n,n+=t)),bt(e.slice(n,n+=t)),bt(e.slice(n,n+=t)),bt(e.slice(n,n+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,n,i,r,o,a,s,l,c,u,h,d]=t,p=[r||" ",s||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[i,a,c].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[Dt(+n/t,0,1),Dt(+o/t,0,1),Dt(+l/t,0,1),h?wt(+h,d):1];if(Et(e))return e}}return}}const n=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[e,t,i,r,o,a,s,l,c]=n,u=[i||" ",o||" ",s].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,Dt(+r,0,100),Dt(+a,0,100),l?wt(+l,c):1];if(Et(e))return function(e){let[t,n,i,r]=e;function o(e){const r=(e+t/30)%12,o=n*Math.min(i,1-i);return i-o*Math.max(-1,Math.min(r-3,9-r,1))}return t=dt(t),n/=100,i/=100,[o(0),o(8),o(4),r]}(e)}}}(e);return t?new Tt(...t,!1):void 0}get rgb(){const{r:e,g:t,b:n,a:i}=this,r=i||1/0;return this.overwriteGetter("rgb",[e/r,t/r,n/r,i])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,n,i,r]=pt(e),o=Math.sqrt(n*n+i*i);return[Math.round(1e4*o)?dt(Math.atan2(i,n)*ht):NaN,o,t,r]}(this.rgb))}get lab(){return this.overwriteGetter("lab",pt(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,n,i]=this.rgb;return"rgba(".concat([e,t,n].map(e=>Math.round(255*e)).join(","),",").concat(i,")")}static interpolate(e,t,n){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":{const[i,r,o,a]=St(e.rgb,t.rgb,n);return new Tt(i,r,o,a,!1)}case"hcl":{const[i,r,o,a]=e.hcl,[s,l,c,u]=t.hcl;let h,d;if(isNaN(i)||isNaN(s))isNaN(i)?isNaN(s)?h=NaN:(h=s,1!==o&&0!==o||(d=l)):(h=i,1!==c&&0!==c||(d=r));else{let e=s-i;s>i&&e>180?e-=360:s<i&&i-s>180&&(e+=360),h=i+n*e}const[p,f,m,g]=function(e){let[t,n,i,r]=e;return t=isNaN(t)?0:t*ut,gt([i,Math.cos(t)*n,Math.sin(t)*n,r])}([h,null!=d?d:At(r,l,n),At(o,c,n),At(a,u,n)]);return new Tt(p,f,m,g,!1)}case"lab":{const[i,r,o,a]=gt(St(e.lab,t.lab,n));return new Tt(i,r,o,a,!1)}}}}Tt.black=new Tt(0,0,0,1),Tt.white=new Tt(1,1,1,1),Tt.transparent=new Tt(0,0,0,0),Tt.red=new Tt(1,0,0,1);class Ft{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const kt=["bottom","center","top"];class Pt{constructor(e,t,n,i,r,o){this.text=e,this.image=t,this.scale=n,this.fontStack=i,this.textColor=r,this.verticalAlign=o}}class Mt{constructor(e){this.sections=e}static fromString(e){return new Mt([new Pt(e,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Mt?e:Mt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class It{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof It)return e;if("number"==typeof e)return new It([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new It(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){return new It(St(e.values,t.values,n))}}class jt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof jt)return e;if("number"==typeof e)return new jt([e]);if(Array.isArray(e)){for(const t of e)if("number"!=typeof t)return;return new jt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){return new jt(St(e.values,t.values,n))}}class Nt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Nt)return e;if("string"==typeof e){const t=Tt.parse(e);if(!t)return;return new Nt([t])}if(!Array.isArray(e))return;const t=[];for(const n of e){if("string"!=typeof n)return;const e=Tt.parse(n);if(!e)return;t.push(e)}return new Nt(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb";const r=[];if(e.values.length!=t.values.length)throw new Error("colorArray: Arrays have mismatched length (".concat(e.values.length," vs. ").concat(t.values.length,"), cannot interpolate."));for(let o=0;o<e.values.length;o++)r.push(Tt.interpolate(e.values[o],t.values[o],n,i));return new Nt(r)}}class Ot extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Bt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Lt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Lt)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const n=e[t],i=e[t+1];if("string"!=typeof n||!Bt.has(n))return;if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])return}return new Lt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){const i=e.values,r=t.values;if(i.length!==r.length)throw new Ot("Cannot interpolate values of different length. from: ".concat(e.toString(),", to: ").concat(t.toString()));const o=[];for(let a=0;a<i.length;a+=2){if(i[a]!==r[a])throw new Ot("Cannot interpolate values containing mismatched anchors. from[".concat(a,"]: ").concat(i[a],", to[").concat(a,"]: ").concat(r[a]));o.push(i[a]);const[e,t]=i[a+1],[s,l]=r[a+1];o.push([At(e,s,n),At(t,l,n)])}return new Lt(o)}}class zt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new zt({name:e,available:!1}):null}}class Rt{constructor(e,t,n){this.from=e,this.to=t,this.transition=n}static interpolate(e,t,n){return new Rt(e,t,n)}static parse(e){return e instanceof Rt?e:Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]?new Rt(e[0],e[1],e[2]):"object"==typeof e&&"string"==typeof e.from&&"string"==typeof e.to&&"number"==typeof e.transition?new Rt(e.from,e.to,e.transition):"string"==typeof e?new Rt(e,e,1):void 0}}function Vt(e,t,n,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value [".concat([e,t,n,i].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof i?[e,t,n,i]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Ut(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof Rt||e instanceof Tt||e instanceof Ft||e instanceof Mt||e instanceof It||e instanceof jt||e instanceof Nt||e instanceof Lt||e instanceof zt)return!0;if(Array.isArray(e)){for(const t of e)if(!Ut(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Ut(e[t]))return!1;return!0}return!1}function qt(e){if(null===e)return Oe;if("string"==typeof e)return Le;if("boolean"==typeof e)return ze;if("number"==typeof e)return Be;if(e instanceof Tt)return Re;if(e instanceof Rt)return Ve;if(e instanceof Ft)return Ze;if(e instanceof Mt)return He;if(e instanceof It)return Ge;if(e instanceof jt)return Ye;if(e instanceof Nt)return We;if(e instanceof Lt)return Ke;if(e instanceof zt)return Xe;if(Array.isArray(e)){const t=e.length;let n;for(const i of e){const e=qt(i);if(n){if(n===e)continue;n=qe;break}n=e}return $e(n||qe,t)}return Ue}function Zt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Tt||e instanceof Rt||e instanceof Mt||e instanceof It||e instanceof jt||e instanceof Nt||e instanceof Lt||e instanceof zt?e.toString():JSON.stringify(e)}class Ht{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!Ut(e[1]))return t.error("invalid value");const n=e[1];let i=qt(n);const r=t.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new Ht(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Gt={string:Le,number:Be,boolean:ze,object:Ue};class Wt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,i=1;const r=e[0];if("array"===r){let r,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in Gt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=Gt[n],i++}else r=qe;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],i++}n=$e(r,o)}else{if(!Gt[r])throw new Error("Types doesn't contain name = ".concat(r));n=Gt[r]}const o=[];for(;i<e.length;i++){const n=t.parse(e[i],i,qe);if(!n)return null;o.push(n)}return new Wt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!et(this.type,qt(n)))return n;if(t===this.args.length-1)throw new Ot("Expected value to be of type ".concat(Qe(this.type),", but found ").concat(Qe(qt(n))," instead."))}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Yt={"to-boolean":ze,"to-color":Re,"to-number":Be,"to-string":Le};class Xt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!Yt[n])throw new Error("Can't parse ".concat(n," as it is not part of the known types"));if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const i=Yt[n],r=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,qe);if(!n)return null;r.push(n)}return new Xt(i,r)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,n;for(const i of this.args){if(t=i.evaluate(e),n=null,t instanceof Tt)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?"Invalid rgba value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Vt(t[0],t[1],t[2],t[3]),!n))return new Tt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Ot(n||"Could not parse color from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"padding":{let t;for(const n of this.args){t=n.evaluate(e);const i=It.parse(t);if(i)return i}throw new Ot("Could not parse padding from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"numberArray":{let t;for(const n of this.args){t=n.evaluate(e);const i=jt.parse(t);if(i)return i}throw new Ot("Could not parse numberArray from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"colorArray":{let t;for(const n of this.args){t=n.evaluate(e);const i=Nt.parse(t);if(i)return i}throw new Ot("Could not parse colorArray from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"variableAnchorOffsetCollection":{let t;for(const n of this.args){t=n.evaluate(e);const i=Lt.parse(t);if(i)return i}throw new Ot("Could not parse variableAnchorOffsetCollection from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}case"number":{let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const i=Number(t);if(!isNaN(i))return i}throw new Ot("Could not convert ".concat(JSON.stringify(t)," to number."))}case"formatted":return Mt.fromString(Zt(this.args[0].evaluate(e)));case"resolvedImage":return zt.fromString(Zt(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Zt(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Kt=["Unknown","Point","LineString","Polygon"];class $t{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Kt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Tt.parse(e),this._parseColorCache.set(e,t)),t}}class Qt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ne,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.registry=e,this.path=n,this.key=n.map(e=>"[".concat(e,"]")).join(""),this.scope=r,this.errors=o,this.expectedType=i,this._isConstant=t}parse(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,i)._parse(e,r):this._parse(e,r)}_parse(e,t){function n(e,t,n){return"assert"===n?new Wt(t,[e]):"coerce"===n?new Xt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found ".concat(typeof i,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const r=this.registry[i];if(r){let i=r.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,r=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind){if("projectionDefinition"===e.kind&&["string","array"].includes(r.kind)||["color","formatted","resolvedImage"].includes(e.kind)&&["value","string"].includes(r.kind)||["padding","numberArray"].includes(e.kind)&&["value","number","array"].includes(r.kind)||"colorArray"===e.kind&&["value","string","array"].includes(r.kind)||"variableAnchorOffsetCollection"===e.kind&&["value","array"].includes(r.kind))i=n(i,e,t.typeAnnotation||"coerce");else if(this.checkSubtype(e,r))return null}else i=n(i,e,t.typeAnnotation||"assert")}if(!(i instanceof Ht)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const t=new $t;try{i=new Ht(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}concat(e,t,n){const i="number"==typeof e?this.path.concat(e):this.path,r=n?this.scope.concat(n):this.scope;return new Qt(this.registry,this._isConstant,i,t||null,r,this.errors)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r="".concat(this.key).concat(n.map(e=>"[".concat(e,"]")).join(""));this.errors.push(new je(r,e))}checkSubtype(e,t){const n=et(e,t);return n&&this.error(n),n}}class Jt{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));const n=[];for(let r=1;r<e.length-1;r+=2){const i=e[r];if("string"!=typeof i)return t.error("Expected string, but found ".concat(typeof i," instead."),r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return i?new Jt(n,i):null}outputDefined(){return this.result.outputDefined()}}class en{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new en(n,t.scope.get(n)):t.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class tn{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,Be),i=t.parse(e[2],2,$e(t.expectedType||qe));return n&&i?new tn(i.type.itemType,n,i):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Ot("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new Ot("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new Ot("Array index must be an integer, but found ".concat(t," instead."));return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class nn{constructor(e,t){this.type=ze,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,qe),i=t.parse(e[2],2,qe);return n&&i?tt(n.type,[ze,Le,Be,Oe,qe])?new nn(n,i):t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Qe(n.type)," instead")):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!nt(t,["boolean","string","number","null"]))throw new Ot("Expected first argument to be of type boolean, string, number or null, but found ".concat(Qe(qt(t))," instead."));if(!nt(n,["string","array"]))throw new Ot("Expected second argument to be of type array or string, but found ".concat(Qe(qt(n))," instead."));return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class rn{constructor(e,t,n){this.type=Be,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 2 or 3 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,qe),i=t.parse(e[2],2,qe);if(!n||!i)return null;if(!tt(n.type,[ze,Le,Be,Oe,qe]))return t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Qe(n.type)," instead"));if(4===e.length){const r=t.parse(e[3],3,Be);return r?new rn(n,i,r):null}return new rn(n,i)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!nt(t,["boolean","string","number","null"]))throw new Ot("Expected first argument to be of type boolean, string, number or null, but found ".concat(Qe(qt(t))," instead."));let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),nt(n,["string"])){const e=n.indexOf(t,i);return-1===e?-1:[...n.slice(0,e)].length}if(nt(n,["array"]))return n.indexOf(t,i);throw new Ot("Expected second argument to be of type array or string, but found ".concat(Qe(qt(n))," instead."))}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class on{constructor(e,t,n,i,r,o){this.inputType=e,this.type=t,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const r={},o=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const c=t.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,qt(e)))return null}else n=qt(e);if(void 0!==r[String(e)])return c.error("Branch labels must be unique.");r[String(e)]=o.length}const u=t.parse(s,l,i);if(!u)return null;i=i||u.type,o.push(u)}const a=t.parse(e[1],1,qe);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,i);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new on(n,i,a,r,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(qt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class an{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i=[];for(let o=1;o<e.length-1;o+=2){const r=t.parse(e[o],o,ze);if(!r)return null;const a=t.parse(e[o+1],o+1,n);if(!a)return null;i.push([r,a]),n=n||a.type}const r=t.parse(e[e.length-1],e.length-1,n);if(!r)return null;if(!n)throw new Error("Can't infer output type");return new an(n,i,r)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(e=>{let[t,n]=e;return n.outputDefined()})&&this.otherwise.outputDefined()}}class sn{constructor(e,t,n,i){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 2 or 3 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,qe),i=t.parse(e[2],2,Be);if(!n||!i)return null;if(!tt(n.type,[$e(qe),Le,qe]))return t.error("Expected first argument to be of type array or string, but found ".concat(Qe(n.type)," instead"));if(4===e.length){const r=t.parse(e[3],3,Be);return r?new sn(n.type,n,i,r):null}return new sn(n.type,n,i)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),nt(t,["string"]))return[...t].slice(n,i).join("");if(nt(t,["array"]))return t.slice(n,i);throw new Ot("Expected first argument to be of type array or string, but found ".concat(Qe(qt(t))," instead."))}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ln(e,t){const n=e.length-1;let i,r,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),i=e[s],r=e[s+1],i<=t){if(s===n||t<r)return s;o=s+1}else{if(!(i>t))throw new Ot("Input is not a number.");a=s-1}return 0}class cn{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,r]of n)this.labels.push(i),this.outputs.push(r)}static parse(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,Be);if(!n)return null;const i=[];let r=null;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],a=e[o+1],s=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,r);if(!c)return null;r=r||c.type,i.push([n,c])}return new cn(r,n,i)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;return i>=t[r-1]?n[r-1].evaluate(e):n[ln(t,i)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function un(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hn,dn,pn=function(){if(dn)return hn;function e(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}return dn=1,hn=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var r=this.sampleCurveX(n)-e;if(Math.abs(r)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var a=0,s=1;for(n=e,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-e)<t));i++)e>r?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},hn}(),fn=un(pn);class mn{constructor(e,t,n,i,r){this.type=e,this.operator=t,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[o,a]of r)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,n,i){let r=0;if("exponential"===e.name)r=gn(t,e.base,n,i);else if("linear"===e.name)r=gn(t,1,n,i);else if("cubic-bezier"===e.name){const o=e.controlPoints;r=new fn(o[0],o[1],o[2],o[3]).solve(gn(t,1,n,i))}return r}static parse(e,t){let[n,i,r,...o]=e;if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const e=i[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return t.error("Unknown interpolation type ".concat(String(i[0])),1,0);{const e=i.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(r=t.parse(r,2,Be),!r)return null;const a=[];let s=null;"interpolate-hcl"!==n&&"interpolate-lab"!==n||t.expectedType==We?t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType):s=Re;for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],i=l+3,r=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(n,r,s);if(!c)return null;s=s||c.type,a.push([e,c])}return it(s,Be)||it(s,Ve)||it(s,Re)||it(s,Ge)||it(s,Ye)||it(s,We)||it(s,Ke)||it(s,$e(Be))?new mn(s,n,i,r,a):t.error("Type ".concat(Qe(s)," is not interpolatable."))}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;if(i>=t[r-1])return n[r-1].evaluate(e);const o=ln(t,i),a=mn.interpolationFactor(this.interpolation,i,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return At(s,l,a);case"color":return Tt.interpolate(s,l,a);case"padding":return It.interpolate(s,l,a);case"colorArray":return Nt.interpolate(s,l,a);case"numberArray":return jt.interpolate(s,l,a);case"variableAnchorOffsetCollection":return Lt.interpolate(s,l,a);case"array":return St(s,l,a);case"projectionDefinition":return Rt.interpolate(s,l,a)}case"interpolate-hcl":switch(this.type.kind){case"color":return Tt.interpolate(s,l,a,"hcl");case"colorArray":return Nt.interpolate(s,l,a,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Tt.interpolate(s,l,a,"lab");case"colorArray":return Nt.interpolate(s,l,a,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function gn(e,t,n,i){const r=i-n,o=e-n;return 0===r?0:1===t?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}const yn={color:Tt.interpolate,number:At,padding:It.interpolate,numberArray:jt.interpolate,colorArray:Nt.interpolate,variableAnchorOffsetCollection:Lt.interpolate,array:St};class vn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n=null;const i=t.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const a of e.slice(1)){const e=t.parse(a,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,r.push(e)}if(!n)throw new Error("No output type");const o=i&&r.some(e=>et(i,e.type));return new vn(o?qe:n,r)}evaluate(e){let t,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(e),n&&n instanceof zt&&!n.available&&(t||(t=n.name),n=null,i===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function _n(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function xn(e,t,n,i){return 0===i.compare(t,n)}function bn(e,t,n){const i="=="!==e&&"!="!==e;return class r{constructor(e,t,n){this.type=ze,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,qe);if(!o)return null;if(!_n(n,o.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Qe(o.type),"'."));let a=t.parse(e[2],2,qe);if(!a)return null;if(!_n(n,a.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Qe(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '".concat(Qe(o.type),"' and '").concat(Qe(a.type),"'."));i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Wt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Wt(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,Ze),!s)return null}return new r(o,a,s)}evaluate(r){const o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const t=qt(o),n=qt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Ot('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(t.kind,", ").concat(n.kind,") instead."))}if(this.collator&&!i&&this.hasUntypedArgument){const e=qt(o),n=qt(a);if("string"!==e.kind||"string"!==n.kind)return t(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):t(r,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const wn=bn("==",function(e,t,n){return t===n},xn),Dn=bn("!=",function(e,t,n){return t!==n},function(e,t,n,i){return!xn(0,t,n,i)}),En=bn("<",function(e,t,n){return t<n},function(e,t,n,i){return i.compare(t,n)<0}),Cn=bn(">",function(e,t,n){return t>n},function(e,t,n,i){return i.compare(t,n)>0}),An=bn("<=",function(e,t,n){return t<=n},function(e,t,n,i){return i.compare(t,n)<=0}),Sn=bn(">=",function(e,t,n){return t>=n},function(e,t,n,i){return i.compare(t,n)>=0});class Tn{constructor(e,t,n){this.type=Ze,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const i=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ze);if(!i)return null;const r=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ze);if(!r)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,Le),!o)?null:new Tn(i,r,o)}evaluate(e){return new Ft(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class Fn{constructor(e,t,n,i,r){this.type=Le,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Be);if(!n)return null;const i=e[2];if("object"!=typeof i||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=t.parse(i.locale,1,Le),!r))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,Le),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=t.parse(i["min-fraction-digits"],1,Be),!a))return null;let s=null;return i["max-fraction-digits"]&&(s=t.parse(i["max-fraction-digits"],1,Be),!s)?null:new Fn(n,r,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class kn{constructor(e){this.type=He,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const i=[];let r=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(r&&"object"==typeof n&&!Array.isArray(n)){r=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,Be),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,$e(Le)),!o))return null;let a=null;if(n["text-color"]&&(a=t.parse(n["text-color"],1,Re),!a))return null;let s=null;if(n["vertical-align"]){if("string"==typeof n["vertical-align"]&&!kt.includes(n["vertical-align"]))return t.error("'vertical-align' must be one of: 'bottom', 'center', 'top' but found '".concat(n["vertical-align"],"' instead."));if(s=t.parse(n["vertical-align"],1,Le),!s)return null}const l=i[i.length-1];l.scale=e,l.font=o,l.textColor=a,l.verticalAlign=s}else{const n=t.parse(e[o],1,qe);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:n,scale:null,font:null,textColor:null,verticalAlign:null})}}return new kn(i)}evaluate(e){return new Mt(this.sections.map(t=>{const n=t.content.evaluate(e);return qt(n)===Xe?new Pt("",n,null,null,null,t.verticalAlign?t.verticalAlign.evaluate(e):null):new Pt(Zt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null,t.verticalAlign?t.verticalAlign.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class Pn{constructor(e){this.type=Xe,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Le);return n?new Pn(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=zt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class Mn{constructor(e){this.type=Be,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found ".concat(Qe(n.type)," instead.")):new Mn(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new Ot("Expected value to be of type string or array, but found ".concat(Qe(qt(t))," instead."))}eachChild(e){e(this.input)}outputDefined(){return!1}}const In=8192;function jn(e,t){const n=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,r=Math.pow(2,t.z);return[Math.round(n*r*In),Math.round(i*r*In)]}function Nn(e,t){const n=Math.pow(2,t.z);return[(r=(e[0]/In+t.x)/n,360*r-180),(i=(e[1]/In+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90)];var i,r}function On(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Bn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Ln(e,t,n){const i=e[0]-t[0],r=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return i*a-o*r==0&&i*o<=0&&r*a<=0}function zn(e,t,n,i){return 0!=(r=[i[0]-n[0],i[1]-n[1]])[0]*(o=[t[0]-e[0],t[1]-e[1]])[1]-r[1]*o[0]&&!(!Hn(e,t,n,i)||!Hn(n,i,e,t));var r,o}function Rn(e,t,n){for(const i of n)for(let n=0;n<i.length-1;++n)if(zn(e,t,i[n],i[n+1]))return!0;return!1}function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;for(const s of t)for(let t=0;t<s.length-1;t++){if(Ln(e,s[t],s[t+1]))return n;(o=s[t])[1]>(r=e)[1]!=(a=s[t+1])[1]>r[1]&&r[0]<(a[0]-o[0])*(r[1]-o[1])/(a[1]-o[1])+o[0]&&(i=!i)}var r,o,a;return i}function Un(e,t){for(const n of t)if(Vn(e,n))return!0;return!1}function qn(e,t){for(const n of e)if(!Vn(n,t))return!1;for(let n=0;n<e.length-1;++n)if(Rn(e[n],e[n+1],t))return!1;return!0}function Zn(e,t){for(const n of t)if(qn(e,n))return!0;return!1}function Hn(e,t,n,i){const r=i[0]-n[0],o=i[1]-n[1],a=(e[0]-n[0])*o-r*(e[1]-n[1]),s=(t[0]-n[0])*o-r*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Gn(e,t,n){const i=[];for(let r=0;r<e.length;r++){const o=[];for(let i=0;i<e[r].length;i++){const a=jn(e[r][i],n);On(t,a),o.push(a)}i.push(o)}return i}function Wn(e,t,n){const i=[];for(let r=0;r<e.length;r++){const o=Gn(e[r],t,n);i.push(o)}return i}function Yn(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const t=.5*i;let r=e[0]-n[0]>t?-i:n[0]-e[0]>t?i:0;0===r&&(r=e[0]-n[2]>t?-i:n[2]-e[0]>t?i:0),e[0]+=r}On(t,e)}function Xn(e,t,n,i){const r=Math.pow(2,i.z)*In,o=[i.x*In,i.y*In],a=[];for(const s of e)for(const e of s){const i=[e.x+o[0],e.y+o[1]];Yn(i,t,n,r),a.push(i)}return a}function Kn(e,t,n,i){const r=Math.pow(2,i.z)*In,o=[i.x*In,i.y*In],a=[];for(const l of e){const e=[];for(const n of l){const i=[n.x+o[0],n.y+o[1]];On(t,i),e.push(i)}a.push(e)}if(t[2]-t[0]<=r/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const i of e)Yn(i,t,n,r)}var s;return a}class $n{constructor(e,t){this.type=ze,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(Ut(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const n of t.features){const{type:t,coordinates:i}=n.geometry;"Polygon"===t&&e.push(i),"MultiPolygon"===t&&e.push(...i)}if(e.length)return new $n(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new $n(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new $n(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const o=Gn(t.coordinates,i,r),a=Xn(e.geometry(),n,i,r);if(!Bn(n,i))return!1;for(const e of a)if(!Vn(e,o))return!1}if("MultiPolygon"===t.type){const o=Wn(t.coordinates,i,r),a=Xn(e.geometry(),n,i,r);if(!Bn(n,i))return!1;for(const e of a)if(!Un(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){const o=Gn(t.coordinates,i,r),a=Kn(e.geometry(),n,i,r);if(!Bn(n,i))return!1;for(const e of a)if(!qn(e,o))return!1}if("MultiPolygon"===t.type){const o=Wn(t.coordinates,i,r),a=Kn(e.geometry(),n,i,r);if(!Bn(n,i))return!1;for(const e of a)if(!Zn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Qn=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&n(t[o],t[i])<0&&(i=o),n(t[i],r)>=0)break;t[e]=t[i],e=i}t[e]=r}};function Jn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ti;for(;i>n;){if(i-n>600){const o=i-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);Jn(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(i,Math.floor(t+(o-a)*l/o+c)),r)}const o=e[t];let a=n,s=i;for(ei(e,n,t),r(e[i],o)>0&&ei(e,n,i);a<s;){for(ei(e,a,s),a++,s--;r(e[a],o)<0;)a++;for(;r(e[s],o)>0;)s--}0===r(e[n],o)?ei(e,n,s):(s++,ei(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}}function ei(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ti(e,t){return e<t?-1:e>t?1:0}function ni(e,t){if(e.length<=1)return[e];const n=[];let i,r;for(const o of e){const e=ri(o);0!==e&&(o.area=Math.abs(e),void 0===r&&(r=e<0),r===e<0?(i&&n.push(i),i=[o]):i.push(o))}if(i&&n.push(i),t>1)for(let o=0;o<n.length;o++)n[o].length<=t||(Jn(n[o],t,1,n[o].length-1,ii),n[o]=n[o].slice(0,t));return n}function ii(e,t){return t.area-e.area}function ri(e){let t=0;for(let n,i,r=0,o=e.length,a=o-1;r<o;a=r++)n=e[r],i=e[a],t+=(i.x-n.x)*(n.y+i.y);return t}const oi=1/298.257223563,ai=oi*(2-oi),si=Math.PI/180;class li{constructor(e){const t=6378.137*si*1e3,n=Math.cos(e*si),i=1/(1-ai*(1-n*n)),r=Math.sqrt(i);this.kx=t*r*n,this.ky=t*r*i*(1-ai)}distance(e,t){const n=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(e,t){let n,i,r,o,a=1/0;for(let s=0;s<e.length-1;s++){let l=e[s][0],c=e[s][1],u=this.wrap(e[s+1][0]-l)*this.kx,h=(e[s+1][1]-c)*this.ky,d=0;0===u&&0===h||(d=(this.wrap(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*h)/(u*u+h*h),d>1?(l=e[s+1][0],c=e[s+1][1]):d>0&&(l+=u/this.kx*d,c+=h/this.ky*d)),u=this.wrap(t[0]-l)*this.kx,h=(t[1]-c)*this.ky;const p=u*u+h*h;p<a&&(a=p,n=l,i=c,r=s,o=d)}return{point:[n,i],index:r,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function ci(e,t){return t[0]-e[0]}function ui(e){return e[1]-e[0]+1}function hi(e,t){return e[1]>=e[0]&&e[1]<t}function di(e,t){if(e[0]>e[1])return[null,null];const n=ui(e);if(t){if(2===n)return[e,null];const t=Math.floor(n/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===n)return[e,null];const i=Math.floor(n/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}function pi(e,t){if(!hi(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=t[0];i<=t[1];++i)On(n,e[i]);return n}function fi(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const e of n)On(t,e);return t}function mi(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function gi(e,t,n){if(!mi(e)||!mi(t))return NaN;let i=0,r=0;return e[2]<t[0]&&(i=t[0]-e[2]),e[0]>t[2]&&(i=e[0]-t[2]),e[1]>t[3]&&(r=e[1]-t[3]),e[3]<t[1]&&(r=t[1]-e[3]),n.distance([0,0],[i,r])}function yi(e,t,n){const i=n.pointOnLine(t,e);return n.distance(e,i.point)}function vi(e,t,n,i,r){const o=Math.min(yi(e,[n,i],r),yi(t,[n,i],r)),a=Math.min(yi(n,[e,t],r),yi(i,[e,t],r));return Math.min(o,a)}function _i(e,t,n,i,r){if(!hi(t,e.length)||!hi(i,n.length))return 1/0;let o=1/0;for(let a=t[0];a<t[1];++a){const t=e[a],s=e[a+1];for(let e=i[0];e<i[1];++e){const i=n[e],a=n[e+1];if(zn(t,s,i,a))return 0;o=Math.min(o,vi(t,s,i,a,r))}}return o}function xi(e,t,n,i,r){if(!hi(t,e.length)||!hi(i,n.length))return NaN;let o=1/0;for(let a=t[0];a<=t[1];++a)for(let t=i[0];t<=i[1];++t)if(o=Math.min(o,r.distance(e[a],n[t])),0===o)return o;return o}function bi(e,t,n){if(Vn(e,t,!0))return 0;let i=1/0;for(const r of t){const t=r[0],o=r[r.length-1];if(t!==o&&(i=Math.min(i,yi(e,[o,t],n)),0===i))return i;const a=n.pointOnLine(r,e);if(i=Math.min(i,n.distance(e,a.point)),0===i)return i}return i}function wi(e,t,n,i){if(!hi(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(Vn(e[o],n,!0))return 0;let r=1/0;for(let o=t[0];o<t[1];++o){const t=e[o],a=e[o+1];for(const e of n)for(let n=0,o=e.length,s=o-1;n<o;s=n++){const o=e[s],l=e[n];if(zn(t,a,o,l))return 0;r=Math.min(r,vi(t,a,o,l,i))}}return r}function Di(e,t){for(const n of e)for(const e of n)if(Vn(e,t,!0))return!0;return!1}function Ei(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const r=fi(e),o=fi(t);if(i!==1/0&&gi(r,o,n)>=i)return i;if(Bn(r,o)){if(Di(e,t))return 0}else if(Di(t,e))return 0;let a=1/0;for(const s of e)for(let e=0,i=s.length,r=i-1;e<i;r=e++){const i=s[r],o=s[e];for(const e of t)for(let t=0,r=e.length,s=r-1;t<r;s=t++){const r=e[s],l=e[t];if(zn(i,o,r,l))return 0;a=Math.min(a,vi(i,o,r,l,n))}}return a}function Ci(e,t,n,i,r,o){if(!o)return;const a=gi(pi(i,o),r,n);a<t&&e.push([a,o,[0,0]])}function Ai(e,t,n,i,r,o,a){if(!o||!a)return;const s=gi(pi(i,o),pi(r,a),n);s<t&&e.push([s,o,a])}function Si(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=Math.min(i.distance(e[0],n[0][0]),r);if(0===o)return o;const a=new Qn([[0,[0,e.length-1],[0,0]]],ci),s=fi(n);for(;a.length>0;){const r=a.pop();if(r[0]>=o)continue;const l=r[1],c=t?50:100;if(ui(l)<=c){if(!hi(l,e.length))return NaN;if(t){const t=wi(e,l,n,i);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=l[0];t<=l[1];++t){const r=bi(e[t],n,i);if(o=Math.min(o,r),0===o)return 0}}else{const n=di(l,t);Ci(a,o,i,e,s,n[0]),Ci(a,o,i,e,s,n[1])}}return o}function Ti(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=Math.min(o,r.distance(e[0],n[0]));if(0===a)return a;const s=new Qn([[0,[0,e.length-1],[0,n.length-1]]],ci);for(;s.length>0;){const o=s.pop();if(o[0]>=a)continue;const l=o[1],c=o[2],u=t?50:100,h=i?50:100;if(ui(l)<=u&&ui(c)<=h){if(!hi(l,e.length)&&hi(c,n.length))return NaN;let o;if(t&&i)o=_i(e,l,n,c,r),a=Math.min(a,o);else if(t&&!i){const t=e.slice(l[0],l[1]+1);for(let e=c[0];e<=c[1];++e)if(o=yi(n[e],t,r),a=Math.min(a,o),0===a)return a}else if(!t&&i){const t=n.slice(c[0],c[1]+1);for(let n=l[0];n<=l[1];++n)if(o=yi(e[n],t,r),a=Math.min(a,o),0===a)return a}else o=xi(e,l,n,c,r),a=Math.min(a,o)}else{const o=di(l,t),u=di(c,i);Ai(s,a,r,e,n,o[0],u[0]),Ai(s,a,r,e,n,o[0],u[1]),Ai(s,a,r,e,n,o[1],u[0]),Ai(s,a,r,e,n,o[1],u[1])}}return a}function Fi(e){return"MultiPolygon"===e.type?e.coordinates.map(e=>({type:"Polygon",coordinates:e})):"MultiLineString"===e.type?e.coordinates.map(e=>({type:"LineString",coordinates:e})):"MultiPoint"===e.type?e.coordinates.map(e=>({type:"Point",coordinates:e})):[e]}class ki{constructor(e,t){this.type=Be,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'distance' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(Ut(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new ki(t,t.features.map(e=>Fi(e.geometry)).flat());if("Feature"===t.type)return new ki(t,Fi(t.geometry));if("type"in t&&"coordinates"in t)return new ki(t,Fi(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=e.geometry(),i=n.flat().map(t=>Nn([t.x,t.y],e.canonical));if(0===n.length)return NaN;const r=new li(i[0][1]);let o=1/0;for(const a of t){switch(a.type){case"Point":o=Math.min(o,Ti(i,!1,[a.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Ti(i,!1,a.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Si(i,!1,a.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=e.geometry(),i=n.flat().map(t=>Nn([t.x,t.y],e.canonical));if(0===n.length)return NaN;const r=new li(i[0][1]);let o=1/0;for(const a of t){switch(a.type){case"Point":o=Math.min(o,Ti(i,!0,[a.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Ti(i,!0,a.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Si(i,!0,a.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const n=e.geometry();if(0===n.length||0===n[0].length)return NaN;const i=ni(n,0).map(t=>t.map(t=>t.map(t=>Nn([t.x,t.y],e.canonical)))),r=new li(i[0][0][0][1]);let o=1/0;for(const a of t)for(const e of i){switch(a.type){case"Point":o=Math.min(o,Si([a.coordinates],!1,e,r,o));break;case"LineString":o=Math.min(o,Si(a.coordinates,!0,e,r,o));break;case"Polygon":o=Math.min(o,Ei(e,a.coordinates,r,o))}if(0===o)return o}return o}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Pi{constructor(e){this.type=qe,this.key=e}static parse(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found ".concat(e.length-1," instead."));const n=e[1];return null==n?t.error("Global state property must be defined."):"string"!=typeof n?t.error("Global state property must be string, but found ".concat(typeof e[1]," instead.")):new Pi(n)}evaluate(e){var t;const n=null===(t=e.globals)||void 0===t?void 0:t.globalState;return n&&0!==Object.keys(n).length?xt(n,this.key):null}eachChild(){}outputDefined(){return!1}}const Mi={"==":wn,"!=":Dn,">":Cn,"<":En,">=":Sn,"<=":An,array:Wt,at:tn,boolean:Wt,case:an,coalesce:vn,collator:Tn,format:kn,image:Pn,in:nn,"index-of":rn,interpolate:mn,"interpolate-hcl":mn,"interpolate-lab":mn,length:Mn,let:Jt,literal:Ht,match:on,number:Wt,"number-format":Fn,object:Wt,slice:sn,step:cn,string:Wt,"to-boolean":Xt,"to-color":Xt,"to-number":Xt,"to-string":Xt,var:en,within:$n,distance:ki,"global-state":Pi};class Ii{constructor(e,t,n,i){this.name=e,this.type=t,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],i=Ii.definitions[n];if(!i)return t.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);const r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter(t=>{let[n]=t;return!Array.isArray(n)||n.length===e.length-1});let s=null;for(const[l,c]of a){s=new Qt(t.registry,Li,t.path,null,t.scope);const i=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],r=Array.isArray(l)?l[t-1]:l.type,a=s.parse(n,1+i.length,r);if(!a){o=!0;break}i.push(a)}if(!o)if(Array.isArray(l)&&l.length!==i.length)s.error("Expected ".concat(l.length," arguments, but found ").concat(i.length," instead."));else{for(let e=0;e<i.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=i[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Ii(n,r,c,i)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map(e=>{let[t]=e;return n=t,Array.isArray(n)?"(".concat(n.map(Qe).join(", "),")"):"(".concat(Qe(n.type),"...)");var n}).join(" | "),i=[];for(let r=1;r<e.length;r++){const n=t.parse(e[r],1+i.length);if(!n)return null;i.push(Qe(n.type))}t.error("Expected arguments of type ".concat(n,", but found (").concat(i.join(", "),") instead."))}return null}static register(e,t){Ii.definitions=t;for(const n in t)e[n]=Ii}}function ji(e,t){let[n,i,r,o]=t;n=n.evaluate(e),i=i.evaluate(e),r=r.evaluate(e);const a=o?o.evaluate(e):1,s=Vt(n,i,r,a);if(s)throw new Ot(s);return new Tt(n/255,i/255,r/255,a,!1)}function Ni(e,t){return e in t}function Oi(e,t){const n=t[e];return void 0===n?null:n}function Bi(e){return{type:e}}function Li(e){if(e instanceof en)return Li(e.boundExpression);if(e instanceof Ii&&"error"===e.name)return!1;if(e instanceof Tn)return!1;if(e instanceof $n)return!1;if(e instanceof ki)return!1;if(e instanceof Pi)return!1;const t=e instanceof Xt||e instanceof Wt;let n=!0;return e.eachChild(e=>{n=t?n&&Li(e):n&&e instanceof Ht}),!!n&&zi(e)&&Vi(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function zi(e){if(e instanceof Ii){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof $n)return!1;if(e instanceof ki)return!1;let t=!0;return e.eachChild(e=>{t&&!zi(e)&&(t=!1)}),t}function Ri(e){if(e instanceof Ii&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!Ri(e)&&(t=!1)}),t}function Vi(e,t){if(e instanceof Ii&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(e=>{n&&!Vi(e,t)&&(n=!1)}),n}function Ui(e){return{result:"success",value:e}}function qi(e){return{result:"error",value:e}}function Zi(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Hi(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Gi(e){return!!e.expression&&e.expression.interpolated}function Wi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Yi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&qt(e)===Ue}function Xi(e){return e}function Ki(e,t){const n=e.stops&&"object"==typeof e.stops[0][0],i=n||!(n||void 0!==e.property),r=e.type||(Gi(t)?"exponential":"interval"),o=function(e){switch(e.type){case"color":return Tt.parse;case"padding":return It.parse;case"numberArray":return jt.parse;case"colorArray":return Nt.parse;default:return null}}(t);if(o&&((e=Ie({},e)).stops&&(e.stops=e.stops.map(e=>[e[0],o(e[1])])),e.default=o(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==(a=e.colorSpace)&&"hcl"!==a&&"lab"!==a)throw new Error('Unknown color space: "'.concat(e.colorSpace,'"'));var a;const s=function(e){switch(e){case"exponential":return er;case"interval":return Ji;case"categorical":return Qi;case"identity":return tr;default:throw new Error('Unknown function type "'.concat(e,'"'))}}(r);let l,c;if("categorical"===r){l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}if(n){const n={},i=[];for(let t=0;t<e.stops.length;t++){const r=e.stops[t],o=r[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},i.push(o)),n[o].stops.push([r[0].value,r[1]])}const r=[];for(const e of i)r.push([n[e].zoom,Ki(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:mn.interpolationFactor.bind(void 0,o),zoomStops:r.map(e=>e[0]),evaluate:(n,i)=>{let{zoom:o}=n;return er({stops:r,base:e.base},t,o).evaluate(o,i)}}}if(i){const n="exponential"===r?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:mn.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map(e=>e[0]),evaluate:n=>{let{zoom:i}=n;return s(e,t,i,l,c)}}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[e.property]:void 0;return void 0===r?$i(e.default,t.default):s(e,t,r,l,c)}}}function $i(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Qi(e,t,n,i,r){return $i(typeof n===r?i[n]:void 0,e.default,t.default)}function Ji(e,t,n){if("number"!==Wi(n))return $i(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const r=ln(e.stops.map(e=>e[0]),n);return e.stops[r][1]}function er(e,t,n){const i=void 0!==e.base?e.base:1;if("number"!==Wi(n))return $i(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const o=ln(e.stops.map(e=>e[0]),n),a=function(e,t,n,i){const r=i-n,o=e-n;return 0===r?0:1===t?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}(n,i,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],c=yn[t.type]||Xi;return"function"==typeof s.evaluate?{evaluate(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const r=s.evaluate.apply(void 0,n),o=l.evaluate.apply(void 0,n);if(void 0!==r&&void 0!==o)return c(r,o,a,e.colorSpace)}}:c(s,l,a,e.colorSpace)}function tr(e,t,n){switch(t.type){case"color":n=Tt.parse(n);break;case"formatted":n=Mt.fromString(n.toString());break;case"resolvedImage":n=zt.fromString(n.toString());break;case"padding":n=It.parse(n);break;case"colorArray":n=Nt.parse(n);break;case"numberArray":n=jt.parse(n);break;default:Wi(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0)}return $i(n,e.default,t.default)}Ii.register(Mi,{error:[{kind:"error"},[Le],(e,t)=>{let[n]=t;throw new Ot(n.evaluate(e))}],typeof:[Le,[qe],(e,t)=>{let[n]=t;return Qe(qt(n.evaluate(e)))}],"to-rgba":[$e(Be,4),[Re],(e,t)=>{let[n]=t;const[i,r,o,a]=n.evaluate(e).rgb;return[255*i,255*r,255*o,a]}],rgb:[Re,[Be,Be,Be],ji],rgba:[Re,[Be,Be,Be,Be],ji],has:{type:ze,overloads:[[[Le],(e,t)=>{let[n]=t;return Ni(n.evaluate(e),e.properties())}],[[Le,Ue],(e,t)=>{let[n,i]=t;return Ni(n.evaluate(e),i.evaluate(e))}]]},get:{type:qe,overloads:[[[Le],(e,t)=>{let[n]=t;return Oi(n.evaluate(e),e.properties())}],[[Le,Ue],(e,t)=>{let[n,i]=t;return Oi(n.evaluate(e),i.evaluate(e))}]]},"feature-state":[qe,[Le],(e,t)=>{let[n]=t;return Oi(n.evaluate(e),e.featureState||{})}],properties:[Ue,[],e=>e.properties()],"geometry-type":[Le,[],e=>e.geometryType()],id:[qe,[],e=>e.id()],zoom:[Be,[],e=>e.globals.zoom],"heatmap-density":[Be,[],e=>e.globals.heatmapDensity||0],elevation:[Be,[],e=>e.globals.elevation||0],"line-progress":[Be,[],e=>e.globals.lineProgress||0],accumulated:[qe,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[Be,Bi(Be),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[Be,Bi(Be),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:Be,overloads:[[[Be,Be],(e,t)=>{let[n,i]=t;return n.evaluate(e)-i.evaluate(e)}],[[Be],(e,t)=>{let[n]=t;return-n.evaluate(e)}]]},"/":[Be,[Be,Be],(e,t)=>{let[n,i]=t;return n.evaluate(e)/i.evaluate(e)}],"%":[Be,[Be,Be],(e,t)=>{let[n,i]=t;return n.evaluate(e)%i.evaluate(e)}],ln2:[Be,[],()=>Math.LN2],pi:[Be,[],()=>Math.PI],e:[Be,[],()=>Math.E],"^":[Be,[Be,Be],(e,t)=>{let[n,i]=t;return Math.pow(n.evaluate(e),i.evaluate(e))}],sqrt:[Be,[Be],(e,t)=>{let[n]=t;return Math.sqrt(n.evaluate(e))}],log10:[Be,[Be],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN10}],ln:[Be,[Be],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))}],log2:[Be,[Be],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN2}],sin:[Be,[Be],(e,t)=>{let[n]=t;return Math.sin(n.evaluate(e))}],cos:[Be,[Be],(e,t)=>{let[n]=t;return Math.cos(n.evaluate(e))}],tan:[Be,[Be],(e,t)=>{let[n]=t;return Math.tan(n.evaluate(e))}],asin:[Be,[Be],(e,t)=>{let[n]=t;return Math.asin(n.evaluate(e))}],acos:[Be,[Be],(e,t)=>{let[n]=t;return Math.acos(n.evaluate(e))}],atan:[Be,[Be],(e,t)=>{let[n]=t;return Math.atan(n.evaluate(e))}],min:[Be,Bi(Be),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[Be,Bi(Be),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[Be,[Be],(e,t)=>{let[n]=t;return Math.abs(n.evaluate(e))}],round:[Be,[Be],(e,t)=>{let[n]=t;const i=n.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Be,[Be],(e,t)=>{let[n]=t;return Math.floor(n.evaluate(e))}],ceil:[Be,[Be],(e,t)=>{let[n]=t;return Math.ceil(n.evaluate(e))}],"filter-==":[ze,[Le,qe],(e,t)=>{let[n,i]=t;return e.properties()[n.value]===i.value}],"filter-id-==":[ze,[qe],(e,t)=>{let[n]=t;return e.id()===n.value}],"filter-type-==":[ze,[Le],(e,t)=>{let[n]=t;return e.geometryType()===n.value}],"filter-<":[ze,[Le,qe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r<o}],"filter-id-<":[ze,[qe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[ze,[Le,qe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r>o}],"filter-id->":[ze,[qe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[ze,[Le,qe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[ze,[qe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[ze,[Le,qe],(e,t)=>{let[n,i]=t;const r=e.properties()[n.value],o=i.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[ze,[qe],(e,t)=>{let[n]=t;const i=e.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[ze,[qe],(e,t)=>{let[n]=t;return n.value in e.properties()}],"filter-has-id":[ze,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[ze,[$e(Le)],(e,t)=>{let[n]=t;return n.value.indexOf(e.geometryType())>=0}],"filter-id-in":[ze,[$e(qe)],(e,t)=>{let[n]=t;return n.value.indexOf(e.id())>=0}],"filter-in-small":[ze,[Le,$e(qe)],(e,t)=>{let[n,i]=t;return i.value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[ze,[Le,$e(qe)],(e,t)=>{let[n,i]=t;return function(e,t,n,i){for(;n<=i;){const r=n+i>>1;if(t[r]===e)return!0;t[r]>e?i=r-1:n=r+1}return!1}(e.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:ze,overloads:[[[ze,ze],(e,t)=>{let[n,i]=t;return n.evaluate(e)&&i.evaluate(e)}],[Bi(ze),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:ze,overloads:[[[ze,ze],(e,t)=>{let[n,i]=t;return n.evaluate(e)||i.evaluate(e)}],[Bi(ze),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[ze,[ze],(e,t)=>{let[n]=t;return!n.evaluate(e)}],"is-supported-script":[ze,[Le],(e,t)=>{let[n]=t;const i=e.globals&&e.globals.isSupportedScript;return!i||i(n.evaluate(e))}],upcase:[Le,[Le],(e,t)=>{let[n]=t;return n.evaluate(e).toUpperCase()}],downcase:[Le,[Le],(e,t)=>{let[n]=t;return n.evaluate(e).toLowerCase()}],concat:[Le,Bi(qe),(e,t)=>t.map(t=>Zt(t.evaluate(e))).join("")],"resolved-locale":[Le,[Ze],(e,t)=>{let[n]=t;return n.evaluate(e).resolvedLocale()}]});class nr{constructor(e,t,n){this.expression=e,this._warningHistory={},this._evaluator=new $t,this._defaultValue=t?function(e){if("color"===e.type&&Yi(e.default))return new Tt(0,0,0,0);switch(e.type){case"color":return Tt.parse(e.default)||null;case"padding":return It.parse(e.default)||null;case"numberArray":return jt.parse(e.default)||null;case"colorArray":return Nt.parse(e.default)||null;case"variableAnchorOffsetCollection":return Lt.parse(e.default)||null;case"projectionDefinition":return Rt.parse(e.default)||null;default:return void 0===e.default?null:e.default}}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null,this._globalState=n}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._globalState&&(e=hr(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,i,r,o){this._globalState&&(e=hr(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Ot("Expected value to be one of ".concat(Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", "),", but found ").concat(JSON.stringify(e)," instead."));return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function ir(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Mi}function rr(e,t,n){const i=new Qt(Mi,Li,[],t?function(e){const t={color:Re,string:Le,number:Be,enum:Le,boolean:ze,formatted:He,padding:Ge,numberArray:Ye,colorArray:We,projectionDefinition:Ve,resolvedImage:Xe,variableAnchorOffsetCollection:Ke};return"array"===e.type?$e(t[e.value]||qe,e.length):t[e.type]}(t):void 0),r=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Ui(new nr(r,t,n)):qi(i.errors)}class or{constructor(e,t,n){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ri(t.expression),this.globalStateRefs=ur(t.expression),this._globalState=n}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._globalState&&(e=hr(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,o)}evaluate(e,t,n,i,r,o){return this._globalState&&(e=hr(e,this._globalState)),this._styleExpression.evaluate(e,t,n,i,r,o)}}class ar{constructor(e,t,n,i,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ri(t.expression),this.globalStateRefs=ur(t.expression),this.interpolationType=i,this._globalState=r}evaluateWithoutErrorHandling(e,t,n,i,r,o){return this._globalState&&(e=hr(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,o)}evaluate(e,t,n,i,r,o){return this._globalState&&(e=hr(e,this._globalState)),this._styleExpression.evaluate(e,t,n,i,r,o)}interpolationFactor(e,t,n){return this.interpolationType?mn.interpolationFactor(this.interpolationType,e,t,n):0}}function sr(e,t,n){const i=rr(e,t,n);if("error"===i.result)return i;const r=i.value.expression,o=zi(r);if(!o&&!Zi(t))return qi([new je("","data expressions not supported")]);const a=Vi(r,["zoom"]);if(!a&&!Hi(t))return qi([new je("","zoom expressions not supported")]);const s=cr(r);return s||a?s instanceof je?qi([s]):s instanceof mn&&!Gi(t)?qi([new je("",'"interpolate" expressions cannot be used with this property')]):Ui(s?new ar(o?"camera":"composite",i.value,s.labels,s instanceof mn?s.interpolation:void 0,n):new or(o?"constant":"source",i.value,n)):qi([new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class lr{constructor(e,t){this._parameters=e,this._specification=t,Ie(this,Ki(this._parameters,this._specification))}static deserialize(e){return new lr(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function cr(e){let t=null;if(e instanceof Jt)t=cr(e.result);else if(e instanceof vn){for(const n of e.args)if(t=cr(n),t)break}else(e instanceof cn||e instanceof mn)&&e.input instanceof Ii&&"zoom"===e.input.name&&(t=e);return t instanceof je||e.eachChild(e=>{const n=cr(e);n instanceof je?t=n:!t&&n?t=new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new je("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ur(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return e instanceof Pi&&t.add(e.key),e.eachChild(e=>{ur(e,t)}),t}function hr(e,t){const{zoom:n,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:a,accumulated:s}=null!=e?e:{};return{zoom:n,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:a,accumulated:s,globalState:t}}function dr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!dr(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const pr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fr(e,t){if(null==e)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};dr(e)||(e=yr(e));const n=rr(e,pr,t);if("error"===n.result)throw new Error(n.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));return{filter:(e,t,i)=>n.value.evaluate(e,t,{},i),needGeometry:gr(e),getGlobalStateRefs:()=>ur(n.value.expression)}}function mr(e,t){return e<t?-1:e>t?1:0}function gr(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(gr(e[t]))return!0;return!1}function yr(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?vr(e[1],e[2],"=="):"!="===t?br(vr(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?vr(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(yr))):"all"===t?["all"].concat(e.slice(1).map(yr)):"none"===t?["all"].concat(e.slice(1).map(yr).map(br)):"in"===t?_r(e[1],e.slice(2)):"!in"===t?br(_r(e[1],e.slice(2))):"has"===t?xr(e[1]):"!has"!==t||br(xr(e[1]));var n}function vr(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function _r(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(mr)]]:["filter-in-small",e,["literal",t]]}}function xr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function br(e){return["!",e]}function wr(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const n of e)t+="".concat(wr(n),",");return"".concat(t,"]")}const n=Object.keys(e).sort();let i="{";for(let r=0;r<n.length;r++)i+="".concat(JSON.stringify(n[r]),":").concat(wr(e[n[r]]),",");return"".concat(i,"}")}function Dr(e){let t="";for(const n of be)t+="/".concat(wr(e[n]));return t}function Er(e){const t=e.value;return t?[new Me(e.key,t,"constants have been deprecated as of v8")]:[]}function Cr(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ar(e){if(Array.isArray(e))return e.map(Ar);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Ar(e[n]);return t}return Cr(e)}function Sr(e){const t=e.key,n=e.value,i=e.valueSpec||{},r=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=e.validateSpec;let l=[];const c=Wi(n);if("object"!==c)return[new Me(t,n,"object expected, ".concat(c," found"))];for(const u in n){const e=u.split(".")[0],c=xt(i,e)||i["*"];let h;if(xt(r,e))h=r[e];else if(xt(i,e)){if(void 0===n[u])continue;h=s}else if(r["*"])h=r["*"];else{if(!i["*"]){l.push(new Me(t,n[u],'unknown property "'.concat(u,'"')));continue}h=s}l=l.concat(h({key:(t?"".concat(t,"."):t)+u,value:n[u],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:u,validateSpec:s},n))}for(const u in i)r[u]||i[u].required&&void 0===i[u].default&&void 0===n[u]&&l.push(new Me(t,n,'missing required property "'.concat(u,'"')));return l}function Tr(e){const t=e.value,n=e.valueSpec,i=e.style,r=e.styleSpec,o=e.key,a=e.arrayElementValidator||e.validateSpec;if("array"!==Wi(t))return[new Me(o,t,"array expected, ".concat(Wi(t)," found"))];if(n.length&&t.length!==n.length)return[new Me(o,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];let s={type:n.value,values:n.values};r.$version<7&&(s.function=n.function),"object"===Wi(n.value)&&(s=n.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,validateSpec:e.validateSpec,style:i,styleSpec:r,key:"".concat(o,"[").concat(c,"]")}));return l}function Fr(e){const t=e.key,n=e.value,i=e.valueSpec;let r=Wi(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new Me(t,n,"number expected, ".concat(r," found"))]:"minimum"in i&&n<i.minimum?[new Me(t,n,"".concat(n," is less than the minimum value ").concat(i.minimum))]:"maximum"in i&&n>i.maximum?[new Me(t,n,"".concat(n," is greater than the maximum value ").concat(i.maximum))]:[]}function kr(e){const t=e.valueSpec,n=Cr(e.value.type);let i,r,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Wi(e.value.stops)&&"array"===Wi(e.value.stops[0])&&"object"===Wi(e.value.stops[0][0]),u=Sr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new Me(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const i=e.value;return t=t.concat(Tr({key:e.key,value:i,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Wi(i)&&0===i.length&&t.push(new Me(e.key,i,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new Me(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new Me(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Gi(e.valueSpec)&&u.push(new Me(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Zi(e.valueSpec)?u.push(new Me(e.key,e.value,"property functions not supported")):s&&!Hi(e.valueSpec)&&u.push(new Me(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new Me(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const i=e.value,s=e.key;if("array"!==Wi(i))return[new Me(s,i,"array expected, ".concat(Wi(i)," found"))];if(2!==i.length)return[new Me(s,i,"array length 2 expected, length ".concat(i.length," found"))];if(c){if("object"!==Wi(i[0]))return[new Me(s,i,"object expected, ".concat(Wi(i[0])," found"))];if(void 0===i[0].zoom)return[new Me(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Me(s,i,"object stop key must have value")];if(o&&o>Cr(i[0].zoom))return[new Me(s,i[0].zoom,"stop zoom values must appear in ascending order")];Cr(i[0].zoom)!==o&&(o=Cr(i[0].zoom),r=void 0,a={}),n=n.concat(Sr({key:"".concat(s,"[0]"),value:i[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Fr,value:d}}))}else n=n.concat(d({key:"".concat(s,"[0]"),value:i[0],validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},i));return ir(Ar(i[1]))?n.concat([new Me("".concat(s,"[1]"),i[1],"expressions are not allowed in function stops.")]):n.concat(e.validateSpec({key:"".concat(s,"[1]"),value:i[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const s=Wi(e.value),l=Cr(e.value),c=null!==e.value?e.value:o;if(i){if(s!==i)return[new Me(e.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(i))]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Me(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let i="number expected, ".concat(s," found");return Zi(t)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Me(e.key,c,i)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==r&&l<r?[new Me(e.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in a?[new Me(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new Me(e.key,c,"integer expected, found ".concat(l))]}}function Pr(e){const t=("property"===e.expressionContext?sr:rr)(Ar(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Me("".concat(e.key).concat(t.key),e.value,t.message));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Me(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ri(n))return[new Me(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ri(n))return[new Me(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Vi(n,["zoom","feature-state"]))return[new Me(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!zi(n))return[new Me(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mr(e){const t=e.key,n=e.value,i=Wi(n);return"string"!==i?[new Me(t,n,"color expected, ".concat(i," found"))]:Tt.parse(String(n))?[]:[new Me(t,n,'color expected, "'.concat(n,'" found'))]}function Ir(e){const t=e.key,n=e.value,i=e.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(Cr(n))&&r.push(new Me(t,n,"expected one of [".concat(i.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(i.values).indexOf(Cr(n))&&r.push(new Me(t,n,"expected one of [".concat(Object.keys(i.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),r}function jr(e){return dr(Ar(e.value))?Pr(Ie({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Nr(e)}function Nr(e){const t=e.value,n=e.key;if("array"!==Wi(t))return[new Me(n,t,"array expected, ".concat(Wi(t)," found"))];const i=e.styleSpec;let r,o=[];if(t.length<1)return[new Me(n,t,"filter array must have at least 1 element")];switch(o=o.concat(Ir({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Cr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Cr(t[1])&&o.push(new Me(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&o.push(new Me(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&(r=Wi(t[1]),"string"!==r&&o.push(new Me("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found"))));for(let a=2;a<t.length;a++)r=Wi(t[a]),"$type"===Cr(t[1])?o=o.concat(Ir({key:"".concat(n,"[").concat(a,"]"),value:t[a],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new Me("".concat(n,"[").concat(a,"]"),t[a],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(let i=1;i<t.length;i++)o=o.concat(Nr({key:"".concat(n,"[").concat(i,"]"),value:t[i],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Wi(t[1]),2!==t.length?o.push(new Me(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new Me("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")))}return o}function Or(e,t){const n=e.key,i=e.validateSpec,r=e.style,o=e.styleSpec,a=e.value,s=e.objectKey,l=o["".concat(t,"_").concat(e.layerType)];if(!l)return[];const c=s.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return i({key:n,value:a,valueSpec:o.transition,style:r,styleSpec:o});const u=e.valueSpec||l[s];if(!u)return[new Me(n,a,'unknown property "'.concat(s,'"'))];let h;if("string"===Wi(a)&&Zi(u)&&!u.tokens&&(h=/^{([^}]+)}$/.exec(a)))return[new Me(n,a,'"'.concat(s,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(h[1])," }`."))];const d=[];return"symbol"===e.layerType&&"text-font"===s&&Yi(Ar(a))&&"identity"===Cr(a.type)&&d.push(new Me(n,a,'"text-font" does not support identity functions')),d.concat(i({key:e.key,value:a,valueSpec:u,style:r,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:s}))}function Br(e){return Or(e,"paint")}function Lr(e){return Or(e,"layout")}function zr(e){let t=[];const n=e.value,i=e.key,r=e.style,o=e.styleSpec;if("object"!==Wi(n))return[new Me(i,n,"object expected, ".concat(Wi(n)," found"))];n.type||n.ref||t.push(new Me(i,n,'either "type" or "ref" is required'));let a=Cr(n.type);const s=Cr(n.ref);if(n.id){const o=Cr(n.id);for(let a=0;a<e.arrayIndex;a++){const e=r.layers[a];Cr(e.id)===o&&t.push(new Me(i,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(e.id.__line__)))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in n&&t.push(new Me(i,n[e],'"'.concat(e,'" is prohibited for ref layers')))}),r.layers.forEach(t=>{Cr(t.id)===s&&(e=t)}),e?e.ref?t.push(new Me(i,n.ref,"ref cannot reference another ref layer")):a=Cr(e.type):t.push(new Me(i,n.ref,'ref layer "'.concat(s,'" not found')))}else if("background"!==a)if(n.source){const e=r.sources&&r.sources[n.source],o=e&&Cr(e.type);e?"vector"===o&&"raster"===a?t.push(new Me(i,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster-dem"!==o&&"hillshade"===a||"raster-dem"!==o&&"color-relief"===a?t.push(new Me(i,n.source,'layer "'.concat(n.id,'" requires a raster-dem source'))):"raster"===o&&"raster"!==a?t.push(new Me(i,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a&&"color-relief"!==a?t.push(new Me(i,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new Me(i,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new Me(i,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new Me(i,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new Me(i,n,'missing required property "source"'));return t=t.concat(Sr({key:i,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:"".concat(i,".type"),value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"}),filter:jr,layout:e=>Sr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Lr(Ie({layerType:a},e))}}),paint:e=>Sr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Br(Ie({layerType:a},e))}})}})),t}function Rr(e){const t=e.value,n=e.key,i=Wi(t);return"string"!==i?[new Me(n,t,"string expected, ".concat(i," found"))]:[]}const Vr={promoteId:function(e){let{key:t,value:n}=e;if("string"===Wi(n))return Rr({key:t,value:n});{const e=[];for(const i in n)e.push(...Rr({key:"".concat(t,".").concat(i),value:n[i]}));return e}}};function Ur(e){const t=e.value,n=e.key,i=e.styleSpec,r=e.style,o=e.validateSpec;if(!t.type)return[new Me(n,t,'"type" is required')];const a=Cr(t.type);let s;switch(a){case"vector":case"raster":return s=Sr({key:n,value:t,valueSpec:i["source_".concat(a.replace("-","_"))],style:e.style,styleSpec:i,objectElementValidators:Vr,validateSpec:o}),s;case"raster-dem":return s=function(e){var t;const n=null!==(t=e.sourceName)&&void 0!==t?t:"",i=e.value,r=e.styleSpec,o=r.source_raster_dem,a=e.style;let s=[];const l=Wi(i);if(void 0===i)return s;if("object"!==l)return s.push(new Me("source_raster_dem",i,"object expected, ".concat(l," found"))),s;const c="custom"===Cr(i.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],h=e.value.encoding?'"'.concat(e.value.encoding,'"'):"Default";for(const d in i)!c&&u.includes(d)?s.push(new Me(d,i[d],'In "'.concat(n,'": "').concat(d,'" is only valid when "encoding" is set to "custom". ').concat(h," encoding found"))):o[d]?s=s.concat(e.validateSpec({key:d,value:i[d],valueSpec:o[d],validateSpec:e.validateSpec,style:a,styleSpec:r})):s.push(new Me(d,i[d],'unknown property "'.concat(d,'"')));return s}({sourceName:n,value:t,style:e.style,styleSpec:i,validateSpec:o}),s;case"geojson":if(s=Sr({key:n,value:t,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:Vr}),t.cluster)for(const e in t.clusterProperties){const[i,r]=t.clusterProperties[e],o="string"==typeof i?[i,["accumulated"],["get",e]]:i;s.push(...Pr({key:"".concat(n,".").concat(e,".map"),value:r,expressionContext:"cluster-map"})),s.push(...Pr({key:"".concat(n,".").concat(e,".reduce"),value:o,expressionContext:"cluster-reduce"}))}return s;case"video":return Sr({key:n,value:t,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return Sr({key:n,value:t,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new Me(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ir({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function qr(e){const t=e.value,n=e.styleSpec,i=n.light,r=e.style;let o=[];const a=Wi(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Me("light",t,"object expected, ".concat(a," found"))]),o;for(const s in t){const a=s.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?e.validateSpec({key:s,value:t[s],valueSpec:n.transition,validateSpec:e.validateSpec,style:r,styleSpec:n}):i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],validateSpec:e.validateSpec,style:r,styleSpec:n}):[new Me(s,t[s],'unknown property "'.concat(s,'"'))])}return o}function Zr(e){const t=e.value,n=e.styleSpec,i=n.sky,r=e.style,o=Wi(t);if(void 0===t)return[];if("object"!==o)return[new Me("sky",t,"object expected, ".concat(o," found"))];let a=[];for(const s in t)a=a.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new Me(s,t[s],'unknown property "'.concat(s,'"'))]);return a}function Hr(e){const t=e.value,n=e.styleSpec,i=n.terrain,r=e.style;let o=[];const a=Wi(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Me("terrain",t,"object expected, ".concat(a," found"))]),o;for(const s in t)o=o.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],validateSpec:e.validateSpec,style:r,styleSpec:n}):[new Me(s,t[s],'unknown property "'.concat(s,'"'))]);return o}function Gr(e){let t=[];const n=e.value,i=e.key;if(Array.isArray(n)){const r=[],o=[];for(const a in n)n[a].id&&r.includes(n[a].id)&&t.push(new Me(i,n,"all the sprites' ids must be unique, but ".concat(n[a].id," is duplicated"))),r.push(n[a].id),n[a].url&&o.includes(n[a].url)&&t.push(new Me(i,n,"all the sprites' URLs must be unique, but ".concat(n[a].url," is duplicated"))),o.push(n[a].url),t=t.concat(Sr({key:"".concat(i,"[").concat(a,"]"),value:n[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return Rr({key:i,value:n})}function Wr(e){return Boolean(e)&&e.constructor===Object}function Yr(e){return Wr(e.value)?[]:[new Me(e.key,e.value,"object expected, ".concat(Wi(e.value)," found"))]}const Xr={"*":()=>[],array:Tr,boolean:function(e){const t=e.value,n=e.key,i=Wi(t);return"boolean"!==i?[new Me(n,t,"boolean expected, ".concat(i," found"))]:[]},number:Fr,color:Mr,constants:Er,enum:Ir,filter:jr,function:kr,layer:zr,object:Sr,source:Ur,light:qr,sky:Zr,terrain:Hr,projection:function(e){const t=e.value,n=e.styleSpec,i=n.projection,r=e.style,o=Wi(t);if(void 0===t)return[];if("object"!==o)return[new Me("projection",t,"object expected, ".concat(o," found"))];let a=[];for(const s in t)a=a.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new Me(s,t[s],'unknown property "'.concat(s,'"'))]);return a},projectionDefinition:function(e){const t=e.key;let n=e.value;n=n instanceof String?n.valueOf():n;const i=Wi(n);return"array"!==i||function(e){return Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]}(n)||function(e){return!!["interpolate","step","literal"].includes(e[0])}(n)?["array","string"].includes(i)?[]:[new Me(t,n,'projection expected, invalid type "'.concat(i,'" found'))]:[new Me(t,n,"projection expected, invalid array ".concat(JSON.stringify(n)," found"))]},string:Rr,formatted:function(e){return 0===Rr(e).length?[]:Pr(e)},resolvedImage:function(e){return 0===Rr(e).length?[]:Pr(e)},padding:function(e){const t=e.key,n=e.value;if("array"===Wi(n)){if(n.length<1||n.length>4)return[new Me(t,n,"padding requires 1 to 4 values; ".concat(n.length," values found"))];const i={type:"number"};let r=[];for(let o=0;o<n.length;o++)r=r.concat(e.validateSpec({key:"".concat(t,"[").concat(o,"]"),value:n[o],validateSpec:e.validateSpec,valueSpec:i}));return r}return Fr({key:t,value:n,valueSpec:{}})},numberArray:function(e){const t=e.key,n=e.value;if("array"===Wi(n)){const i={type:"number"};if(n.length<1)return[new Me(t,n,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<n.length;o++)r=r.concat(e.validateSpec({key:"".concat(t,"[").concat(o,"]"),value:n[o],validateSpec:e.validateSpec,valueSpec:i}));return r}return Fr({key:t,value:n,valueSpec:{}})},colorArray:function(e){const t=e.key,n=e.value;if("array"===Wi(n)){if(n.length<1)return[new Me(t,n,"array length at least 1 expected, length 0 found")];let e=[];for(let i=0;i<n.length;i++)e=e.concat(Mr({key:"".concat(t,"[").concat(i,"]"),value:n[i]}));return e}return Mr({key:t,value:n})},variableAnchorOffsetCollection:function(e){const t=e.key,n=e.value,i=Wi(n),r=e.styleSpec;if("array"!==i||n.length<1||n.length%2!=0)return[new Me(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<n.length;a+=2)o=o.concat(Ir({key:"".concat(t,"[").concat(a,"]"),value:n[a],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(Tr({key:"".concat(t,"[").concat(a+1,"]"),value:n[a+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:r}));return o},sprite:Gr,state:Yr,fontFaces:function(e){const t=e.key,n=e.value,i=e.validateSpec,r=e.styleSpec,o=e.style;if(!Wr(n))return[new Me(t,n,"object expected, ".concat(Wi(n)," found"))];const a=[];for(const s in n){const e=n[s],l=Wi(e);if("string"===l)a.push(...Rr({key:"".concat(t,".").concat(s),value:e}));else if("array"===l){const n={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[l,c]of e.entries())a.push(...Sr({key:"".concat(t,".").concat(s,"[").concat(l,"]"),value:c,valueSpec:n,styleSpec:r,style:o,validateSpec:i}))}else a.push(new Me("".concat(t,".").concat(s),e,"string or array expected, ".concat(l," found")))}return a}};function Kr(e){const t=e.value,n=e.valueSpec,i=e.styleSpec;return e.validateSpec=Kr,n.expression&&Yi(Cr(t))?kr(e):n.expression&&ir(Ar(t))?Pr(e):n.type&&Xr[n.type]?Xr[n.type](e):Sr(Ie({},e,{valueSpec:n.type?i[n.type]:n}))}function $r(e){const t=e.value,n=e.key,i=Rr(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new Me(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new Me(n,t,'"glyphs" url must include a "{range}" token'))),i}function Qr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xe,n=[];return n=n.concat(Kr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:Kr,objectElementValidators:{glyphs:$r,"*":()=>[]}})),e.constants&&(n=n.concat(Er({key:"constants",value:e.constants}))),eo(n)}function Jr(e){return function(t){return e(Object.assign({},t,{validateSpec:Kr}))}}function eo(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function to(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return eo(e.apply(this,n))}}Qr.source=to(Jr(Ur)),Qr.sprite=to(Jr(Gr)),Qr.glyphs=to(Jr($r)),Qr.light=to(Jr(qr)),Qr.sky=to(Jr(Zr)),Qr.terrain=to(Jr(Hr)),Qr.state=to(Jr(Yr)),Qr.layer=to(Jr(zr)),Qr.filter=to(Jr(jr)),Qr.paintProperty=to(Jr(Br)),Qr.layoutProperty=to(Jr(Lr));const no={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class io{constructor(e,t){this._globalState=t,this.setValue(e)}evaluate(){var e;return null!==(e=this._literalValue)&&void 0!==e?e:this._compiledValue.evaluate({})}setValue(e){if(null==e||"visible"===e||"none"===e)return this._literalValue="none"===e?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const t=rr(e,no,this._globalState);if("error"===t.result)throw this._literalValue="visible",this._compiledValue=void 0,new Error(t.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));this._literalValue=void 0,this._compiledValue=t.value,this._globalStateRefs=ur(t.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const ro=xe,oo=Qr,ao=oo.light,so=oo.sky,lo=oo.paintProperty,co=oo.layoutProperty;function uo(e,t){let n=!1;if(t&&t.length)for(const i of t)e.fire(new ve(new Error(i.message))),n=!0;return n}class ho{constructor(e,t,n){const i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const r=new Int32Array(this.arrayBuffer);e=r[0],this.d=(t=r[1])+2*(n=r[2]);for(let e=0;e<this.d*this.d;e++){const t=r[3+e],n=r[3+e+1];i.push(t===n?null:r.subarray(t,n))}const o=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],o),this.bboxes=r.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*n;for(let e=0;e<this.d*this.d;e++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;const r=n/t*e;this.min=-r,this.max=e+r}insert(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,n,i,r,o){this.cells[r].push(o)}query(e,t,n,i,r){const o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,n,i,this._queryCell,o,{},r),o}}_queryCell(e,t,n,i,r,o,a,s){const l=this.cells[r];if(null!==l){const r=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===a[h]){const l=4*h;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&n>=c[l+0]&&i>=c[l+1])?(a[h]=!0,o.push(r[h])):a[h]=!1}}}}_forEachCell(e,t,n,i,r,o,a,s){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.d*l+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&r.call(this,e,t,n,i,c,o,a,s))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let n=0;for(let o=0;o<this.cells.length;o++)n+=this.cells[o].length;const i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let r=t;for(let o=0;o<e.length;o++){const t=e[o];i[3+o]=r,i.set(t,r),r+=t.length}return i[3+e.length]=r,i.set(this.keys,r),r+=this.keys.length,i[3+e.length+1]=r,i.set(this.bboxes,r),r+=this.bboxes.length,i.buffer}static serialize(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}}static deserialize(e){return new ho(e.buffer)}}const po={};function fo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(po[e])throw new Error("".concat(e," is already registered."));Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),po[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}fo("Object",Object),fo("Set",Set),fo("TransferableGridIndex",ho),fo("Color",Tt),fo("Error",Error),fo("AJAXError",he),fo("ResolvedImage",zt),fo("StylePropertyFunction",lr),fo("StyleExpression",nr,{omit:["_evaluator"]}),fo("ZoomDependentExpression",ar),fo("ZoomConstantExpression",or),fo("CompoundExpression",Ii,{omit:["_evaluate"]});for(const r in Mi)Mi[r]._classRegistryKey||fo("Expression_".concat(r),Mi[r]);function mo(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function go(e){return e.$name||e.constructor._classRegistryKey}function yo(e){return!function(e){if(null===e||"object"!=typeof e)return!1;const t=go(e);return!(!t||"Object"===t)}(e)&&(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||mo(e)||X(e)||ArrayBuffer.isView(e)||e instanceof ImageData)}function vo(e,t){if(yo(e))return(mo(e)||X(e))&&t&&t.push(e),ArrayBuffer.isView(e)&&t&&t.push(e.buffer),e instanceof ImageData&&t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const i of e)n.push(vo(i,t));return n}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);const n=go(e);if(!n)throw new Error("can't serialize object of unregistered class ".concat(e.constructor.name));if(!po[n])throw new Error("".concat(n," is not registered."));const{klass:i}=po[n],r=i.serialize?i.serialize(e,t):{};if(i.serialize){if(t&&r===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in e){if(!e.hasOwnProperty(i))continue;if(po[n].omit.indexOf(i)>=0)continue;const o=e[i];r[i]=po[n].shallow.indexOf(i)>=0?o:vo(o,t)}e instanceof Error&&(r.message=e.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(r.$name=n),r}function _o(e){if(yo(e))return e;if(Array.isArray(e))return e.map(_o);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);const t=go(e)||"Object";if(!po[t])throw new Error("can't deserialize unregistered class ".concat(t));const{klass:n}=po[t];if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);const i=Object.create(n.prototype);for(const r of Object.keys(e)){if("$name"===r)continue;const n=e[r];i[r]=po[t].shallow.indexOf(r)>=0?n:_o(n)}return i}class xo{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}function bo(e){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(e))}function wo(e){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(e))}function Do(e){return/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/.test(String.fromCodePoint(e))}function Eo(e){for(const t of e)if(wo(t.codePointAt(0)))return!0;return!1}function Co(e){for(const t of e)if(!To(t.codePointAt(0)))return!1;return!0}function Ao(e){const t=e.map(e=>{try{return new RegExp("\\p{sc=".concat(e,"}"),"u").source}catch(e){return null}}).filter(e=>e);return new RegExp(t.join("|"),"u")}const So=Ao(["Arab","Dupl","Mong","Ougr","Syrc"]);function To(e){return!So.test(String.fromCodePoint(e))}function Fo(e){return!(wo(e)||(t=e,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(t))));var t}const ko=Ao(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Po(e){return ko.test(String.fromCodePoint(e))}function Mo(e,t){return!(!t&&Po(e)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(e)))}function Io(e){for(const t of e)if(Po(t.codePointAt(0)))return!0;return!1}const jo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){if(jo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getRTLTextPluginStatus(){return this.pluginStatus}syncState(e,n){return t(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if("loading"!==e.pluginStatus)return this.setState(e),e;const t=e.pluginURL,i=new Promise(e=>{this.loadScriptResolve=e});n(t);const r=new Promise(e=>setTimeout(()=>e(),this.TIMEOUT));if(yield Promise.race([i,r]),this.isParsed()){const e={pluginStatus:"loaded",pluginURL:t};return this.setState(e),e}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error("RTL Text Plugin failed to import scripts from ".concat(t))})}};class No{constructor(e,t){this.isSupportedScript=Oo,this.zoom=e,t?(this.now=t.now||0,this.fadeDuration=t.fadeDuration||0,this.zoomHistory=t.zoomHistory||new xo,this.transition=t.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xo,this.transition={})}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}function Oo(e){return function(e,t){for(const n of e)if(!Mo(n.codePointAt(0),t))return!1;return!0}(e,"loaded"===jo.getRTLTextPluginStatus())}const Bo="-transition";class Lo{constructor(e,t,n){this.property=e,this.value=t,this.expression=function(e,t,n){if(Yi(e))return new lr(e,t);if(ir(e)){const i=sr(e,t,n);if("error"===i.result)throw new Error(i.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));return i.value}{let n=e;return"color"===t.type&&"string"==typeof e?n=Tt.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"numberArray"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"colorArray"!==t.type||"string"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)?n=Lt.parse(e):"projectionDefinition"===t.type&&"string"==typeof e&&(n=Rt.parse(e)):n=Nt.parse(e):n=jt.parse(e):n=It.parse(e),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification,n)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class zo{constructor(e,t){this.property=e,this.value=new Lo(e,void 0,t)}transitioned(e,t){return new Vo(this.property,this.value,t,z({},e.transition,this.transition),e.now)}untransitioned(){return new Vo(this.property,this.value,null,{},0)}}class Ro{constructor(e,t){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=t}getValue(e){return q(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new zo(this._values[e].property,this._globalState)),this._values[e].value=new Lo(this._values[e].property,null===t?void 0:q(t),this._globalState)}getTransition(e){return q(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new zo(this._values[e].property,this._globalState)),this._values[e].transition=q(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const i=this.getTransition(t);void 0!==i&&(e["".concat(t).concat(Bo)]=i)}return e}transitioned(e,t){const n=new Uo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(e,t._values[i]);return n}untransitioned(){const e=new Uo(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Vo{constructor(e,t,n,i,r){this.property=e,this.value=t,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const i=e.now||0,r=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),r,j(a))}}return r}}class Uo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const i=new Ho(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class qo{constructor(e,t){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=t}hasValue(e){return void 0!==this._values[e].value}getValue(e){return q(this._values[e].value)}setValue(e,t){this._values[e]=new Lo(this._values[e].property,null===t?void 0:q(t),this._globalState)}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const i=new Ho(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}}class Zo{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,i){return this.property.evaluate(this.value,this.parameters,e,t,n,i)}}class Ho{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Go{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,n){const i=yn[this.specification.type];return i?i(e,t,n):e}}class Wo{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,i){return new Zo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,i)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Zo(this,{kind:"constant",value:void 0},e.parameters);const i=yn[this.specification.type];if(i){const r=i(e.value.value,t.value.value,n);return new Zo(this,{kind:"constant",value:r},e.parameters)}return e}evaluate(e,t,n,i,r,o){return"constant"===e.kind?e.value:e.evaluate(t,n,i,r,o)}}class Yo extends Wo{possiblyEvaluate(e,t,n,i){if(void 0===e.value)return new Zo(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const r=e.expression.evaluate(t,null,{},n,i),o="resolvedImage"===e.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,t);return new Zo(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Zo(this,{kind:"constant",value:n},t)}return new Zo(this,e.expression,t)}evaluate(e,t,n,i,r,o){if("source"===e.kind){const a=e.evaluate(t,n,i,r,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,i),e.evaluate({zoom:Math.floor(t.zoom)},n,i),e.evaluate({zoom:Math.floor(t.zoom)+1},n,i),t):e.value}_calculate(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class Xo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){if(void 0!==e.value){if("constant"===e.expression.kind){const r=e.expression.evaluate(t,null,{},n,i);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new No(Math.floor(t.zoom-1),t)),e.expression.evaluate(new No(Math.floor(t.zoom),t)),e.expression.evaluate(new No(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class Ko{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){return!!e.expression.evaluate(t,null,{},n,i)}interpolate(){return!1}}class $o{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const i=this.defaultPropertyValues[t]=new Lo(n,void 0,void 0),r=this.defaultTransitionablePropertyValues[t]=new zo(n,void 0);this.defaultTransitioningPropertyValues[t]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=i.possiblyEvaluate({})}}}fo("DataDrivenProperty",Wo),fo("DataConstantProperty",Go),fo("CrossFadedDataDrivenProperty",Yo),fo("CrossFadedProperty",Xo),fo("ColorRampProperty",Ko);class Qo extends _e{constructor(e,t,n){if(super(),this.id=e.id,this.type=e.type,this._globalState=n,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=function(e,t){return new io(e,t)}(this.visibility,n),"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=fr(e.filter,n)),t.layout&&(this._unevaluatedLayout=new qo(t.layout,n)),t.paint)){this._transitionablePaint=new Ro(t.paint,n);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ho(t.paint)}}setFilter(e){this.filter=e,this._featureFilter=fr(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;for(const t of this._visibilityExpression.getGlobalStateRefs())e.add(t);if(this._unevaluatedLayout)for(const t in this._unevaluatedLayout._values){const n=this._unevaluatedLayout._values[t];for(const t of n.getGlobalStateRefs())e.add(t)}for(const t of this._featureFilter.getGlobalStateRefs())e.add(t);return e}getPaintAffectingGlobalStateRefs(){var e;const t=new globalThis.Map;if(this._transitionablePaint)for(const n in this._transitionablePaint._values){const i=this._transitionablePaint._values[n].value;for(const r of i.getGlobalStateRefs()){const o=null!==(e=t.get(r))&&void 0!==e?e:[];o.push({name:n,value:i.value}),t.set(r,o)}}return t}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t||!this._validate(co,"layers.".concat(this.id,".layout.").concat(e),e,t,n))return"visibility"===e?(this.visibility=t,this._visibilityExpression.setValue(t),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(e,t)}getPaintProperty(e){return e.endsWith(Bo)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(lo,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(e.endsWith(Bo))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],i="cross-faded-data-driven"===n.property.specification["property-type"],r=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||r||i||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.minzoom,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!(this.minzoom&&e<(t?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this._evaluatedVisibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),U(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&uo(this,e.call(oo,{key:t,layerType:this.type,objectKey:n,value:i,styleSpec:xe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Zo&&Zi(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}let Jo;var ea={get paint(){return Jo=Jo||new $o({"raster-opacity":new Go(xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Go(xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Go(xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Go(xe.paint_raster["raster-brightness-max"]),"raster-saturation":new Go(xe.paint_raster["raster-saturation"]),"raster-contrast":new Go(xe.paint_raster["raster-contrast"]),"raster-resampling":new Go(xe.paint_raster["raster-resampling"]),"raster-fade-duration":new Go(xe.paint_raster["raster-fade-duration"])})}};class ta extends Qo{constructor(e,t){super(e,ea,t)}}const na={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ia{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ra{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function oa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;return{members:e.map(e=>{const r=na[e.type].BYTES_PER_ELEMENT,o=n=aa(n,Math.max(t,r)),a=e.components||1;return i=Math.max(i,r),n+=r*a,{name:e.name,type:e.type,components:a,offset:o}}),size:aa(n,Math.max(i,t)),alignment:t}}function aa(e,t){return Math.ceil(e/t)*t}class sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.int16[i+0]=t,this.int16[i+1]=n,e}}sa.prototype.bytesPerElement=4,fo("StructArrayLayout2i4",sa);class la extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=i,e}}la.prototype.bytesPerElement=6,fo("StructArrayLayout3i6",la);class ca extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,e}}ca.prototype.bytesPerElement=8,fo("StructArrayLayout4i8",ca);class ua extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,e}}ua.prototype.bytesPerElement=12,fo("StructArrayLayout2i4i12",ua);class ha extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.uint8[l+4]=i,this.uint8[l+5]=r,this.uint8[l+6]=o,this.uint8[l+7]=a,e}}ha.prototype.bytesPerElement=8,fo("StructArrayLayout2i4ub8",ha);class da extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.float32[i+0]=t,this.float32[i+1]=n,e}}da.prototype.bytesPerElement=8,fo("StructArrayLayout2f8",da);class pa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,i,r,o,a,s,l,c)}emplace(e,t,n,i,r,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}pa.prototype.bytesPerElement=20,fo("StructArrayLayout10ui20",pa);class fa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,i,r,o,a,s)}emplace(e,t,n,i,r,o,a,s,l){const c=8*e;return this.uint16[c+0]=t,this.uint16[c+1]=n,this.uint16[c+2]=i,this.uint16[c+3]=r,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,e}}fa.prototype.bytesPerElement=16,fo("StructArrayLayout8ui16",fa);class ma extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,i,r,o,a,s,l,c,u,h)}emplace(e,t,n,i,r,o,a,s,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=r,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}ma.prototype.bytesPerElement=24,fo("StructArrayLayout4i4ui4i24",ma);class ga extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}ga.prototype.bytesPerElement=12,fo("StructArrayLayout3f12",ga);class ya extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}ya.prototype.bytesPerElement=4,fo("StructArrayLayout1ul4",ya);class va extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,i,r,o,a,s,l)}emplace(e,t,n,i,r,o,a,s,l,c){const u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}va.prototype.bytesPerElement=20,fo("StructArrayLayout6i1ul2ui20",va);class _a extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,e}}_a.prototype.bytesPerElement=12,fo("StructArrayLayout2i2i2i12",_a);class xa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,r)}emplace(e,t,n,i,r,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=r,this.int16[s+7]=o,e}}xa.prototype.bytesPerElement=16,fo("StructArrayLayout2f1f2i16",xa);class ba extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r,o)}emplace(e,t,n,i,r,o,a){const s=16*e,l=4*e,c=8*e;return this.uint8[s+0]=t,this.uint8[s+1]=n,this.float32[l+1]=i,this.float32[l+2]=r,this.int16[c+6]=o,this.int16[c+7]=a,e}}ba.prototype.bytesPerElement=16,fo("StructArrayLayout2ub2f2i16",ba);class wa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,this.uint16[r+2]=i,e}}wa.prototype.bytesPerElement=6,fo("StructArrayLayout3ui6",wa);class Da extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g)}emplace(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y){const v=24*e,_=12*e,x=48*e;return this.int16[v+0]=t,this.int16[v+1]=n,this.uint16[v+2]=i,this.uint16[v+3]=r,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=c,this.uint16[v+12]=u,this.float32[_+7]=h,this.float32[_+8]=d,this.uint8[x+36]=p,this.uint8[x+37]=f,this.uint8[x+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,e}}Da.prototype.bytesPerElement=48,fo("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Da);class Ea extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,D,E,C,A,S){const T=this.length;return this.resize(T+1),this.emplace(T,e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,D,E,C,A,S)}emplace(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,D,E,C,A,S,T){const F=32*e,k=16*e;return this.int16[F+0]=t,this.int16[F+1]=n,this.int16[F+2]=i,this.int16[F+3]=r,this.int16[F+4]=o,this.int16[F+5]=a,this.int16[F+6]=s,this.int16[F+7]=l,this.uint16[F+8]=c,this.uint16[F+9]=u,this.uint16[F+10]=h,this.uint16[F+11]=d,this.uint16[F+12]=p,this.uint16[F+13]=f,this.uint16[F+14]=m,this.uint16[F+15]=g,this.uint16[F+16]=y,this.uint16[F+17]=v,this.uint16[F+18]=_,this.uint16[F+19]=x,this.uint16[F+20]=b,this.uint16[F+21]=w,this.uint16[F+22]=D,this.uint32[k+12]=E,this.float32[k+13]=C,this.float32[k+14]=A,this.uint16[F+30]=S,this.uint16[F+31]=T,e}}Ea.prototype.bytesPerElement=64,fo("StructArrayLayout8i15ui1ul2f2ui64",Ea);class Ca extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ca.prototype.bytesPerElement=4,fo("StructArrayLayout1f4",Ca);class Aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.uint16[6*e+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}Aa.prototype.bytesPerElement=12,fo("StructArrayLayout1ui2f12",Aa);class Sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=4*e;return this.uint32[2*e+0]=t,this.uint16[r+2]=n,this.uint16[r+3]=i,e}}Sa.prototype.bytesPerElement=8,fo("StructArrayLayout1ul2ui8",Sa);class Ta extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,e}}Ta.prototype.bytesPerElement=4,fo("StructArrayLayout2ui4",Ta);class Fa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Fa.prototype.bytesPerElement=2,fo("StructArrayLayout1ui2",Fa);class ka extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,e}}ka.prototype.bytesPerElement=16,fo("StructArrayLayout4f16",ka);class Pa extends ia{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new n(this.anchorPointX,this.anchorPointY)}}Pa.prototype.size=20;class Ma extends va{get(e){return new Pa(this,e)}}fo("CollisionBoxArray",Ma);class Ia extends ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ia.prototype.size=48;class ja extends Da{get(e){return new Ia(this,e)}}fo("PlacedSymbolArray",ja);class Na extends ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Na.prototype.size=64;class Oa extends Ea{get(e){return new Na(this,e)}}fo("SymbolInstanceArray",Oa);class Ba extends Ca{getoffsetX(e){return this.float32[1*e+0]}}fo("GlyphOffsetArray",Ba);class La extends la{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}fo("SymbolLineVertexArray",La);class za extends ia{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}za.prototype.size=12;class Ra extends Aa{get(e){return new za(this,e)}}fo("TextAnchorOffsetArray",Ra);class Va extends ia{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Va.prototype.size=8;class Ua extends Sa{get(e){return new Va(this,e)}}fo("FeatureIndexArray",Ua);class qa extends sa{}class Za extends sa{}class Ha extends sa{}class Ga extends ua{}class Wa extends ha{}class Ya extends da{}class Xa extends pa{}class Ka extends fa{}class $a extends ma{}class Qa extends ga{}class Ja extends ya{}class es extends _a{}class ts extends ba{}class ns extends wa{}class is extends Ta{}const rs=oa([{name:"a_pos",components:2,type:"Int16"}],4),{members:os}=rs;class as{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,t,n,i){const r=this.segments[this.segments.length-1];return e>as.MAX_VERTEX_ARRAY_LENGTH&&H("Max vertices per segment is ".concat(as.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e,". Consider using the `fillLargeMeshArrays` function if you require meshes with more than ").concat(as.MAX_VERTEX_ARRAY_LENGTH," vertices.")),this._forceNewSegmentOnNextPrepare||!r||r.vertexLength+e>as.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i?this.createNewSegment(t,n,i):r}createNewSegment(e,t,n){const i={vertexOffset:e.length,primitiveOffset:t.length,vertexLength:0,primitiveLength:0,vaos:{}};return void 0!==n&&(i.sortKey=n),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(i),i}getOrCreateLatestSegment(e,t,n){return this.prepareSegment(0,e,t,n)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,i){return new as([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}function ss(e,t){return 256*(e=B(Math.floor(e),0,255))+B(Math.floor(t),0,255)}as.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fo("SegmentVector",as);const ls=oa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),cs=oa([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var us,hs,ds,ps={exports:{}},fs={exports:{}},ms={exports:{}},gs=function(){if(ds)return ps.exports;ds=1;var e=(us||(us=1,fs.exports=function(e,t){var n,i,r,o,a,s,l,c;for(i=e.length-(n=3&e.length),r=t,a=3432918353,s=461845907,c=0;c<i;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}),fs.exports),t=(hs||(hs=1,ms.exports=function(e,t){for(var n,i=e.length,r=t^i,o=0;i>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}),ms.exports);return ps.exports=e,ps.exports.murmur3=e,ps.exports.murmur2=t,ps.exports}(),ys=i(gs);class vs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,i){this.ids.push(_s(e)),this.positions.push(t,n,i)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=_s(e);let n=0,i=this.ids.length-1;for(;n<i;){const e=n+i>>1;this.ids[e]>=t?i=e:n=e+1}const r=[];for(;this.ids[n]===t;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(e,t){const n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return xs(n,i,0,n.length-1),t&&t.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(e){const t=new vs;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function _s(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ys(String(e))}function xs(e,t,n,i){for(;n<i;){const r=e[n+i>>1];let o=n-1,a=i+1;for(;;){do{o++}while(e[o]<r);do{a--}while(e[a]>r);if(o>=a)break;bs(e,o,a),bs(t,3*o,3*a),bs(t,3*o+1,3*a+1),bs(t,3*o+2,3*a+2)}a-n<i-a?(xs(e,t,n,a),n=a+1):(xs(e,t,a+1,i),i=a)}}function bs(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}fo("FeaturePositionMap",vs);class ws{constructor(e,t){this.gl=e.gl,this.location=t}}class Ds extends ws{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Es extends ws{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Cs extends ws{constructor(e,t){super(e,t),this.current=Tt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const As=new Float32Array(16);function Ss(e){return[ss(255*e.r,255*e.g),ss(255*e.b,255*e.a)]}class Ts{constructor(e,t,n){this.value=e,this.uniformNames=t.map(e=>"u_".concat(e)),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new Cs(e,t):new Ds(e,t)}}class Fs{constructor(e,t){this.uniformNames=t.map(e=>"u_".concat(e)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,t){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,t.y,t.height,t.width]}setUniform(e,t,n,i){let r=null;"u_pattern_to"===i?r=this.patternTo:"u_pattern_from"===i?r=this.patternFrom:"u_dasharray_to"===i?r=this.dashTo:"u_dasharray_from"===i?r=this.dashFrom:"u_pixel_ratio_to"===i?r=this.pixelRatioTo:"u_pixel_ratio_from"===i&&(r=this.pixelRatioFrom),null!==r&&e.set(r)}getBinding(e,t,n){return"u_pattern"===n.substr(0,9)||"u_dasharray_"===n.substr(0,12)?new Es(e,t):new Ds(e,t)}}class ks{constructor(e,t,n,i){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?2:1,offset:0})),this.paintVertexArray=new i}populatePaintArray(e,t,n){const i=this.paintVertexArray.length,r=this.expression.evaluate(new No(0,n),t,{},n.canonical,[],n.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(i,e,r)}updatePaintArray(e,t,n,i,r){const o=this.expression.evaluate(new No(0,r),n,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const i=Ss(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ps{constructor(e,t,n,i,r,o){this.expression=e,this.uniformNames=t.map(e=>"u_".concat(e,"_t")),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,n){const i=this.expression.evaluate(new No(this.zoom,n),t,{},n.canonical,[],n.formattedSection),r=this.expression.evaluate(new No(this.zoom+1,n),t,{},n.canonical,[],n.formattedSection),o=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(o,e,i,r)}updatePaintArray(e,t,n,i,r){const o=this.expression.evaluate(new No(this.zoom,r),n,i),a=this.expression.evaluate(new No(this.zoom+1,r),n,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,n,i){if("color"===this.type){const r=Ss(n),o=Ss(i);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1],o[0],o[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,i=B(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(i)}getBinding(e,t,n){return new Ds(e,t)}}class Ms{constructor(e,t,n,i,r,o){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}populatePaintArray(e,t,n){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,this.getPositionIds(t),n)}updatePaintArray(e,t,n,i,r){this._setPaintValues(e,t,this.getPositionIds(n),r)}_setPaintValues(e,t,n,i){const r=this.getPositions(i);if(!r||!n)return;const o=r[n.min],a=r[n.mid],s=r[n.max];if(o&&a&&s)for(let l=e;l<t;l++)this.emplace(this.zoomInPaintVertexArray,l,a,o),this.emplace(this.zoomOutPaintVertexArray,l,a,s)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const t=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,t,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,t,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Is extends Ms{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return ls.members}emplace(e,t,n,i){e.emplace(t,n.tlbr[0],n.tlbr[1],n.tlbr[2],n.tlbr[3],i.tlbr[0],i.tlbr[1],i.tlbr[2],i.tlbr[3],n.pixelRatio,i.pixelRatio)}}class js extends Ms{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return cs.members}emplace(e,t,n,i){e.emplace(t,0,n.y,n.height,n.width,0,i.y,i.height,i.width)}}class Ns{constructor(e,t,n){this.binders={},this._buffers=[];const i=[];for(const r in e.paint._values){if(!n(r))continue;const o=e.paint.get(r);if(!(o instanceof Zo&&Zi(o.property.specification)))continue;const a=Bs(r,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[r]=h?new Fs(s.value,a):new Ts(s.value,a,l),i.push("/u_".concat(r));else if("source"===s.kind||h){const n=Ls(r,l,"source");this.binders[r]=h?"line-dasharray"===r?new js(s,l,c,t,n,e.id):new Is(s,l,c,t,n,e.id):new ks(s,a,l,n),i.push("/a_".concat(r))}else{const e=Ls(r,l,"composite");this.binders[r]=new Ps(s,a,l,c,t,e),i.push("/z_".concat(r))}}this.cacheKey=i.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof ks||t instanceof Ps?t.maxValue:0}populatePaintArrays(e,t,n){for(const i in this.binders){const r=this.binders[i];(r instanceof ks||r instanceof Ps||r instanceof Ms)&&r.populatePaintArray(e,t,n)}}setConstantPatternPositions(e,t){for(const n in this.binders){const i=this.binders[n];i instanceof Fs&&i.setConstantPatternPositions(e,t)}}setConstantDashPositions(e,t){for(const n in this.binders){const i=this.binders[n];i instanceof Fs&&i.setConstantDashPositions(e,t)}}updatePaintArrays(e,t,n,i,r){let o=!1;for(const a in e){const s=t.getPositions(a);for(const t of s){const s=n.feature(t.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof ks||l instanceof Ps||l instanceof Ms)&&!0===l.expression.isStateDependent){const c=i.paint.get(n);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[a],r),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Ts||n instanceof Fs)&&e.push(...n.uniformNames.map(e=>"#define HAS_UNIFORM_".concat(e)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof ks||n instanceof Ps)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name);else if(n instanceof Ms){const t=n.getVertexAttributes();for(const n of t)e.push(n.name)}}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Ts||n instanceof Fs||n instanceof Ps)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof Ts||r instanceof Fs||r instanceof Ps)for(const o of r.uniformNames)if(t[o]){const a=r.getBinding(e,t[o],o);n.push({name:o,property:i,binding:a})}}return n}setUniforms(e,t,n,i){for(const{name:r,property:o,binding:a}of t)this.binders[o].setUniform(a,i,n.get(o),r)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof Ms){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof ks||n instanceof Ps)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof ks||n instanceof Ps||n instanceof Ms)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof ks||t instanceof Ps||t instanceof Ms)&&t.destroy()}}}class Os{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new Ns(i,t,n);this.needsUpload=!1,this._featureMap=new vs,this._bufferOffset=0}populatePaintArrays(e,t,n,i){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(e,t,i);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,i){for(const r of n)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(e,this._featureMap,t,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Bs(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}function Ls(e,t,n){const i={color:{source:da,composite:ka},number:{source:Ca,composite:da}},r=function(e){return{"line-pattern":{source:Xa,composite:Xa},"fill-pattern":{source:Xa,composite:Xa},"fill-extrusion-pattern":{source:Xa,composite:Xa},"line-dasharray":{source:Ka,composite:Ka}}[e]}(e);return r&&r[n]||i[t][n]}fo("ConstantBinder",Ts),fo("CrossFadedConstantBinder",Fs),fo("SourceExpressionBinder",ks),fo("CrossFadedPatternBinder",Is),fo("CrossFadedDasharrayBinder",js),fo("CompositeExpressionBinder",Ps),fo("ProgramConfiguration",Ns,{omit:["_buffers"]}),fo("ProgramConfigurationSet",Os);const zs=Math.pow(2,14)-1,Rs=-zs-1;function Vs(e){const t=k/e.extent,n=e.loadGeometry();for(let i=0;i<n.length;i++){const e=n[i];for(let n=0;n<e.length;n++){const i=e[n],r=Math.round(i.x*t),o=Math.round(i.y*t);i.x=B(r,Rs,zs),i.y=B(o,Rs,zs),(r<i.x||r>i.x+1||o<i.y||o>i.y+1)&&H("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Us(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Vs(e):[]}}const qs=-32768;function Zs(e,t,n,i,r){e.emplaceBack(qs+8*t+i,qs+8*n+r)}class Hs{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new Za,this.indexArray=new ns,this.segments=new as,this.programConfigurations=new Os(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){const i=this.layers[0],r=[];let o=null,a=!1,s="heatmap"===i.type;if("circle"===i.type){const e=i;o=e.layout.get("circle-sort-key"),a=!o.isConstant(),s=s||"map"===e.paint.get("circle-pitch-alignment")}const l=s?t.subdivisionGranularity.circle:1;for(const{feature:c,id:u,index:h,sourceLayerIndex:d}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Us(c,e);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),t,n))continue;const i=a?o.evaluate(t,{},n):void 0,s={id:u,properties:c.properties,type:c.type,sourceLayerIndex:d,index:h,geometry:e?t.geometry:Vs(c),patterns:{},sortKey:i};r.push(s)}a&&r.sort((e,t)=>e.sortKey-t.sortKey);for(const c of r){const{geometry:i,index:r,sourceLayerIndex:o}=c,a=e[r].feature;this.addFeature(c,i,r,n,l),t.featureIndex.insert(a,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,{imagePositions:n})}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,os),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,i){let r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;switch(o){case 1:r=[0,7];break;case 3:r=[0,2,5,7];break;case 5:r=[0,1,3,4,6,7];break;case 7:r=[0,1,2,3,4,5,6,7];break;default:throw new Error("Invalid circle bucket granularity: ".concat(o,"; valid values are 1, 3, 5, 7."))}const a=r.length;for(const s of t)for(const t of s){const n=t.x,i=t.y;if(n<0||n>=k||i<0||i>=k)continue;const o=this.segments.prepareSegment(a*a,this.layoutVertexArray,this.indexArray,e.sortKey),s=o.vertexLength;for(let e=0;e<a;e++)for(let t=0;t<a;t++)Zs(this.layoutVertexArray,n,i,r[t],r[e]);for(let e=0;e<a-1;e++)for(let t=0;t<a-1;t++){const n=s+e*a+t,i=s+(e+1)*a+t;this.indexArray.emplaceBack(n,i+1,n+1),this.indexArray.emplaceBack(n,i,i+1)}o.vertexLength+=a*a,o.primitiveLength+=(a-1)*(a-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{imagePositions:{},canonical:i})}}function Gs(e,t){for(let n=0;n<e.length;n++)if(tl(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(tl(e,t[n]))return!0;return!!Ks(e,t)}function Ws(e,t,n){return!!tl(e,t)||!!Qs(t,e,n)}function Ys(e,t){if(1===e.length)return el(t,e[0]);for(let n=0;n<t.length;n++){const i=t[n];for(let t=0;t<i.length;t++)if(tl(e,i[t]))return!0}for(let n=0;n<e.length;n++)if(el(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Ks(e,t[n]))return!0;return!1}function Xs(e,t,n){if(e.length>1){if(Ks(e,t))return!0;for(let i=0;i<t.length;i++)if(Qs(t[i],e,n))return!0}for(let i=0;i<e.length;i++)if(Qs(e[i],t,n))return!0;return!1}function Ks(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const i=e[n],r=e[n+1];for(let e=0;e<t.length-1;e++)if($s(i,r,t[e],t[e+1]))return!0}return!1}function $s(e,t,n,i){return G(e,n,i)!==G(t,n,i)&&G(e,t,n)!==G(e,t,i)}function Qs(e,t,n){const i=n*n;if(1===t.length)return e.distSqr(t[0])<i;for(let r=1;r<t.length;r++)if(Js(e,t[r-1],t[r])<i)return!0;return!1}function Js(e,t,n){const i=t.distSqr(n);if(0===i)return e.distSqr(t);const r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return e.distSqr(r<0?t:r>1?n:n.sub(t)._mult(r)._add(t))}function el(e,t){let n,i,r,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)i=n[e],r=n[a],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function tl(e,t){let n=!1;for(let i=0,r=e.length-1;i<e.length;r=i++){const o=e[i],a=e[r];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function nl(e,t,n){const i=n[0],r=n[2];if(e.x<i.x&&t.x<i.x||e.x>r.x&&t.x>r.x||e.y<i.y&&t.y<i.y||e.y>r.y&&t.y>r.y)return!1;const o=G(e,t,n[0]);return o!==G(e,t,n[1])||o!==G(e,t,n[2])||o!==G(e,t,n[3])}function il(e,t,n){const i=t.paint.get(e).value;return"constant"===i.kind?i.value:n.programConfigurations.get(t.id).getMaxValue(e)}function rl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ol(e,t,i,r,o){if(!t[0]&&!t[1])return e;const a=n.convert(t)._mult(o);"viewport"===i&&a._rotate(-r);const s=[];for(let n=0;n<e.length;n++)s.push(e[n].sub(a));return s}function al(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n],r=t.at(-1);(0===n||r&&!i.equals(r))&&t.push(i)}return t}function sl(e,t){let{queryGeometry:n,size:i}=e;return Ws(n,t,i)}function ll(e,t){let{queryGeometry:n,size:i,transform:r,unwrappedTileID:o,getElevation:a}=e;return Ws(n,t,i*(r.projectTileCoordinates(t.x,t.y,o,a).signedDistanceFromCamera/r.cameraToCenterDistance))}function cl(e,t){let{queryGeometry:n,size:i,transform:r,unwrappedTileID:o,getElevation:a}=e;const s=r.projectTileCoordinates(t.x,t.y,o,a).signedDistanceFromCamera,l=i*(r.cameraToCenterDistance/s);return Ws(n,dl(t,r,o,a),l)}function ul(e,t){let{queryGeometry:n,size:i,transform:r,unwrappedTileID:o,getElevation:a}=e;return Ws(n,dl(t,r,o,a),i)}function hl(e,t){let{queryGeometry:n,size:i,transform:r,unwrappedTileID:o,getElevation:a,pitchAlignment:s="map",pitchScale:l="map"}=e;const c="map"===s?"map"===l?sl:ll:"map"===l?cl:ul,u={queryGeometry:n,size:i,transform:r,unwrappedTileID:o,getElevation:a};for(const h of t)for(const e of h)if(c(u,e))return!0;return!1}function dl(e,t,i,r){const o=t.projectTileCoordinates(e.x,e.y,i,r).point;return new n((.5*o.x+.5)*t.width,(.5*-o.y+.5)*t.height)}let pl,fl;fo("CircleBucket",Hs,{omit:["layers"]});var ml={get paint(){return fl=fl||new $o({"circle-radius":new Wo(xe.paint_circle["circle-radius"]),"circle-color":new Wo(xe.paint_circle["circle-color"]),"circle-blur":new Wo(xe.paint_circle["circle-blur"]),"circle-opacity":new Wo(xe.paint_circle["circle-opacity"]),"circle-translate":new Go(xe.paint_circle["circle-translate"]),"circle-translate-anchor":new Go(xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Go(xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Go(xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Wo(xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Wo(xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Wo(xe.paint_circle["circle-stroke-opacity"])})},get layout(){return pl=pl||new $o({"circle-sort-key":new Wo(xe.layout_circle["circle-sort-key"])})}};class gl extends Qo{constructor(e,t){super(e,ml,t)}createBucket(e){return new Hs(e)}queryRadius(e){const t=e;return il("circle-radius",this,t)+il("circle-stroke-width",this,t)+rl(this.paint.get("circle-translate"))}queryIntersectsFeature(e){let{queryGeometry:t,feature:n,featureState:i,geometry:r,transform:o,pixelsToTileUnits:a,unwrappedTileID:s,getElevation:l}=e;const c=ol(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-o.bearingInRadians,a),u=this.paint.get("circle-radius").evaluate(n,i)+this.paint.get("circle-stroke-width").evaluate(n,i),h=this.paint.get("circle-pitch-scale"),d=this.paint.get("circle-pitch-alignment");let p,f;return"map"===d?(p=c,f=u*a):(p=function(e,t,n,i){return e.map(e=>dl(e,t,n,i))}(c,o,s,l),f=u),hl({queryGeometry:p,size:f,transform:o,unwrappedTileID:s,getElevation:l,pitchAlignment:d,pitchScale:h},r)}}class yl extends Hs{}let vl;fo("HeatmapBucket",yl,{omit:["layers"]});var _l={get paint(){return vl=vl||new $o({"heatmap-radius":new Wo(xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Wo(xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Go(xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ko(xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Go(xe.paint_heatmap["heatmap-opacity"])})}};function xl(e,t,n,i){let{width:r,height:o}=t;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*o*n)throw new RangeError("mismatched image size. expected: ".concat(i.length," but got: ").concat(r*o*n))}else i=new Uint8Array(r*o*n);return e.width=r,e.height=o,e.data=i,e}function bl(e,t,n){let{width:i,height:r}=t;if(i===e.width&&r===e.height)return;const o=xl({},{width:i,height:r},n);wl(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,r)},n),e.width=i,e.height=r,e.data=o.data}function wl(e,t,n,i,r,o){if(0===r.width||0===r.height)return t;if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<r.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((i.y+l)*t.width+i.x)*o;for(let e=0;e<r.width*o;e++)s[u+e]=a[c+e]}return t}class Dl{constructor(e,t){xl(this,e,1,t)}resize(e){bl(this,e,1)}clone(){return new Dl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){wl(e,t,n,i,r,1)}}class El{constructor(e,t){xl(this,e,4,t)}resize(e){bl(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new El({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){wl(e,t,n,i,r,4)}setPixel(e,t,n){const i=4*(e*this.width+t);this.data[i+0]=Math.round(255*n.r/n.a),this.data[i+1]=Math.round(255*n.g/n.a),this.data[i+2]=Math.round(255*n.b/n.a),this.data[i+3]=Math.round(255*n.a)}}function Cl(e){const t={},n=e.resolution||256,i=e.clips?e.clips.length:1,r=e.image||new El({width:n,height:i});if(Math.log(n)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - ".concat(n));const o=(i,o,a)=>{t[e.evaluationKey]=a;const s=e.expression.evaluate(t);r.setPixel(i/4/n,o/4,s)};if(e.clips)for(let a=0,s=0;a<i;++a,s+=4*n)for(let t=0,i=0;t<n;t++,i+=4){const r=t/(n-1),{start:l,end:c}=e.clips[a];o(s,i,l*(1-r)+c*r)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return r}fo("AlphaImage",Dl),fo("RGBAImage",El);const Al="big-fb";class Sl extends Qo{createBucket(e){return new yl(e)}constructor(e,t){super(e,_l,t),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Al)&&this.heatmapFbos.delete(Al)}queryRadius(e){return il("heatmap-radius",this,e)}queryIntersectsFeature(e){let{queryGeometry:t,feature:n,featureState:i,geometry:r,transform:o,pixelsToTileUnits:a,unwrappedTileID:s,getElevation:l}=e;return hl({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(n,i)*a,transform:o,unwrappedTileID:s,getElevation:l},r)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&!this.isHidden()}}let Tl;var Fl={get paint(){return Tl=Tl||new $o({"hillshade-illumination-direction":new Go(xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Go(xe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Go(xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Go(xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Go(xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Go(xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Go(xe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Go(xe.paint_hillshade["hillshade-method"])})}};class kl extends Qo{constructor(e,t){super(e,Fl,t),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,t=this.paint.get("hillshade-illumination-altitude").values,n=this.paint.get("hillshade-highlight-color").values,i=this.paint.get("hillshade-shadow-color").values;const r=Math.max(e.length,t.length,n.length,i.length);e=e.concat(Array(r-e.length).fill(e.at(-1))),t=t.concat(Array(r-t.length).fill(t.at(-1))),n=n.concat(Array(r-n.length).fill(n.at(-1))),i=i.concat(Array(r-i.length).fill(i.at(-1)));const o=t.map(te);return{directionRadians:e.map(te),altitudeRadians:o,shadowColor:i,highlightColor:n}}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&!this.isHidden()}}let Pl;var Ml={get paint(){return Pl=Pl||new $o({"color-relief-opacity":new Go(xe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ko(xe["paint_color-relief"]["color-relief-color"])})}};class Il{constructor(e,t,n,i){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,i)}update(e,t,n){const{width:i,height:r}=e,o=!(this.size&&this.size[0]===i&&this.size[1]===r||n),{context:a}=this,{gl:s}=a;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),o)this.size=[i,r],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||X(e)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,e.data);else{const{x:t,y:o}=n||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||X(e)?s.texSubImage2D(s.TEXTURE_2D,0,t,o,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,o,i,r,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D),a.pixelStoreUnpackFlipY.setDefault(),a.pixelStoreUnpack.setDefault(),a.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,t,n){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class jl{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n))return void H('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".'));this.stride=t.height;const s=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=r,this.blueFactor=o,this.baseShift=a;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<s;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(s,l)]=this.data[this._idx(s-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,s)]=this.data[this._idx(l,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<s;l++)for(let e=0;e<s;e++){const t=this.get(l,e);t>this.max&&(this.max=t),t<this.min&&(this.min=t)}}get(e,t){const n=new Uint8Array(this.data.buffer),i=4*this._idx(e,t);return this.unpack(n[i],n[i+1],n[i+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("Out of range source coordinates for DEM data. x: ".concat(e,", y: ").concat(t,", dim: ").concat(this.dim));return(t+1)*this.stride+(e+1)}unpack(e,t,n){return e*this.redFactor+t*this.greenFactor+n*this.blueFactor-this.baseShift}pack(e){return Nl(e,this.getUnpackVector())}getPixels(){return new El({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=t*this.dim,r=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let c=o;c<a;c++)for(let t=i;t<r;t++)this.data[this._idx(t,c)]=e.data[this._idx(t+s,c+l)]}}function Nl(e,t){const n=t[0],i=t[1],r=t[2],o=t[3],a=Math.min(n,i,r),s=Math.round((e+o)/a);return{r:Math.floor(s*a/n)%256,g:Math.floor(s*a/i)%256,b:Math.floor(s*a/r)%256}}fo("DEMData",jl);class Ol extends Qo{constructor(e,t){super(e,Ml,t)}_createColorRamp(e){const t={elevationStops:[],colorStops:[]},n=this._transitionablePaint._values["color-relief-color"].value.expression;if(n instanceof or&&n._styleExpression.expression instanceof mn){this.colorRampExpression=n;const e=n._styleExpression.expression;t.elevationStops=e.labels,t.colorStops=[];for(const n of t.elevationStops)t.colorStops.push(e.evaluate({globals:{elevation:n}}))}if(t.elevationStops.length<1&&(t.elevationStops=[0],t.colorStops=[Tt.transparent]),t.elevationStops.length<2&&(t.elevationStops.push(t.elevationStops[0]+1),t.colorStops.push(t.colorStops[0])),t.elevationStops.length<=e)return t;const i={elevationStops:[],colorStops:[]},r=(t.elevationStops.length-1)/(e-1);for(let o=0;o<t.elevationStops.length-.5;o+=r)i.elevationStops.push(t.elevationStops[Math.round(o)]),i.colorStops.push(t.colorStops[Math.round(o)]);return H("Too many colors in specification of ".concat(this.id," color-relief layer, may not render properly. Max possible colors: ").concat(e,", provided: ").concat(t.elevationStops.length)),i}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,t,n){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const i=this._createColorRamp(t),r=new El({width:i.colorStops.length,height:1}),o=new El({width:i.colorStops.length,height:1});for(let a=0;a<i.elevationStops.length;a++){const e=Nl(i.elevationStops[a],n);o.setPixel(0,a,new Tt(e.r/255,e.g/255,e.b/255,1)),r.setPixel(0,a,i.colorStops[a])}return this.colorRampTextures={elevationTexture:new Il(e,o,e.gl.RGBA),colorTexture:new Il(e,r,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const Bl=oa([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ll}=Bl;function zl(e,t,n){const i=n.patternDependencies;let r=!1;for(const o of t){const t=o.paint.get("".concat(e,"-pattern"));t.isConstant()||(r=!0);const n=t.constantOr(null);n&&(r=!0,i[n.to]=!0,i[n.from]=!0)}return r}function Rl(e,t,n,i,r){const{zoom:o}=i,a=r.patternDependencies;for(const s of t){const t=s.paint.get("".concat(e,"-pattern")).value;if("constant"!==t.kind){let e=t.evaluate({zoom:o-1},n,{},r.availableImages),i=t.evaluate({zoom:o},n,{},r.availableImages),l=t.evaluate({zoom:o+1},n,{},r.availableImages);e=e&&e.name?e.name:e,i=i&&i.name?i.name:i,l=l&&l.name?l.name:l,a[e]=!0,a[i]=!0,a[l]=!0,n.patterns[s.id]={min:e,mid:i,max:l}}}return n}function Vl(e,t,n,i,r){let o;if(r===function(e,t,n,i){let r=0;for(let o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(let a=t;a<n;a+=i)o=cc(a/i|0,e[a],e[a+1],o);else for(let a=n-i;a>=t;a-=i)o=cc(a/i|0,e[a],e[a+1],o);return o&&ic(o,o.next)&&(uc(o),o=o.next),o}function Ul(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!ic(i,i.next)&&0!==nc(i.prev,i,i.next))i=i.next;else{if(uc(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function ql(e,t,n,i,r,o,a){if(!e)return;!a&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=$l(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n=1;do{let i,r=e;e=null;let o=null;for(t=0;r;){t++;let a=r,s=0;for(let e=0;e<n&&(s++,a=a.nextZ,a);e++);let l=n;for(;s>0||l>0&&a;)0!==s&&(0===l||!a||r.z<=a.z)?(i=r,r=r.nextZ,s--):(i=a,a=a.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=a}o.nextZ=null,n*=2}while(t>1)}(r)}(e,i,r,o);let s=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Hl(e,i,r,o):Zl(e))t.push(l.i,e.i,c.i),uc(e),e=c.next,s=c.next;else if((e=c)===s){a?1===a?ql(e=Gl(Ul(e),t),t,n,i,r,o,2):2===a&&Wl(e,t,n,i,r,o):ql(Ul(e),t,n,i,r,o,1);break}}}function Zl(e){const t=e.prev,n=e,i=e.next;if(nc(t,n,i)>=0)return!1;const r=t.x,o=n.x,a=i.x,s=t.y,l=n.y,c=i.y,u=Math.min(r,o,a),h=Math.min(s,l,c),d=Math.max(r,o,a),p=Math.max(s,l,c);let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&ec(r,s,o,l,a,c,f.x,f.y)&&nc(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Hl(e,t,n,i){const r=e.prev,o=e,a=e.next;if(nc(r,o,a)>=0)return!1;const s=r.x,l=o.x,c=a.x,u=r.y,h=o.y,d=a.y,p=Math.min(s,l,c),f=Math.min(u,h,d),m=Math.max(s,l,c),g=Math.max(u,h,d),y=$l(p,f,t,n,i),v=$l(m,g,t,n,i);let _=e.prevZ,x=e.nextZ;for(;_&&_.z>=y&&x&&x.z<=v;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==r&&_!==a&&ec(s,u,l,h,c,d,_.x,_.y)&&nc(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&ec(s,u,l,h,c,d,x.x,x.y)&&nc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==r&&_!==a&&ec(s,u,l,h,c,d,_.x,_.y)&&nc(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&ec(s,u,l,h,c,d,x.x,x.y)&&nc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Gl(e,t){let n=e;do{const i=n.prev,r=n.next.next;!ic(i,r)&&rc(i,n,n.next,r)&&sc(i,r)&&sc(r,i)&&(t.push(i.i,n.i,r.i),uc(n),uc(n.next),n=e=r),n=n.next}while(n!==e);return Ul(n)}function Wl(e,t,n,i,r,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&tc(a,e)){let s=lc(a,e);return a=Ul(a,a.next),s=Ul(s,s.next),ql(a,t,n,i,r,o,0),void ql(s,t,n,i,r,o,0)}e=e.next}a=a.next}while(a!==e)}function Yl(e,t){let n=e.x-t.x;return 0===n&&(n=e.y-t.y,0===n)&&(n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function Xl(e,t){const n=function(e,t){let n=t;const i=e.x,r=e.y;let o,a=-1/0;if(ic(e,n))return n;do{if(ic(e,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>a&&(a=e,o=n.x<n.next.x?n:n.next,e===i))return o}n=n.next}while(n!==t);if(!o)return null;const s=o,l=o.x,c=o.y;let u=1/0;n=o;do{if(i>=n.x&&n.x>=l&&i!==n.x&&Jl(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)){const t=Math.abs(r-n.y)/(i-n.x);sc(n,e)&&(t<u||t===u&&(n.x>o.x||n.x===o.x&&Kl(o,n)))&&(o=n,u=t)}n=n.next}while(n!==s);return o}(e,t);if(!n)return t;const i=lc(n,e);return Ul(i,i.next),Ul(n,n.next)}function Kl(e,t){return nc(e.prev,e,t.prev)<0&&nc(t.next,e,e.next)<0}function $l(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ql(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Jl(e,t,n,i,r,o,a,s){return(r-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(r-a)*(i-s)}function ec(e,t,n,i,r,o,a,s){return!(e===a&&t===s)&&Jl(e,t,n,i,r,o,a,s)}function tc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&rc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(sc(e,t)&&sc(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(nc(e.prev,e,t.prev)||nc(e,t.prev,t))||ic(e,t)&&nc(e.prev,e,e.next)>0&&nc(t.prev,t,t.next)>0)}function nc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ic(e,t){return e.x===t.x&&e.y===t.y}function rc(e,t,n,i){const r=ac(nc(e,t,n)),o=ac(nc(e,t,i)),a=ac(nc(n,i,e)),s=ac(nc(n,i,t));return r!==o&&a!==s||!(0!==r||!oc(e,n,t))||!(0!==o||!oc(e,i,t))||!(0!==a||!oc(n,e,i))||!(0!==s||!oc(n,t,i))}function oc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function ac(e){return e>0?1:e<0?-1:0}function sc(e,t){return nc(e.prev,e,e.next)<0?nc(e,t,e.next)>=0&&nc(e,e.prev,t)>=0:nc(e,t,e.prev)<0||nc(e,e.next,t)<0}function lc(e,t){const n=hc(e.i,e.x,e.y),i=hc(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function cc(e,t,n,i){const r=hc(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function uc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function hc(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class dc{constructor(e,t){if(t>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=t}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class pc{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}pc.noSubdivision=new pc({fill:new dc(0,0),line:new dc(0,0),tile:new dc(0,0),stencil:new dc(0,0),circle:1}),fo("SubdivisionGranularityExpression",dc),fo("SubdivisionGranularitySetting",pc);const fc=-32768,mc=32767;class gc{constructor(e,t){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=k/e,this._canonical=t}_getKey(e,t){return(e+=32768)<<16|t+32768}_vertexToIndex(e,t){if(e<-32768||t<-32768||e>32767||t>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const n=0|Math.round(e),i=0|Math.round(t),r=this._getKey(n,i);if(this._vertexDictionary.has(r))return this._vertexDictionary.get(r);const o=this._vertexBuffer.length/2;return this._vertexDictionary.set(r,o),this._vertexBuffer.push(n,i),o}_subdivideTrianglesScanline(e){if(this._granularity<2)return function(e,t){const n=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=t[i+1],a=t[i+2],s=e[2*r],l=e[2*r+1];(e[2*o]-s)*(e[2*a+1]-l)-(e[2*o+1]-l)*(e[2*a]-s)>0?(n.push(r),n.push(a),n.push(o)):(n.push(r),n.push(o),n.push(a))}return n}(this._vertexBuffer,e);const t=[],n=e.length;for(let i=0;i<n;i+=3){const n=[e[i+0],e[i+1],e[i+2]],r=[this._vertexBuffer[2*e[i+0]+0],this._vertexBuffer[2*e[i+0]+1],this._vertexBuffer[2*e[i+1]+0],this._vertexBuffer[2*e[i+1]+1],this._vertexBuffer[2*e[i+2]+0],this._vertexBuffer[2*e[i+2]+1]];let o=1/0,a=1/0,s=-1/0,l=-1/0;for(let e=0;e<3;e++){const t=r[2*e],n=r[2*e+1];o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),l=Math.max(l,n)}if(o===s||a===l)continue;const c=Math.floor(o/this._granularityCellSize),u=Math.ceil(s/this._granularityCellSize),h=Math.floor(a/this._granularityCellSize),d=Math.ceil(l/this._granularityCellSize);if(c!==u||h!==d)for(let e=h;e<d;e++){const i=this._scanlineGenerateVertexRingForCellRow(e,r,n);_c(this._vertexBuffer,i,t)}else t.push(...n)}return t}_scanlineGenerateVertexRingForCellRow(e,t,n){const i=e*this._granularityCellSize,r=i+this._granularityCellSize,o=[];for(let a=0;a<3;a++){const e=t[2*a],s=t[2*a+1],l=t[2*(a+1)%6],c=t[(2*(a+1)+1)%6],u=t[2*(a+2)%6],h=t[(2*(a+2)+1)%6],d=l-e,p=c-s,f=0===d,m=0===p,g=(i-s)/p,y=(r-s)/p,v=Math.min(g,y),_=Math.max(g,y);if(!m&&(v>=1||_<=0)||m&&(s<i||s>r)){c>=i&&c<=r&&o.push(n[(a+1)%3]);continue}!m&&v>0&&o.push(this._vertexToIndex(e+d*v,s+p*v));const x=e+d*Math.max(v,0),b=e+d*Math.min(_,1);f||this._generateIntraEdgeVertices(o,e,s,l,c,x,b),!m&&_<1&&o.push(this._vertexToIndex(e+d*_,s+p*_)),(m||c>=i&&c<=r)&&o.push(n[(a+1)%3]),!m&&(c<=i||c>=r)&&this._generateInterEdgeVertices(o,e,s,l,c,u,h,b,i,r)}return o}_generateIntraEdgeVertices(e,t,n,i,r,o,a){const s=i-t,l=r-n,c=0===l,u=c?Math.min(t,i):Math.min(o,a),h=c?Math.max(t,i):Math.max(o,a),d=Math.floor(u/this._granularityCellSize)+1,p=Math.ceil(h/this._granularityCellSize)-1;if(c?t<i:o<a)for(let f=d;f<=p;f++){const i=f*this._granularityCellSize;e.push(this._vertexToIndex(i,n+l*(i-t)/s))}else for(let f=p;f>=d;f--){const i=f*this._granularityCellSize;e.push(this._vertexToIndex(i,n+l*(i-t)/s))}}_generateInterEdgeVertices(e,t,n,i,r,o,a,s,l,c){const u=r-n,h=o-i,d=a-r,p=(l-r)/d,f=(c-r)/d,m=Math.min(p,f),g=Math.max(p,f),y=i+h*m;let v=Math.floor(Math.min(y,s)/this._granularityCellSize)+1,_=Math.ceil(Math.max(y,s)/this._granularityCellSize)-1,x=s<y;const b=0===d;if(b&&(a===l||a===c))return;if(b||m>=1||g<=0){const e=n-a,i=o+(t-o)*Math.min((l-a)/e,(c-a)/e);v=Math.floor(Math.min(i,s)/this._granularityCellSize)+1,_=Math.ceil(Math.max(i,s)/this._granularityCellSize)-1,x=s<i}const w=u>0?c:l;if(x)for(let D=v;D<=_;D++)e.push(this._vertexToIndex(D*this._granularityCellSize,w));else for(let D=_;D>=v;D--)e.push(this._vertexToIndex(D*this._granularityCellSize,w))}_generateOutline(e){const t=[];for(const n of e){const e=vc(n,this._granularity,!0),i=this._pointArrayToIndices(e),r=[];for(let t=1;t<i.length;t++)r.push(i[t-1]),r.push(i[t]);t.push(r)}return t}_handlePoles(e){let t=!1,n=!1;this._canonical&&(0===this._canonical.y&&(t=!0),this._canonical.y===(1<<this._canonical.z)-1&&(n=!0)),(t||n)&&this._fillPoles(e,t,n)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let t=0;t<e.length;t+=2){const n=e[t+1];n===fc&&(e[t+1]=-32767),n===mc&&(e[t+1]=32766)}}_generatePoleQuad(e,t,n,i,r,o){i>r!=(o===fc)?(e.push(t),e.push(n),e.push(this._vertexToIndex(i,o)),e.push(n),e.push(this._vertexToIndex(r,o)),e.push(this._vertexToIndex(i,o))):(e.push(n),e.push(t),e.push(this._vertexToIndex(i,o)),e.push(this._vertexToIndex(r,o)),e.push(n),e.push(this._vertexToIndex(i,o)))}_fillPoles(e,t,n){const i=this._vertexBuffer,r=k,o=e.length;for(let a=2;a<o;a+=3){const o=e[a-2],s=e[a-1],l=e[a],c=i[2*o],u=i[2*o+1],h=i[2*s],d=i[2*s+1],p=i[2*l],f=i[2*l+1];t&&(0===u&&0===d&&this._generatePoleQuad(e,o,s,c,h,fc),0===d&&0===f&&this._generatePoleQuad(e,s,l,h,p,fc),0===f&&0===u&&this._generatePoleQuad(e,l,o,p,c,fc)),n&&(u===r&&d===r&&this._generatePoleQuad(e,o,s,c,h,mc),d===r&&f===r&&this._generatePoleQuad(e,s,l,h,p,mc),f===r&&u===r&&this._generatePoleQuad(e,l,o,p,c,mc))}}_initializeVertices(e){for(let t=0;t<e.length;t+=2)this._vertexToIndex(e[t],e[t+1])}subdividePolygonInternal(e,t){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:n,holeIndices:i}=function(e){const t=[],n=[];for(const i of e)if(0!==i.length){i!==e[0]&&t.push(n.length/2);for(let e=0;e<i.length;e++)n.push(i[e].x),n.push(i[e].y)}return{flattened:n,holeIndices:t}}(e);let r;this._initializeVertices(n);try{const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=Vl(e,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c;if(i&&(o=function(e,t,n,i){const r=[];for(let o=0,a=t.length;o<a;o++){const n=Vl(e,t[o]*i,o<a-1?t[o+1]*i:e.length,i,!1);n===n.next&&(n.steiner=!0),r.push(Ql(n))}r.sort(Yl);for(let o=0;o<r.length;o++)n=Xl(r[o],n);return n}(e,t,o,n)),e.length>80*n){s=e[0],l=e[1];let t=s,i=l;for(let o=n;o<r;o+=n){const n=e[o],r=e[o+1];n<s&&(s=n),r<l&&(l=r),n>t&&(t=n),r>i&&(i=r)}c=Math.max(t-s,i-l),c=0!==c?32767/c:0}return ql(o,a,n,s,l,c,0),a}(n,i),t=this._convertIndices(n,e);r=this._subdivideTrianglesScanline(t)}catch(e){console.error(e)}let o=[];return t&&(o=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(r),{verticesFlattened:this._vertexBuffer,indicesTriangles:r,indicesLineList:o}}_convertIndices(e,t){const n=[];for(let i=0;i<t.length;i++)n.push(this._vertexToIndex(e[2*t[i]],e[2*t[i]+1]));return n}_pointArrayToIndices(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push(this._vertexToIndex(i.x,i.y))}return t}}function yc(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new gc(n,t).subdividePolygonInternal(e,i)}function vc(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||e.length<1)return[];if(e.length<2)return[];const r=e[0],o=e[e.length-1],a=i&&(r.x!==o.x||r.y!==o.y);if(t<2)return a?[...e,e[0]]:[...e];const s=Math.floor(k/t),l=[];l.push(new n(e[0].x,e[0].y));const c=e.length,u=a?c:c-1;for(let h=0;h<u;h++){const t=e[h],i=h<c-1?e[h+1]:e[0],r=t.x,o=t.y,a=i.x,u=i.y,d=r!==a,p=o!==u;if(!d&&!p)continue;const f=a-r,m=u-o,g=Math.abs(f),y=Math.abs(m);let v=r,_=o;for(;;){const e=f>0?(Math.floor(v/s)+1)*s:(Math.ceil(v/s)-1)*s,t=m>0?(Math.floor(_/s)+1)*s:(Math.ceil(_/s)-1)*s,i=Math.abs(v-e),r=Math.abs(_-t),o=Math.abs(v-a),c=Math.abs(_-u),h=d?i/g:Number.POSITIVE_INFINITY,x=p?r/y:Number.POSITIVE_INFINITY;if((o<=i||!d)&&(c<=r||!p))break;if(h<x&&d||!p){v=e,_+=m*h;const t=new n(v,Math.round(_));l[l.length-1].x===t.x&&l[l.length-1].y===t.y||l.push(t)}else{v+=f*x,_=t;const e=new n(Math.round(v),_);l[l.length-1].x===e.x&&l[l.length-1].y===e.y||l.push(e)}}const x=new n(a,u);l[l.length-1].x===x.x&&l[l.length-1].y===x.y||l.push(x)}return l}function _c(e,t,n){if(0===t.length)throw new Error("Subdivision vertex ring is empty.");let i=0,r=e[2*t[0]];for(let l=1;l<t.length;l++){const n=e[2*t[l]];n<r&&(r=n,i=l)}const o=t.length;let a=i,s=(a+1)%o;for(;;){const i=a-1>=0?a-1:o-1,r=(s+1)%o,l=e[2*t[i]],c=e[2*t[r]],u=e[2*t[a]],h=e[2*t[a]+1],d=e[2*t[s]+1];let p=!1;if(l<c)p=!0;else if(l>c)p=!1;else{const n=d-h,o=-(e[2*t[s]]-u),a=h<d?1:-1;((l-u)*n+(e[2*t[i]+1]-h)*o)*a>((c-u)*n+(e[2*t[r]+1]-h)*o)*a&&(p=!0)}if(p){const e=t[i],r=t[a],l=t[s];e!==r&&e!==l&&r!==l&&n.push(l,r,e),a--,a<0&&(a=o-1)}else{const e=t[r],i=t[a],l=t[s];e!==i&&e!==l&&i!==l&&n.push(l,i,e),s++,s>=o&&(s=0)}if(i===r)break}}function xc(e,t,n,i,r,o,a,s,l){const c=r.length/2,u=a&&s&&l;if(c<as.MAX_VERTEX_ARRAY_LENGTH){const h=t.prepareSegment(c,n,i),d=h.vertexLength;for(let e=0;e<o.length;e+=3)i.emplaceBack(d+o[e],d+o[e+1],d+o[e+2]);let p,f;h.vertexLength+=c,h.primitiveLength+=o.length/3,u&&(f=a.prepareSegment(c,n,s),p=f.vertexLength,f.vertexLength+=c);for(let t=0;t<r.length;t+=2)e(r[t],r[t+1]);if(u)for(let e=0;e<l.length;e++){const t=l[e];for(let e=1;e<t.length;e+=2)s.emplaceBack(p+t[e-1],p+t[e]);f.primitiveLength+=t.length/2}}else!function(e,t,n,i,r,o){const a=[];for(let h=0;h<i.length/2;h++)a.push(-1);const s={count:0};let l=0,c=e.getOrCreateLatestSegment(t,n),u=c.vertexLength;for(let h=2;h<r.length;h+=3){const d=r[h-2],p=r[h-1],f=r[h];let m=a[d]<l,g=a[p]<l,y=a[f]<l;c.vertexLength+((m?1:0)+(g?1:0)+(y?1:0))>as.MAX_VERTEX_ARRAY_LENGTH&&(c=e.createNewSegment(t,n),l=s.count,m=!0,g=!0,y=!0,u=0);const v=bc(a,i,o,s,d,m,c),_=bc(a,i,o,s,p,g,c),x=bc(a,i,o,s,f,y,c);n.emplaceBack(u+v-l,u+_-l,u+x-l),c.primitiveLength++}}(t,n,i,r,o,e),u&&function(e,t,n,i,r,o){const a=[];for(let h=0;h<i.length/2;h++)a.push(-1);const s={count:0};let l=0,c=e.getOrCreateLatestSegment(t,n),u=c.vertexLength;for(let h=0;h<r.length;h++){const d=r[h];for(let p=1;p<r[h].length;p+=2){const r=d[p-1],h=d[p];let f=a[r]<l,m=a[h]<l;c.vertexLength+((f?1:0)+(m?1:0))>as.MAX_VERTEX_ARRAY_LENGTH&&(c=e.createNewSegment(t,n),l=s.count,f=!0,m=!0,u=0);const g=bc(a,i,o,s,r,f,c),y=bc(a,i,o,s,h,m,c);n.emplaceBack(u+g-l,u+y-l),c.primitiveLength++}}}(a,n,s,r,l,e),t.forceNewSegmentOnNextPrepare(),null==a||a.forceNewSegmentOnNextPrepare()}function bc(e,t,n,i,r,o,a){if(o){const o=i.count;return n(t[2*r],t[2*r+1]),e[r]=i.count,i.count++,a.vertexLength++,o}return e[r]}class wc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Ha,this.indexArray=new ns,this.indexArray2=new is,this.programConfigurations=new Os(e.layers,e.zoom),this.segments=new as,this.segments2=new as,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.hasDependencies=zl("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),r=!i.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Us(a,e);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),u,n))continue;const h=r?i.evaluate(u,{},n,t.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Vs(a),patterns:{},sortKey:h};o.push(d)}r&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const a of o){const{geometry:i,index:r,sourceLayerIndex:o}=a;if(this.hasDependencies){const e=Rl("fill",this.layers,a,{zoom:this.zoom},t);this.patternFeatures.push(e)}else this.addFeature(a,i,r,n,{},t.subdivisionGranularity);t.featureIndex.insert(e[r].feature,i,r,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,{imagePositions:n})}addFeatures(e,t,n){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,n,e.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ll),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,i,r,o){for(const a of ni(t,500)){const e=yc(a,i,o.fill.getGranularityForZoomLevel(i.z)),t=this.layoutVertexArray;xc((e,n)=>{t.emplaceBack(e,n)},this.segments,this.layoutVertexArray,this.indexArray,e.verticesFlattened,e.indicesTriangles,this.segments2,this.indexArray2,e.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{imagePositions:r,canonical:i})}}let Dc,Ec;fo("FillBucket",wc,{omit:["layers","patternFeatures"]});var Cc={get paint(){return Ec=Ec||new $o({"fill-antialias":new Go(xe.paint_fill["fill-antialias"]),"fill-opacity":new Wo(xe.paint_fill["fill-opacity"]),"fill-color":new Wo(xe.paint_fill["fill-color"]),"fill-outline-color":new Wo(xe.paint_fill["fill-outline-color"]),"fill-translate":new Go(xe.paint_fill["fill-translate"]),"fill-translate-anchor":new Go(xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yo(xe.paint_fill["fill-pattern"])})},get layout(){return Dc=Dc||new $o({"fill-sort-key":new Wo(xe.layout_fill["fill-sort-key"])})}};class Ac extends Qo{constructor(e,t){super(e,Cc,t)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new wc(e)}queryRadius(){return rl(this.paint.get("fill-translate"))}queryIntersectsFeature(e){let{queryGeometry:t,geometry:n,transform:i,pixelsToTileUnits:r}=e;return Ys(ol(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-i.bearingInRadians,r),n)}isTileClipped(){return!0}}const Sc=oa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Tc=oa([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Fc}=Sc;class kc{constructor(e,t,n,i,r){this.properties={},this.extent=n,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=r,e.readFields(Pc,this,t)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos,i=[];let r,o=1,a=0,s=0,l=0;for(;e.pos<t;){if(a<=0){const t=e.readVarint();o=7&t,a=t>>3}if(a--,1===o||2===o)s+=e.readSVarint(),l+=e.readSVarint(),1===o&&(r&&i.push(r),r=[]),r&&r.push(new n(s,l));else{if(7!==o)throw new Error("unknown command ".concat(o));r&&r.push(r[0].clone())}}return r&&i.push(r),i}bbox(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos;let n=1,i=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;for(;e.pos<t;){if(i<=0){const t=e.readVarint();n=7&t,i=t>>3}if(i--,1===n||2===n)r+=e.readSVarint(),o+=e.readSVarint(),r<a&&(a=r),r>s&&(s=r),o<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command ".concat(n))}return[a,l,s,c]}toGeoJSON(e,t,n){const i=this.extent*Math.pow(2,n),r=this.extent*e,o=this.extent*t,a=this.loadGeometry();function s(e){return[360*(e.x+r)/i-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+o)/i)*Math.PI))-90]}function l(e){return e.map(s)}let c;if(1===this.type){const e=[];for(const n of a)e.push(n[0]);const t=l(e);c=1===e.length?{type:"Point",coordinates:t[0]}:{type:"MultiPoint",coordinates:t}}else if(2===this.type){const e=a.map(l);c=1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}}else{if(3!==this.type)throw new Error("unknown feature type");{const e=Mc(a),t=[];for(const n of e)t.push(n.map(l));c=1===t.length?{type:"Polygon",coordinates:t[0]}:{type:"MultiPolygon",coordinates:t}}}const u={type:"Feature",geometry:c,properties:this.properties};return null!=this.id&&(u.id=this.id),u}}function Pc(e,t,n){1===e?t.id=n.readVarint():2===e?function(e,t){const n=e.readVarint()+e.pos;for(;e.pos<n;){const n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(n,t):3===e?t.type=n.readVarint():4===e&&(t._geometry=n.pos)}function Mc(e){const t=e.length;if(t<=1)return[e];const n=[];let i,r;for(let o=0;o<t;o++){const t=Ic(e[o]);0!==t&&(void 0===r&&(r=t<0),r===t<0?(i&&n.push(i),i=[e[o]]):i&&i.push(e[o]))}return i&&n.push(i),n}function Ic(e){let t=0;for(let n,i,r=0,o=e.length,a=o-1;r<o;a=r++)n=e[r],i=e[a],t+=(i.x-n.x)*(n.y+i.y);return t}kc.types=["Unknown","Point","LineString","Polygon"];class jc{constructor(e,t){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Nc,this,t),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const t=this._pbf.readVarint()+this._pbf.pos;return new kc(this._pbf,t,this.extent,this._keys,this._values)}}function Nc(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){let t=null;const n=e.readVarint()+e.pos;for(;e.pos<n;){const n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}if(null==t)throw new Error("unknown feature value");return t}(n))}class Oc{constructor(e,t){this.layers=e.readFields(Bc,{},t)}}function Bc(e,t,n){if(3===e){const e=new jc(n,n.readVarint()+n.pos);e.length&&(t[e.name]=e)}}const Lc=Math.pow(2,13);function zc(e,t,n,i,r,o,a,s){e.emplaceBack(t,n,2*Math.floor(i*Lc)+a,r*Lc*2,o*Lc*2,Math.round(s))}class Rc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new Ga,this.centroidVertexArray=new qa,this.indexArray=new ns,this.programConfigurations=new Os(e.layers,e.zoom),this.segments=new as,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.features=[],this.hasDependencies=zl("fill-extrusion",this.layers,t);for(const{feature:i,id:r,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,s=Us(i,e);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),s,n))continue;const l={id:r,sourceLayerIndex:a,index:o,geometry:e?s.geometry:Vs(i),properties:i.properties,type:i.type,patterns:{}};this.hasDependencies?this.features.push(Rl("fill-extrusion",this.layers,l,{zoom:this.zoom},t)):this.addFeature(l,l.geometry,o,n,{},t.subdivisionGranularity),t.featureIndex.insert(i,l.geometry,o,a,this.index,!0)}}addFeatures(e,t,n){for(const i of this.features){const{geometry:r}=i;this.addFeature(i,r,i.index,t,n,e.subdivisionGranularity)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,{imagePositions:n})}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fc),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Tc.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,n,i,r,o){for(const a of ni(t,500)){const t={x:0,y:0,sampleCount:0},n=this.layoutVertexArray.length;this.processPolygon(t,i,e,a,o);const r=this.layoutVertexArray.length-n,s=Math.floor(t.x/t.sampleCount),l=Math.floor(t.y/t.sampleCount);for(let e=0;e<r;e++)this.centroidVertexArray.emplaceBack(s,l)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{imagePositions:r,canonical:i})}processPolygon(e,t,n,i,r){if(i.length<1)return;if(qc(i[0]))return;for(const u of i)0!==u.length&&Vc(e,u);const o={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},a=r.fill.getGranularityForZoomLevel(t.z),s="Polygon"===kc.types[n.type];for(const u of i){if(0===u.length)continue;if(qc(u))continue;const e=vc(u,a,s);this._generateSideFaces(e,o)}if(!s)return;const l=yc(i,t,a,!1),c=this.layoutVertexArray;xc((e,t)=>{zc(c,e,t,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,l.verticesFlattened,l.indicesTriangles)}_generateSideFaces(e,t){let n=0;for(let i=1;i<e.length;i++){const r=e[i],o=e[i-1];if(Uc(r,o))continue;t.segment.vertexLength+4>as.MAX_VERTEX_ARRAY_LENGTH&&(t.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const a=r.sub(o)._perp()._unit(),s=o.dist(r);n+s>32768&&(n=0),zc(this.layoutVertexArray,r.x,r.y,a.x,a.y,0,0,n),zc(this.layoutVertexArray,r.x,r.y,a.x,a.y,0,1,n),n+=s,zc(this.layoutVertexArray,o.x,o.y,a.x,a.y,0,0,n),zc(this.layoutVertexArray,o.x,o.y,a.x,a.y,0,1,n);const l=t.segment.vertexLength;this.indexArray.emplaceBack(l,l+2,l+1),this.indexArray.emplaceBack(l+1,l+2,l+3),t.segment.vertexLength+=4,t.segment.primitiveLength+=2}}}function Vc(e,t){for(let n=0;n<t.length;n++){const i=t[n];n===t.length-1&&t[0].x===i.x&&t[0].y===i.y||(e.x+=i.x,e.y+=i.y,e.sampleCount++)}}function Uc(e,t){return e.x===t.x&&(e.x<0||e.x>k)||e.y===t.y&&(e.y<0||e.y>k)}function qc(e){return e.every(e=>e.x<0)||e.every(e=>e.x>k)||e.every(e=>e.y<0)||e.every(e=>e.y>k)}let Zc;fo("FillExtrusionBucket",Rc,{omit:["layers","features"]});var Hc={get paint(){return Zc=Zc||new $o({"fill-extrusion-opacity":new Go(xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Wo(xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Go(xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Go(xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yo(xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Wo(xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Wo(xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Go(xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Gc extends Qo{constructor(e,t){super(e,Hc,t)}createBucket(e){return new Rc(e)}queryRadius(){return rl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e){let{queryGeometry:t,feature:i,featureState:r,geometry:o,transform:a,pixelsToTileUnits:s,pixelPosMatrix:l}=e;const c=ol(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-a.bearingInRadians,s),u=this.paint.get("fill-extrusion-height").evaluate(i,r),h=this.paint.get("fill-extrusion-base").evaluate(i,r),d=function(e,t){const i=[];for(const r of e){const e=[r.x,r.y,0,1];C(e,e,t),i.push(new n(e[0]/e[3],e[1]/e[3]))}return i}(c,l),p=function(e,t,i,r){const o=[],a=[],s=r[8]*t,l=r[9]*t,c=r[10]*t,u=r[11]*t,h=r[8]*i,d=r[9]*i,p=r[10]*i,f=r[11]*i;for(const m of e){const e=[],t=[];for(const i of m){const o=i.x,a=i.y,m=r[0]*o+r[4]*a+r[12],g=r[1]*o+r[5]*a+r[13],y=r[2]*o+r[6]*a+r[14],v=r[3]*o+r[7]*a+r[15],_=y+c,x=v+u,b=m+h,w=g+d,D=y+p,E=v+f,C=new n((m+s)/x,(g+l)/x);C.z=_/x,e.push(C);const A=new n(b/E,w/E);A.z=D/E,t.push(A)}o.push(e),a.push(t)}return[o,a]}(o,h,u,l);return function(e,t,n){let i=1/0;Ys(n,t)&&(i=Yc(n,t[0]));for(let r=0;r<t.length;r++){const o=t[r],a=e[r];for(let e=0;e<o.length-1;e++){const t=o[e],r=[t,o[e+1],a[e+1],a[e],t];Gs(n,r)&&(i=Math.min(i,Yc(n,r)))}}return i!==1/0&&i}(p[0],p[1],d)}}function Wc(e,t){return e.x*t.x+e.y*t.y}function Yc(e,t){if(1===e.length){let n=0;const i=t[n++];let r;for(;!r||i.equals(r);)if(r=t[n++],!r)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=r.sub(i),l=o.sub(i),c=a.sub(i),u=Wc(s,s),h=Wc(s,l),d=Wc(l,l),p=Wc(c,s),f=Wc(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,v=i.z*(1-g-y)+r.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}const Xc=oa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Kc}=Xc,$c=oa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Qc}=$c,Jc=Math.cos(Math.PI/180*37.5),eu=Math.pow(2,14)/.5;class tu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new Wa,this.layoutVertexArray2=new Ya,this.indexArray=new ns,this.programConfigurations=new Os(e.layers,e.zoom),this.segments=new as,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.hasDependencies=zl("line",this.layers,t)||this.hasLineDasharray(this.layers);const i=this.layers[0].layout.get("line-sort-key"),r=!i.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Us(a,e);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),t,n))continue;const u=r?i.evaluate(t,{},n):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?t.geometry:Vs(a),patterns:{},dashes:{},sortKey:u};o.push(h)}r&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const a of o){const{geometry:i,index:r,sourceLayerIndex:o}=a;this.hasDependencies?(zl("line",this.layers,t)?Rl("line",this.layers,a,{zoom:this.zoom},t):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,a,this.zoom,t),this.patternFeatures.push(a)):this.addFeature(a,i,r,n,{},{},t.subdivisionGranularity),t.featureIndex.insert(e[r].feature,i,r,o,this.index)}}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,{imagePositions:n,dashPositions:i})}addFeatures(e,t,n,i){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,t,n,i,e.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Qc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,i,r,o,a){const s=this.layers[0].layout,l=s.get("line-join").evaluate(e,{}),c=s.get("line-cap"),u=s.get("line-miter-limit"),h=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const d of t)this.addLine(d,e,l,c,u,h,i,a);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{imagePositions:r,dashPositions:o,canonical:i})}addLine(e,t,n,i,r,o,a,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=vc(e,a?s.line.getGranularityForZoomLevel(a.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const l="Polygon"===kc.types[t.type];let c=e.length;for(;c>=2&&e[c-1].equals(e[c-2]);)c--;let u=0;for(;u<c-1&&e[u].equals(e[u+1]);)u++;if(c<(l?3:2))return;"bevel"===n&&(r=1.05);const h=this.overscaling<=16?122880/(512*this.overscaling):0,d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);let p,f,m,g,y;this.e1=this.e2=-1,l&&(p=e[c-2],y=e[u].sub(p)._unit()._perp());for(let v=u;v<c;v++){if(m=v===c-1?l?e[u+1]:void 0:e[v+1],m&&e[v].equals(m))continue;y&&(g=y),p&&(f=p),p=e[v],y=m?m.sub(p)._unit()._perp():g,g=g||y;let t=g.add(y);0===t.x&&0===t.y||t._unit();const a=g.x*y.x+g.y*y.y,s=t.x*y.x+t.y*y.y,_=0!==s?1/s:1/0,x=2*Math.sqrt(2-2*s),b=s<Jc&&f&&m,w=g.x*y.y-g.y*y.x>0;if(b&&v>u){const e=p.dist(f);if(e>2*h){const t=p.sub(p.sub(f)._mult(h/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,g,0,0,d),f=t}}const D=f&&m;let E=D?n:l?"butt":i;if(D&&"round"===E&&(_<o?E="miter":_<=2&&(E="fakeround")),"miter"===E&&_>r&&(E="bevel"),"bevel"===E&&(_>2&&(E="flipbevel"),_<r&&(E="miter")),f&&this.updateDistance(f,p),"miter"===E)t._mult(_),this.addCurrentVertex(p,t,0,0,d);else if("flipbevel"===E){if(_>100)t=y.mult(-1);else{const e=_*g.add(y).mag()/g.sub(y).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(p,t,0,0,d),this.addCurrentVertex(p,t.mult(-1),0,0,d)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(_*_-1),t=w?e:0,n=w?0:e;if(f&&this.addCurrentVertex(p,g,t,n,d),"fakeround"===E){const e=Math.round(180*x/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+a*(a*(3.55645-1.43519*a)-3.2452))*e*e+(.848013+a*(.215638*a-1.06021)))}const i=y.sub(g)._mult(n)._add(g)._unit()._mult(w?-1:1);this.addHalfVertex(p,i.x,i.y,!1,w,0,d)}}m&&this.addCurrentVertex(p,y,-t,-n,d)}else if("butt"===E)this.addCurrentVertex(p,t,0,0,d);else if("square"===E){const e=f?1:-1;this.addCurrentVertex(p,t,e,e,d)}else"round"===E&&(f&&(this.addCurrentVertex(p,g,0,0,d),this.addCurrentVertex(p,g,1,1,d,!0)),m&&(this.addCurrentVertex(p,y,-1,-1,d,!0),this.addCurrentVertex(p,y,0,0,d)));if(b&&v<c-1){const e=p.dist(m);if(e>2*h){const t=p.add(m.sub(p)._mult(h/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,y,0,0,d),p=t}}}}addCurrentVertex(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=t.y*i-t.x,s=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,r),this.addHalfVertex(e,a,s,o,!0,-i,r),this.distance>eu/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,n,i,r,o))}addHalfVertex(e,t,n,i,r,o,a){let{x:s,y:l}=e;const c=.5*(this.lineClips?this.scaledDistance*(eu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(i?1:0),(l<<1)+(r?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,u,this.e2),a.primitiveLength++),r?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}hasLineDasharray(e){for(const t of e){const e=t.paint.get("line-dasharray");if(e&&!e.isConstant())return!0}return!1}addLineDashDependencies(e,t,n,i){for(const r of e){const e=r.paint.get("line-dasharray");if(!e||"constant"===e.value.kind)continue;const o="round"===r.layout.get("line-cap"),a={dasharray:e.value.evaluate({zoom:n-1},t,{}),round:o},s={dasharray:e.value.evaluate({zoom:n},t,{}),round:o},l={dasharray:e.value.evaluate({zoom:n+1},t,{}),round:o},c="".concat(a.dasharray.join(","),",").concat(a.round),u="".concat(s.dasharray.join(","),",").concat(s.round),h="".concat(l.dasharray.join(","),",").concat(l.round);i.dashDependencies[c]=a,i.dashDependencies[u]=s,i.dashDependencies[h]=l,t.dashes[r.id]={min:c,mid:u,max:h}}}}let nu,iu;fo("LineBucket",tu,{omit:["layers","patternFeatures"]});var ru={get paint(){return iu=iu||new $o({"line-opacity":new Wo(xe.paint_line["line-opacity"]),"line-color":new Wo(xe.paint_line["line-color"]),"line-translate":new Go(xe.paint_line["line-translate"]),"line-translate-anchor":new Go(xe.paint_line["line-translate-anchor"]),"line-width":new Wo(xe.paint_line["line-width"]),"line-gap-width":new Wo(xe.paint_line["line-gap-width"]),"line-offset":new Wo(xe.paint_line["line-offset"]),"line-blur":new Wo(xe.paint_line["line-blur"]),"line-dasharray":new Yo(xe.paint_line["line-dasharray"]),"line-pattern":new Yo(xe.paint_line["line-pattern"]),"line-gradient":new Ko(xe.paint_line["line-gradient"])})},get layout(){return nu=nu||new $o({"line-cap":new Go(xe.layout_line["line-cap"]),"line-join":new Wo(xe.layout_line["line-join"]),"line-miter-limit":new Go(xe.layout_line["line-miter-limit"]),"line-round-limit":new Go(xe.layout_line["line-round-limit"]),"line-sort-key":new Wo(xe.layout_line["line-sort-key"])})}};class ou extends Wo{possiblyEvaluate(e,t){return t=new No(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,i){return t=z({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,i)}}let au;class su extends Qo{constructor(e,t){super(e,ru,t),this.gradientVersion=0,au||(au=new ou(ru.paint.properties["line-width"].specification),au.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof cn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=au.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new tu(e)}queryRadius(e){const t=e,n=lu(il("line-width",this,t),il("line-gap-width",this,t)),i=il("line-offset",this,t);return n/2+Math.abs(i)+rl(this.paint.get("line-translate"))}queryIntersectsFeature(e){let{queryGeometry:t,feature:i,featureState:r,geometry:o,transform:a,pixelsToTileUnits:s}=e;const l=ol(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-a.bearingInRadians,s),c=s/2*lu(this.paint.get("line-width").evaluate(i,r),this.paint.get("line-gap-width").evaluate(i,r)),u=this.paint.get("line-offset").evaluate(i,r);return u&&(o=function(e,t){const i=[];for(let r=0;r<e.length;r++){const o=al(e[r]),a=[];for(let e=0;e<o.length;e++){const i=o[e],r=o[e-1],s=o[e+1],l=0===e?new n(0,0):i.sub(r)._unit()._perp(),c=e===o.length-1?new n(0,0):s.sub(i)._unit()._perp(),u=l._add(c)._unit(),h=u.x*c.x+u.y*c.y;0!==h&&u._mult(1/h),a.push(u._mult(t)._add(i))}i.push(a)}return i}(o,u*s)),function(e,t,n){for(let i=0;i<t.length;i++){const r=t[i];if(e.length>=3)for(let t=0;t<r.length;t++)if(tl(e,r[t]))return!0;if(Xs(e,r,n))return!0}return!1}(l,o,c)}isTileClipped(){return!0}}function lu(e,t){return t>0?t+2*e:e}const cu=oa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uu=oa([{name:"a_projected_pos",components:3,type:"Float32"}],4);oa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const hu=oa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);oa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const du=oa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),pu=oa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function fu(e,t,n){return e.sections.forEach(e=>{e.text=function(e,t,n){const i=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),jo.applyArabicShaping&&(e=jo.applyArabicShaping(e)),e}(e.text,t,n)}),e}oa([{name:"triangle",components:3,type:"Uint16"}]),oa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),oa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),oa([{type:"Float32",name:"offsetX"}]),oa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),oa([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var mu=24;const gu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u22ef":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},yu={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},vu={40:!0};function _u(e,t,n,i,r,o){if("fontStack"in t){const i=n[t.fontStack],o=i&&i[e];return o?o.metrics.advance*t.scale+r:0}{const e=i[t.imageName];return e?e.displaySize[0]*t.scale*mu/o+r:0}}function xu(e,t,n,i){const r=Math.pow(e-t,2);return i?e<t?r/2:2*r:r+Math.abs(n)*n}function bu(e,t,n){let i=0;return 10===e&&(i-=1e4),n&&(i+=150),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function wu(e,t,n,i,r,o){let a=null,s=xu(t,n,r,o);for(const l of i){const e=xu(t-l.x,n,r,o)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function Du(e){return e?Du(e.priorBreak).concat(e.index):[]}class Eu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.text=e,this.sections=t,this.sectionIndex=n,this.imageSectionID=null}static fromFeature(e,t){const n=new Eu;for(let i=0;i<e.sections.length;i++){const r=e.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,t)}return n}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=function(e){let t="",n={premature:!0,value:void 0};const i=e[Symbol.iterator]();let r=i.next();const o=e[Symbol.iterator]();o.next();let a=o.next();for(;!r.done;)t+=!a.done&&Fo(a.value.codePointAt(0))&&!gu[a.value]||!n.premature&&Fo(n.value.codePointAt(0))&&!gu[n.value]||!gu[r.value]?r.value:gu[r.value],n={value:r.value,premature:!1},r=i.next(),a=o.next();return t}(this.text)}hasZeroWidthSpaces(){return this.text.includes("\u200b")}trim(){const e=this.text.match(/^\s*/),t=e?e[0].length:0,n=this.text.match(/\S\s*$/),i=n?n[0].length-1:0;this.text=this.text.substring(t,this.text.length-i),this.sectionIndex=this.sectionIndex.slice(t,this.sectionIndex.length-i)}substring(e,t){const n=[...this.text].slice(e,t).join(""),i=this.sectionIndex.slice(e,t);return new Eu(n,this.sections,i)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}getMaxImageSize(e){let t=0,n=0;for(let i=0;i<this.length();i++){const r=this.getSection(i);if("imageName"in r){const i=e[r.imageName];if(!i)continue;const o=i.displaySize;t=Math.max(t,o[0]),n=Math.max(n,o[1])}}return{maxImageWidth:t,maxImageHeight:n}}addTextSection(e,t){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||t});const n=this.sections.length-1;this.sectionIndex.push(...[...e.text].map(()=>n))}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void H("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:t}),this.sectionIndex.push(this.sections.length-1)):H("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,t,n,i,r){const o=[],a=this.determineAverageLineWidth(e,t,n,i,r),s=this.hasZeroWidthSpaces();let l=0,c=0;const u=this.text[Symbol.iterator]();let h=u.next();const d=this.text[Symbol.iterator]();d.next();let p=d.next();const f=this.text[Symbol.iterator]();f.next(),f.next();let m=f.next();for(;!h.done;){const t=this.getSection(c),g=h.value.codePointAt(0);if(Do(g)||(l+=_u(g,t,n,i,e,r)),!p.done){const e=bo(g),n=p.value.codePointAt(0);(yu[g]||e||"imageName"in t||!m.done&&vu[n])&&o.push(wu(c+1,l,a,o,bu(g,n,e&&s),!1))}c++,h=u.next(),p=d.next(),m=f.next()}return Du(wu(this.length(),l,a,o,0,!0))}determineAverageLineWidth(e,t,n,i,r){let o=0,a=0;for(const s of this.text){const t=this.getSection(a);o+=_u(s.codePointAt(0),t,n,i,e,r),a++}return o/Math.max(1,Math.ceil(o/t))}}const Cu=4294967296,Au=1/Cu,Su="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");class Tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array(16);this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length;for(;this.pos<n;){const n=this.readVarint(),i=n>>3,r=this.pos;this.type=7&n,e(i,t,this),this.pos===r&&this.skip(n)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Cu;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Cu;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let n,i;return i=t[this.pos++],n=127&i,i<128?n:(i=t[this.pos++],n|=(127&i)<<7,i<128?n:(i=t[this.pos++],n|=(127&i)<<14,i<128?n:(i=t[this.pos++],n|=(127&i)<<21,i<128?n:(i=t[this.pos],n|=(15&i)<<28,function(e,t,n){const i=n.buf;let r,o;if(o=i[n.pos++],r=(112&o)>>4,o<128)return Fu(e,r,t);if(o=i[n.pos++],r|=(127&o)<<3,o<128)return Fu(e,r,t);if(o=i[n.pos++],r|=(127&o)<<10,o<128)return Fu(e,r,t);if(o=i[n.pos++],r|=(127&o)<<17,o<128)return Fu(e,r,t);if(o=i[n.pos++],r|=(127&o)<<24,o<128)return Fu(e,r,t);if(o=i[n.pos++],r|=(1&o)<<31,o<128)return Fu(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(n,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return Boolean(this.readVarint())}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Su?Su.decode(this.buf.subarray(t,e)):function(e,t,n){let i="",r=t;for(;r<n;){const t=e[r];let o,a,s,l=null,c=t>239?4:t>223?3:t>191?2:1;if(r+c>n)break;1===c?t<128&&(l=t):2===c?(o=e[r+1],128==(192&o)&&(l=(31&t)<<6|63&o,l<=127&&(l=null))):3===c?(o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&(l=(15&t)<<12|(63&o)<<6|63&a,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===c&&(o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&t)<<18|(63&o)<<12|(63&a)<<6|63&s,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,c=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=c}return i}(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(t));return e}readPackedSVarint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}skip(e){const t=7&e;if(0===t)for(;this.buf[this.pos++]>127;);else if(2===t)this.pos=this.readVarint()+this.pos;else if(5===t)this.pos+=4;else{if(1!==t)throw new Error("Unimplemented type: ".concat(t));this.pos+=8}}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const e=new Uint8Array(t);e.set(this.buf),this.buf=e,this.dataView=new DataView(e.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Au),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Au),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?function(e,t){let n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(n=~(-e%4294967296),i=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){const n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const t=this.pos;this.pos=function(e,t,n){for(let i,r,o=0;o<t.length;o++){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!r){i>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):r=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(e[n++]=239,e[n++]=191,e[n++]=189,r=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);const n=this.pos-t;n>=128&&ku(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let n=0;n<t;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,t){this.pos++;const n=this.pos;e(t,this);const i=this.pos-n;i>=128&&ku(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,n){this.writeTag(e,2),this.writeRawMessage(t,n)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Pu,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,Mu,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Nu,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Iu,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,ju,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Ou,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Bu,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Lu,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,zu,t)}writeBytesField(e,t){this.writeTag(e,2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,5),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,5),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,1),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,1),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,0),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,0),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,5),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,1),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Fu(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function ku(e,t,n){const i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(i);for(let r=n.pos-1;r>=e;r--)n.buf[r+i]=n.buf[r]}function Pu(e,t){for(let n=0;n<e.length;n++)t.writeVarint(e[n])}function Mu(e,t){for(let n=0;n<e.length;n++)t.writeSVarint(e[n])}function Iu(e,t){for(let n=0;n<e.length;n++)t.writeFloat(e[n])}function ju(e,t){for(let n=0;n<e.length;n++)t.writeDouble(e[n])}function Nu(e,t){for(let n=0;n<e.length;n++)t.writeBoolean(e[n])}function Ou(e,t){for(let n=0;n<e.length;n++)t.writeFixed32(e[n])}function Bu(e,t){for(let n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Lu(e,t){for(let n=0;n<e.length;n++)t.writeFixed64(e[n])}function zu(e,t){for(let n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Ru(e,t,n){1===e&&n.readMessage(Vu,t)}function Vu(e,t,n){if(3===e){const{id:e,bitmap:i,width:r,height:o,left:a,top:s,advance:l}=n.readMessage(Uu,{});t.push({id:e,bitmap:new Dl({width:r+6,height:o+6},i),metrics:{width:r,height:o,left:a,top:s,advance:l}})}}function Uu(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function qu(e){let t=0,n=0;for(const a of e)t+=a.w*a.h,n=Math.max(n,a.w);e.sort((e,t)=>t.h-e.h);const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let r=0,o=0;for(const a of e)for(let e=i.length-1;e>=0;e--){const t=i[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),r=Math.max(r,a.x+a.w),a.w===t.w&&a.h===t.h){const t=i.pop();t&&e<i.length&&(i[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(i.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:r,h:o,fill:t/(r*o)||0}}class Zu{constructor(e,t){let{pixelRatio:n,version:i,stretchX:r,stretchY:o,content:a,textFitWidth:s,textFitHeight:l}=t;this.paddedRect=e,this.pixelRatio=n,this.stretchX=r,this.stretchY=o,this.content=a,this.version=i,this.textFitWidth=s,this.textFitHeight=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Hu{constructor(e,t){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(e,n,r),this.addImages(t,i,r);const{w:o,h:a}=qu(r),s=new El({width:o||1,height:a||1});for(const l in e){const t=e[l],i=n[l].paddedRect;El.copy(t.data,s,{x:0,y:0},{x:i.x+1,y:i.y+1},t.data)}for(const l in t){const e=t[l],n=i[l].paddedRect,r=n.x+1,o=n.y+1,a=e.data.width,c=e.data.height;El.copy(e.data,s,{x:0,y:0},{x:r,y:o},e.data),El.copy(e.data,s,{x:0,y:c-1},{x:r,y:o-1},{width:a,height:1}),El.copy(e.data,s,{x:0,y:0},{x:r,y:o+c},{width:a,height:1}),El.copy(e.data,s,{x:a-1,y:0},{x:r-1,y:o},{width:1,height:c}),El.copy(e.data,s,{x:0,y:0},{x:r+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=i}addImages(e,t,n){for(const i in e){const r=e[i],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(o),t[i]=new Zu(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[i,r]=e.tl;n.update(t.data,void 0,{x:i,y:r})}}var Gu;function Wu(t,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=Eu.fromFeature(t,o);let y;d===e.az.vertical&&g.verticalizePunctuation();let v=g.determineLineBreaks(u,a,n,r,f);const{processBidirectionalText:_,processStyledBidirectionalText:x}=jo;if(_&&1===g.sections.length){y=[],v=v.map(e=>g.toCodeUnitIndex(e));const e=_(g.toString(),v);for(const t of e){const e=[...t].map(()=>0);y.push(new Eu(t,g.sections,e))}}else if(x){y=[],v=v.map(e=>g.toCodeUnitIndex(e));let e=0;const t=[];for(const i of g.text)t.push(...Array(i.length).fill(g.sectionIndex[e])),e++;const n=x(g.text,t,v);for(const i of n){const e=[];let t="";for(const n of i[0])e.push(i[1][t.length]),t+=n;y.push(new Eu(i[0],g.sections,e))}}else y=function(e,t){const n=[];let i=0;for(const r of t)n.push(e.substring(i,r)),i=r;return i<e.length()&&n.push(e.substring(i,e.length())),n}(g,v);const b=[],w={positionedLines:b,text:g.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(e,t,n,i,r,o,a,s,l,c,u,h){let d=0,p=0,f=0,m=0;const g="right"===s?1:"left"===s?0:.5,y=mu/h;let v=0;for(const b of r){b.trim();const r=b.getMaxScale(),a={positionedGlyphs:[],lineOffset:0};e.positionedLines[v]=a;const s=a.positionedGlyphs;let h=0;if(!b.length()){p+=o,++v;continue}const _=Xu(i,b,y);let x=0;for(const o of b.text){const a=b.getSection(x),f=o.codePointAt(0),m=$u(l,u,f),g={glyph:f,imageName:null,x:d,y:p+-17,vertical:m,scale:1,fontStack:"",sectionIndex:b.getSectionIndex(x),metrics:null,rect:null};let v;if("fontStack"in a){if(v=Qu(a,f,m,_,t,n),!v)continue;g.fontStack=a.fontStack}else{if(e.iconsInText=!0,a.scale*=y,v=Ju(a,m,r,_,i),!v)continue;h=Math.max(h,v.imageOffset),g.imageName=a.imageName}const{rect:w,metrics:D,baselineOffset:E}=v;g.y+=E,g.scale=a.scale,g.metrics=D,g.rect=w,s.push(g),m?(e.verticalizable=!0,d+=("imageName"in a?D.advance:mu)*a.scale+c):d+=D.advance*a.scale+c,x++}0!==s.length&&(f=Math.max(d-c,f),eh(s,0,s.length-1,g)),d=0,a.lineOffset=Math.max(h,(r-1)*mu);const w=o*r+h;p+=w,m=Math.max(w,m),++v}const{horizontalAlign:_,verticalAlign:x}=Yu(a);(function(e,t,n,i,r,o,a,s,l){const c=(t-n)*r;let u=0;u=o!==a?-s*i- -17:-i*l*a+.5*a;for(const h of e)for(const e of h.positionedGlyphs)e.x+=c,e.y+=u})(e.positionedLines,g,_,x,f,m,o,p,r.length),e.top+=-x*p,e.bottom=e.top+p,e.left+=-_*f,e.right=e.left+f}(w,n,i,r,y,s,l,c,d,u,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&w}function Yu(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Xu(e,t,n){const i=t.getMaxScale()*mu,{maxImageWidth:r,maxImageHeight:o}=t.getMaxImageSize(e),a=Math.max(i,o*n);return{verticalLineContentWidth:Math.max(i,r*n),horizontalLineContentHeight:a}}function Ku(e){switch(e){case"top":return 0;case"center":return.5;default:return 1}}function $u(t,n,i){return!(t===e.az.horizontal||!n&&!wo(i)||n&&(Do(i)||(r=i,/(?:[\u0600-\u0604\u0606-\u060B\u060D-\u061A\u061C-\u061E\u0620-\u063F\u0641-\u064A\u0656-\u066F\u0671-\u06DC\u06DE-\u06FF\u0750-\u077F\u0870-\u0891\u0897-\u08E1\u08E3-\u08FF\uFB50-\uFD3D\uFD40-\uFDCF\uFDF0-\uFDFF\uFE70-\uFE74\uFE76-\uFEFC]|\uD803[\uDE60-\uDE7E\uDEC2-\uDEC7\uDED0-\uDED8\uDEFA-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1])/.test(String.fromCodePoint(r)))));var r}function Qu(e,t,n,i,r,o){const a=o[e.fontStack],s=function(e,t,n,i){if(e&&e.rect)return e;const r=t[n.fontStack],o=r&&r[i];return o?{rect:null,metrics:o.metrics}:null}(a&&a[t],r,e,t);if(null===s)return null;let l;if(n)l=i.verticalLineContentWidth-e.scale*mu;else{const t=Ku(e.verticalAlign);l=(i.horizontalLineContentHeight-e.scale*mu)*t}return{rect:s.rect,metrics:s.metrics,baselineOffset:l}}function Ju(e,t,n,i,r){const o=r[e.imageName];if(!o)return null;const a=o.paddedRect,s=o.displaySize,l={width:s[0],height:s[1],left:1,top:-3,advance:t?s[1]:s[0]};let c;if(t)c=i.verticalLineContentWidth-s[1]*e.scale;else{const t=Ku(e.verticalAlign);c=(i.horizontalLineContentHeight-s[1]*e.scale)*t}return{rect:a,metrics:l,baselineOffset:c,imageOffset:(t?s[0]:s[1])*e.scale-mu*n}}function eh(e,t,n,i){if(0===i)return;const r=e[n],o=(e[n].x+r.metrics.advance*r.scale)*i;for(let a=t;a<=n;a++)e[a].x-=o}function th(e,t,n){const{horizontalAlign:i,verticalAlign:r}=Yu(n),o=t[0]-e.displaySize[0]*i,a=t[1]-e.displaySize[1]*r;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function nh(e){var t,n;let i=e.left,r=e.top,o=e.right-i,a=e.bottom-r;const s=null!==(t=e.image.textFitWidth)&&void 0!==t?t:"stretchOrShrink",l=null!==(n=e.image.textFitHeight)&&void 0!==n?n:"stretchOrShrink",c=(e.image.content[2]-e.image.content[0])/(e.image.content[3]-e.image.content[1]);if("proportional"===l){if("stretchOnly"===s&&o/a<c||"proportional"===s){const e=Math.ceil(a*c);i*=e/o,o=e}}else if("proportional"===s&&"stretchOnly"===l&&0!==c&&o/a>c){const e=Math.ceil(o/c);r*=e/a,a=e}return{x1:i,y1:r,x2:i+o,y2:r+a}}function ih(e,t,n,i,r,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===n||"both"===n?(p=r[0]+l-i[3],h=r[0]+c+i[1]):(p=r[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=r[1]+f-i[0],d=r[1]+m+i[2]):(u=r[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}fo("ImagePosition",Zu),fo("ImageAtlas",Hu),e.az=void 0,(Gu=e.az||(e.az={}))[Gu.none=0]="none",Gu[Gu.horizontal=1]="horizontal",Gu[Gu.vertical=2]="vertical",Gu[Gu.horizontalOnly=3]="horizontalOnly";const rh=128,oh=32640;function ah(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new No(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:i}=n;let r=0;for(;r<t.length&&t[r]<=e;)r++;r=Math.max(0,r-1);let o=r;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[r],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new No(a)),maxSize:n.evaluate(new No(s)),interpolationType:i}}}function sh(e,t,n){let i="never";const r=e.get(t);return r?i=r:e.get(n)&&(i="always"),i}const lh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ch(e,t,n,i,r,o,a,s,l,c,u,h,d){const p=s?Math.min(oh,Math.round(s[0])):0,f=s?Math.min(oh,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*i),Math.round(32*r),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function uh(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function hh(e){for(const t of e.sections)if(Io(t.text))return!0;return!1}class dh{constructor(e){this.layoutVertexArray=new $a,this.indexArray=new ns,this.programConfigurations=e,this.segments=new as,this.dynamicLayoutVertexArray=new Qa,this.opacityVertexArray=new Ja,this.hasVisibleVertices=!1,this.placedSymbolArray=new ja}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cu.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,uu.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,lh,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fo("SymbolBuffers",dh);class ph{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new as,this.collisionVertexArray=new ts}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,hu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fo("CollisionBuffers",ph);class fh{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(e=>e.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ah(this.zoom,n["text-size"]),this.iconSizeData=ah(this.zoom,n["icon-size"]);const i=this.layers[0].layout,r=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap="never"!==sh(i,"text-overlap","text-allow-overlap")||"never"!==sh(i,"icon-overlap","icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!r.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(t=>e.az[t])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=t.sourceID}createArrays(){this.text=new dh(new Os(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new dh(new Os(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Ba,this.lineVertexArray=new La,this.symbolInstances=new Oa,this.textAnchorOffsets=new Ra}calculateGlyphDependencies(e,t,n,i,r){for(const o of e)if(t[o.codePointAt(0)]=!0,(n||i)&&r){const e=gu[o];e&&(t[e.codePointAt(0)]=!0)}}populate(t,n,i){const r=this.layers[0],o=r.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Mt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=n.iconDependencies,p=n.glyphDependencies,f=n.availableImages,m=new No(this.zoom);for(const{feature:g,id:y,index:v,sourceLayerIndex:_}of t){const t=r._featureFilter.needGeometry,n=Us(g,t);if(!r._featureFilter.filter(m,n,i))continue;let s,l;if(t||(n.geometry=Vs(g)),c){const e=r.getValueAndResolveTokens("text-field",n,i,f),t=Mt.factory(e),o=this.hasRTLText=this.hasRTLText||hh(t);(!o||"unavailable"===jo.getRTLTextPluginStatus()||o&&jo.isParsed())&&(s=fu(t,r,n))}if(u){const e=r.getValueAndResolveTokens("icon-image",n,i,f);l=e instanceof zt?e:zt.fromString(e)}if(!s&&!l)continue;const x=this.sortFeaturesByKey?h.evaluate(n,{},i):void 0;if(this.features.push({id:y,text:s,icon:l,index:v,sourceLayerIndex:_,geometry:n.geometry,properties:g.properties,type:kc.types[g.type],sortKey:x}),l&&(d[l.name]=!0),s){const t=a.evaluate(n,{},i).join(","),r="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.az.vertical)>=0;for(const e of s.sections)if(e.image)d[e.image.name]=!0;else{const n=Eo(s.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},i=[];let r=0;function o(t){i.push(e[t]),r++}function a(e,t,r){const o=n[e];return delete n[e],n[t]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(e,n,r){const o=t[n];return delete t[n],t[e]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function l(e,t,n){const i=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(i.x,":").concat(i.y)}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=s(p,f,h),r=a(p,f,i[e].geometry);delete t[p],delete n[f],n[l(d,i[r].geometry,!0)]=r,i[e].geometry=null}else p in n?a(p,f,h):f in t?s(p,f,h):(o(c),t[p]=r-1,n[f]=r-1)}return i.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,{imagePositions:n}),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,{imagePositions:n}))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]);const r={};for(let o=e.segment+1;o<t.length;o++)r[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:n},o<t.length-1&&(n+=t[o+1].dist(t[o]));for(let o=e.segment||0;o>=0;o--)r[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:i},o>0&&(i+=t[o-1].dist(t[o]));for(let e=0;e<t.length;e++){const t=r[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,n,i,r,o,a,s,l,c,u,h,d){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*n.length,f,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&s===e.az.vertical?Math.PI/2:0,_=a.text&&a.text.sections;for(let e=0;e<n.length;e++){const{tl:r,tr:o,bl:s,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:x,glyphOffset:b,isSDF:w,sectionIndex:D}=n[e],E=m.vertexLength,C=b[1];ch(f,l.x,l.y,r.x,C+r.y,u.x,u.y,i,w,h.x,h.y,y,x),ch(f,l.x,l.y,o.x,C+o.y,u.x+u.w,u.y,i,w,g.x,h.y,y,x),ch(f,l.x,l.y,s.x,C+s.y,u.x,u.y+u.h,i,w,h.x,g.y,y,x),ch(f,l.x,l.y,c.x,C+c.y,u.x+u.w,u.y+u.h,i,w,g.x,g.y,y,x),uh(t.dynamicLayoutVertexArray,l,v),p.emplaceBack(E,E+2,E+1),p.emplaceBack(E+1,E+2,E+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),e!==n.length-1&&D===n[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,a,a.index,{imagePositions:{},canonical:d,formattedSection:_&&_[D]})}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],s,0,!1,0,h)}_addCollisionDebugVertex(e,t,n,i,r,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,i,r,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,i,r,o,a,s){const l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,u=o.layoutVertexArray,h=o.collisionVertexArray,d=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,h,a,d,p,new n(e,t)),this._addCollisionDebugVertex(u,h,a,d,p,new n(i,t)),this._addCollisionDebugVertex(u,h,a,d,p,new n(i,r)),this._addCollisionDebugVertex(u,h,a,d,p,new n(e,r)),l.vertexLength+=4;const f=o.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}addDebugCollisionBoxes(e,t,n,i){for(let r=e;r<t;r++){const e=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,i?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ph(es,du.members,is),this.iconCollisionBox=new ph(es,du.members,is);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,n,i,r,o,a,s,l){const c={};for(let u=t;u<n;u++){const t=e.get(u);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let u=i;u<r;u++){const t=e.get(u);c.verticalTextBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalTextFeatureIndex=t.featureIndex;break}for(let u=o;u<a;u++){const t=e.get(u);c.iconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.iconFeatureIndex=t.featureIndex;break}for(let u=s;u<l;u++){const t=e.get(u);c.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalIconFeatureIndex=t.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),i=n.vertexStartIndex+4*n.numGlyphs;for(let r=n.vertexStartIndex;r<i;r+=4)e.indexArray.emplaceBack(r,r+2,r+1),e.indexArray.emplaceBack(r+1,r+2,r+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),i=[],r=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);i.push(0|Math.round(t*e.anchorX+n*e.anchorY)),r.push(e.featureIndex)}return o.sort((e,t)=>i[e]-i[t]||r[t]-r[e]),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)}),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mh,gh;fo("SymbolBucket",fh,{omit:["layers","collisionBoxArray","features","compareText"]}),fh.MAX_GLYPHS=65535,fh.addDynamicAttributes=uh;var yh={get paint(){return gh=gh||new $o({"icon-opacity":new Wo(xe.paint_symbol["icon-opacity"]),"icon-color":new Wo(xe.paint_symbol["icon-color"]),"icon-halo-color":new Wo(xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Wo(xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Wo(xe.paint_symbol["icon-halo-blur"]),"icon-translate":new Go(xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Go(xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Wo(xe.paint_symbol["text-opacity"]),"text-color":new Wo(xe.paint_symbol["text-color"],{runtimeType:Re,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Wo(xe.paint_symbol["text-halo-color"]),"text-halo-width":new Wo(xe.paint_symbol["text-halo-width"]),"text-halo-blur":new Wo(xe.paint_symbol["text-halo-blur"]),"text-translate":new Go(xe.paint_symbol["text-translate"]),"text-translate-anchor":new Go(xe.paint_symbol["text-translate-anchor"])})},get layout(){return mh=mh||new $o({"symbol-placement":new Go(xe.layout_symbol["symbol-placement"]),"symbol-spacing":new Go(xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Go(xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Wo(xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Go(xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Go(xe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Go(xe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Go(xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Go(xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Go(xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Wo(xe.layout_symbol["icon-size"]),"icon-text-fit":new Go(xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Go(xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Wo(xe.layout_symbol["icon-image"]),"icon-rotate":new Wo(xe.layout_symbol["icon-rotate"]),"icon-padding":new Wo(xe.layout_symbol["icon-padding"]),"icon-keep-upright":new Go(xe.layout_symbol["icon-keep-upright"]),"icon-offset":new Wo(xe.layout_symbol["icon-offset"]),"icon-anchor":new Wo(xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Go(xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Go(xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Go(xe.layout_symbol["text-rotation-alignment"]),"text-field":new Wo(xe.layout_symbol["text-field"]),"text-font":new Wo(xe.layout_symbol["text-font"]),"text-size":new Wo(xe.layout_symbol["text-size"]),"text-max-width":new Wo(xe.layout_symbol["text-max-width"]),"text-line-height":new Go(xe.layout_symbol["text-line-height"]),"text-letter-spacing":new Wo(xe.layout_symbol["text-letter-spacing"]),"text-justify":new Wo(xe.layout_symbol["text-justify"]),"text-radial-offset":new Wo(xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Go(xe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Wo(xe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Wo(xe.layout_symbol["text-anchor"]),"text-max-angle":new Go(xe.layout_symbol["text-max-angle"]),"text-writing-mode":new Go(xe.layout_symbol["text-writing-mode"]),"text-rotate":new Wo(xe.layout_symbol["text-rotate"]),"text-padding":new Go(xe.layout_symbol["text-padding"]),"text-keep-upright":new Go(xe.layout_symbol["text-keep-upright"]),"text-transform":new Wo(xe.layout_symbol["text-transform"]),"text-offset":new Wo(xe.layout_symbol["text-offset"]),"text-allow-overlap":new Go(xe.layout_symbol["text-allow-overlap"]),"text-overlap":new Go(xe.layout_symbol["text-overlap"]),"text-ignore-placement":new Go(xe.layout_symbol["text-ignore-placement"]),"text-optional":new Go(xe.layout_symbol["text-optional"])})}};class vh{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Oe,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fo("FormatSectionOverride",vh,{omit:["defaultValue"]});class _h extends Qo{constructor(e,t){super(e,yh,t)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const n of e)t.indexOf(n)<0&&t.push(n);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,i){const r=this.layout.get(e).evaluate(t,{},n,i),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||ir(o.value)||!r?r:function(e,t){return t.replace(/{([^{}]+)}/g,(t,n)=>e&&n in e?String(e[n]):"")}(t.properties,r)}createBucket(e){return new fh(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of yh.paint.overridableProperties){if(!_h.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new vh(t),i=new nr(n,t.property.specification);let r=null;r="constant"===t.value.kind||"source"===t.value.kind?new or("source",i):new ar("composite",i,t.value.zoomStops),this.paint._values[e]=new Zo(t.property,r,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&_h.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),i=yh.paint.properties[t];let r=!1;const o=e=>{for(const t of e)if(i.overrides&&i.overrides.hasOverride(t))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Mt)o(n.value.value.sections);else if("source"===n.value.kind||"composite"===n.value.kind){const e=t=>{r||(t instanceof Ht&&qt(t.value)===He?o(t.value.sections):t instanceof kn?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return r}}let xh;var bh={get paint(){return xh=xh||new $o({"background-color":new Go(xe.paint_background["background-color"]),"background-pattern":new Xo(xe.paint_background["background-pattern"]),"background-opacity":new Go(xe.paint_background["background-opacity"])})}};class wh extends Qo{constructor(e,t){super(e,bh,t)}}class Dh extends Qo{constructor(e,t){super(e,{},t),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Eh{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ch={once:!0},Ah=6371008.8;class Sh{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(t,")"));if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Sh(L(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(e){const t=Math.PI/180,n=this.lat*t,i=e.lat*t,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return Ah*Math.acos(Math.min(r,1))}static convert(e){if(e instanceof Sh)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Sh(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Sh(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Th=2*Math.PI*Ah;function Fh(e){return Th*Math.cos(e*Math.PI/180)}function kh(e){return(180+e)/360}function Ph(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Mh(e,t){return e/Fh(t)}function Ih(e){return 360*e-180}function jh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Nh(e,t){return e*Fh(jh(t))}class Oh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Sh.convert(e);return new Oh(kh(n.lng),Ph(n.lat),Mh(t,n.lat))}toLngLat(){return new Sh(Ih(this.x),jh(this.y))}toAltitude(){return Nh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Th*(e=jh(this.y),1/Math.cos(e*Math.PI/180));var e}}function Bh(e,t,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class Lh{constructor(e,t,n){if(!function(e,t,n){return!(e<0||e>25||n<0||n>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))}(e,t,n))throw new Error("x=".concat(t,", y=").concat(n,", z=").concat(e," outside of bounds. 0<=x<").concat(Math.pow(2,e),", 0<=y<").concat(Math.pow(2,e)," 0<=z<=25 "));this.z=e,this.x=t,this.y=n,this.key=Vh(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,n){const i=(o=this.y,a=this.z,s=Bh(256*(r=this.x),256*(o=Math.pow(2,a)-o-1),a),l=Bh(256*(r+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var r,o,a,s,l;const c=function(e,t,n){let i,r="";for(let o=e;o>0;o--)i=1<<o-1,r+=(t&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,i)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new n((e.x*t-this.x)*k,(e.y*t-this.y)*k)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class zh{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Vh(e,t.z,t.z,t.x,t.y)}}class Rh{constructor(e,t,n,i,r){if(this.terrainRttPosMatrix32f=null,e<n)throw new Error("overscaledZ should be >= z; overscaledZ = ".concat(e,"; z = ").concat(n));this.overscaledZ=e,this.wrap=t,this.canonical=new Lh(n,+i,+r),this.key=Vh(t,e,n,i,r)}clone(){return new Rh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));const t=this.canonical.z-e;return e>this.canonical.z?new Rh(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rh(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));const n=this.canonical.z-e;return e>this.canonical.z?Vh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Vh(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(e){if(e.wrap!==this.wrap)return!1;if(this.overscaledZ-e.overscaledZ<=0)return!1;if(0===e.overscaledZ)return this.overscaledZ>0;const t=this.canonical.z-e.canonical.z;return!(t<0)&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Rh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Rh(t,this.wrap,t,n,i),new Rh(t,this.wrap,t,n+1,i),new Rh(t,this.wrap,t,n,i+1),new Rh(t,this.wrap,t,n+1,i+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Rh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Rh(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new zh(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}getTilePoint(e){return this.canonical.getTilePoint(new Oh(e.x-this.wrap,e.y))}}function Vh(e,t,n,i,r){(e*=2)<0&&(e=-1*e-1);const o=1<<n;return(o*o*e+o*r+i).toString(36)+n.toString(36)+t.toString(36)}function Uh(e,t){return t?e.properties[t]:e.id}function qh(e,t){const n={id:e.id};if(t.removeAllProperties&&(delete e.removeProperties,delete e.addOrUpdateProperties,delete t.removeProperties),t.removeProperties)for(const i of t.removeProperties){const t=e.addOrUpdateProperties.findIndex(e=>e.key===i);t>-1&&e.addOrUpdateProperties.splice(t,1)}return(e.removeAllProperties||t.removeAllProperties)&&(n.removeAllProperties=!0),(e.removeProperties||t.removeProperties)&&(n.removeProperties=[...e.removeProperties||[],...t.removeProperties||[]]),(e.addOrUpdateProperties||t.addOrUpdateProperties)&&(n.addOrUpdateProperties=[...e.addOrUpdateProperties||[],...t.addOrUpdateProperties||[]]),(e.newGeometry||t.newGeometry)&&(n.newGeometry=t.newGeometry||e.newGeometry),n}function Zh(e){var t,n;if(!e)return{};const i={};return i.removeAll=e.removeAll,i.remove=new Set(e.remove||[]),i.add=new Map(null===(t=e.add)||void 0===t?void 0:t.map(e=>[e.id,e])),i.update=new Map(null===(n=e.update)||void 0===n?void 0:n.map(e=>[e.id,e])),i}fo("CanonicalTileID",Lh),fo("OverscaledTileID",Rh,{omit:["terrainRttPosMatrix32f"]});class Hh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const t=new Hh;return t.extend(e(new n(this.minX,this.minY))),t.extend(e(new n(this.maxX,this.minY))),t.extend(e(new n(this.minX,this.maxY))),t.extend(e(new n(this.maxX,this.maxY))),t}static fromPoints(e){const t=new Hh;for(const n of e)t.extend(n);return t}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class Gh{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error("Out of bounds. Index requested n=".concat(e," can't be >= this._numberToString.length ").concat(this._numberToString.length));return this._numberToString[e]}}class Wh{constructor(e,t,n,i,r){this.type="Feature",this._vectorTileFeature=e,this._x=n,this._y=i,this._z=t,this.properties=e.properties,this.id=r}projectPoint(e,t,n,i){return[360*(e.x+t)/i-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+n)/i)*Math.PI))-90]}projectLine(e,t,n,i){return e.map(e=>this.projectPoint(e,t,n,i))}get geometry(){if(this._geometry)return this._geometry;const e=this._vectorTileFeature,t=e.extent*Math.pow(2,this._z),n=e.extent*this._x,i=e.extent*this._y,r=e.loadGeometry();switch(e.type){case 1:{const e=[];for(const t of r)e.push(t[0]);const o=this.projectLine(e,n,i,t);this._geometry=1===e.length?{type:"Point",coordinates:o[0]}:{type:"MultiPoint",coordinates:o};break}case 2:{const e=r.map(e=>this.projectLine(e,n,i,t));this._geometry=1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e};break}case 3:{const e=Mc(r),o=[];for(const r of e)o.push(r.map(e=>this.projectLine(e,n,i,t)));this._geometry=1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o};break}default:throw new Error("unknown feature type: ".concat(e.type))}return this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&"_x"!==t&&"_y"!==t&&"_z"!==t&&(e[t]=this[t]);return e}}class Yh{constructor(e,t,n){r(this,"_name",void 0),r(this,"dataBuffer",void 0),r(this,"nullabilityBuffer",void 0),r(this,"_size",void 0),this._name=e,this.dataBuffer=t,"number"==typeof n?this._size=n:(this.nullabilityBuffer=n,this._size=n.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Xh extends Yh{}class Kh extends Xh{getValueFromBuffer(e){return this.dataBuffer[e]}}class $h extends Xh{getValueFromBuffer(e){return this.dataBuffer[e]}}class Qh extends Yh{constructor(e,t,n,i){super(e,t,i),r(this,"delta",void 0),this.delta=n}}class Jh extends Qh{constructor(e,t,n,i){super(e,Int32Array.of(t),n,i)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class ed extends Yh{constructor(e,t,n){super(e,Int32Array.of(t),n)}getValueFromBuffer(e){return this.dataBuffer[0]}}class td{constructor(e,t,n,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4096;r(this,"_name",void 0),r(this,"_geometryVector",void 0),r(this,"_idVector",void 0),r(this,"_propertyVectors",void 0),r(this,"_extent",void 0),r(this,"propertyVectorsMap",void 0),this._name=e,this._geometryVector=t,this._idVector=n,this._propertyVectors=i,this._extent=o}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map(e=>[e.name,e]))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){const e=this.geometryVector[Symbol.iterator]();let t=0;for(;t<this.numFeatures;){let n;this.idVector&&(n=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(t)):this.idVector.getValue(t));const i=null===e||void 0===e?void 0:e.next().value,r={};for(const e of this.propertyVectors){if(!e)continue;const n=e.name,i=e.getValue(t);null!==i&&(r[n]=i)}t++,yield{id:n,geometry:i,properties:r}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const e=[],t=this.geometryVector.getGeometries();for(let n=0;n<this.numFeatures;n++){let i;this.idVector&&(i=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(n)):this.idVector.getValue(n));const r={coordinates:t[n],type:this.geometryVector.geometryType(n)},o={};for(const e of this.propertyVectors){if(!e)continue;const t=e.name,i=e.getValue(n);null!==i&&(o[t]=i)}e.push({id:i,geometry:r,properties:o})}return e}containsMaxSaveIntegerValues(e){return e instanceof Kh||e instanceof ed&&e instanceof Jh||e instanceof $h}}class nd{constructor(e){r(this,"value",void 0),this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var id,rd,od,ad,sd,ld,cd,ud,hd,dd;function pd(e,t,n){const i=new Int32Array(n);let r=0,o=t.get();for(let a=0;a<i.length;a++){let t=e[o++],n=127&t;t<128||(t=e[o++],n|=(127&t)<<7,t<128||(t=e[o++],n|=(127&t)<<14,t<128||(t=e[o++],n|=(127&t)<<21,t<128||(t=e[o++],n|=(15&t)<<28)))),i[r++]=n}return t.set(o),i}function fd(e,t,n){const i=new BigInt64Array(n);for(let r=0;r<i.length;r++)i[r]=_d(e,t);return i}function md(e,t){let n,i;return i=e[t.get()],t.increment(),n=127&i,i<128?n:(i=e[t.get()],t.increment(),n|=(127&i)<<7,i<128?n:(i=e[t.get()],t.increment(),n|=(127&i)<<14,i<128?n:(i=e[t.get()],t.increment(),n|=(127&i)<<21,i<128?n:(i=e[t.get()],n|=(15&i)<<28,function(e,t,n){let i,r;if(r=t[n.get()],n.increment(),i=(112&r)>>4,r<128)return 4294967296*i+(e>>>0);if(r=t[n.get()],n.increment(),i|=(127&r)<<3,r<128)return 4294967296*i+(e>>>0);if(r=t[n.get()],n.increment(),i|=(127&r)<<10,r<128)return 4294967296*i+(e>>>0);if(r=t[n.get()],n.increment(),i|=(127&r)<<17,r<128)return 4294967296*i+(e>>>0);if(r=t[n.get()],n.increment(),i|=(127&r)<<24,r<128)return 4294967296*i+(e>>>0);if(r=t[n.get()],n.increment(),i|=(1&r)<<31,r<128)return 4294967296*i+(e>>>0);throw new Error("Expected varint not more than 10 bytes")}(n,e,t)))))}function gd(e,t,n,i){throw new Error("FastPFor is not implemented yet.")}function yd(e){return e>>>1^-(1&e)}function vd(e){return e>>1n^-(1n&e)}function _d(e,t){let n=0n,i=0,r=t.get();for(;r<e.length;){const t=e[r++];if(n|=BigInt(127&t)<<BigInt(i),!(128&t))break;if(i+=7,i>=64)throw new Error("Varint too long")}return t.set(r),n}function xd(e,t,n){const i=new Int32Array(n);let r=0;for(let o=0;o<t;o++){const n=e[o];i.fill(e[o+t],r,r+n),r+=n}return i}function bd(e,t,n){const i=new BigInt64Array(n);let r=0;for(let o=0;o<t;o++){const n=Number(e[o]);i.fill(e[o+t],r,r+n),r+=n}return i}function wd(e,t,n){const i=new Float64Array(n);let r=0;for(let o=0;o<t;o++){const n=e[o];i.fill(e[o+t],r,r+n),r+=n}return i}function Dd(e){const t=e.length/4*4;let n=1;if(t>=4)for(let i=e[0];n<t-4;n+=4)i=e[n]+=i,i=e[n+1]+=i,i=e[n+2]+=i,i=e[n+3]+=i;for(;n!=e.length;)e[n]+=e[n-1],++n}function Ed(e){e[0]=e[0]>>>1^-(1&e[0]),e[1]=e[1]>>>1^-(1&e[1]);const t=e.length/4*4;let n=2;if(t>=4)for(;n<t-4;n+=4){const t=e[n],i=e[n+1],r=e[n+2],o=e[n+3];e[n]=(t>>>1^-(1&t))+e[n-2],e[n+1]=(i>>>1^-(1&i))+e[n-1],e[n+2]=(r>>>1^-(1&r))+e[n],e[n+3]=(o>>>1^-(1&o))+e[n+1]}for(;n!=e.length;n+=2)e[n]=(e[n]>>>1^-(1&e[n]))+e[n-2],e[n+1]=(e[n+1]>>>1^-(1&e[n+1]))+e[n-1]}!function(e){e.NONE="NONE",e.DELTA="DELTA",e.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",e.RLE="RLE",e.MORTON="MORTON",e.PDE="PDE"}(id||(id={})),function(e){e.NONE="NONE",e.FAST_PFOR="FAST_PFOR",e.VARINT="VARINT",e.ALP="ALP"}(rd||(rd={})),function(e){e.PRESENT="PRESENT",e.DATA="DATA",e.OFFSET="OFFSET",e.LENGTH="LENGTH"}(od||(od={}));class Cd{constructor(e,t,n){r(this,"_dictionaryType",void 0),r(this,"_offsetType",void 0),r(this,"_lengthType",void 0),this._dictionaryType=e,this._offsetType=t,this._lengthType=n}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Ad(e,t){const n=function(e,t){const n=e[t.get()],i=Object.values(od)[n>>4];let r=null;switch(i){case od.DATA:r=new Cd(Object.values(ad)[15&n]);break;case od.OFFSET:r=new Cd(null,Object.values(sd)[15&n]);break;case od.LENGTH:r=new Cd(null,null,Object.values(ld)[15&n])}t.increment();const o=e[t.get()],a=Object.values(id)[o>>5],s=Object.values(id)[o>>2&7],l=Object.values(rd)[3&o];t.increment();const c=pd(e,t,2),u=c[0];return{physicalStreamType:i,logicalStreamType:r,logicalLevelTechnique1:a,logicalLevelTechnique2:s,physicalLevelTechnique:l,numValues:u,byteLength:c[1],decompressedCount:u}}(e,t);return n.logicalLevelTechnique1===id.MORTON?function(e,t,n){const i=pd(t,n,2);return{physicalStreamType:e.physicalStreamType,logicalStreamType:e.logicalStreamType,logicalLevelTechnique1:e.logicalLevelTechnique1,logicalLevelTechnique2:e.logicalLevelTechnique2,physicalLevelTechnique:e.physicalLevelTechnique,numValues:e.numValues,byteLength:e.byteLength,decompressedCount:e.decompressedCount,numBits:i[0],coordinateShift:i[1]}}(n,e,t):id.RLE!==n.logicalLevelTechnique1&&id.RLE!==n.logicalLevelTechnique2||rd.NONE===n.physicalLevelTechnique?n:function(e,t,n){const i=pd(t,n,2);return{physicalStreamType:e.physicalStreamType,logicalStreamType:e.logicalStreamType,logicalLevelTechnique1:e.logicalLevelTechnique1,logicalLevelTechnique2:e.logicalLevelTechnique2,physicalLevelTechnique:e.physicalLevelTechnique,numValues:e.numValues,byteLength:e.byteLength,decompressedCount:i[1],runs:i[0],numRleValues:i[1]}}(n,e,t)}!function(e){e.NONE="NONE",e.SINGLE="SINGLE",e.SHARED="SHARED",e.VERTEX="VERTEX",e.MORTON="MORTON",e.FSST="FSST"}(ad||(ad={})),function(e){e.VERTEX="VERTEX",e.INDEX="INDEX",e.STRING="STRING",e.KEY="KEY"}(sd||(sd={})),function(e){e.VAR_BINARY="VAR_BINARY",e.GEOMETRIES="GEOMETRIES",e.PARTS="PARTS",e.RINGS="RINGS",e.TRIANGLES="TRIANGLES",e.SYMBOL="SYMBOL",e.DICTIONARY="DICTIONARY"}(ld||(ld={})),function(e){e[e.FLAT=0]="FLAT",e[e.CONST=1]="CONST",e[e.SEQUENCE=2]="SEQUENCE",e[e.DICTIONARY=3]="DICTIONARY",e[e.FSST_DICTIONARY=4]="FSST_DICTIONARY"}(cd||(cd={}));class Sd{constructor(e,t){r(this,"values",void 0),r(this,"_size",void 0),this.values=e,this._size=t}get(e){const t=Math.floor(e/8);return 1==(this.values[t]>>e%8&1)}set(e,t){const n=Math.floor(e/8);this.values[n]=this.values[n]|(t?1:0)<<e%8}getInt(e){const t=Math.floor(e/8);return this.values[t]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function Td(e,t,n,i,r){return function(e,t,n){switch(t.logicalLevelTechnique1){case id.DELTA:return t.logicalLevelTechnique2===id.RLE?function(e,t,n){const i=new Int32Array(n);let r=0,o=0;for(let a=0;a<t;a++){const n=e[a],s=yd(e[a+t]);for(let e=0;e<n;e++)o+=s,i[r++]=o}return i}(e,t.runs,t.numRleValues):(function(e){e[0]=e[0]>>>1^-(1&e[0]);const t=e.length/4*4;let n=1;if(t>=4)for(;n<t-4;n+=4){const t=e[n],i=e[n+1],r=e[n+2],o=e[n+3];e[n]=(t>>>1^-(1&t))+e[n-1],e[n+1]=(i>>>1^-(1&i))+e[n],e[n+2]=(r>>>1^-(1&r))+e[n+1],e[n+3]=(o>>>1^-(1&o))+e[n+2]}for(;n!=e.length;++n)e[n]=(e[n]>>>1^-(1&e[n]))+e[n-1]}(e),e);case id.RLE:return function(e,t,n){return n?function(e,t,n){const i=new Int32Array(n);let r=0;for(let o=0;o<t;o++){const n=e[o];let a=e[o+t];a=a>>>1^-(1&a),i.fill(a,r,r+n),r+=n}return i}(e,t.runs,t.numRleValues):xd(e,t.runs,t.numRleValues)}(e,t,n);case id.MORTON:return Dd(e),e;case id.COMPONENTWISE_DELTA:return Ed(e),e;case id.NONE:return n&&function(e){for(let t=0;t<e.length;t++){const n=e[t];e[t]=n>>>1^-(1&n)}}(e),e;default:throw new Error("The specified Logical level technique is not supported: ".concat(t.logicalLevelTechnique1))}}(kd(e,t,n),n,i)}function Fd(e,t,n){return function(e,t){if(t.logicalLevelTechnique1===id.DELTA&&t.logicalLevelTechnique2===id.NONE){const t=function(e){const t=new Int32Array(e.length+1);t[0]=0,t[1]=yd(e[0]);let n=t[1],i=2;for(;i!=t.length;++i){const r=e[i-1];n+=r>>>1^-(1&r),t[i]=t[i-1]+n}return t}(e);return t}if(t.logicalLevelTechnique1===id.RLE&&t.logicalLevelTechnique2===id.NONE){const n=function(e,t,n){const i=new Int32Array(n+1);i[0]=0;let r=1,o=i[0];for(let a=0;a<t;a++){const n=e[a],s=e[a+t];for(let e=r;e<r+n;e++)i[e]=s+o,o=i[e];r+=n}return i}(e,t.runs,t.numRleValues);return n}if(t.logicalLevelTechnique1===id.NONE&&t.logicalLevelTechnique2===id.NONE){!function(e){let t=0;for(let n=0;n<e.length;n++)e[n]+=t,t=e[n]}(e);const n=new Int32Array(t.numValues+1);return n[0]=0,n.set(e,1),n}if(t.logicalLevelTechnique1===id.DELTA&&t.logicalLevelTechnique2===id.RLE){const n=function(e,t,n){const i=new Int32Array(n+1);i[0]=0;let r=1,o=i[0];for(let a=0;a<t;a++){const n=e[a];let s=e[a+t];s=s>>>1^-(1&s);for(let e=r;e<r+n;e++)i[e]=s+o,o=i[e];r+=n}return i}(e,t.runs,t.numRleValues);return Dd(n),n}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")}(kd(e,t,n),n)}function kd(e,t,n){const i=n.physicalLevelTechnique;if(i===rd.FAST_PFOR)return gd();if(i===rd.VARINT)return pd(e,t,n.numValues);if(i===rd.NONE){const i=t.get();t.add(n.byteLength);const r=e.subarray(i,t.get());return new Int32Array(r)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Pd(e,t,n,i){const r=kd(e,t,n);if(1===r.length){const e=r[0];return i?yd(e):e}return i?function(e){return yd(e[1])}(r):function(e){return e[1]}(r)}function Md(e,t,n){return function(e){if(2==e.length){const t=yd(e[1]);return[t,t]}return[yd(e[2]),yd(e[3])]}(kd(e,t,n))}function Id(e,t,n){return function(e){if(2==e.length){const t=vd(e[1]);return[t,t]}return[vd(e[2]),vd(e[3])]}(fd(e,t,n.numValues))}function jd(e,t,n,i){return function(e,t,n){switch(t.logicalLevelTechnique1){case id.DELTA:return t.logicalLevelTechnique2===id.RLE?function(e,t,n){const i=new BigInt64Array(n);let r=0,o=0n;for(let a=0;a<t;a++){const n=Number(e[a]),s=vd(e[a+t]);for(let e=0;e<n;e++)o+=s,i[r++]=o}return i}(e,t.runs,t.numRleValues):(function(e){e[0]=e[0]>>1n^-(1n&e[0]);const t=e.length/4*4;let n=1;if(t>=4)for(;n<t-4;n+=4){const t=e[n],i=e[n+1],r=e[n+2],o=e[n+3];e[n]=(t>>1n^-(1n&t))+e[n-1],e[n+1]=(i>>1n^-(1n&i))+e[n],e[n+2]=(r>>1n^-(1n&r))+e[n+1],e[n+3]=(o>>1n^-(1n&o))+e[n+2]}for(;n!=e.length;++n)e[n]=(e[n]>>1n^-(1n&e[n]))+e[n-1]}(e),e);case id.RLE:return function(e,t,n){return n?function(e,t,n){const i=new BigInt64Array(n);let r=0;for(let o=0;o<t;o++){const n=Number(e[o]);let a=e[o+t];a=a>>1n^-(1n&a),i.fill(a,r,r+n),r+=n}return i}(e,t.runs,t.numRleValues):bd(e,t.runs,t.numRleValues)}(e,t,n);case id.NONE:return n&&function(e){for(let t=0;t<e.length;t++){const n=e[t];e[t]=n>>1n^-(1n&n)}}(e),e;default:throw new Error("The specified Logical level technique is not supported: ".concat(t.logicalLevelTechnique1))}}(fd(e,t,n.numValues),n,i)}function Nd(e,t,n,i){const r=fd(e,t,n.numValues);if(1===r.length){const e=r[0];return i?vd(e):e}return i?function(e){return vd(e[1])}(r):function(e){return e[1]}(r)}function Od(e,t,n,i,r){return function(e,t,n,i){switch(t.logicalLevelTechnique1){case id.DELTA:return t.logicalLevelTechnique2===id.RLE&&(e=xd(e,t.runs,t.numRleValues)),function(e,t){const n=new Int32Array(e.size());let i=0;e.get(0)?(n[0]=e.get(0)?t[0]>>>1^-(1&t[0]):0,i=1):n[0]=0;let r=1;for(;r!=n.length;++r)n[r]=e.get(r)?n[r-1]+(t[i]>>>1^-(1&t[i++])):n[r-1];return n}(i,e);case id.RLE:return function(e,t,n,i){const r=t;return n?function(e,t,n){const i=new Int32Array(e.size());let r=0;for(let o=0;o<n;o++){const a=t[o];let s=t[o+n];s=s>>>1^-(1&s);for(let t=r;t<r+a;t++)e.get(t)?i[t]=s:(i[t]=0,r++);r+=a}return i}(i,e,r.runs):function(e,t,n){const i=new Int32Array(e.size());let r=0;for(let o=0;o<n;o++){const a=t[o],s=t[o+n];for(let t=r;t<r+a;t++)e.get(t)?i[t]=s:(i[t]=0,r++);r+=a}return i}(i,e,r.runs)}(e,t,n,i);case id.MORTON:return Dd(e),e;case id.COMPONENTWISE_DELTA:return Ed(e),e;case id.NONE:return e=n?function(e,t){const n=new Int32Array(e.size());let i=0,r=0;for(;r!=n.length;++r)if(e.get(r)){const e=t[i++];n[r]=e>>>1^-(1&e)}else n[r]=0;return n}(i,e):function(e,t){const n=new Int32Array(e.size());let i=0,r=0;for(;r!=n.length;++r)n[r]=e.get(r)?t[i++]:0;return n}(i,e),e;default:throw new Error("The specified Logical level technique is not supported")}}(n.physicalLevelTechnique===rd.FAST_PFOR?gd():pd(e,t,n.numValues),n,i,r)}function Bd(e,t,n,i){const r=e.logicalLevelTechnique1;if(r===id.RLE)return 1===e.runs?cd.CONST:cd.FLAT;const o=t instanceof Sd?t.size():t;if(r===id.DELTA&&e.logicalLevelTechnique2===id.RLE){const t=e.runs,r=2;if(e.numRleValues!==o)return cd.FLAT;if(1===t)return cd.SEQUENCE;if(2===t){const t=i.get();let o;if(e.physicalLevelTechnique===rd.VARINT)o=pd(n,i,4);else{const e=i.get();o=new Int32Array(n.buffer,n.byteOffset+e,4)}if(i.set(t),o[2]===r&&o[3]===r)return cd.SEQUENCE}}return 1===e.numValues?cd.CONST:cd.FLAT}class Ld extends Xh{getValueFromBuffer(e){return this.dataBuffer[e]}}class zd extends Qh{constructor(e,t,n,i){super(e,BigInt64Array.of(t),n,i)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class Rd{constructor(e,t,n){r(this,"_geometryOffsets",void 0),r(this,"_partOffsets",void 0),r(this,"_ringOffsets",void 0),this._geometryOffsets=e,this._partOffsets=t,this._ringOffsets=n}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Vd(e,t,n){return{x:Ud(e,t)-n,y:Ud(e>>1,t)-n}}function Ud(e,t){let n=0;for(let i=0;i<t;i++)n|=(e&1<<2*i)>>i;return n}!function(e){e[e.POINT=0]="POINT",e[e.LINESTRING=1]="LINESTRING",e[e.POLYGON=2]="POLYGON",e[e.MULTIPOINT=3]="MULTIPOINT",e[e.MULTILINESTRING=4]="MULTILINESTRING",e[e.MULTIPOLYGON=5]="MULTIPOLYGON"}(ud||(ud={})),function(e){e[e.POINT=0]="POINT",e[e.LINESTRING=1]="LINESTRING",e[e.POLYGON=2]="POLYGON"}(hd||(hd={})),function(e){e[e.MORTON=0]="MORTON",e[e.VEC_2=1]="VEC_2",e[e.VEC_3=2]="VEC_3"}(dd||(dd={}));class qd{createPoint(e){return[[e]]}createMultiPoint(e){return e.map(e=>[e])}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,t){return[e].concat(t)}createMultiPolygon(e){return e.flat()}}function Zd(e){const t=new Array(e.numGeometries);let i=1,r=1,o=1,a=0;const s=new qd;let l=0,c=0;const u=e.mortonSettings,h=e.topologyVector,d=h.geometryOffsets,p=h.partOffsets,f=h.ringOffsets,m=e.vertexOffsets,g=e.containsPolygonGeometry(),y=e.vertexBuffer;for(let v=0;v<e.numGeometries;v++){const h=e.geometryType(v);if(h===ud.POINT){if(m&&0!==m.length)if(e.vertexBufferType===dd.VEC_2){const e=2*m[c++],i=new n(y[e],y[e+1]);t[a++]=s.createPoint(i)}else{const e=Vd(y[m[c++]],u.numBits,u.coordinateShift),i=new n(e.x,e.y);t[a++]=s.createPoint(i)}else{const e=new n(y[l++],y[l++]);t[a++]=s.createPoint(e)}d&&o++,p&&i++,f&&r++}else if(h===ud.MULTIPOINT){const e=d[o]-d[o-1];o++;const i=new Array(e);if(m&&0!==m.length){for(let t=0;t<e;t++){const e=2*m[c++];i[t]=new n(y[e],y[e+1])}t[a++]=s.createMultiPoint(i)}else{for(let t=0;t<e;t++){const e=y[l++],r=y[l++];i[t]=new n(e,r)}t[a++]=s.createMultiPoint(i)}}else if(h===ud.LINESTRING){let n,h=0;g?(h=f[r]-f[r-1],r++):h=p[i]-p[i-1],i++,m&&0!==m.length?(n=e.vertexBufferType===dd.VEC_2?Xd(y,m,c,h,!1):Kd(y,m,c,h,!1,u),c+=h):(n=Yd(y,l,h,!1),l+=2*h),t[a++]=s.createLineString(n),d&&o++}else if(h===ud.POLYGON){const n=p[i]-p[i-1];i++;const h=new Array(n-1);let g=f[r]-f[r-1];if(r++,m&&0!==m.length){const n=e.vertexBufferType===dd.VEC_2?Gd(y,m,c,g):Wd(y,m,c,g,0,u);c+=g;for(let t=0;t<h.length;t++)g=f[r]-f[r-1],r++,h[t]=e.vertexBufferType===dd.VEC_2?Gd(y,m,c,g):Wd(y,m,c,g,0,u),c+=g;t[a++]=s.createPolygon(n,h)}else{const e=Hd(y,l,g);l+=2*g;for(let t=0;t<h.length;t++)g=f[r]-f[r-1],r++,h[t]=Hd(y,l,g),l+=2*g;t[a++]=s.createPolygon(e,h)}d&&o++}else if(h===ud.MULTILINESTRING){const n=d[o]-d[o-1];o++;const h=new Array(n);if(m&&0!==m.length){for(let t=0;t<n;t++){let n=0;g?(n=f[r]-f[r-1],r++):n=p[i]-p[i-1],i++;const o=e.vertexBufferType===dd.VEC_2?Xd(y,m,c,n,!1):Kd(y,m,c,n,!1,u);h[t]=o,c+=n}t[a++]=s.createMultiLineString(h)}else{for(let e=0;e<n;e++){let t=0;g?(t=f[r]-f[r-1],r++):t=p[i]-p[i-1],i++,h[e]=Yd(y,l,t,!1),l+=2*t}t[a++]=s.createMultiLineString(h)}}else{if(h!==ud.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const n=d[o]-d[o-1];o++;const h=new Array(n);let g=0;if(m&&0!==m.length){for(let t=0;t<n;t++){const n=p[i]-p[i-1];i++;const o=new Array(n-1);g=f[r]-f[r-1],r++;const a=e.vertexBufferType===dd.VEC_2?Gd(y,m,c,g):Wd(y,m,c,g,0,u);c+=g;for(let t=0;t<o.length;t++)g=f[r]-f[r-1],r++,o[t]=e.vertexBufferType===dd.VEC_2?Gd(y,m,c,g):Wd(y,m,c,g,0,u),c+=g;h[t]=s.createPolygon(a,o)}t[a++]=s.createMultiPolygon(h)}else{for(let e=0;e<n;e++){const t=p[i]-p[i-1];i++;const n=new Array(t-1);g=f[r]-f[r-1],r++;const o=Hd(y,l,g);l+=2*g;for(let e=0;e<n.length;e++){const t=f[r]-f[r-1];r++,n[e]=Hd(y,l,t),l+=2*t}h[e]=s.createPolygon(o,n)}t[a++]=s.createMultiPolygon(h)}}}}return t}function Hd(e,t,n){return Yd(e,t,n,!0)}function Gd(e,t,n,i){return Xd(e,t,n,i,!0)}function Wd(e,t,n,i,r,o){return Kd(e,t,n,i,!0,o)}function Yd(e,t,i,r){const o=new Array(r?i+1:i);for(let a=0;a<2*i;a+=2)o[a/2]=new n(e[t+a],e[t+a+1]);return r&&(o[o.length-1]=o[0]),o}function Xd(e,t,i,r,o){const a=new Array(o?r+1:r);for(let s=0;s<2*r;s+=2){const r=2*t[i+s/2];a[s/2]=new n(e[r],e[r+1])}return o&&(a[a.length-1]=a[0]),a}function Kd(e,t,i,r,o,a){const s=new Array(o?r+1:r);for(let l=0;l<r;l++){const r=Vd(e[t[i+l]],a.numBits,a.coordinateShift);s[l]=new n(r.x,r.y)}return o&&(s[s.length-1]=s[0]),s}class $d{constructor(e,t,n,i,o){r(this,"_vertexBufferType",void 0),r(this,"_topologyVector",void 0),r(this,"_vertexOffsets",void 0),r(this,"_vertexBuffer",void 0),r(this,"_mortonSettings",void 0),this._vertexBufferType=e,this._topologyVector=t,this._vertexOffsets=n,this._vertexBuffer=i,this._mortonSettings=o}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const e=Zd(this);let t=0;for(;t<this.numGeometries;)yield{coordinates:e[t],type:this.geometryType(t)},t++}getSimpleEncodedVertex(e){const t=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[t],this.vertexBuffer[t+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){const t=Vd(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[t.x,t.y]}const t=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[t],this.vertexBuffer[t+1]]}getGeometries(){return Zd(this)}get mortonSettings(){return this._mortonSettings}}class Qd extends $d{constructor(e,t,n,i,o,a,s){super(n,i,o,a,s),r(this,"_numGeometries",void 0),r(this,"_geometryType",void 0),this._numGeometries=e,this._geometryType=t}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===ud.POLYGON||this._geometryType===ud.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Jd extends $d{constructor(e,t,n,i,o,a){super(e,n,i,o,a),r(this,"_geometryTypes",void 0),this._geometryTypes=t}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let e=0;e<this.numGeometries;e++)if(this.geometryType(e)===ud.POLYGON||this.geometryType(e)===ud.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class ep{constructor(e,t,n,i){r(this,"_triangleOffsets",void 0),r(this,"_indexBuffer",void 0),r(this,"_vertexBuffer",void 0),r(this,"_topologyVector",void 0),this._triangleOffsets=e,this._indexBuffer=t,this._vertexBuffer=n,this._topologyVector=i}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const e=new Array(this.numGeometries),t=this._topologyVector,i=t.partOffsets,r=t.ringOffsets,o=t.geometryOffsets;let a=0,s=1,l=1,c=1;for(let u=0;u<this.numGeometries;u++)switch(this.geometryType(u)){case ud.POLYGON:{const t=i[s]-i[s-1];s++;const h=[];for(let e=0;e<t;e++){const e=r[l]-r[l-1];l++;const t=[];for(let i=0;i<e;i++){const e=this._vertexBuffer[a++],i=this._vertexBuffer[a++];t.push(new n(e,i))}t.length>0&&t.push(t[0]),h.push(t)}e[u]=h,o&&c++}break;case ud.MULTIPOLYGON:{const t=o[c]-o[c-1];c++;const h=[];for(let e=0;e<t;e++){const e=i[s]-i[s-1];s++;for(let t=0;t<e;t++){const e=r[l]-r[l-1];l++;const t=[];for(let i=0;i<e;i++){const e=this._vertexBuffer[a++],i=this._vertexBuffer[a++];t.push(new n(e,i))}t.length>0&&t.push(t[0]),h.push(t)}}e[u]=h}}return e}[Symbol.iterator](){return null}}function tp(e,t,n,i,r,o){return new np(e,t,n,i,r,o)}class np extends ep{constructor(e,t,n,i,o,a){super(n,i,o,a),r(this,"_numGeometries",void 0),r(this,"_geometryType",void 0),this._numGeometries=e,this._geometryType=t}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function ip(e,t,n,i,r){return new rp(e,t,n,i,r)}class rp extends ep{constructor(e,t,n,i,o){super(t,n,i,o),r(this,"_geometryTypes",void 0),this._geometryTypes=e}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function op(e,t,n,i,r){const o=Ad(e,n);let a=null,s=null,l=null,c=null,u=null,h=null,d=null,p=null;if(Bd(o,i,e,n)===cd.CONST){const r=Pd(e,n,o,!1);for(let i=0;i<t-1;i++){const t=Ad(e,n);switch(t.physicalStreamType){case od.LENGTH:switch(t.logicalStreamType.lengthType){case ld.GEOMETRIES:a=Fd(e,n,t);break;case ld.PARTS:s=Fd(e,n,t);break;case ld.RINGS:l=Fd(e,n,t);break;case ld.TRIANGLES:d=Fd(e,n,t)}break;case od.OFFSET:switch(t.logicalStreamType.offsetType){case sd.VERTEX:c=Td(e,n,t,!1);break;case sd.INDEX:p=Td(e,n,t,!1)}break;case od.DATA:ad.VERTEX===t.logicalStreamType.dictionaryType?u=Td(e,n,t,!0):(h={numBits:t.numBits,coordinateShift:t.coordinateShift},u=Td(e,n,t,!1))}}return null!==p?null!=a||null!=s?tp(i,r,d,p,u,new Rd(a,s,l)):tp(i,r,d,p,u):null===h?function(e,t,n,i,r){return new Qd(e,t,dd.VEC_2,n,i,r)}(i,r,new Rd(a,s,l),c,u):function(e,t,n,i,r,o){return new Qd(e,t,dd.MORTON,n,i,r,o)}(i,r,new Rd(a,s,l),c,u,h)}const f=Td(e,n,o,!1);for(let m=0;m<t-1;m++){const t=Ad(e,n);switch(t.physicalStreamType){case od.LENGTH:switch(t.logicalStreamType.lengthType){case ld.GEOMETRIES:a=Td(e,n,t,!1);break;case ld.PARTS:s=Td(e,n,t,!1);break;case ld.RINGS:l=Td(e,n,t,!1);break;case ld.TRIANGLES:d=Fd(e,n,t)}break;case od.OFFSET:switch(t.logicalStreamType.offsetType){case sd.VERTEX:c=Td(e,n,t,!1);break;case sd.INDEX:p=Td(e,n,t,!1)}break;case od.DATA:ad.VERTEX===t.logicalStreamType.dictionaryType?u=Td(e,n,t,!0):(h={numBits:t.numBits,coordinateShift:t.coordinateShift},u=Td(e,n,t,!1))}}return null!==p&&null===s?ip(f,d,p,u):(null!==a?(a=ap(f,a,2),null!==s&&null!==l?(s=sp(f,a,s,!1),l=function(e,t,n,i){const r=new Int32Array(n[n.length-1]+1);let o=0;r[0]=o;let a=1,s=1,l=0;for(let c=0;c<e.length;c++){const u=e[c],h=t[c+1]-t[c];if(0!==u&&3!==u)for(let e=0;e<h;e++){const e=n[a]-n[a-1];a++;for(let t=0;t<e;t++)o=r[s++]=o+i[l++]}else for(let e=0;e<h;e++)r[s++]=++o,a++}return r}(f,a,s,l)):null!==s&&(s=function(e,t,n){const i=new Int32Array(t[t.length-1]+1);let r=0;i[0]=r;let o=1,a=0;for(let s=0;s<e.length;s++){const l=e[s],c=t[s+1]-t[s];if(4===l||1===l)for(let e=0;e<c;e++)r=i[o++]=r+n[a++];else for(let e=0;e<c;e++)i[o++]=++r}return i}(f,a,s))):null!==s&&null!==l?(s=ap(f,s,1),l=sp(f,s,l,!0)):null!==s&&(s=ap(f,s,0)),null!==p?ip(f,d,p,u,new Rd(a,s,l)):null===h?function(e,t,n,i){return new Jd(dd.VEC_2,e,t,n,i)}(f,new Rd(a,s,l),c,u):function(e,t,n,i,r){return new Jd(dd.MORTON,e,t,n,i,r)}(f,new Rd(a,s,l),c,u,h))}function ap(e,t,n){const i=new Int32Array(e.length+1);let r=0;i[0]=r;let o=0;for(let a=0;a<e.length;a++)r=i[a+1]=r+(e[a]>n?t[o++]:1);return i}function sp(e,t,n,i){const r=new Int32Array(t[t.length-1]+1);let o=0;r[0]=o;let a=1,s=0;for(let l=0;l<e.length;l++){const c=e[l],u=t[l+1]-t[l];if(5===c||2===c||i&&(4===c||1===c))for(let e=0;e<u;e++)o=r[a++]=o+n[s++];else for(let e=0;e<u;e++)r[a++]=++o}return r}class lp extends Yh{constructor(e,t,n){super(e,t.getBuffer(),n),r(this,"dataVector",void 0),this.dataVector=t}getValueFromBuffer(e){return this.dataVector.get(e)}}class cp extends Xh{getValueFromBuffer(e){return this.dataBuffer[e]}}class up extends Yh{constructor(e,t,n){super(e,BigInt64Array.of(t),n)}getValueFromBuffer(e){return this.dataBuffer[0]}}function hp(e,t,n){return dp(e,Math.ceil(t/8),n)}function dp(e,t,n){const i=new Uint8Array(t);let r=0;for(;r<t;){const t=e[n.increment()];if(t<=127){const o=t+3,a=e[n.increment()],s=r+o;i.fill(a,r,s),r=s}else{const o=256-t;for(let t=0;t<o;t++)i[r++]=e[n.increment()]}}return i}const pp=new TextDecoder;function fp(e,t,n){return n-t>=12?pp.decode(e.subarray(t,n)):function(e,t,n){let i="",r=t;for(;r<n;){const t=e[r];let o,a,s,l=null,c=t>239?4:t>223?3:t>191?2:1;if(r+c>n)break;1===c?t<128&&(l=t):2===c?(o=e[r+1],128==(192&o)&&(l=(31&t)<<6|63&o,l<=127&&(l=null))):3===c?(o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&(l=(15&t)<<12|(63&o)<<6|63&a,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===c&&(o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&t)<<18|(63&o)<<12|(63&a)<<6|63&s,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,c=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=c}return i}(e,t,n)}class mp extends Yh{constructor(e,t,n,i){super(e,n,i),r(this,"offsetBuffer",void 0),this.offsetBuffer=t}}class gp extends mp{constructor(e,t,n,i){super(e,t,n,null!==i&&void 0!==i?i:t.length-1),r(this,"textEncoder",void 0),this.textEncoder=new TextEncoder}getValueFromBuffer(e){return fp(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class yp extends mp{constructor(e,t,n,i,o){super(e,n,i,null!==o&&void 0!==o?o:t.length),r(this,"indexBuffer",void 0),r(this,"textEncoder",void 0),this.indexBuffer=t,this.indexBuffer=t,this.textEncoder=new TextEncoder}getValueFromBuffer(e){const t=this.indexBuffer[e];return fp(this.dataBuffer,this.offsetBuffer[t],this.offsetBuffer[t+1])}}class vp extends mp{constructor(e,t,n,i,o,a,s){super(e,n,i,s),r(this,"indexBuffer",void 0),r(this,"symbolOffsetBuffer",void 0),r(this,"symbolTableBuffer",void 0),r(this,"textEncoder",void 0),r(this,"symbolLengthBuffer",void 0),r(this,"lengthBuffer",void 0),r(this,"decodedDictionary",void 0),this.indexBuffer=t,this.symbolOffsetBuffer=o,this.symbolTableBuffer=a,this.textEncoder=new TextEncoder}getValueFromBuffer(e){null==this.decodedDictionary&&(null==this.symbolLengthBuffer&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=function(e,t,n){const i=[],r=new Array(t.length).fill(0);for(let o=1;o<t.length;o++)r[o]=r[o-1]+t[o-1];for(let o=0;o<n.length;o++)if(255===n[o])i.push(n[++o]);else{const a=t[n[o]],s=r[n[o]];for(let t=0;t<a;t++)i.push(e[s+t])}return new Uint8Array(i)}(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const t=this.indexBuffer[e];return fp(this.decodedDictionary,this.offsetBuffer[t],this.offsetBuffer[t+1])}offsetToLengthBuffer(e){const t=new Uint32Array(e.length-1);let n=e[0];for(let i=1;i<e.length;i++){const r=e[i];t[i-1]=r-n,n=r}return t}}function _p(e,t,n,i,r,o){return"scalarType"===n.type?function(e,t,n,i,r,o){let a=null,s=0;if(0===e)return null;if(o.nullable){const e=Ad(t,n);s=e.numValues;const i=n.get(),r=hp(t,s,n);n.set(i+e.byteLength),a=new Sd(r,e.numValues)}const l=null!==a&&void 0!==a?a:i;switch(r.physicalType){case 4:case 3:return function(e,t,n,i,r){const o=Ad(e,t),a=Bd(o,r,e,t),s=3===i.physicalType;if(a===cd.FLAT){const i=xp(r)?Od(e,t,o,s,r):Td(e,t,o,s);return new Kh(n.name,i,r)}if(a===cd.SEQUENCE){const i=Md(e,t,o);return new Jh(n.name,i[0],i[1],o.numRleValues)}{const i=Pd(e,t,o,s);return new ed(n.name,i,r)}}(t,n,o,r,l);case 9:return function(e,t,n,i,r,o,a){let s=null,l=null,c=null,u=null,h=null,d=null,p=null,f=null;for(let m=0;m<i;m++){const e=Ad(t,n);if(0!==e.byteLength)switch(e.physicalStreamType){case od.PRESENT:{const i=hp(t,e.numValues,n);d=new Sd(i,e.numValues);break}case od.OFFSET:l=null!=r||null!=d?Od(t,n,e,!1,null!==r&&void 0!==r?r:d):Td(t,n,e,!1);break;case od.LENGTH:{const i=Fd(t,n,e);ld.DICTIONARY===e.logicalStreamType.lengthType?s=i:ld.SYMBOL===e.logicalStreamType.lengthType?u=i:p=i;break}case od.DATA:{const i=t.subarray(n.get(),n.get()+e.byteLength);n.add(e.byteLength);const r=e.logicalStreamType.dictionaryType;ad.FSST===r?h=i:ad.SINGLE===r||ad.SHARED===r?c=i:ad.NONE===r&&(f=i);break}}}return null!==(o=null!==(a=function(e,t,n,i,r,o,a){return t?new vp(e,n,i,r,o,t,a):null}(e,h,l,s,c,u,null!==r&&void 0!==r?r:d))&&void 0!==a?a:function(e,t,n,i,r){return t?r?new yp(e,n,i,t,r):new yp(e,n,i,t):null}(e,c,l,s,null!==r&&void 0!==r?r:d))&&void 0!==o?o:function(e,t,n,i,r){if(!t||!n)return null;if(i)return r?new yp(e,i,t,n,r):new yp(e,i,t,n);if(r&&r.size()!==t.length-1){const i=new Int32Array(r.size());let o=0;for(let e=0;e<r.size();e++)i[e]=r.get(e)?o++:0;return new yp(e,i,t,n,r)}return r?new gp(e,t,n,r):new gp(e,t,n)}(e,p,f,l,null!==r&&void 0!==r?r:d)}(o.name,t,n,o.nullable?e-1:e,a);case 0:return function(e,t,n,i,r){const o=Ad(e,t),a=o.numValues,s=t.get(),l=xp(r)?function(e,t,n,i){const r=dp(e,Math.ceil(t/8),n),o=new Sd(r,t),a=i.size(),s=new Sd(new Uint8Array(a),a);let l=0;for(let c=0;c<i.size();c++){const e=!!i.get(c)&&o.get(l++);s.set(c,e)}return s.getBuffer()}(e,a,t,r):hp(e,a,t);t.set(s+o.byteLength);const c=new Sd(l,a);return new lp(n.name,c,r)}(t,n,o,0,l);case 6:case 5:return function(e,t,n,i,r){const o=Ad(e,t),a=Bd(o,i,e,t),s=5===r.physicalType;if(a===cd.FLAT){const r=xp(i)?function(e,t,n,i,r){return function(e,t,n,i){switch(t.logicalLevelTechnique1){case id.DELTA:return t.logicalLevelTechnique2===id.RLE&&(e=bd(e,t.runs,t.numRleValues)),function(e,t){const n=new BigInt64Array(e.size());let i=0;e.get(0)?(n[0]=e.get(0)?t[0]>>1n^-(1n&t[0]):0n,i=1):n[0]=0n;let r=1;for(;r!=n.length;++r)n[r]=e.get(r)?n[r-1]+(t[i]>>1n^-(1n&t[i++])):n[r-1];return n}(i,e);case id.RLE:return function(e,t,n,i){const r=t;return n?function(e,t,n){const i=new BigInt64Array(e.size());let r=0;for(let o=0;o<n;o++){const a=Number(t[o]);let s=t[o+n];s=s>>1n^-(1n&s);for(let t=r;t<r+a;t++)e.get(t)?i[t]=s:(i[t]=0n,r++);r+=a}return i}(i,e,r.runs):function(e,t,n){const i=new BigInt64Array(e.size());let r=0;for(let o=0;o<n;o++){const a=Number(t[o]),s=t[o+n];for(let t=r;t<r+a;t++)e.get(t)?i[t]=s:(i[t]=0n,r++);r+=a}return i}(i,e,r.runs)}(e,t,n,i);case id.NONE:return e=n?function(e,t){const n=new BigInt64Array(e.size());let i=0,r=0;for(;r!=n.length;++r)if(e.get(r)){const e=t[i++];n[r]=e>>1n^-(1n&e)}else n[r]=0n;return n}(i,e):function(e,t){const n=new BigInt64Array(e.size());let i=0,r=0;for(;r!=n.length;++r)n[r]=e.get(r)?t[i++]:0n;return n}(i,e),e;default:throw new Error("The specified Logical level technique is not supported")}}(fd(e,t,n.numValues),n,i,r)}(e,t,o,s,i):jd(e,t,o,s);return new Ld(n.name,r,i)}if(a===cd.SEQUENCE){const i=Id(e,t,o);return new zd(n.name,i[0],i[1],o.numRleValues)}{const r=Nd(e,t,o,s);return new up(n.name,r,i)}}(t,n,o,l,r);case 7:return function(e,t,n,i){const r=Ad(e,t),o=xp(i)?function(e,t,n,i){const r=t.get(),o=r+i*Float32Array.BYTES_PER_ELEMENT,a=new Uint8Array(e.subarray(r,o)).buffer,s=new Float32Array(a);t.set(o);const l=n.size(),c=new Float32Array(l);let u=0;for(let h=0;h<l;h++)c[h]=n.get(h)?s[u++]:0;return c}(e,t,i,r.numValues):function(e,t,n){const i=t.get(),r=i+n*Float32Array.BYTES_PER_ELEMENT,o=new Uint8Array(e.subarray(i,r)).buffer,a=new Float32Array(o);return t.set(r),a}(e,t,r.numValues);return new cp(n.name,o,i)}(t,n,o,l);case 8:return function(e,t,n,i){const r=Ad(e,t),o=xp(i)?function(e,t,n,i){const r=t.get(),o=r+i*Float64Array.BYTES_PER_ELEMENT,a=new Uint8Array(e.subarray(r,o)).buffer,s=new Float64Array(a);t.set(o);const l=n.size(),c=new Float64Array(l);let u=0;for(let h=0;h<l;h++)c[h]=n.get(h)?s[u++]:0;return c}(e,t,i,r.numValues):function(e,t,n){const i=t.get(),r=i+n*Float64Array.BYTES_PER_ELEMENT,o=new Uint8Array(e.subarray(i,r)).buffer,a=new Float64Array(o);return t.set(r),a}(e,t,r.numValues);return new $h(n.name,o,i)}(t,n,o,l);default:throw new Error("The specified data type for the field is currently not supported: ".concat(r))}}(i,e,t,r,n.scalarType,n):1!=i?null:function(e,t,n,i){let r=null,o=null,a=null,s=null,l=!1;for(;!l;){const n=Ad(e,t);switch(n.physicalStreamType){case od.LENGTH:ld.DICTIONARY===n.logicalStreamType.lengthType?r=Fd(e,t,n):a=Fd(e,t,n);break;case od.DATA:ad.SINGLE===n.logicalStreamType.dictionaryType||ad.SHARED===n.logicalStreamType.dictionaryType?(o=e.subarray(t.get(),t.get()+n.byteLength),l=!0):s=e.subarray(t.get(),t.get()+n.byteLength),t.add(n.byteLength)}}const c=n.complexType.children,u=[];let h=0;for(const d of c){const l=pd(e,t,1)[0];if(0==l)continue;const c="".concat(n.name).concat("default"===d.name?"":":"+d.name);if(2!==l||"scalarField"!==d.type||9!==d.scalarField.physicalType)throw new Error("Currently only optional string fields are implemented for a struct.");const p=Ad(e,t),f=hp(e,p.numValues,t),m=Ad(e,t),g=m.decompressedCount!==i?Od(e,t,m,!1,new Sd(f,p.numValues)):Td(e,t,m,!1);u[h++]=s?new vp(c,g,r,o,a,s,new Sd(f,p.numValues)):new yp(c,g,r,o,new Sd(f,p.numValues))}return u}(e,t,n,r)}function xp(e){return e instanceof Sd}function bp(e){if("id"===e.name)return!1;if("scalarType"===e.type){const t=e.scalarType;if("physicalType"===t.type)switch(t.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if("logicalType"===t.type)return!1}else if("complexType"===e.type){const t=e.complexType;if("physicalType"===t.type)switch(t.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",e),!1}const wp=new TextDecoder;function Dp(e,t){const n=pd(e,t,1)[0];if(0===n)return"";const i=t.get(),r=e.subarray(i,i+n);return t.add(n),wp.decode(r)}function Ep(e,t){const n=pd(e,t,1)[0]>>>0,i=!!(4&n),r=!!(2&n),o=pd(e,t,1)[0]>>>0,a={};if(1&n&&(a.nullable=!0),r){const r={};if(i?(r.type="logicalType",r.logicalType=o):(r.type="physicalType",r.physicalType=o),8&n){const n=pd(e,t,1)[0]>>>0;r.children=new Array(n);for(let i=0;i<n;i++)r.children[i]=Ep(e,t)}a.type="complexField",a.complexField=r}else{const e={};i?(e.type="logicalType",e.logicalType=o):(e.type="physicalType",e.physicalType=o),a.type="scalarField",a.scalarField=e}return a}function Cp(e,t){const n=pd(e,t,1)[0]>>>0,i=function(e){switch(e){case 0:case 1:case 2:case 3:{const t={};t.nullable=!!(1&e),t.columnScope=0;const n={};return n.physicalType=e>1?6:4,n.type="physicalType",t.scalarType=n,t.type="scalarType",t}case 4:{const e={nullable:!1,columnScope:0},t={type:"physicalType",physicalType:0};return e.type="complexType",e.complexType=t,e}case 30:{const e={nullable:!1,columnScope:0},t={type:"physicalType",physicalType:1};return e.type="complexType",e.complexType=t,e}default:return function(e){let t=null;switch(e){case 10:case 11:t=0;break;case 12:case 13:t=1;break;case 14:case 15:t=2;break;case 16:case 17:t=3;break;case 18:case 19:t=4;break;case 20:case 21:t=5;break;case 22:case 23:t=6;break;case 24:case 25:t=7;break;case 26:case 27:t=8;break;case 28:case 29:t=9;break;default:return null}const n={};n.nullable=!!(1&e),n.columnScope=0;const i={type:"physicalType"};return i.physicalType=t,n.type="scalarType",n.scalarType=i,n}(e)}}(n);if(!i)throw new Error("Unsupported column type code: ".concat(n));if(function(e){return e>=10}(n)?i.name=Dp(e,t):n>=0&&n<=3?i.name="id":4===n&&(i.name="geometry"),function(e){return 30===e}(n)){const n=pd(e,t,1)[0]>>>0,r=i.complexType;r.children=new Array(n);for(let i=0;i<n;i++)r.children[i]=Ep(e,t)}return i}function Ap(e,t){const n={featureTables:[]},i={};i.name=Dp(e,t);const r=pd(e,t,1)[0]>>>0,o=pd(e,t,1)[0]>>>0;i.columns=new Array(o);for(let a=0;a<o;a++)i.columns[a]=Cp(e,t);return n.featureTables.push(i),[n,r]}function Sp(e,t,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const s=t.scalarType.physicalType,l=Bd(r,o,e,n);if(4===s)switch(l){case cd.FLAT:{const t=Td(e,n,r,!1);return new Kh(i,t,o)}case cd.SEQUENCE:{const t=Md(e,n,r);return new Jh(i,t[0],t[1],r.numRleValues)}case cd.CONST:{const t=Pd(e,n,r,!1);return new ed(i,t,o)}}else switch(l){case cd.FLAT:{if(a){const t=function(e,t,n,i){const r=function(e,t,n){const i=new Float64Array(t);for(let r=0;r<t;r++)i[r]=md(e,n);return i}(e,n.numValues,t);return function(e,t,n){switch(t.logicalLevelTechnique1){case id.DELTA:return t.logicalLevelTechnique2===id.RLE&&(e=wd(e,t.runs,t.numRleValues)),function(e){e[0]=e[0]%2==1?(e[0]+1)/-2:e[0]/2;const t=e.length/4*4;let n=1;if(t>=4)for(;n<t-4;n+=4){const t=e[n],i=e[n+1],r=e[n+2],o=e[n+3];e[n]=(t%2==1?(t+1)/-2:t/2)+e[n-1],e[n+1]=(i%2==1?(i+1)/-2:i/2)+e[n],e[n+2]=(r%2==1?(r+1)/-2:r/2)+e[n+1],e[n+3]=(o%2==1?(o+1)/-2:o/2)+e[n+2]}for(;n!=e.length;++n)e[n]=(e[n]%2==1?(e[n]+1)/-2:e[n]/2)+e[n-1]}(e),e;case id.RLE:return function(e,t,n){return n?function(e,t,n){const i=new Float64Array(n);let r=0;for(let o=0;o<t;o++){const n=e[o];let a=e[o+t];a=a%2==1?(a+1)/-2:a/2,i.fill(a,r,r+n),r+=n}return i}(e,t.runs,t.numRleValues):wd(e,t.runs,t.numRleValues)}(e,t,n);case id.NONE:return e;default:throw new Error("The specified Logical level technique is not supported: ".concat(t.logicalLevelTechnique1))}}(r,n,i)}(e,n,r,!1);return new $h(i,t,o)}const t=jd(e,n,r,!1);return new Ld(i,t,o)}case cd.SEQUENCE:{const t=Id(e,n,r);return new zd(i,t[0],t[1],r.numRleValues)}case cd.CONST:{const t=Nd(e,n,r,!1);return new up(i,t,o)}}throw new Error("Vector type not supported for id column.")}class Tp{constructor(e,t){var n;switch(this._featureData=e,this.properties=this._featureData.properties||{},null===(n=this._featureData.geometry)||void 0===n?void 0:n.type){case ud.POINT:case ud.MULTIPOINT:this.type=1;break;case ud.LINESTRING:case ud.MULTILINESTRING:this.type=2;break;case ud.POLYGON:case ud.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=t,this.id=Number(this._featureData.id)}loadGeometry(){const e=[];for(const t of this._featureData.geometry.coordinates){const i=[];for(const e of t)i.push(new n(e.x,e.y));e.push(i)}return e}}class Fp{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new Tp(this.features[e],this.extent)}}class kp{constructor(e){this.layers={};const t=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=new nd(0),r=[];for(;i.get()<e.length;){const t=pd(e,i,1)[0]>>>0,o=i.get()+t;if(o>e.length)throw new Error("Block overruns tile: ".concat(o," > ").concat(e.length));if(1!=pd(e,i,1)[0]>>>0){i.set(o);continue}const a=Ap(e,i),s=a[1],l=a[0].featureTables[0];let c=null,u=null;const h=[];let d=0;for(const r of l.columns){const t=r.name;if("id"===t){let o=null;if(r.nullable){const t=Ad(e,i),n=i.get(),r=hp(e,t.numValues,i);i.set(n+t.byteLength),o=new Sd(r,t.numValues)}const a=Ad(e,i);d=a.decompressedCount,c=Sp(e,r,i,t,a,null!==o&&void 0!==o?o:d,n)}else if("geometry"===t){const t=pd(e,i,1)[0];if(0===d){const t=i.get();d=Ad(e,i).decompressedCount,i.set(t)}u=op(e,t,i,d)}else{const t=bp(r)?pd(e,i,1)[0]:1;if(0===t&&"scalarType"===r.type)continue;const n=_p(e,i,r,t,d);if(n)if(Array.isArray(n))for(const e of n)h.push(e);else h.push(n)}}const p=new td(l.name,u,c,h,s);r.push(p),i.set(o)}return r}(new Uint8Array(e));this.layers=t.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:new Fp(t)}),{})}}class Pp{constructor(e,t){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=t,"id"in e&&("string"==typeof e.id?this.id=parseInt(e.id,10):"number"!=typeof e.id||isNaN(e.id)||(this.id=e.id))}loadGeometry(){const e=[],t=1===this.feature.type?[this.feature.geometry]:this.feature.geometry;for(const i of t){const t=[];for(const e of i)t.push(new n(e[0],e[1]));e.push(t)}return e}}const Mp="_geojsonTileLayer";function Ip(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);const n={keys:[],values:[],keycache:{},valuecache:{}};for(let o=0;o<e.length;o++)n.feature=e.feature(o),t.writeMessage(2,jp,n);const i=n.keys;for(const o of i)t.writeStringField(3,o);const r=n.values;for(const o of r)t.writeMessage(4,zp,o)}function jp(e,t){if(!e.feature)return;const n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,Np,e),t.writeVarintField(3,n.type),t.writeMessage(4,Lp,n)}function Np(e,t){for(const i in null===(n=e.feature)||void 0===n?void 0:n.properties){var n;let r=e.feature.properties[i],o=e.keycache[i];if(null==r)continue;void 0===o&&(e.keys.push(i),o=e.keys.length-1,e.keycache[i]=o),t.writeVarint(o),"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r&&(r=JSON.stringify(r));const a=typeof r+":"+r;let s=e.valuecache[a];void 0===s&&(e.values.push(r),s=e.values.length-1,e.valuecache[a]=s),t.writeVarint(s)}}function Op(e,t){return(t<<3)+(7&e)}function Bp(e){return e<<1^e>>31}function Lp(e,t){const n=e.loadGeometry(),i=e.type;let r=0,o=0;for(const a of n){let n=1;1===i&&(n=a.length),t.writeVarint(Op(1,n));const s=3===i?a.length-1:a.length;for(let e=0;e<s;e++){1===e&&1!==i&&t.writeVarint(Op(2,s-1));const n=a[e].x-r,l=a[e].y-o;t.writeVarint(Bp(n)),t.writeVarint(Bp(l)),r+=n,o+=l}3===e.type&&t.writeVarint(Op(7,1))}}function zp(e,t){const n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}class Rp{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ho(k,16,0),this.grid3D=new ho(k,16,0),this.featureIndexArray=new Ua,this.promoteId=t}insert(e,t,n,i,r,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);const s=o?this.grid3D:this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const i=e[t];n[0]=Math.min(n[0],i.x),n[1]=Math.min(n[1],i.y),n[2]=Math.max(n[2],i.x),n[3]=Math.max(n[3],i.y)}n[0]<k&&n[1]<k&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers="mlt"!==this.encoding?new Oc(new Tu(this.rawTileData)).layers:new kp(this.rawTileData).layers,this.sourceLayerCoder=new Gh(this.vtLayers?Object.keys(this.vtLayers).sort():[Mp])),this.vtLayers}query(e,t,i,r){this.loadVTLayers();const o=e.params,a=k/e.tileSize/e.scale,s=fr(o.filter,o.globalState),l=e.queryGeometry,c=e.queryPadding*a,u=Hh.fromPoints(l),h=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),d=Hh.fromPoints(e.cameraQueryGeometry).expandBy(c),p=this.grid3D.query(d.minX,d.minY,d.maxX,d.maxY,(t,i,r,o)=>function(e,t,i,r,o){for(const n of e)if(t<=n.x&&i<=n.y&&r>=n.x&&o>=n.y)return!0;const a=[new n(t,i),new n(t,o),new n(r,o),new n(r,i)];if(e.length>2)for(const n of a)if(tl(e,n))return!0;for(let n=0;n<e.length-1;n++)if(nl(e[n],e[n+1],a))return!0;return!1}(e.cameraQueryGeometry,t-c,i-c,r+c,o+c));for(const n of p)h.push(n);h.sort(Up);const f={};let m;for(let n=0;n<h.length;n++){const c=h[n];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let d=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,s,o.layers,o.availableImages,t,i,r,(t,n,i)=>(d||(d=Vs(t)),n.queryIntersectsFeature({queryGeometry:l,feature:t,featureState:i,geometry:d,zoom:this.z,transform:e.transform,pixelsToTileUnits:a,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation})))}return f}loadMatchingFeature(e,t,n,i,r,o,a,s,l,c,u){const h=this.bucketLayerIDs[t];if(o&&!h.some(e=>o.has(e)))return;const d=this.sourceLayerCoder.decode(n),p=this.vtLayers[d].feature(i);if(r.needGeometry){const e=Us(p,!0);if(!r.filter(new No(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new No(this.tileID.overscaledZ),p))return;const f=this.getId(p,d);for(let m=0;m<h.length;m++){const t=h[m];if(o&&!o.has(t))continue;const n=s[t];if(!n)continue;let r={};f&&c&&(r=c.getState(n.sourceLayer||Mp,f));const d=z({},l[t]);d.paint=Vp(d.paint,n.paint,p,r,a),d.layout=Vp(d.layout,n.layout,p,r,a);const g=!u||u(p,n,r);if(!g)continue;const y=new Wh(p,this.z,this.x,this.y,f);y.layer=d;let v=e[t];void 0===v&&(v=e[t]=[]),v.push({featureIndex:i,feature:y,intersectionZ:g})}}lookupSymbolFeatures(e,t,n,i,r,o,a,s){const l={};this.loadVTLayers();const c=fr(r.filterSpec,r.globalState);for(const u of e)this.loadMatchingFeature(l,n,i,u,c,o,a,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){var n;let i=e.id;return this.promoteId&&(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof i&&(i=Number(i)),void 0===i&&(null===(n=e.properties)||void 0===n?void 0:n.cluster)&&this.promoteId&&(i=Number(e.properties.cluster_id))),i}}function Vp(e,t,n,i,r){return V(e,(e,o)=>{const a=t instanceof Ho?t.get(o):null;return a&&a.evaluate?a.evaluate(n,i,r):a})}function Up(e,t){return t-e}function qp(e,t,i,r,o){const a=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new n(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new n(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<i&&u.y<i||(s.y<i?s=new n(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round():u.y<i&&(u=new n(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round()),s.x>=r&&u.x>=r||(s.x>=r?s=new n(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=r&&(u=new n(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=o&&u.y>=o||(s.y>=o?s=new n(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round():u.y>=o&&(u=new n(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}function Zp(e,t,n,i,r){switch(t){case 1:return function(e,t,n,i){const r=[];for(const o of e)for(const e of o){const o=0===i?e.x:e.y;o>=t&&o<=n&&r.push([e])}return r}(e,n,i,r);case 2:return Gp(e,n,i,r,!1);case 3:return Gp(e,n,i,r,!0)}return[]}function Hp(e,t,i,r,o){const a=0===r?Wp:Yp;let s=[];const l=[];for(let n=0;n<e.length-1;n++){const c=e[n],u=e[n+1],h=0===r?c.x:c.y,d=0===r?u.x:u.y;let p=!1;h<t?d>t&&s.push(a(c,u,t)):h>i?d<i&&s.push(a(c,u,i)):s.push(c),d<t&&h>=t&&(s.push(a(c,u,t)),p=!0),d>i&&h<=i&&(s.push(a(c,u,i)),p=!0),!o&&p&&(l.push(s),s=[])}const c=e.length-1,u=0===r?e[c].x:e[c].y;return u>=t&&u<=i&&s.push(e[c]),o&&s.length>0&&!s[0].equals(s[s.length-1])&&s.push(new n(s[0].x,s[0].y)),s.length>0&&l.push(s),l}function Gp(e,t,n,i,r){const o=[];for(const a of e){const e=Hp(a,t,n,i,r);e.length>0&&o.push(...e)}return o}function Wp(e,t,i){return new n(i,e.y+(i-e.x)/(t.x-e.x)*(t.y-e.y))}function Yp(e,t,i){return new n(e.x+(i-e.y)/(t.y-e.y)*(t.x-e.x),i)}fo("FeatureIndex",Rp,{omit:["rawTileData","sourceLayerCoder"]});class Xp extends n{constructor(e,t,n,i){super(e,t),this.angle=n,void 0!==i&&(this.segment=i)}clone(){return new Xp(this.x,this.y,this.angle,this.segment)}}function Kp(e,t,n,i,r){if(void 0===t.segment||0===n)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>r)return!1;a++,s+=t.dist(n)}return!0}function $p(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Qp(e,t,n){return e?.6*t*n:0}function Jp(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function ef(e,t,n,i,r,o){const a=Qp(n,r,o),s=Jp(n,i)*o;let l=0;const c=$p(e)/2;for(let u=0;u<e.length-1;u++){const n=e[u],i=e[u+1],r=n.dist(i);if(l+r>c){const o=(c-l)/r,h=yn.number(n.x,i.x,o),d=yn.number(n.y,i.y,o),p=new Xp(h,d,i.angleTo(n),u);return p._round(),!a||Kp(e,p,s,a,t)?p:void 0}l+=r}}function tf(e,t,n,i,r,o,a,s,l){const c=Qp(i,o,a),u=Jp(i,r),h=u*a,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),nf(e,d?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,h,d,!1,l)}function nf(e,t,n,i,r,o,a,s,l){const c=o/2,u=$p(e);let h=0,d=t-n,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],a=e[f+1],s=t.dist(a),m=a.angleTo(t);for(;d+n<h+s;){d+=n;const g=(d-h)/s,y=yn.number(t.x,a.x,g),v=yn.number(t.y,a.y,g);if(y>=0&&y<l&&v>=0&&v<l&&d-c>=0&&d+c<=u){const t=new Xp(y,v,m,f);t._round(),i&&!Kp(e,t,o,i,r)||p.push(t)}}h+=s}return s||p.length||a||(p=nf(e,h/2,n,i,r,o,a,!0,l)),p}function rf(e,t,i,r){const o=[],a=e.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2;let u={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};const h=a.stretchX||[[0,l]],d=a.stretchY||[[0,c]],p=(e,t)=>e+t[1]-t[0],f=h.reduce(p,0),m=d.reduce(p,0),g=l-f,y=c-m;let v=0,_=f,x=0,b=m,w=0,D=g,E=0,C=y;if(a.content&&r){const t=a.content,n=t[2]-t[0],i=t[3]-t[1];(a.textFitWidth||a.textFitHeight)&&(u=nh(e)),v=of(h,0,t[0]),x=of(d,0,t[1]),_=of(h,t[0],t[2]),b=of(d,t[1],t[3]),w=t[0]-v,E=t[1]-x,D=n-_,C=i-b}const A=u.x1,S=u.y1,T=u.x2-A,F=u.y2-S,k=(e,r,o,l)=>{const c=sf(e.stretch-v,_,T,A),u=lf(e.fixed-w,D,e.stretch,f),h=sf(r.stretch-x,b,F,S),d=lf(r.fixed-E,C,r.stretch,m),p=sf(o.stretch-v,_,T,A),g=lf(o.fixed-w,D,o.stretch,f),y=sf(l.stretch-x,b,F,S),k=lf(l.fixed-E,C,l.stretch,m),P=new n(c,h),M=new n(p,h),I=new n(p,y),j=new n(c,y),N=new n(u/s,d/s),O=new n(g/s,k/s),B=t*Math.PI/180;if(B){const e=Math.sin(B),t=Math.cos(B),n=[t,-e,e,t];P._matMult(n),M._matMult(n),j._matMult(n),I._matMult(n)}const L=e.stretch+e.fixed,z=r.stretch+r.fixed;return{tl:P,tr:M,bl:j,br:I,tex:{x:a.paddedRect.x+1+L,y:a.paddedRect.y+1+z,w:o.stretch+o.fixed-L,h:l.stretch+l.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:N,pixelOffsetBR:O,minFontScaleX:D/s/T,minFontScaleY:C/s/F,isSDF:i}};if(r&&(a.stretchX||a.stretchY)){const e=af(h,g,f),t=af(d,y,m);for(let n=0;n<e.length-1;n++){const i=e[n],r=e[n+1];for(let e=0;e<t.length-1;e++)o.push(k(i,t[e],r,t[e+1]))}}else o.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function of(e,t,n){let i=0;for(const r of e)i+=Math.max(t,Math.min(n,r[1]))-Math.max(t,Math.min(n,r[0]));return i}function af(e,t,n){const i=[{fixed:-1,stretch:0}];for(const[r,o]of e){const e=i[i.length-1];i.push({fixed:r-e.stretch,stretch:e.stretch}),i.push({fixed:r-e.stretch,stretch:e.stretch+(o-r)})}return i.push({fixed:t+1,stretch:n}),i}function sf(e,t,n,i){return e/t*n+i}function lf(e,t,n,i){return e-t*n/i}fo("Anchor",Xp);class cf{constructor(e,t,i,r,o,a,s,l,c,u){var h;if(this.boxStartIndex=e.length,c){let e=a.top,t=a.bottom;const n=a.collisionPadding;n&&(e-=n[1],t+=n[3]);let i=t-e;i>0&&(i=Math.max(10,i),this.circleDiameter=i)}else{const c=(null===(h=a.image)||void 0===h?void 0:h.content)&&(a.image.textFitWidth||a.image.textFitHeight)?nh(a):{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};c.y1=c.y1*s-l[0],c.y2=c.y2*s+l[2],c.x1=c.x1*s-l[3],c.x2=c.x2*s+l[1];const d=a.collisionPadding;if(d&&(c.x1-=d[0]*s,c.y1-=d[1]*s,c.x2+=d[2]*s,c.y2+=d[3]*s),u){const e=new n(c.x1,c.y1),t=new n(c.x2,c.y1),i=new n(c.x1,c.y2),r=new n(c.x2,c.y2),o=u*Math.PI/180;e._rotate(o),t._rotate(o),i._rotate(o),r._rotate(o),c.x1=Math.min(e.x,t.x,i.x,r.x),c.x2=Math.max(e.x,t.x,i.x,r.x),c.y1=Math.min(e.y,t.y,i.y,r.y),c.y2=Math.max(e.y,t.y,i.y,r.y)}e.emplaceBack(t.x,t.y,c.x1,c.y1,c.x2,c.y2,i,r,o)}this.boxEndIndex=e.length}}class uf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&n(t[o],t[i])<0&&(i=o),n(t[i],r)>=0)break;t[e]=t[i],e=i}t[e]=r}}function hf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Hh.fromPoints(e[0]),o=Math.min(r.width(),r.height());let a=o/2;const s=new uf([],df),{minX:l,minY:c,maxX:u,maxY:h}=r;if(0===o)return new n(l,c);for(let n=l;n<u;n+=o)for(let t=c;t<h;t+=o)s.push(new pf(n+a,t+a,a,e));let d=function(e){let t=0,n=0,i=0;const r=e[0];for(let o=0,a=r.length,s=a-1;o<a;s=o++){const e=r[o],a=r[s],l=e.x*a.y-a.x*e.y;n+=(e.x+a.x)*l,i+=(e.y+a.y)*l,t+=3*l}return new pf(n/t,i/t,0,e)}(e),p=s.length;for(;s.length;){const n=s.pop();(n.d>d.d||!d.d)&&(d=n,i&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,p)),n.max-d.d<=t||(a=n.h/2,s.push(new pf(n.p.x-a,n.p.y-a,a,e)),s.push(new pf(n.p.x+a,n.p.y-a,a,e)),s.push(new pf(n.p.x-a,n.p.y+a,a,e)),s.push(new pf(n.p.x+a,n.p.y+a,a,e)),p+=4)}return i&&(console.log("num probes: ".concat(p)),console.log("best distance: ".concat(d.d))),d.p}function df(e,t){return t.max-e.max}function pf(e,t,i,r){this.p=new n(e,t),this.h=i,this.d=function(e,t){let n=!1,i=1/0;for(let r=0;r<t.length;r++){const o=t[r];for(let t=0,r=o.length,a=r-1;t<r;a=t++){const r=o[t],s=o[a];r.y>e.y!=s.y>e.y&&e.x<(s.x-r.x)*(e.y-r.y)/(s.y-r.y)+r.x&&(n=!n),i=Math.min(i,Js(e,r,s))}}return(n?1:-1)*Math.sqrt(i)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var ff;e.aP=void 0,(ff=e.aP||(e.aP={}))[ff.center=1]="center",ff[ff.left=2]="left",ff[ff.right=3]="right",ff[ff.top=4]="top",ff[ff.bottom=5]="bottom",ff[ff["top-left"]=6]="top-left",ff[ff["top-right"]=7]="top-right",ff[ff["bottom-left"]=8]="bottom-left",ff[ff["bottom-right"]=9]="bottom-right";const mf=Number.POSITIVE_INFINITY;function gf(e,t){return t[1]!==mf?function(e,t,n){let i=0,r=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}return[i,r]}(e,t[0],t[1]):function(e,t){let n=0,i=0;t<0&&(t=0);const r=t/Math.SQRT2;switch(e){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-t;break;case"top":i=t-7}switch(e){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=t;break;case"right":n=-t}return[n,i]}(e,t[0])}function yf(e,t,n){var i;const r=e.layout,o=null===(i=r.get("text-variable-anchor-offset"))||void 0===i?void 0:i.evaluate(t,{},n);if(o){const e=o.values,t=[];for(let n=0;n<e.length;n+=2){const i=t[n]=e[n],r=e[n+1].map(e=>e*mu);i.startsWith("top")?r[1]-=7:i.startsWith("bottom")&&(r[1]+=7),t[n+1]=r}return new Lt(t)}const a=r.get("text-variable-anchor");if(a){let i;i=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[r.get("text-radial-offset").evaluate(t,{},n)*mu,mf]:r.get("text-offset").evaluate(t,{},n).map(e=>e*mu);const o=[];for(const e of a)o.push(e,gf(e,i));return new Lt(o)}return null}function vf(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _f(t,n,i,r,o,a,s,l,c,u,h,d){let p=a.textMaxSize.evaluate(n,{});void 0===p&&(p=s);const f=t.layers[0].layout,m=f.get("icon-offset").evaluate(n,{},h),g=bf(i.horizontal),y=s/24,v=t.tilePixelRatio*y,_=t.tilePixelRatio*p/24,x=t.tilePixelRatio*l,b=t.tilePixelRatio*f.get("symbol-spacing"),w=f.get("text-padding")*t.tilePixelRatio,D=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=e.get("icon-padding").evaluate(t,{},n),o=r&&r.values;return[o[0]*i,o[1]*i,o[2]*i,o[3]*i]}(f,n,h,t.tilePixelRatio),E=f.get("text-max-angle")/180*Math.PI,C="viewport"!==f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),A="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),S=f.get("symbol-placement"),T=b/2,F=f.get("icon-text-fit");let P;r&&"none"!==F&&(t.allowVerticalPlacement&&i.vertical&&(P=ih(r,i.vertical,F,f.get("icon-text-fit-padding"),m,y)),g&&(r=ih(r,g,F,f.get("icon-text-fit-padding"),m,y)));const M=h?d.line.getGranularityForZoomLevel(h.z):1,I=(l,d)=>{d.x<0||d.x>=k||d.y<0||d.y>=k||function(t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,D,E,C){const A=t.addToLineVertexArray(n,i);let S,T,F,k,P=0,M=0,I=0,j=0,N=-1,O=-1;const B={};let L=ys("");if(t.allowVerticalPlacement&&r.vertical){const e=l.layout.get("text-rotate").evaluate(b,{},E)+90;F=new cf(c,n,u,h,d,r.vertical,p,f,m,e),s&&(k=new cf(c,n,u,h,d,s,y,v,m,e))}if(o){const i=l.layout.get("icon-rotate").evaluate(b,{}),r="none"!==l.layout.get("icon-text-fit"),a=rf(o,i,D,r),p=s?rf(s,i,D,r):void 0;T=new cf(c,n,u,h,d,o,y,v,!1,i),P=4*a.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[rh*l.layout.get("icon-size").evaluate(b,{})],m[0]>oh&&H("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[rh*w.compositeIconSizes[0].evaluate(b,{},E),rh*w.compositeIconSizes[1].evaluate(b,{},E)],(m[0]>oh||m[1]>oh)&&H("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))),t.addSymbols(t.icon,a,m,x,_,b,e.az.none,n,A.lineStartIndex,A.lineLength,-1,E),N=t.icon.placedSymbolArray.length-1,p&&(M=4*p.length,t.addSymbols(t.icon,p,m,x,_,b,e.az.vertical,n,A.lineStartIndex,A.lineLength,-1,E),O=t.icon.placedSymbolArray.length-1)}const z=Object.keys(r.horizontal);for(const H of z){const i=r.horizontal[H];if(!S){L=ys(i.text);const e=l.layout.get("text-rotate").evaluate(b,{},E);S=new cf(c,n,u,h,d,i,p,f,m,e)}const o=1===i.positionedLines.length;if(I+=xf(t,n,i,a,l,m,b,g,A,r.vertical?e.az.horizontal:e.az.horizontalOnly,o?z:[H],B,N,w,E),o)break}r.vertical&&(j+=xf(t,n,r.vertical,a,l,m,b,g,A,e.az.vertical,["vertical"],B,O,w,E));const R=S?S.boxStartIndex:t.collisionBoxArray.length,V=S?S.boxEndIndex:t.collisionBoxArray.length,U=F?F.boxStartIndex:t.collisionBoxArray.length,q=F?F.boxEndIndex:t.collisionBoxArray.length,Z=T?T.boxStartIndex:t.collisionBoxArray.length,G=T?T.boxEndIndex:t.collisionBoxArray.length,W=k?k.boxStartIndex:t.collisionBoxArray.length,Y=k?k.boxEndIndex:t.collisionBoxArray.length;let X=-1;const K=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;X=K(S,X),X=K(F,X),X=K(T,X),X=K(k,X);const $=X>-1?1:0;$&&(X*=C/mu),t.glyphOffsetArray.length>=fh.MAX_GLYPHS&&H("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey);const Q=yf(l,b,E),[J,ee]=function(t,n){const i=t.length,r=null==n?void 0:n.values;if((null==r?void 0:r.length)>0)for(let o=0;o<r.length;o+=2){const n=r[o+1];t.emplaceBack(e.aP[r[o]],n[0],n[1])}return[i,t.length]}(t.textAnchorOffsets,Q);t.symbolInstances.emplaceBack(n.x,n.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical||-1,N,O,L,R,V,U,q,Z,G,W,Y,u,I,j,P,M,$,0,p,X,J,ee)}(t,d,l,i,r,o,P,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,v,[w,w,w,w],C,c,x,D,A,m,n,a,u,h,s)};if("line"===S)for(const e of qp(n.geometry,0,0,k,k)){const n=vc(e,M),o=tf(n,b,E,i.vertical||g,r,24,_,t.overscaling,k);for(const e of o)g&&wf(t,g.text,T,e)||I(n,e)}else if("line-center"===S){for(const e of n.geometry)if(e.length>1){const t=vc(e,M),n=ef(t,E,i.vertical||g,r,24,_);n&&I(t,n)}}else if("Polygon"===n.type)for(const e of ni(n.geometry,0)){const t=hf(e,16);I(vc(e[0],M,!0),new Xp(t.x,t.y,0))}else if("LineString"===n.type)for(const e of n.geometry){const t=vc(e,M);I(t,new Xp(t[0].x,t[0].y,0))}else if("Point"===n.type)for(const e of n.geometry)for(const t of e)I([t],new Xp(t.x,t.y,0))}function xf(e,t,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=function(e,t,i,r,o,a,s,l){const c=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=[];for(const h of t.positionedLines)for(const e of h.positionedGlyphs){if(!e.rect)continue;const r=e.rect||{};let a=4,d=!0,p=1,f=0;const m=(o||l)&&e.vertical,g=e.metrics.advance*e.scale/2;if(l&&t.verticalizable&&(f=h.lineOffset/2-(e.imageName?-(mu-e.metrics.width*e.scale)/2:(e.scale-1)*mu)),e.imageName){const t=s[e.imageName];d=t.sdf,p=t.pixelRatio,a=1/p}const y=o?[e.x+g,e.y]:[0,0];let v=o?[0,0]:[e.x+g+i[0],e.y+i[1]-f],_=[0,0];m&&(_=v,v=[0,0]);const x=e.metrics.isDoubleResolution?2:1,b=(e.metrics.left-a)*e.scale-g+v[0],w=(-e.metrics.top-a)*e.scale+v[1],D=b+r.w/x*e.scale/p,E=w+r.h/x*e.scale/p,C=new n(b,w),A=new n(D,w),S=new n(b,E),T=new n(D,E);if(m){const t=new n(-g,g- -17),i=-Math.PI/2,r=12-g,o=new n(22-r,-(e.imageName?r:0)),a=new n(..._);C._rotateAround(i,t)._add(o)._add(a),A._rotateAround(i,t)._add(o)._add(a),S._rotateAround(i,t)._add(o)._add(a),T._rotateAround(i,t)._add(o)._add(a)}if(c){const e=Math.sin(c),t=Math.cos(c),n=[t,-e,e,t];C._matMult(n),A._matMult(n),S._matMult(n),T._matMult(n)}const F=new n(0,0),k=new n(0,0);u.push({tl:C,tr:A,bl:S,br:T,tex:r,writingMode:t.writingMode,glyphOffset:y,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:F,pixelOffsetBR:k,minFontScaleX:0,minFontScaleY:0})}return u}(0,i,l,o,a,s,r,e.allowVerticalPlacement),y=e.textSizeData;let v=null;"source"===y.kind?(v=[rh*o.layout.get("text-size").evaluate(s,{})],v[0]>oh&&H("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))):"composite"===y.kind&&(v=[rh*f.compositeTextSizes[0].evaluate(s,{},m),rh*f.compositeTextSizes[1].evaluate(s,{},m)],(v[0]>oh||v[1]>oh)&&H("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))),e.addSymbols(e.text,g,v,l,a,s,u,t,c.lineStartIndex,c.lineLength,p,m);for(const n of h)d[n]=e.text.placedSymbolArray.length-1;return 4*g.length}function bf(e){for(const t in e)return e[t];return null}function wf(e,t,n,i){const r=e.compareText;if(t in r){const e=r[t];for(let t=e.length-1;t>=0;t--)if(i.dist(e[t])<n)return!0}else r[t]=[];return r[t].push(i),!1}const Df=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ef{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error("Got v".concat(i," data when expected v1."));const r=Df[15&n];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new Ef(a,o,r,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=Df.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(r<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Cf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:a}=this,s=[0,r.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=a){for(let a=h;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=e&&s<=n&&c>=t&&c<=i&&l.push(r[a])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=e&&p<=n&&f>=t&&f<=i&&l.push(r[d]),(0===c?e<=p:t<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?n>=p:i>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,a=[0,i.length-1,0],s=[],l=n*n;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)Ff(r[2*n],r[2*n+1],e,t)<=l&&s.push(i[n]);continue}const d=h+u>>1,p=r[2*d],f=r[2*d+1];Ff(p,f,e,t)<=l&&s.push(i[d]),(0===c?e-n<=p:t-n<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return s}}function Cf(e,t,n,i,r,o){if(r-i<=n)return;const a=i+r>>1;Af(e,t,a,i,r,o),Cf(e,t,n,i,a-1,1-o),Cf(e,t,n,a+1,r,1-o)}function Af(e,t,n,i,r,o){for(;r>i;){if(r-i>600){const a=r-i+1,s=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);Af(e,t,n,Math.max(i,Math.floor(n-s*c/a+u)),Math.min(r,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=i,l=r;for(Sf(e,t,i,n),t[2*r+o]>a&&Sf(e,t,i,r);s<l;){for(Sf(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*i+o]===a?Sf(e,t,i,l):(l++,Sf(e,t,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function Sf(e,t,n,i){Tf(e,n,i),Tf(t,2*n,2*i),Tf(t,2*n+1,2*i+1)}function Tf(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Ff(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}var kf;e.cI=void 0,(kf=e.cI||(e.cI={})).create="create",kf.load="load",kf.fullLoad="fullLoad";let Pf=null,Mf=[];const If=1e3/60,jf="loadTime",Nf="fullLoadTime",Of={mark(e){performance.mark(e)},frame(e){const t=e;null!=Pf&&Mf.push(t-Pf),Pf=t},clearMetrics(){Pf=null,Mf=[],performance.clearMeasures(jf),performance.clearMeasures(Nf);for(const t in e.cI)performance.clearMarks(e.cI[t])},getPerformanceMetrics(){performance.measure(jf,e.cI.create,e.cI.load),performance.measure(Nf,e.cI.create,e.cI.fullLoad);const t=performance.getEntriesByName(jf)[0].duration,n=performance.getEntriesByName(Nf)[0].duration,i=Mf.length,r=1/(Mf.reduce((e,t)=>e+t,0)/i/1e3),o=Mf.filter(e=>e>If).reduce((e,t)=>e+(t-If)/If,0);return{loadTime:t,fullLoadTime:n,fps:r,percentDroppedFrames:o/(i+o)*100,totalFrames:i}}};e.$=h,e.A=f,e.B=uo,e.C=oo,e.D=Go,e.E=_e,e.F=function(e){let[t,n,i]=e;return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(i),y:t*Math.sin(n)*Math.sin(i),z:t*Math.cos(i)}},e.G=yn,e.H=No,e.I=Zu,e.J=so,e.K=function(e){if(null==Y){const t=e.navigator?e.navigator.userAgent:null;Y=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Y},e.L=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Eh(()=>this.process()),this.subscription=ee(this.target,"message",e=>this.receive(e),!1),this.globalScope=W(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}unregisterMessageHandler(e){delete this.messageHandlers[e]}sendAsync(e,t){return new Promise((n,i)=>{const r=Math.round(1e18*Math.random()).toString(36).substring(0,10),o=t?ee(t.signal,"abort",()=>{null==o||o.unsubscribe(),delete this.resolveRejects[r];const t={id:r,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)},Ch):null;this.resolveRejects[r]={resolve:e=>{null==o||o.unsubscribe(),n(e)},reject:e=>{null==o||o.unsubscribe(),i(e)}};const a=[],s=Object.assign(Object.assign({},e),{id:r,sourceMapId:this.mapId,origin:location.origin,data:vo(e.data,a)});this.target.postMessage(s,{transfer:a})})}receive(e){const t=e.data,n=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&"resource://android"!==t.origin&&"resource://android"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[n];const e=this.abortControllers[n];return delete this.abortControllers[n],void(e&&e.abort())}if(W(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,n){return t(this,void 0,void 0,function*(){if("<response>"===n.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(n.error?t.reject(_o(n.error)):t.resolve(_o(n.data)))}if(!this.messageHandlers[n.type])return void this.completeTask(e,new Error("Could not find a registered handler for ".concat(n.type,", map ID: ").concat(this.mapId,", available handlers: ").concat(Object.keys(this.messageHandlers).join(", "))));const t=_o(n.data),i=new AbortController;this.abortControllers[e]=i;try{const r=yield this.messageHandlers[n.type](n.sourceMapId,t,i);this.completeTask(e,null,r)}catch(t){this.completeTask(e,t)}})}completeTask(e,t,n){const i=[];delete this.abortControllers[e];const r={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?vo(t):null,data:vo(n,i)};this.target.postMessage(r,{transfer:i})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.M=ue,e.N=function(){var e=new f(16);return f!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.O=function(e,t,n){var i,r,o,a,s,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=i=t[0],e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=i*m+s*g+h*y+t[12],e[13]=r*m+l*g+d*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e},e.P=n,e.Q=function(e,t,n){var i=n[0],r=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.R=El,e.S=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],x=n[1],b=n[2],w=n[3];return e[0]=_*i+x*s+b*h+w*m,e[1]=_*r+x*l+b*d+w*g,e[2]=_*o+x*c+b*p+w*y,e[3]=_*a+x*u+b*f+w*v,e[4]=(_=n[4])*i+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,e[5]=_*r+x*l+b*d+w*g,e[6]=_*o+x*c+b*p+w*y,e[7]=_*a+x*u+b*f+w*v,e[8]=(_=n[8])*i+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,e[9]=_*r+x*l+b*d+w*g,e[10]=_*o+x*c+b*p+w*y,e[11]=_*a+x*u+b*f+w*v,e[12]=(_=n[12])*i+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,e[13]=_*r+x*l+b*d+w*g,e[14]=_*o+x*c+b*p+w*y,e[15]=_*a+x*u+b*f+w*v,e},e.T=Il,e.U=function(e,t){const n={};for(let i=0;i<t.length;i++){const r=t[i];r in e&&(n[r]=e[r])}return n},e.V=Sh,e.W=L,e.X=Ph,e.Y=kh,e.Z=se,e._=t,e.a=ae,e.a$=b,e.a0=d,e.a1=$,e.a2=Rh,e.a3=Ih,e.a4=jh,e.a5=k,e.a6=function(e,t,n){if(!e)return t||{};if(!t)return e||{};const i=Zh(e),r=Zh(t);!function(e,t){t.removeAll&&(e.add.clear(),e.update.clear(),e.remove.clear(),t.remove.clear());for(const n of t.remove)e.add.delete(n),e.update.delete(n);for(const[n,i]of t.update){const r=e.update.get(n);r&&(t.update.set(n,qh(r,i)),e.update.delete(n))}}(i,r);const o={};if((i.removeAll||r.removeAll)&&(o.removeAll=!0),o.remove=new Set([...i.remove,...r.remove]),o.add=new Map([...i.add,...r.add]),o.update=new Map([...i.update,...r.update]),o.remove.size&&o.add.size)for(const a of o.add.keys())o.remove.delete(a);return function(e){const t={};return e.removeAll&&(t.removeAll=e.removeAll),e.remove&&(t.remove=Array.from(e.remove)),e.add&&(t.add=Array.from(e.add.values())),e.update&&(t.update=Array.from(e.update.values())),t}(o)},e.a7=function(e,t){const n=new Map;if(null==e)return n;if(null==e.type)return n;if("Feature"===e.type){const i=Uh(e,t);if(null==i)return;return n.set(i,e),n}if("FeatureCollection"===e.type){const i=new Set;for(const r of e.features){const e=Uh(r,t);if(null==e)return;if(i.has(e))return;i.add(e),n.set(e,r)}return n}},e.a8=function(e,t,n){var i,r;const o=[];if(t.removeAll)e.clear();else if(t.remove)for(const a of t.remove){const t=e.get(a);t&&(o.push(t.geometry),e.delete(a))}if(t.add)for(const a of t.add){const t=Uh(a,n);if(null==t)continue;const i=e.get(t);i&&o.push(i.geometry),o.push(a.geometry),e.set(t,a)}if(t.update)for(const a of t.update){const t=e.get(a.id);if(!t)continue;const n=!!a.newGeometry,s=a.removeAllProperties||(null===(i=a.removeProperties)||void 0===i?void 0:i.length)>0||(null===(r=a.addOrUpdateProperties)||void 0===r?void 0:r.length)>0;if(!n&&!s)continue;o.push(t.geometry);const l=Object.assign({},t);if(e.set(a.id,l),n&&(o.push(a.newGeometry),l.geometry=a.newGeometry),s){if(l.properties=a.removeAllProperties?{}:Object.assign({},l.properties||{}),a.removeProperties)for(const e of a.removeProperties)delete l.properties[e];if(a.addOrUpdateProperties)for(const{key:e,value:t}of a.addOrUpdateProperties)l.properties[e]=t}}return o},e.a9=Oh,e.aA=function(e,t,n){let{uSize:i,uSizeT:r}=t,{lowerSize:o,upperSize:a}=n;return"source"===e.kind?o/rh:"composite"===e.kind?yn.number(o/rh,a/rh,r):i},e.aB=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=n*s-i*a,_=n*l-r*a,x=n*c-o*a,b=i*l-r*s,w=i*c-o*s,D=r*c-o*l,E=u*m-h*f,C=u*g-d*f,A=u*y-p*f,S=h*g-d*m,T=h*y-p*m,F=d*y-p*g,k=v*F-_*T+x*S+b*A-w*C+D*E;return k?(e[0]=(s*F-l*T+c*S)*(k=1/k),e[1]=(r*T-i*F-o*S)*k,e[2]=(m*D-g*w+y*b)*k,e[3]=(d*w-h*D-p*b)*k,e[4]=(l*A-a*F-c*C)*k,e[5]=(n*F-r*A+o*C)*k,e[6]=(g*x-f*D-y*_)*k,e[7]=(u*D-d*x+p*_)*k,e[8]=(a*T-s*A+c*E)*k,e[9]=(i*A-n*T-o*E)*k,e[10]=(f*w-m*x+y*v)*k,e[11]=(h*x-u*w-p*v)*k,e[12]=(s*C-a*S-l*E)*k,e[13]=(n*S-i*C+r*E)*k,e[14]=(m*_-f*b-g*v)*k,e[15]=(u*b-h*_+d*v)*k,e):null},e.aC=T,e.aD=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},e.aE=function(e){return e[0]=0,e[1]=0,e},e.aF=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},e.aG=uh,e.aH=C,e.aI=function(e,t,i,r){const o=t.y-e.y,a=t.x-e.x,s=r.y-i.y,l=r.x-i.x,c=s*a-l*o;if(0===c)return null;const u=(l*(e.y-i.y)-s*(e.x-i.x))/c;return new n(e.x+u*a,e.y+u*o)},e.aJ=qp,e.aK=Gs,e.aL=function(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return[t,n,i,r]},e.aM=mu,e.aN=P,e.aO=function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!n[0]&&!n[1])return[0,0];const o=r?"map"===i?-e.bearingInRadians:0:"viewport"===i?e.bearingInRadians:0;if(o){const e=Math.sin(o),t=Math.cos(o);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}return[r?n[0]:P(t,n[0],e.zoom),r?n[1]:P(t,n[1],e.zoom)]},e.aQ=sh,e.aR=vf,e.aS=Yu,e.aT=Ef,e.aU=oa,e.aV=pc,e.aW=qa,e.aX=as,e.aY=ns,e.aZ=ne,e.a_=Nh,e.aa=Hh,e.ab=25,e.ac=Lh,e.ad=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(const i of e){const e=window.document.createElement("source");fe(i)||(t.crossOrigin="Anonymous"),e.src=i,t.appendChild(e)}})},e.ae=Me,e.af=function(){return R++},e.ag=Ma,e.ah=fh,e.ai=Mp,e.aj=fr,e.ak=Us,e.al=Wh,e.am=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,n,i,r)=>{const o=i||r;return t[n]=!o||o.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.an=B,e.ao=85.051129,e.ap=te,e.aq=function(e){return Math.pow(2,e)},e.ar=g,e.as=Mh,e.at=function(e){return Math.log(e)/Math.LN2},e.au=function(e){var t=e[0],n=e[1];return t*t+n*n},e.av=function(e){if(!e.length)return new Set;const t=Math.max(...e.map(e=>e.canonical.z));let n=1/0,i=-1/0,r=1/0,o=-1/0;const a=[];for(const l of e){const{x:e,y:s,z:c}=l.canonical,u=Math.pow(2,t-c),h=e*u,d=s*u;a.push({id:l,x:h,y:d}),h<n&&(n=h),h>i&&(i=h),d<r&&(r=d),d>o&&(o=d)}const s=new Set;for(const l of a)l.x!==n&&l.x!==i&&l.y!==r&&l.y!==o||s.add(l.id);return s},e.aw=function(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x},e.ax=class{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:t,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout(()=>{this.remove(e,r)},n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,i=void 0===t?0:this.data[n].indexOf(t),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const i of this.data[n])e(i.value)||t.push(i);for(const n of t)this.remove(n.value.tileID,n)}},e.ay=function(e,t){let n=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){const{interpolationType:r,minZoom:o,maxZoom:a}=e,s=r?B(mn.interpolationFactor(r,t,o,a),0,1):0;"camera"===e.kind?i=yn.number(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:i}},e.b=X,e.b$=Cs,e.b0=x,e.b1=function(e){var t=new f(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.b2=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},e.b3=function(e,t){var n=t[0],i=t[1],r=t[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e},e.b4=w,e.b5=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.b6=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},e.b7=v,e.b8=function(e,t,n){const i=t[0]*n[0]+t[1]*n[1]+t[2]*n[2];return 0===i?null:(-(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])-n[3])/i},e.b9=E,e.bA=function(){return new Float64Array(3)},e.bB=S,e.bC=function(e,t,n){var i=n[0],r=n[1],o=n[2],a=n[3],s=t[0],l=t[1],c=t[2],u=r*c-o*l,h=o*s-i*c,d=i*l-r*s;return e[0]=s+a*(u+=u)+r*(d+=d)-o*(h+=h),e[1]=l+a*h+o*u-i*d,e[2]=c+a*d+i*h-r*u,e},e.bD=function(e,t,n){const i=(r=[e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]])[0]*((u=r[8])*(a=r[4])-(s=r[5])*(c=r[7]))+r[1]*(-u*(o=r[3])+s*(l=r[6]))+r[2]*(c*o-a*l);var r,o,a,s,l,c,u;if(0===i)return null;const h=w([],[t[0],t[1],t[2]],[n[0],n[1],n[2]]),d=w([],[n[0],n[1],n[2]],[e[0],e[1],e[2]]),p=w([],[e[0],e[1],e[2]],[t[0],t[1],t[2]]),f=b([],h,-e[3]);return x(f,f,b([],d,-t[3])),x(f,f,b([],p,-n[3])),b(f,f,1/i),f},e.bE=Ah,e.bF=function(){return new Float64Array(4)},e.bG=function(e,t,n,i){var r=[],o=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},e.bH=function(e,t,n,i){var r=[],o=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},e.bI=function(e,t,n,i){var r=[],o=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},e.bJ=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-c*i,e[1]=a*r-u*i,e[2]=s*r-h*i,e[3]=l*r-d*i,e[8]=o*i+c*r,e[9]=a*i+u*r,e[10]=s*i+h*r,e[11]=l*i+d*r,e},e.bK=function(e,t){const n=M(e,360),i=M(t,360),r=i-n,o=i>n?r-360:r+360;return Math.abs(r)<Math.abs(o)?r:o},e.bL=function(e){return e[0]=0,e[1]=0,e[2]=0,e},e.bM=function(e,t,n,i){const r=Math.sqrt(e*e+t*t),o=Math.sqrt(n*n+i*i);e/=r,t/=r,n/=o,i/=o;const a=Math.acos(e*n+t*i);return-t*n+e*i>0?a:-a},e.bN=function(e,t){const n=M(e,2*Math.PI),i=M(t,2*Math.PI);return Math.min(Math.abs(n-i),Math.abs(n-i+2*Math.PI),Math.abs(n-i-2*Math.PI))},e.bO=function(){const e={},t=xe.$version;for(const n in xe.$root){const i=xe.$root[n];if(i.required){let r=null;r="version"===n?t:"array"===i.type?[]:{},null!=r&&(e[n]=r)}}return e},e.bP=de,e.bQ=xo,e.bR=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(!e(t[i],n[i]))return!1;return!0}return t===n},e.bS=function(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=we(e[n],t[e[n].ref]));return e},e.bT=function(e,t){if("custom"===e.type)return new Dh(e,t);switch(e.type){case"background":return new wh(e,t);case"circle":return new gl(e,t);case"color-relief":return new Ol(e,t);case"fill":return new Ac(e,t);case"fill-extrusion":return new Gc(e,t);case"heatmap":return new Sl(e,t);case"hillshade":return new kl(e,t);case"line":return new su(e,t);case"raster":return new ta(e,t);case"symbol":return new _h(e,t)}},e.bU=e=>"raster"===e.type,e.bV=q,e.bW=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let n=[];try{if(!De(e.version,t.version))return[{command:"setStyle",args:[t]}];De(e.center,t.center)||n.push({command:"setCenter",args:[t.center]}),De(e.state,t.state)||n.push({command:"setGlobalState",args:[t.state]}),De(e.centerAltitude,t.centerAltitude)||n.push({command:"setCenterAltitude",args:[t.centerAltitude]}),De(e.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),De(e.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),De(e.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),De(e.roll,t.roll)||n.push({command:"setRoll",args:[t.roll]}),De(e.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),De(e.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),De(e.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),De(e.light,t.light)||n.push({command:"setLight",args:[t.light]}),De(e.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),De(e.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),De(e.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const i={},r=[];!function(e,t,n,i){let r;for(r in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(t,r)||Ae(r,n,i));for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?De(e[r],t[r])||("geojson"===e[r].type&&"geojson"===t[r].type&&Te(e,t,r)?Ee(n,{command:"setGeoJSONSourceData",args:[r,t[r].data]}):Se(r,t,n,i)):Ce(r,t,n))}(e.sources,t.sources,r,i);const o=[];e.layers&&e.layers.forEach(e=>{"source"in e&&i[e.source]?n.push({command:"removeLayer",args:[e.id]}):o.push(e)}),n=n.concat(r),function(e,t,n){t=t||[];const i=(e=e||[]).map(ke),r=t.map(ke),o=e.reduce(Pe,{}),a=t.reduce(Pe,{}),s=i.slice(),l=Object.create(null);let c,u,h,d,p;for(let f=0,m=0;f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)?m++:(Ee(n,{command:"removeLayer",args:[c]}),s.splice(s.indexOf(c,m),1));for(let f=0,m=0;f<r.length;f++)c=r[r.length-1-f],s[s.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(o,c)?(Ee(n,{command:"removeLayer",args:[c]}),s.splice(s.lastIndexOf(c,s.length-m),1)):m++,d=s[s.length-f],Ee(n,{command:"addLayer",args:[a[c],d]}),s.splice(s.length-f,0,c),l[c]=!0);for(let f=0;f<r.length;f++)if(c=r[f],u=o[c],h=a[c],!l[c]&&!De(u,h))if(De(u.source,h.source)&&De(u["source-layer"],h["source-layer"])&&De(u.type,h.type)){for(p in Fe(u.layout,h.layout,n,c,null,"setLayoutProperty"),Fe(u.paint,h.paint,n,c,null,"setPaintProperty"),De(u.filter,h.filter)||Ee(n,{command:"setFilter",args:[c,h.filter]}),De(u.minzoom,h.minzoom)&&De(u.maxzoom,h.maxzoom)||Ee(n,{command:"setLayerZoomRange",args:[c,h.minzoom,h.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?Fe(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):De(u[p],h[p])||Ee(n,{command:"setLayerProperty",args:[c,p,h[p]]}));for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?Fe(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):De(u[p],h[p])||Ee(n,{command:"setLayerProperty",args:[c,p,h[p]]}))}else Ee(n,{command:"removeLayer",args:[c]}),d=s[s.lastIndexOf(c)+1],Ee(n,{command:"addLayer",args:[h,d]})}(o,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:"setStyle",args:[t]}]}return n},e.bX=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.bY=V,e.bZ=U,e.b_=class extends ws{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.ba=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.bb=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},e.bc=zh,e.bd=Vh,e.be=function(e,t,n,i,r){var o=1/Math.tan(t/2);if(e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0){var a=1/(i-r);e[10]=(r+i)*a,e[14]=2*r*i*a}else e[10]=-1,e[14]=-2*i;return e},e.bf=function(e){var t=new f(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.bg=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+c*i,e[1]=a*r+u*i,e[2]=s*r+h*i,e[3]=l*r+d*i,e[4]=c*r-o*i,e[5]=u*r-a*i,e[6]=h*r-s*i,e[7]=d*r-l*i,e},e.bh=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=a*r+u*i,e[6]=s*r+h*i,e[7]=l*r+d*i,e[8]=c*r-o*i,e[9]=u*r-a*i,e[10]=h*r-s*i,e[11]=d*r-l*i,e},e.bi=function(){const e=new Float32Array(16);return g(e),e},e.bj=function(){const e=new Float64Array(16);return g(e),e},e.bk=function(){return new Float64Array(16)},e.bl=function(e,t,n){const i=new Float64Array(4);return S(i,e,t-90,n),i},e.bm=function(e,t,n,i){var r,o,a,s,l,c=t[0],u=t[1],h=t[2],d=t[3],f=n[0],m=n[1],g=n[2],y=n[3];return(o=c*f+u*m+h*g+d*y)<0&&(o=-o,f=-f,m=-m,g=-g,y=-y),1-o>p?(r=Math.acos(o),a=Math.sin(r),s=Math.sin((1-i)*r)/a,l=Math.sin(i*r)/a):(s=1-i,l=i),e[0]=s*c+l*f,e[1]=s*u+l*m,e[2]=s*h+l*g,e[3]=s*d+l*y,e},e.bn=function(e){const t=new Float64Array(9);var n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_;h=(r=(i=e)[0])*(l=r+r),d=(o=i[1])*l,f=(a=i[2])*l,m=a*(c=o+o),y=(s=i[3])*l,v=s*c,_=s*(u=a+a),(n=t)[0]=1-(p=o*c)-(g=a*u),n[3]=d-_,n[6]=f+v,n[1]=d+_,n[4]=1-h-g,n[7]=m-y,n[2]=f-v,n[5]=m+y,n[8]=1-h-p;const x=ne(-Math.asin(B(t[2],-1,1)));let b,w;return Math.hypot(t[5],t[8])<.001?(b=0,w=-ne(Math.atan2(t[3],t[4]))):(b=ne(0===t[5]&&0===t[8]?0:Math.atan2(t[5],t[8])),w=ne(0===t[1]&&0===t[0]?0:Math.atan2(t[1],t[0]))),{roll:b,pitch:x+90,bearing:w}},e.bo=function(e,t){return e.roll==t.roll&&e.pitch==t.pitch&&e.bearing==t.bearing},e.bp=Tt,e.bq=Ds,e.br=fc,e.bs=mc,e.bt=dc,e.bu=I,e.bv=j,e.bw=Rt,e.bx=function(e,t,n,i,r){return I(i,r,B((e-t)/(n-t),0,1))},e.by=function(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e},e.bz=M,e.c=le,e.c$=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.c0=class extends ws{constructor(e,t){super(e,t),this.current=As}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.c1=Es,e.c2=class extends ws{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.c3=class extends ws{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.c4=m,e.c5=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.c6=function(e,t,n){var i=t[0],r=t[1],o=t[2];return e[0]=i*n[0]+r*n[3]+o*n[6],e[1]=i*n[1]+r*n[4]+o*n[7],e[2]=i*n[2]+r*n[5]+o*n[8],e},e.c7=function(e,t,n,i,r,o,a){var s=1/(t-n),l=1/(i-r),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(a+o)*c,e[15]=1,e},e.c8=class extends ws{constructor(e,t){super(e,t),this.current=new Array}set(e){if(e!=this.current){this.current=e;const t=new Float32Array(4*e.length);for(let n=0;n<e.length;n++)t[4*n]=e[n].r,t[4*n+1]=e[n].g,t[4*n+2]=e[n].b,t[4*n+3]=e[n].a;this.gl.uniform4fv(this.location,t)}}},e.c9=class extends ws{constructor(e,t){super(e,t),this.current=new Array}set(e){if(e!=this.current){this.current=e;const t=new Float32Array(e);this.gl.uniform1fv(this.location,t)}}},e.cA=function(e,t){var n;if(!re[t])return!1;const i=null==e?void 0:e.target,r=(null===(n=null==i?void 0:i.ownerDocument)||void 0===n?void 0:n.defaultView)||window;return e instanceof r.MouseEvent||e instanceof r.WheelEvent},e.cB=function(e,t){return ie[t]&&"touches"in e},e.cC=function(e){return ie[e]||re[e]},e.cD=function(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e},e.cE=function(e,t){const{x:n,y:i}=Oh.fromLngLat(t);return!(e<0||e>25||i<0||i>=1||n<0||n>=1)},e.cF=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.cG=class extends la{},e.cH=Of,e.cJ=he,e.cK=function(e,t){le.REGISTERED_PROTOCOLS[e]=t},e.cL=function(e){delete le.REGISTERED_PROTOCOLS[e]},e.cM=function(e,t){const n={};for(let r=0;r<e.length;r++){const i=t&&t[e[r].id]||Dr(e[r]);t&&(t[e[r].id]=i);let o=n[i];o||(o=n[i]=[]),o.push(e[r])}const i=[];for(const r in n)i.push(n[r]);return i},e.cN=fo,e.cO=Gh,e.cP=Rp,e.cQ=Hu,e.cR=function(t){var n;t.bucket.createArrays(),t.bucket.tilePixelRatio=k/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const i=t.bucket.layers[0],r=i.layout,o=i._unevaluatedLayout._values,a={layoutIconSize:o["icon-size"].possiblyEvaluate(new No(t.bucket.zoom+1),t.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new No(t.bucket.zoom+1),t.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new No(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.textSizeData;a.compositeTextSizes=[o["text-size"].possiblyEvaluate(new No(e),t.canonical),o["text-size"].possiblyEvaluate(new No(n),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.iconSizeData;a.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new No(e),t.canonical),o["icon-size"].possiblyEvaluate(new No(n),t.canonical)]}const s=r.get("text-line-height")*mu,l="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),c=r.get("text-keep-upright"),u=r.get("text-size");for(const h of t.bucket.features){const o=r.get("text-font").evaluate(h,{},t.canonical).join(","),d=u.evaluate(h,{},t.canonical),p=a.layoutTextSize.evaluate(h,{},t.canonical),f=a.layoutIconSize.evaluate(h,{},t.canonical),m={horizontal:{},vertical:void 0},g=h.text;let y,v=[0,0];if(g){const n=g.toString(),a=r.get("text-letter-spacing").evaluate(h,{},t.canonical)*mu,u=Co(n)?a:0,f=r.get("text-anchor").evaluate(h,{},t.canonical),y=yf(i,h,t.canonical);if(!y){const e=r.get("text-radial-offset").evaluate(h,{},t.canonical);v=e?gf(f,[e*mu,mf]):r.get("text-offset").evaluate(h,{},t.canonical).map(e=>e*mu)}let _=l?"center":r.get("text-justify").evaluate(h,{},t.canonical);const x="point"===r.get("symbol-placement")?r.get("text-max-width").evaluate(h,{},t.canonical)*mu:1/0,b=()=>{t.bucket.allowVerticalPlacement&&Eo(n)&&(m.vertical=Wu(g,t.glyphMap,t.glyphPositions,t.imagePositions,o,x,s,f,"left",u,v,e.az.vertical,!0,p,d))};if(!l&&y){const n=new Set;if("auto"===_)for(let e=0;e<y.values.length;e+=2)n.add(vf(y.values[e]));else n.add(_);let i=!1;for(const r of n)if(!m.horizontal[r])if(i)m.horizontal[r]=m.horizontal[0];else{const n=Wu(g,t.glyphMap,t.glyphPositions,t.imagePositions,o,x,s,"center",r,u,v,e.az.horizontal,!1,p,d);n&&(m.horizontal[r]=n,i=1===n.positionedLines.length)}b()}else{"auto"===_&&(_=vf(f));const i=Wu(g,t.glyphMap,t.glyphPositions,t.imagePositions,o,x,s,f,_,u,v,e.az.horizontal,!1,p,d);i&&(m.horizontal[_]=i),b(),Eo(n)&&l&&c&&(m.vertical=Wu(g,t.glyphMap,t.glyphPositions,t.imagePositions,o,x,s,f,_,u,v,e.az.vertical,!1,p,d))}}let _=!1;if(h.icon&&h.icon.name){const e=t.imageMap[h.icon.name];e&&(y=th(t.imagePositions[h.icon.name],r.get("icon-offset").evaluate(h,{},t.canonical),r.get("icon-anchor").evaluate(h,{},t.canonical)),_=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=_:t.bucket.sdfIcons!==_&&H("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==r.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const x=bf(m.horizontal)||m.vertical;(n=t.bucket).iconsInText||(n.iconsInText=!!x&&x.iconsInText),(x||y)&&_f(t.bucket,h,m,y,t.imageMap,a,p,f,v,_,t.canonical,t.subdivisionGranularity)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.cS=wc,e.cT=Rc,e.cU=tu,e.cV=function(e){const t=new Tu;return function(e,t){for(const n in e.layers)t.writeMessage(3,Ip,e.layers[n])}(e,t),t.finish()},e.cW=function(e,t,n,i,r,o){let a=Zp(e,t,n,r,0);return a=Zp(a,t,i,o,1),a},e.cX=class{constructor(e){this.maxEntries=e,this.map=new Map}get(e){const t=this.map.get(e);return void 0!==t&&(this.map.delete(e),this.map.set(e,t)),t}set(e,t){if(this.map.has(e))this.map.delete(e);else if(this.map.size>=this.maxEntries){const e=this.map.keys().next().value;this.map.delete(e)}this.map.set(e,t)}clear(){this.map.clear()}},e.cY=Oc,e.cZ=Tu,e.c_=kp,e.ca=class extends xa{},e.cb=pu,e.cc=class extends wa{},e.cd=Al,e.ce=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.cf=Cl,e.cg=function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return e[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,e[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,e},e.ch=class extends ca{},e.ci=class extends Fa{},e.cj=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e.ck=function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=t[0],x=t[1],b=t[2],w=t[3],D=t[4],E=t[5],C=t[6],A=t[7],S=t[8],T=t[9],F=t[10],k=t[11],P=t[12],M=t[13],I=t[14],j=t[15];return Math.abs(n-_)<=p*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-x)<=p*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(r-b)<=p*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-w)<=p*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-D)<=p*Math.max(1,Math.abs(a),Math.abs(D))&&Math.abs(s-E)<=p*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-C)<=p*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-A)<=p*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-S)<=p*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(h-T)<=p*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-F)<=p*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(f-k)<=p*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(m-P)<=p*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-M)<=p*Math.max(1,Math.abs(g),Math.abs(M))&&Math.abs(y-I)<=p*Math.max(1,Math.abs(y),Math.abs(I))&&Math.abs(v-j)<=p*Math.max(1,Math.abs(v),Math.abs(j))},e.cl=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.cm=e=>"symbol"===e.type,e.cn=e=>"circle"===e.type,e.co=e=>"heatmap"===e.type,e.cp=e=>"line"===e.type,e.cq=e=>"fill"===e.type,e.cr=e=>"fill-extrusion"===e.type,e.cs=e=>"hillshade"===e.type,e.ct=e=>"color-relief"===e.type,e.cu=e=>"background"===e.type,e.cv=e=>"custom"===e.type,e.cw=N,e.cx=function(e,t,n){if(t<=0)return e;const i=1/t;return void 0===n||Math.abs(n)<1e-10?Math.round(e*i)/i:(n>0?Math.ceil(e*i-1e-9):Math.floor(e*i+1e-10))/i},e.cy=function(e,t,n){const i=F(t.x-n.x,t.y-n.y),r=F(e.x-n.x,e.y-n.y);var o,a;return ne(Math.atan2(i[0]*r[1]-i[1]*r[0],(o=i)[0]*(a=r)[0]+o[1]*a[1]))},e.cz=O,e.d=fe,e.d0=function(e,n,i,r,o){return t(this,void 0,void 0,function*(){if(d())try{return yield $(e,n,i,r,o)}catch(e){}return function(e,t,n,i,r){const o=e.width,a=e.height;Q&&J||(Q=new OffscreenCanvas(o,a),J=Q.getContext("2d",{willReadFrequently:!0})),Q.width=o,Q.height=a,J.drawImage(e,0,0,o,a);const s=J.getImageData(t,n,i,r);return J.clearRect(0,0,o,a),s.data}(e,n,i,r,o)})},e.d1=jl,e.d2=i,e.d3=class{constructor(e,t){this.layers={[Mp]:this},this.name=Mp,this.version=t?t.version:1,this.extent=t?t.extent:4096,this.length=e.length,this.features=e}feature(e){return new Pp(this.features[e],this.extent)}},e.d4=rr,e.d5=jo,e.e=z,e.f=e=>t(void 0,void 0,void 0,function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}}),e.g=ce,e.h=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame(()=>{i.src=K})},i.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?URL.createObjectURL(r):K}),e.i=W,e.j=(e,t)=>pe(z(e,{type:"json"}),t),e.k=ve,e.l=ye,e.m=pe,e.n=(e,t)=>pe(z(e,{type:"arrayBuffer"}),t),e.o=function(e){return new Tu(e).readFields(Ru,[])},e.p=qu,e.q=function(e){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(e))},e.r=Dl,e.s=ee,e.t=$o,e.u=xe,e.v=ro,e.w=H,e.x=Ro,e.y=ao,e.z=Bo}),n("worker",["./shared"],function(e){class t{constructor(e,t){this.keyCache={},e&&this.replace(e,t)}replace(e,t){this._layerConfigs={},this._layers={},this.update(e,[],t)}update(t,n,i){for(const o of t){this._layerConfigs[o.id]=o;const t=this._layers[o.id]=e.bT(o,i);t._featureFilter=e.aj(t.filter,i),this.keyCache[o.id]&&delete this.keyCache[o.id]}for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const r=e.cM(Object.values(this._layerConfigs),this.keyCache);for(const o of r){const t=o.map(e=>this._layers[e.id]),n=t[0];if(n.isHidden())continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const a=n.sourceLayer||e.ai;let s=r[a];s||(s=r[a]=[]),s.push(t)}}}class n{constructor(t){const n={},i=[];for(const e in t){const r=t[e],o=n[e]={};for(const e in r){const t=r[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};i.push(n),o[e]={rect:n,metrics:t.metrics}}}const{w:r,h:o}=e.p(i),a=new e.r({width:r||1,height:o||1});for(const s in t){const i=t[s];for(const t in i){const r=i[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const o=n[s][t].rect;e.r.copy(r.bitmap,a,{x:0,y:0},{x:o.x+1,y:o.y+1},r.bitmap)}}this.image=a,this.positions=n}}e.cN("GlyphAtlas",n);class o{constructor(t){this.tileID=new e.a2(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[]}parse(t,i,r,o,s){return e._(this,void 0,void 0,function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.ag;const l=new e.cO(Object.keys(t.layers).sort()),c=new e.cP(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},h={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:r,subdivisionGranularity:s},d=i.familiesBySource[this.source];for(const n in d){const i=t.layers[n];if(!i)continue;1===i.version&&e.w('Vector tile source "'.concat(this.source,'" layer "').concat(n,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const o=l.encode(n),s=[];for(let e=0;e<i.length;e++){const t=i.feature(e),r=c.getId(t,n);s.push({feature:t,id:r,index:e,sourceLayerIndex:o})}for(const t of d[n]){const n=t[0];n.source!==this.source&&e.w("layer.source = ".concat(n.source," does not equal this.source = ").concat(this.source)),n.isHidden(this.zoom,!0)||(a(t,this.zoom,r),(u[n.id]=n.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(s,h,this.tileID.canonical),c.bucketLayerIDs.push(t.map(e=>e.id)))}}const p=e.bY(h.glyphDependencies,e=>Object.keys(e).map(Number));this.inFlightDependencies.forEach(e=>null==e?void 0:e.abort()),this.inFlightDependencies=[];let f=Promise.resolve({});if(Object.keys(p).length){const e=new AbortController;this.inFlightDependencies.push(e),f=o.sendAsync({type:"GG",data:{stacks:p,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const m=Object.keys(h.iconDependencies);let g=Promise.resolve({});if(m.length){const e=new AbortController;this.inFlightDependencies.push(e),g=o.sendAsync({type:"GI",data:{icons:m,source:this.source,tileID:this.tileID,type:"icons"}},e)}const y=Object.keys(h.patternDependencies);let v=Promise.resolve({});if(y.length){const e=new AbortController;this.inFlightDependencies.push(e),v=o.sendAsync({type:"GI",data:{icons:y,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const _=h.dashDependencies;let x=Promise.resolve({});if(Object.keys(_).length){const e=new AbortController;this.inFlightDependencies.push(e),x=o.sendAsync({type:"GDA",data:{dashes:_}},e)}const[b,w,D,E]=yield Promise.all([f,g,v,x]),C=new n(b),A=new e.cQ(w,D);for(const t in u){const n=u[t];n instanceof e.ah?(a(n.layers,this.zoom,r),e.cR({bucket:n,glyphMap:b,glyphPositions:C.positions,imageMap:w,imagePositions:A.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:h.subdivisionGranularity})):n.hasDependencies&&(n instanceof e.cS||n instanceof e.cT||n instanceof e.cU)&&(a(n.layers,this.zoom,r),n.addFeatures(h,this.tileID.canonical,A.patternPositions,E))}return this.status="done",{buckets:Object.values(u).filter(e=>!e.isEmpty()),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:C.image,imageAtlas:A,dashPositions:E,glyphMap:this.returnDependencies?b:null,iconMap:this.returnDependencies?w:null,glyphPositions:this.returnDependencies?C.positions:null}})}}function a(t,n,i){const r=new e.H(n);for(const e of t)e.recalculate(r,i)}class s{constructor(e,t,n,i,r){this.type=e,this.properties=n||{},this.extent=r,this.pointsArray=t,this.id=i}loadGeometry(){return this.pointsArray.map(t=>t.map(t=>new e.P(t.x,t.y)))}}class l{constructor(e,t,n){this.version=2,this._myFeatures=e,this.name=t,this.length=e.length,this.extent=n}feature(e){return this._myFeatures[e]}}class c{constructor(){this.layers={}}addLayer(e){this.layers[e.name]=e}}function u(t){let n=e.cV(t);return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength||(n=new Uint8Array(n)),{vectorTile:t,rawData:n.buffer}}function h(t,n,i){const{extent:r}=t,o=Math.pow(2,i.z-n.z),a=(i.x-n.x*o)*r,c=(i.y-n.y*o)*r,u=[];for(let l=0;l<t.length;l++){const n=t.feature(l);let i=n.loadGeometry();for(const e of i)for(const t of e)t.x=t.x*o-a,t.y=t.y*o-c;const h=128;i=e.cW(i,n.type,-h,-h,r+h,r+h),0!==i.length&&u.push(new s(n.type,i,n.properties,n.id,r))}return new l(u,t.name,r)}class d{constructor(t,n,i){this.actor=t,this.layerIndex=n,this.availableImages=i,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new e.cX(1e3)}loadVectorTile(t,n){return e._(this,void 0,void 0,function*(){const i=yield e.n(t.request,n);try{return{vectorTile:"mlt"!==t.encoding?new e.cY(new e.cZ(i.data)):new e.c_(i.data),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires}}catch(e){const r=new Uint8Array(i.data);let o="Unable to parse the tile at ".concat(t.request.url,", ");throw o+=31===r[0]&&139===r[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":"got error: ".concat(e.message),new Error(o)}})}loadTile(t){return e._(this,void 0,void 0,function*(){const{uid:n,overzoomParameters:i}=t;i&&(t.request=i.overzoomRequest);const r=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.c$(t.request),a=new o(t);this.loading[n]=a;const s=new AbortController;a.abort=s;try{const o=yield this.loadVectorTile(t,s);if(delete this.loading[n],!o)return null;if(i){const e=this._getOverzoomTile(t,o.vectorTile);o.rawData=e.rawData,o.vectorTile=e.vectorTile}const l=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl);const u={};if(r){const e=r.finish();e&&(u.resourceTiming=JSON.parse(JSON.stringify(e)))}a.vectorTile=o.vectorTile;const h=a.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);this.loaded[n]=a,this.fetching[n]={rawTileData:l,cacheControl:c,resourceTiming:u};try{const n=yield h;return e.e({rawTileData:l.slice(0),encoding:t.encoding},n,c,u)}finally{delete this.fetching[n]}}catch(e){throw delete this.loading[n],a.status="done",this.loaded[n]=a,e}})}_getOverzoomTile(e,t){const{tileID:n,source:i,overzoomParameters:r}=e,{maxZoomTileID:o}=r,a="".concat(o.key,"_").concat(n.key),s=this.overzoomedTileResultCache.get(a);if(s)return s;const l=new c,d=this.layerIndex.familiesBySource[i];for(const c in d){const e=t.layers[c];if(!e)continue;const i=h(e,o,n.canonical);i.length>0&&l.addLayer(i)}const p=u(l);return this.overzoomedTileResultCache.set(a,p),p}reloadTile(t){return e._(this,void 0,void 0,function*(){const n=t.uid;if(!this.loaded||!this.loaded[n])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const i=this.loaded[n];if(i.showCollisionBoxes=t.showCollisionBoxes,"parsing"===i.status){const r=yield i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);let o;if(this.fetching[n]){const{rawTileData:i,cacheControl:a,resourceTiming:s}=this.fetching[n];delete this.fetching[n],o=e.e({rawTileData:i.slice(0),encoding:t.encoding},r,a,s)}else o=r;return o}if("done"===i.status&&i.vectorTile)return i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity)})}abortTile(t){return e._(this,void 0,void 0,function*(){const e=this.loading,n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort.abort(),delete e[n])})}removeTile(t){return e._(this,void 0,void 0,function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]})}}class p{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,function*(){const{uid:n,encoding:i,rawImageData:r,redFactor:o,greenFactor:a,blueFactor:s,baseShift:l}=t,c=r.width+2,u=r.height+2,h=e.b(r)?new e.R({width:c,height:u},yield e.d0(r,-1,-1,c,u)):r,d=new e.d1(n,h,i,o,a,s,l);return this.loaded=this.loaded||{},this.loaded[n]=d,d})}removeTile(e){const t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]}}var f,m,g=function(){if(m)return f;function e(e,n){if(0!==e.length){t(e[0],n);for(var i=1;i<e.length;i++)t(e[i],!n)}}function t(e,t){for(var n=0,i=0,r=0,o=e.length,a=o-1;r<o;a=r++){var s=(e[r][0]-e[a][0])*(e[a][1]+e[r][1]),l=n+s;i+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+i>=0!=!!t&&e.reverse()}return m=1,f=function t(n,i){var r,o=n&&n.type;if("FeatureCollection"===o)for(r=0;r<n.features.length;r++)t(n.features[r],i);else if("GeometryCollection"===o)for(r=0;r<n.geometries.length;r++)t(n.geometries[r],i);else if("Feature"===o)t(n.geometry,i);else if("Polygon"===o)e(n.coordinates,i);else if("MultiPolygon"===o)for(r=0;r<n.coordinates.length;r++)e(n.coordinates[r],i);return n}}(),y=e.d2(g);const v={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},_=Math.fround||(x=new Float32Array(1),e=>(x[0]=+e,x[0]));var x;class b{constructor(e){this.options=Object.assign(Object.create(v),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:i}=this.options;t&&console.time("total time");const r="prepare ".concat(e.length," points");t&&console.time(r),this.points=e;const o=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[n,i]=t.geometry.coordinates,r=_(E(n)),a=_(C(i));o.push(r,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[i+1]=this._createTree(o);t&&console.timeEnd(r);for(let s=i;s>=n;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let r=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,r=180;else if(n>r){const e=this.getClusters([n,i,180,o],t),a=this.getClusters([-180,i,r,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(E(n),C(o),E(r),C(i)),l=a.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+5]>1?w(l,e,this.clusterProps):this.points[l[e+3]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(t*this.stride>=o.length)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=r.within(o[t*this.stride],o[t*this.stride+1],a),l=[];for(const c of s){const t=c*this.stride;o[t+4]===e&&l.push(o[t+5]>1?w(o,t,this.clusterProps):this.points[o[t+3]])}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,n){const i=[];return this._appendLeaves(i,e,t=t||10,n=n||0,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/r,c=(n+1+s)/r,u={features:[]};return this._addTileFeatures(i.range((t-s)/r,l,(t+1+s)/r,c),i.data,t,n,r,u),0===t&&this._addTileFeatures(i.range(1-s/r,l,1,c),i.data,r,n,r,u),t===r-1&&this._addTileFeatures(i.range(0,l,s/r,c),i.data,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,r){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?r+t.point_count<=i?r+=t.point_count:r=this._appendLeaves(e,t.cluster_id,n,i,r):r<i?r++:e.push(a),e.length===n)break}return r}_createTree(t){const n=new e.aT(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,i,r,o){for(const a of e){const e=a*this.stride,s=t[e+5]>1;let l,c,u;if(s)l=D(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+3]];l=n.properties;const[i,r]=n.geometry.coordinates;c=E(i),u=C(r)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let d;d=s||this.options.generateId?t[e+3]:this.points[t[e+3]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,a=n/(i*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const n=s[u],i=s[u+1],h=e.within(s[u],s[u+1],a),d=s[u+5];let p=d;for(const e of h){const n=e*c;s[n+2]>t&&(p+=s[n+5])}if(p>d&&p>=o){let e,o=n*d,a=i*d,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const n of h){const i=n*c;if(s[i+2]<=t)continue;s[i+2]=t;const l=s[i+5];o+=s[i]*l,a+=s[i+1]*l,s[i+4]=m,r&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),r(e,this._map(s,i)))}s[u+4]=m,l.push(o/p,a/p,1/0,m,-1,p),r&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of h){const n=e*c;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<c;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+5]>1){const i=this.clusterProps[e[t+6]];return n?Object.assign({},i):i}const i=this.points[e[t+3]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function w(e,t,n){return{type:"Feature",id:e[t+3],properties:D(e,t,n),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),A(e[t+1])]}};var i}function D(e,t,n){const i=e[t+5],r=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?Math.round(i/100)/10+"k":i,o=e[t+6],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+3],point_count:i,point_count_abbreviated:r})}function E(e){return e/360+.5}function C(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function A(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function S(e,t,n,i){let r=i;const o=t+(n-t>>1);let a,s=n-t;const l=e[t],c=e[t+1],u=e[n],h=e[n+1];for(let d=t+3;d<n;d+=3){const t=T(e[d],e[d+1],l,c,u,h);if(t>r)a=d,r=t;else if(t===r){const e=Math.abs(d-o);e<s&&(a=d,s=e)}}r>i&&(a-t>3&&S(e,t,a,i),e[a+2]=r,n-a>3&&S(e,a,n,i))}function T(e,t,n,i,r,o){let a=r-n,s=o-i;if(0!==a||0!==s){const l=((e-n)*a+(t-i)*s)/(a*a+s*s);l>1?(n=r,i=o):l>0&&(n+=a*l,i+=s*l)}return a=e-n,s=t-i,a*a+s*s}function F(e,t,n,i){const r={type:t,geom:n},o={id:null==e?null:e,type:r.type,geometry:r.geom,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(r.type){case"Point":case"MultiPoint":case"LineString":k(o,r.geom);break;case"Polygon":k(o,r.geom[0]);break;case"MultiLineString":for(const e of r.geom)k(o,e);break;case"MultiPolygon":for(const e of r.geom)k(o,e[0])}return o}function k(e,t){for(let n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function P(e,t){const n=[];switch(e.type){case"FeatureCollection":for(let i=0;i<e.features.length;i++)M(n,e.features[i],t,i);break;case"Feature":M(n,e,t);break;default:M(n,{geometry:e,properties:void 0},t)}return n}function M(e,t,n,i){var r;if(!t.geometry)return;if("GeometryCollection"===t.geometry.type){for(const r of t.geometry.geometries)M(e,{id:t.id,geometry:r,properties:t.properties},n,i);return}const o=t.geometry.coordinates;if(null===o||void 0===o||!o.length)return;const a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2);let s=t.id;switch(n.promoteId?s=null===(r=t.properties)||void 0===r?void 0:r[n.promoteId]:n.generateId&&(s=i||0),t.geometry.type){case"Point":{const n=[];return I(t.geometry.coordinates,n),void e.push(F(s,t.geometry.type,n,t.properties))}case"MultiPoint":{const n=[];for(const e of t.geometry.coordinates)I(e,n);return void e.push(F(s,t.geometry.type,n,t.properties))}case"LineString":{const n=[];return j(t.geometry.coordinates,n,a,!1),void e.push(F(s,t.geometry.type,n,t.properties))}case"MultiLineString":{if(n.lineMetrics){for(const n of t.geometry.coordinates){const i=[];j(n,i,a,!1),e.push(F(s,"LineString",i,t.properties))}return}const i=[];return N(t.geometry.coordinates,i,a,!1),void e.push(F(s,t.geometry.type,i,t.properties))}case"Polygon":{const n=[];return N(t.geometry.coordinates,n,a,!0),void e.push(F(s,t.geometry.type,n,t.properties))}case"MultiPolygon":{const n=[];for(const e of t.geometry.coordinates){const t=[];N(e,t,a,!0),n.push(t)}return void e.push(F(s,t.geometry.type,n,t.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function I(e,t){t.push(O(e[0]),B(e[1]),0)}function j(e,t,n,i){let r,o,a=0;for(let l=0;l<e.length;l++){const n=O(e[l][0]),s=B(e[l][1]);t.push(n,s,0),l>0&&(a+=i?(r*s-n*o)/2:Math.sqrt(Math.pow(n-r,2)+Math.pow(s-o,2))),r=n,o=s}const s=t.length-3;t[2]=1,n>0&&S(t,0,s,n),t[s+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function N(e,t,n,i){for(let r=0;r<e.length;r++){const o=[];j(e[r],o,n,i),t.push(o)}}function O(e){return e/360+.5}function B(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function L(e,t,n,i,r,o,a,s){if(i/=t,o>=(n/=t)&&a<i)return e;if(a<n||o>=i)return null;const l=[];for(const c of e){const e=0===r?c.minX:c.minY,t=0===r?c.maxX:c.maxY;if(e>=n&&t<i)l.push(c);else if(!(t<n||e>=i))switch(c.type){case"Point":case"MultiPoint":{const e=[];if(z(c.geometry,e,n,i,r),!e.length)continue;l.push(F(c.id,3===e.length?"Point":"MultiPoint",e,c.tags));continue}case"LineString":{const e=[];if(R(c.geometry,e,n,i,r,!1,s.lineMetrics),!e.length)continue;if(s.lineMetrics){for(const t of e)l.push(F(c.id,c.type,t,c.tags));continue}if(e.length>1){l.push(F(c.id,"MultiLineString",e,c.tags));continue}l.push(F(c.id,c.type,e[0],c.tags));continue}case"MultiLineString":{const e=[];if(U(c.geometry,e,n,i,r,!1),!e.length)continue;if(1===e.length){l.push(F(c.id,"LineString",e[0],c.tags));continue}l.push(F(c.id,c.type,e,c.tags));continue}case"Polygon":{const e=[];if(U(c.geometry,e,n,i,r,!0),!e.length)continue;l.push(F(c.id,c.type,e,c.tags));continue}case"MultiPolygon":{const e=[];for(const t of c.geometry){const o=[];U(t,o,n,i,r,!0),o.length&&e.push(o)}if(!e.length)continue;l.push(F(c.id,c.type,e,c.tags));continue}}}return l.length?l:null}function z(e,t,n,i,r){for(let o=0;o<e.length;o+=3){const a=e[o+r];a>=n&&a<=i&&q(t,e[o],e[o+1],e[o+2])}}function R(e,t,n,i,r,o,a){let s=V(e);const l=0===r?Z:H;let c,u,h=e.start;for(let g=0;g<e.length-3;g+=3){const d=e[g],p=e[g+1],f=e[g+2],m=e[g+3],y=e[g+4],v=0===r?d:p,_=0===r?m:y;let x=!1;a&&(c=Math.sqrt(Math.pow(d-m,2)+Math.pow(p-y,2))),v<n?_>n&&(u=l(s,d,p,m,y,n),a&&(s.start=h+c*u)):v>i?_<i&&(u=l(s,d,p,m,y,i),a&&(s.start=h+c*u)):q(s,d,p,f),_<n&&v>=n&&(u=l(s,d,p,m,y,n),x=!0),_>i&&v<=i&&(u=l(s,d,p,m,y,i),x=!0),!o&&x&&(a&&(s.end=h+c*u),t.push(s),s=V(e)),a&&(h+=c)}let d=e.length-3;const p=e[d],f=e[d+1],m=0===r?p:f;m>=n&&m<=i&&q(s,p,f,e[d+2]),d=s.length-3,o&&d>=3&&(s[d]!==s[0]||s[d+1]!==s[1])&&q(s,s[0],s[1],s[2]),s.length&&t.push(s)}function V(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function U(e,t,n,i,r,o){for(const a of e)R(a,t,n,i,r,o,!1)}function q(e,t,n,i){e.push(t,n,i)}function Z(e,t,n,i,r,o){const a=(o-t)/(i-t);return q(e,o,n+(r-n)*a,1),a}function H(e,t,n,i,r,o){const a=(o-n)/(r-n);return q(e,t+(i-t)*a,o,1),a}function G(e,t){const n=t.buffer/t.extent;let i=e;const r=L(e,1,-1-n,n,0,-1,2,t),o=L(e,1,1-n,2+n,0,-1,2,t);return r||o?(i=L(e,1,-n,1+n,0,-1,2,t)||[],r&&(i=W(r,1).concat(i)),o&&(i=i.concat(W(o,-1))),i):i}function W(e,t){const n=[];for(const i of e)switch(i.type){case"Point":case"MultiPoint":case"LineString":{const e=Y(i.geometry,t);n.push(F(i.id,i.type,e,i.tags));continue}case"MultiLineString":case"Polygon":{const e=[];for(const n of i.geometry)e.push(Y(n,t));n.push(F(i.id,i.type,e,i.tags));continue}case"MultiPolygon":{const e=[];for(const n of i.geometry){const i=[];for(const e of n)i.push(Y(e,t));e.push(i)}n.push(F(i.id,i.type,e,i.tags));continue}}return n}function Y(e,t){const n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(let i=0;i<e.length;i+=3)n.push(e[i]+t,e[i+1],e[i+2]);return n}function X(e,t){if(e.transformed)return e;const n=1<<e.z,i=e.x,r=e.y;for(const o of e.features){if(1===o.type){const e=[];for(let a=0;a<o.geometry.length;a+=2)e.push(K(o.geometry[a],o.geometry[a+1],t,n,i,r));o.geometry=e;continue}const e=[];for(const a of o.geometry){const o=[];for(let e=0;e<a.length;e+=2)o.push(K(a[e],a[e+1],t,n,i,r));e.push(o)}o.geometry=e}return e.transformed=!0,e}function K(e,t,n,i,r,o){return[Math.round(n*(e*i-r)),Math.round(n*(t*i-o))]}function $(e,t,n,i,r){const o=t===r.maxZoom?0:r.tolerance/((1<<t)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:n,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const s of e)Q(a,s,o,r);return a}function Q(e,t,n,i){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY);let r,o=t.tags||null;switch(t.type){case"Point":case"MultiPoint":{const n=[];for(let i=0;i<t.geometry.length;i+=3)n.push(t.geometry[i],t.geometry[i+1]),e.numPoints++,e.numSimplified++;if(!n.length)return;r={type:1,tags:o,geometry:n};break}case"LineString":{const a=[];if(J(a,t.geometry,e,n,!1,!1),!a.length)return;if(i.lineMetrics){o={};for(const e in t.tags)o[e]=t.tags[e];o.mapbox_clip_start=t.geometry.start/t.geometry.size,o.mapbox_clip_end=t.geometry.end/t.geometry.size}r={type:2,tags:o,geometry:a};break}case"MultiLineString":case"Polygon":{const i=[];for(let r=0;r<t.geometry.length;r++)J(i,t.geometry[r],e,n,"Polygon"===t.type,0===r);if(!i.length)return;r={type:"Polygon"===t.type?3:2,tags:o,geometry:i};break}case"MultiPolygon":{const i=[];for(let r=0;r<t.geometry.length;r++){const o=t.geometry[r];for(let t=0;t<o.length;t++)J(i,o[t],e,n,!0,0===t)}if(!i.length)return;r={type:3,tags:o,geometry:i};break}}null!==t.id&&(r.id=t.id),e.features.push(r)}function J(e,t,n,i,r,o){const a=i*i;if(i>0&&t.size<(r?a:i))return void(n.numPoints+=t.length/3);const s=[];for(let l=0;l<t.length;l+=3)(0===i||t[l+2]>a)&&(n.numSimplified++,s.push(t[l],t[l+1])),n.numPoints++;r&&function(e,t){let n=0;for(let i=0,r=e.length,o=r-2;i<r;o=i,i+=2)n+=(e[i]-e[o])*(e[i+1]+e[o+1]);if(n>0===t)for(let i=0,r=e.length;i<r/2;i+=2){const t=e[i],n=e[i+1];e[i]=e[r-2-i],e[i+1]=e[r-1-i],e[r-2-i]=t,e[r-1-i]=n}}(s,o),e.push(s)}function ee(e,t,n){var r,o;const a=!!t.newGeometry,s=t.removeAllProperties||(null===(r=t.removeProperties)||void 0===r?void 0:r.length)>0||(null===(o=t.addOrUpdateProperties)||void 0===o?void 0:o.length)>0;if(a){let i=P({type:"FeatureCollection",features:[{type:"Feature",id:e.id,geometry:t.newGeometry,properties:s?te(e.tags,t):e.tags}]},n);return i=G(i,n),i[0]}if(s){const n=i({},e);return n.tags=te(n.tags,t),n}return null}function te(e,t){if(t.removeAllProperties)return{};const n=i({},e||{});if(t.removeProperties)for(const i of t.removeProperties)delete n[i];if(t.addOrUpdateProperties)for(const{key:i,value:r}of t.addOrUpdateProperties)n[i]=r;return n}const ne={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class ie{constructor(e,t){r(this,"options",void 0),r(this,"tiles",void 0),r(this,"tileCoords",void 0),r(this,"stats",{}),r(this,"total",0),r(this,"source",void 0);const n=(t=this.options=Object.assign({},ne,t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let i=P(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=G(i,t),i.length&&this.splitTile(i,0,0,0),t.updateable&&(this.source=i),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,t,n,i,r,o,a){const s=[e,t,n,i],l=this.options,c=l.debug;for(;s.length;){i=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();const u=1<<t,h=re(t,n,i);let d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=$(e,t,n,i,l),this.tileCoords.push({z:t,x:n,y:i,id:h}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));const e="z".concat(t);this.stats[e]=(this.stats[e]||0)+1,this.total++}if(d.source=e,null==r){if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue}else{if(t===l.maxZoom||t===r)continue;if(null!=r){const e=r-t;if(n!==o>>e||i!==a>>e)continue}}if(d.source=null,!e.length)continue;c>1&&console.time("clipping");const p=.5*l.buffer/l.extent,f=.5-p,m=.5+p,g=1+p;let y=null,v=null,_=null,x=null;const b=L(e,u,n-p,n+m,0,d.minX,d.maxX,l),w=L(e,u,n+f,n+g,0,d.minX,d.maxX,l);b&&(y=L(b,u,i-p,i+m,1,d.minY,d.maxY,l),v=L(b,u,i+f,i+g,1,d.minY,d.maxY,l)),w&&(_=L(w,u,i-p,i+m,1,d.minY,d.maxY,l),x=L(w,u,i+f,i+g,1,d.minY,d.maxY,l)),c>1&&console.timeEnd("clipping"),s.push(y||[],t+1,2*n,2*i),s.push(v||[],t+1,2*n,2*i+1),s.push(_||[],t+1,2*n+1,2*i),s.push(x||[],t+1,2*n+1,2*i+1)}}getTile(e,t,n){var i;e=+e,t=+t,n=+n;const r=this.options,{extent:o,debug:a}=r;if(e<0||e>24)return null;const s=1<<e,l=re(e,t=t+s&s-1,n);if(this.tiles[l])return X(this.tiles[l],o);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);let c,u=e,h=t,d=n;for(;!c&&u>0;)u--,h>>=1,d>>=1,c=this.tiles[re(u,h,d)];return null!==(i=c)&&void 0!==i&&i.source?(a>1&&(console.log("found parent tile z%d-%d-%d",u,h,d),console.time("drilling down")),this.splitTile(c.source,u,h,d,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[l]?X(this.tiles[l],o):null):null}invalidateTiles(e){const t=this.options,{debug:n}=t;let i=1/0,r=-1/0,o=1/0,a=-1/0;for(const c of e)i=Math.min(i,c.minX),r=Math.max(r,c.maxX),o=Math.min(o,c.minY),a=Math.max(a,c.maxY);const s=t.buffer/t.extent,l=new Set;for(const c in this.tiles){const t=this.tiles[c],u=1<<t.z,h=(t.x-s)/u,d=(t.x+1+s)/u,p=(t.y-s)/u,f=(t.y+1+s)/u;if(r<h||i>=d||a<p||o>=f)continue;let m=!1;for(const n of e)if(n.maxX>=h&&n.minX<d&&n.maxY>=p&&n.minY<f){m=!0;break}if(m){if(n){n>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t.z,t.x,t.y,t.numFeatures,t.numPoints,t.numSimplified);const e="z".concat(t.z);this.stats[e]=(this.stats[e]||0)-1,this.total--}delete this.tiles[c],l.add(c)}}l.size&&(this.tileCoords=this.tileCoords.filter(e=>!l.has(e.id)))}updateData(e){const t=this.options,n=t.debug;if(!t.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");const{affected:i,source:r}=function(e,t,n){const i=function(e,t,n){return e?{removeAll:e.removeAll,remove:new Set(e.remove||[]),add:new Map(null===(t=e.add)||void 0===t?void 0:t.map(e=>[e.id,e])),update:new Map(null===(n=e.update)||void 0===n?void 0:n.map(e=>[e.id,e]))}:{remove:new Set,add:new Map,update:new Map}}(t);let r=[];if(i.removeAll&&(r=e,e=[]),i.remove.size||i.add.size){const t=[];for(const n of e){const{id:e}=n;(i.remove.has(e)||i.add.has(e))&&t.push(n)}if(t.length){r.push(...t);const n=new Set(t.map(e=>e.id));e=e.filter(e=>!n.has(e.id))}if(i.add.size){let t=P({type:"FeatureCollection",features:Array.from(i.add.values())},n);t=G(t,n),r.push(...t),e.push(...t)}}if(i.update.size)for(const[o,a]of i.update){const t=e.findIndex(e=>e.id===o);if(-1===t)continue;const i=e[t],s=ee(i,a,n);s&&(r.push(i,s),e[t]=s)}return{affected:r,source:e}}(this.source,e,t);if(!i.length)return;this.source=r,n>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(i),n>1&&console.timeEnd("invalidating");const[o,a,s]=[0,0,0],l=$(this.source,o,a,s,this.options);l.source=this.source;const c=re(o,a,s);if(this.tiles[c]=l,this.tileCoords.push({z:o,x:a,y:s,id:c}),n){const e="z".concat(o);this.stats[e]=(this.stats[e]||0)+1,this.total++}}}function re(e,t,n){return 32*((1<<e)*n+t)+e}class oe extends d{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae;super(e,t,n),this._dataUpdateable=new Map,this._createGeoJSONIndex=i}loadVectorTile(t,n){return e._(this,void 0,void 0,function*(){const n=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);return i?u(new e.d3(i.features,{version:2,extent:e.a5})):null})}loadData(t){return e._(this,void 0,void 0,function*(){var n;null===(n=this._pendingRequest)||void 0===n||n.abort();const i=this._startPerformance(t);this._pendingRequest=new AbortController;try{(!this._pendingData||t.request||t.data||t.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest));const e=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(e,t),this.loaded={};const n={};return t.request&&(n.data=e),this._finishPerformance(i,t,n),n}catch(t){if(delete this._pendingRequest,e.Z(t))return{abandoned:!0};throw t}})}_startPerformance(t){var n;if(null===(n=null==t?void 0:t.request)||void 0===n?void 0:n.collectResourceTiming)return new e.c$(t.request)}_finishPerformance(e,t,n){if(!e)return;const i=e.finish();i&&(n.resourceTiming={},n.resourceTiming[t.source]=JSON.parse(JSON.stringify(i)))}getData(){return e._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,n){return e._(this,void 0,void 0,function*(){let e;if(t.request?e=yield this.loadGeoJSONFromUrl(t.request,t.promoteId,n):t.data?e=this._loadGeoJSONFromObject(t.data,t.promoteId):t.dataDiff&&(e=this._loadGeoJSONFromDiff(t.dataDiff,t.promoteId,t.source)),delete this._pendingRequest,"object"!=typeof e)throw new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object."));return y(e,!0),t.filter&&(e=this._filterGeoJSON(e,t.filter)),e})}loadGeoJSONFromUrl(t,n,i){return e._(this,void 0,void 0,function*(){const r=yield e.j(t,i);return this._dataUpdateable=e.a7(r.data,n),r.data})}_loadGeoJSONFromObject(t,n){return this._dataUpdateable=e.a7(t,n),t}_loadGeoJSONFromDiff(t,n,i){if(!this._dataUpdateable)throw new Error("Cannot update existing geojson data in ".concat(i));e.a8(this._dataUpdateable,t,n);const r=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(r)}_filterGeoJSON(t,n){const i=e.d4(n,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw new Error(i.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));const r=t.features.filter(e=>i.value.evaluate({zoom:0},e));return this._toFeatureCollection(r)}_toFeatureCollection(e){return{type:"FeatureCollection",features:e}}removeSource(t){return e._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}function ae(t,n){return n.cluster?new b(function(t){let{superclusterOptions:n,clusterProperties:i}=t;if(!i||!n)return n;const r={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i);for(const c of l){const[t,n]=i[c],a=e.d4(n),s=e.d4("string"==typeof t?[t,["accumulated"],["get",c]]:t);r[c]=a.value,o[c]=s.value}return n.map=e=>{s.properties=e;const t={};for(const n of l)t[n]=r[n].evaluate(a,s);return t},n.reduce=(e,t)=>{s.properties=t;for(const n of l)a.accumulated=e[n],e[n]=o[n].evaluate(a,s)},n}(n)).load(t.features):function(e,t){return new ie(e,t)}(t,n.geojsonVtOptions)}class se{constructor(t){this.self=t,this.actor=new e.L(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.cK,this.self.removeProtocol=e.cL,this.self.registerRTLTextPlugin=t=>{e.d5.setMethods(t)},this.actor.registerMessageHandler("LDT",(e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t)),this.actor.registerMessageHandler("RDT",(t,n)=>e._(this,void 0,void 0,function*(){this._getDEMWorkerSource(t,n.source).removeTile(n)})),this.actor.registerMessageHandler("GCEZ",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterExpansionZoom(n)})),this.actor.registerMessageHandler("GCC",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterChildren(n)})),this.actor.registerMessageHandler("GCL",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterLeaves(n)})),this.actor.registerMessageHandler("LD",(e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t)),this.actor.registerMessageHandler("GD",(e,t)=>this._getWorkerSource(e,t.type,t.source).getData()),this.actor.registerMessageHandler("LT",(e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t)),this.actor.registerMessageHandler("RT",(e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t)),this.actor.registerMessageHandler("AT",(e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t)),this.actor.registerMessageHandler("RMT",(e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t)),this.actor.registerMessageHandler("RS",(t,n)=>e._(this,void 0,void 0,function*(){if(!this.workerSources[t]||!this.workerSources[t][n.type]||!this.workerSources[t][n.type][n.source])return;const e=this.workerSources[t][n.type][n.source];delete this.workerSources[t][n.type][n.source],void 0!==e.removeSource&&e.removeSource(n)})),this.actor.registerMessageHandler("RM",t=>e._(this,void 0,void 0,function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],this.globalStates.delete(t)})),this.actor.registerMessageHandler("SR",(t,n)=>e._(this,void 0,void 0,function*(){this.referrer=n})),this.actor.registerMessageHandler("SRPS",(e,t)=>this._syncRTLPluginState(e,t)),this.actor.registerMessageHandler("IS",(t,n)=>e._(this,void 0,void 0,function*(){this.self.importScripts(n)})),this.actor.registerMessageHandler("SI",(e,t)=>this._setImages(e,t)),this.actor.registerMessageHandler("UL",(t,n)=>e._(this,void 0,void 0,function*(){this._getLayerIndex(t).update(n.layers,n.removedIds,this._getGlobalState(t))})),this.actor.registerMessageHandler("UGS",(t,n)=>e._(this,void 0,void 0,function*(){const e=this._getGlobalState(t);for(const t in n)e[t]=n[t]})),this.actor.registerMessageHandler("SL",(t,n)=>e._(this,void 0,void 0,function*(){this._getLayerIndex(t).replace(n,this._getGlobalState(t))}))}_getGlobalState(e){let t=this.globalStates.get(e);return t||(t={},this.globalStates.set(e,t)),t}_setImages(t,n){return e._(this,void 0,void 0,function*(){this.availableImages[t]=n;for(const e in this.workerSources[t]){const i=this.workerSources[t][e];for(const e in i)i[e].availableImages=n}})}_syncRTLPluginState(t,n){return e._(this,void 0,void 0,function*(){return yield e.d5.syncState(n,this.self.importScripts)})}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let n=this.layerIndexes[e];return n||(n=this.layerIndexes[e]=new t),n}_getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const i={sendAsync:(t,n)=>(t.targetMapId=e,this.actor.sendAsync(t,n))};switch(t){case"vector":this.workerSources[e][t][n]=new d(i,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][n]=new oe(i,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][n]=new this.externalWorkerSourceTypes[t](i,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][n]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new p),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new se(self)),se}),n("index",["exports","./shared"],function(e,t){var n="5.17.0";function i(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}let r,o,a;const s={frame(e,n,i,r){const o=r||window,a=o.requestAnimationFrame(e=>{s(),n(e)}),{unsubscribe:s}=t.s(e.signal,"abort",()=>{s(),o.cancelAnimationFrame(a),i(new t.a(e.signal.reason))},!1)},frameAsync(e,t){return new Promise((n,i)=>{this.frame(e,n,i,t)})},getImageData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n},resolveURL:e=>(r||(r=document.createElement("a")),r.href=e,r.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return void 0!==a?a:!!matchMedia&&(null==o&&(o=matchMedia("(prefers-reduced-motion: reduce)")),o.matches)},set prefersReducedMotion(e){a=e}},l=new class{constructor(){this._realTime="undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return null!==this._frozenAt?this._frozenAt:this._realTime()}setNow(e){this._frozenAt=e}restoreNow(){this._frozenAt=null}isFrozen(){return null!==this._frozenAt}};function c(){return l.getCurrentTime()}class u{static testProp(e){if(!u.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in u.docStyle)return e[t];return e[0]}static create(e,t,n){const i=window.document.createElement(e);return void 0!==t&&(i.className=t),n&&n.appendChild(i),i}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){u.docStyle&&u.selectProp&&(u.userSelect=u.docStyle[u.selectProp],u.docStyle[u.selectProp]="none")}static enableDrag(){u.docStyle&&u.selectProp&&(u.docStyle[u.selectProp]=u.userSelect)}static setTransform(e,t){e.style[u.transformProp]=t}static addEventListener(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,"passive"in i?i:i.capture)}static removeEventListener(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,"passive"in i?i:i.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",u.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",u.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",u.suppressClickInternal,!0)},0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,n,i){const r=n.boundingClientRect;return new t.P((i.clientX-r.left)/n.x-e.clientLeft,(i.clientY-r.top)/n.y-e.clientTop)}static mousePos(e,t){const n=u.getScale(e);return u.getPoint(e,n,t)}static touchPos(e,t){const n=[],i=u.getScale(e);for(let r=0;r<t.length;r++)n.push(u.getPoint(e,i,t[r]));return n}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const t=(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body"),n=t.querySelectorAll("script");for(const i of n)i.remove();return u.clean(t),t.innerHTML}static isPossiblyDangerous(e,t){const n=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!n.includes("javascript:")&&!n.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const t=e.children;for(const n of t)u.removeAttributes(n),u.clean(n)}static removeAttributes(e){for(const{name:t,value:n}of e.attributes)u.isPossiblyDangerous(t,n)&&e.removeAttribute(t)}}u.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,u.selectProp=u.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),u.transformProp=u.testProp(["transform","WebkitTransform"]);const h={supported:!1,testSupport:function(e){!f&&p&&(m?g(e):d=e)}};let d,p,f=!1,m=!1;function g(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,p),e.isContextLost())return;h.supported=!0}catch(e){}e.deleteTexture(t),f=!0}var y;"undefined"!=typeof document&&(p=document.createElement("img"),p.onload=()=>{d&&g(d),d=null,m=!0},p.onerror=()=>{f=!0,d=null},p.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let n,i,r,o;e.resetRequestQueue=()=>{n=[],i=0,r=0,o={}},e.addThrottleControl=e=>{const t=r++;return o[t]=e,t},e.removeThrottleControl=e=>{delete o[e],s()},e.getImage=function(e,i){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((o,a)=>{h.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),n.push({abortController:i,requestParameters:e,supportImageRefresh:r,state:"queued",onError:e=>{a(e)},onSuccess:e=>{o(e)}}),s()})};const a=e=>t._(this,void 0,void 0,function*(){e.state="running";const{requestParameters:n,supportImageRefresh:r,onError:o,onSuccess:a,abortController:c}=e,u=!1===r&&!t.i(self)&&!t.g(n.url)&&(!n.headers||Object.keys(n.headers).reduce((e,t)=>e&&"accept"===t,!0));i++;const h=u?l(n,c):t.m(n,c);try{const n=yield h;delete e.abortController,e.state="completed",n.data instanceof HTMLImageElement||t.b(n.data)?a(n):n.data&&a({data:yield(d=n.data,"function"==typeof createImageBitmap?t.f(d):t.h(d)),cacheControl:n.cacheControl,expires:n.expires})}catch(t){delete e.abortController,o(t)}finally{i--,s()}var d}),s=()=>{const e=(()=>{for(const e of Object.keys(o))if(o[e]())return!0;return!1})()?t.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=i;t<e&&n.length>0;t++){const e=n.shift();e.abortController.signal.aborted?t--:a(e)}},l=(e,n)=>new Promise((i,r)=>{const o=new Image,a=e.url,s=e.credentials;s&&"include"===s?o.crossOrigin="use-credentials":(s&&"same-origin"===s||!t.d(a))&&(o.crossOrigin="anonymous"),n.signal.addEventListener("abort",()=>{o.src="",r(new t.a(n.signal.reason))}),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,i({data:o})},o.onerror=()=>{o.onerror=o.onload=null,n.signal.aborted||r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=a})}(y||(y={})),y.resetRequestQueue();class v{constructor(e){this._transformRequestFn=null!=e?e:null}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function _(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const n=[];for(const{id:i,url:r}of e){const e="".concat(i).concat(r);-1===n.indexOf(e)&&(n.push(e),t.push({id:i,url:r}))}}return t}function x(e,t,n){try{const i=new URL(e);return i.pathname+="".concat(t).concat(n),i.toString()}catch(t){throw new Error('Invalid sprite URL "'.concat(e,'", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically'))}}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class w extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const e of Object.keys(this.images))this.removeImage(e);this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const n=this.images[e];if(n&&!n.data&&n.spriteData){const e=n.spriteData;n.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),n.spriteData=null}return n}addImage(e,t){if(this.images[e])throw new Error("Image id ".concat(e," already exist, use updateImage instead"));this._validate(e,t)&&(this.images[e]=t)}_validate(e,n){let i=!0;const r=n.data||n.spriteData;return this._validateStretch(n.stretchX,r&&r.width)||(this.fire(new t.k(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),i=!1),this._validateStretch(n.stretchY,r&&r.height)||(this.fire(new t.k(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.k(new Error('Image "'.concat(e,'" has invalid "content" value')))),i=!1),i}_validateStretch(e,t){if(!e)return!0;let n=0;for(const i of e){if(i[0]<n||i[1]<i[0]||t<i[1])return!1;n=i[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const n=t.spriteData,i=n&&n.width||t.data.width,r=n&&n.height||t.data.height;return!(e[0]<0||i<e[0]||e[1]<0||r<e[1]||e[2]<0||i<e[2]||e[3]<0||r<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.getImage(e);if(n&&(i.data.width!==t.data.width||i.data.height!==t.data.height))throw new Error("size mismatch between old image (".concat(i.data.width,"x").concat(i.data.height,") and new image (").concat(t.data.width,"x").concat(t.data.height,")."));t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((t,n)=>{let i=!0;if(!this.isLoaded())for(const r of e)this.images[r]||(i=!1);this.isLoaded()||i?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})})}_getImagesForIds(e){const n={};for(const i of e){let e=this.getImage(i);e||(this.fire(new t.l("styleimagemissing",{id:i})),e=this.getImage(i)),e?n[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w('Image "'.concat(i,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}return n}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.I(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.T(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.p(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,i=e.y+1,a=this.getImage(o).data,s=a.width,l=a.height;t.R.copy(a,r,{x:0,y:0},{x:n,y:i},{width:s,height:l}),t.R.copy(a,r,{x:0,y:l-1},{x:n,y:i-1},{width:s,height:1}),t.R.copy(a,r,{x:0,y:0},{x:n,y:i+l},{width:s,height:1}),t.R.copy(a,r,{x:s-1,y:0},{x:n-1,y:i},{width:1,height:l}),t.R.copy(a,r,{x:0,y:0},{x:n+s,y:i},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.getImage(n);e||t.w('Image with ID: "'.concat(n,'" was not found')),b(e)&&this.updateImage(n,e)}}cloneImages(){const e={};for(const t in this.images){const n=this.images[t];e[t]=Object.assign(Object.assign({},n),{data:n.data?n.data.clone():null})}return e}}const D=1e20;function E(e,t,n,i,r,o,a,s,l){for(let c=t;c<t+i;c++)C(e,n*o+c,o,r,a,s,l);for(let c=n;c<n+r;c++)C(e,c*o+t,1,i,a,s,l)}function C(e,t,n,i,r,o,a){o[0]=0,a[0]=-D,a[1]=D,r[0]=e[t];for(let s=1,l=0,c=0;s<i;s++){r[s]=e[t+s*n];const i=s*s;do{const e=o[l];c=(r[s]-r[e]+i-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=D}for(let s=0,l=0;s<i;s++){for(;a[l+1]<s;)l++;const i=o[l],c=s-i;e[t+s*n]=r[i]+c*c}}const A=t.v.layout_symbol["text-font"].default.join(",");class S{constructor(e,t,n){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={},this.lang=n}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,function*(){const t=[];for(const r in e)for(const n of e[r])t.push(this._getAndCacheGlyphsPromise(r,n));const n=yield Promise.all(t),i={};for(const{stack:e,id:r,glyph:o}of n)i[e]||(i[e]={}),i[e][r]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics};return i})}_getAndCacheGlyphsPromise(e,n){return t._(this,void 0,void 0,function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let i=t.glyphs[n];return void 0!==i?{stack:e,id:n,glyph:i}:!this.url||this._charUsesLocalIdeographFontFamily(n)?(i=t.glyphs[n]=this._drawGlyph(t,e,n),{stack:e,id:n,glyph:i}):yield this._downloadAndCacheRangePromise(e,n)})}_downloadAndCacheRangePromise(e,n){return t._(this,void 0,void 0,function*(){const t=this.entries[e],i=Math.floor(n/256);if(t.ranges[i])return{stack:e,id:n,glyph:null};if(!t.requests[i]){const n=S.loadGlyphRange(e,i,this.url,this.requestManager);t.requests[i]=n}try{const r=yield t.requests[i];for(const e in r)t.glyphs[+e]=r[+e];return t.ranges[i]=!0,{stack:e,id:n,glyph:r[n]||null}}catch(r){const a=t.glyphs[n]=this._drawGlyph(t,e,n);return this._warnOnMissingGlyphRange(a,i,n,r),{stack:e,id:n,glyph:a}}})}_warnOnMissingGlyphRange(e,n,i,r){const o=256*n,a=o+255,s=i.toString(16).padStart(4,"0").toUpperCase();t.w("Unable to load glyph range ".concat(n,", ").concat(o,"-").concat(a,". Rendering codepoint U+").concat(s," locally instead. ").concat(r))}_charUsesLocalIdeographFontFamily(e){return!!this.localIdeographFontFamily&&t.q(e)}_drawGlyph(e,n,i){const r=n===A&&""!==this.localIdeographFontFamily&&this._charUsesLocalIdeographFontFamily(i),o=r?"ideographTinySDF":"tinySDF";e[o]||(e[o]=this._createTinySDF(r?this.localIdeographFontFamily:n));const a=e[o].draw(String.fromCodePoint(i)),s=/^(?:[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F])+$/.test(String.fromCodePoint(i));return{id:i,bitmap:new t.r({width:a.width||60,height:a.height||60},a.data),metrics:{width:s?0:a.glyphWidth/2||24,height:a.glyphHeight/2||24,left:a.glyphLeft/2+.5||0,top:a.glyphTop/2-27.5||-8,advance:s?0:a.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(e){const t=e?e.split(","):[];t.push("sans-serif");const n=t.map(e=>/[-\w]+/.test(e)?e:"'".concat(CSS.escape(e),"'")).join(",");return new S.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:n,fontWeight:this._fontWeight(t[0]),fontStyle:this._fontStyle(t[0]),lang:this.lang})}_fontStyle(e){return/italic/i.test(e)?"italic":/oblique/i.test(e)?"oblique":"normal"}_fontWeight(e){const t={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let n;for(const[i,r]of Object.entries(t))new RegExp("\\b".concat(i,"\\b"),"i").test(e)&&(n="".concat(r));return n}destroy(){for(const e in this.entries){const t=this.entries[e];t.tinySDF&&(t.tinySDF=null),t.ideographTinySDF&&(t.ideographTinySDF=null),t.glyphs={},t.requests={},t.ranges={}}this.entries={}}}S.loadGlyphRange=function(e,n,i,r){return t._(this,void 0,void 0,function*(){const o=256*n,a=o+255,s=r.transformRequest(i.replace("{fontstack}",e).replace("{range}","".concat(o,"-").concat(a)),"Glyphs"),l=yield t.n(s,new AbortController);if(!l||!l.data)throw new Error("Could not load glyph range. range: ".concat(n,", ").concat(o,"-").concat(a));const c={};for(const e of t.o(l.data))c[e.id]=e;return c})},S.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:a="normal",lang:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=i,this.radius=n,this.lang=s;const l=this.size=e+4*t,c=this._createCanvas(l),u=this.ctx=c.getContext("2d",{willReadFrequently:!0});u.font="".concat(a," ").concat(o," ").concat(e,"px ").concat(r),u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,a+Math.ceil(i)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;this.lang&&(f.lang=this.lang),f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const v=f.getImageData(m,m,s,l);y.fill(D,0,h),g.fill(0,0,h);for(let _=0;_<l;_++)for(let e=0;e<s;e++){const t=v.data[4*(_*s+e)+3]/255;if(0===t)continue;const n=(_+m)*c+e+m;if(1===t)y[n]=0,g[n]=D;else{const e=.5-t;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}E(y,0,0,c,u,c,this.f,this.v,this.z),E(g,m,m,s,l,c,this.f,this.v,this.z);for(let _=0;_<h;_++){const e=Math.sqrt(y[_])-Math.sqrt(g[_]);d[_]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class T{constructor(){this.specification=t.u.light.position}possiblyEvaluate(e,n){return t.F(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.G.number(e.x,n.x,i),y:t.G.number(e.y,n.y,i),z:t.G.number(e.z,n.z,i)}}}let F;class k extends t.E{constructor(e){super(),F=F||new t.t({anchor:new t.D(t.u.light.anchor),position:new T,color:new t.D(t.u.light.color),intensity:new t.D(t.u.light.intensity)}),this._transitionable=new t.x(F,void 0),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.y,e,n))for(const i in e){const n=e[i];i.endsWith(t.z)?this._transitionable.setTransition(i.slice(0,-t.z.length),n):this._transitionable.setValue(i,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.B(this,e.call(t.C,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.u}))}}const P=new t.t({"sky-color":new t.D(t.u.sky["sky-color"]),"horizon-color":new t.D(t.u.sky["horizon-color"]),"fog-color":new t.D(t.u.sky["fog-color"]),"fog-ground-blend":new t.D(t.u.sky["fog-ground-blend"]),"horizon-fog-blend":new t.D(t.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new t.D(t.u.sky["sky-horizon-blend"]),"atmosphere-blend":new t.D(t.u.sky["atmosphere-blend"])});class M extends t.E{constructor(e){super(),this._transitionable=new t.x(P,void 0),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.H(0))}setSky(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.J,e,n)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const n in e){const i=e[n];n.endsWith(t.z)?this._transitionable.setTransition(n.slice(0,-t.z.length),i):this._transitionable.setValue(n,i)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!1!==(null==i?void 0:i.validate)&&t.B(this,e.call(t.C,t.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.u})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class I{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}getDashRanges(e,t,n){const i=[];let r=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];r=s*n,s+=t,o=s*n,i.push({left:r,right:o,isDash:a,zeroLength:0===t})}return i}addRoundDash(e,t,n){const i=t/2;for(let r=-n;r<=n;r++){const t=this.width*(this.nextRow+n+r);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=r/n*(i+1);if(a.isDash){const e=i-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=i-Math.sqrt(u*u+d*d);this.data[t+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let a=e.length-1;a>=0;--a){const t=e[a],n=e[a+1];t.zeroLength?e.splice(a,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(a,1))}const t=e[0],n=e[e.length-1];t.isDash===n.isDash&&(t.left=n.left-this.width,n.right=t.right+this.width);const i=this.width*this.nextRow;let r=0,o=e[r];for(let a=0;a<this.width;a++){a/o.right>1&&(o=e[++r]);const t=Math.abs(a-o.left),n=Math.abs(a-o.right),s=Math.min(t,n);this.data[i+a]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(e,n){const i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.w("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,r=this.getDashRanges(e,this.width,t);n?this.addRoundDash(r,t,i):this.addRegularDash(r)}const a={y:this.nextRow+i,height:2*i,width:o};return this.nextRow+=r,this.dirty=!0,a}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const j="maplibre_preloaded_worker_pool";class N{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<N.workerCount;)this.workers.push(new Worker(t.c.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[j]}numActive(){return Object.keys(this.active).length}}const O=Math.floor(s.hardwareConcurrency/2);let B,L;function z(){return B||(B=new N),B}N.workerCount=t.K(globalThis)?Math.max(Math.min(O,3),1):1;class R{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;const i=this.workerPool.acquire(n);for(let r=0;r<i.length;r++){const e=new t.L(i[r],n);e.name="Worker ".concat(r),this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const n=[];for(const i of this.actors)n.push(i.sendAsync({type:e,data:t}));return Promise.all(n)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach(e=>{e.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const n of this.actors)n.registerMessageHandler(e,t)}unregisterMessageHandler(e){for(const t of this.actors)t.unregisterMessageHandler(e)}}function V(){return L||(L=new R(z(),t.M),L.registerMessageHandler("GR",(e,n,i)=>t.m(n,i))),L}function U(e,n){const i=t.N();return t.O(i,i,[1,1,0]),t.Q(i,i,[.5*e.width,.5*e.height,1]),e.calculatePosMatrix?t.S(i,i,e.calculatePosMatrix(n.toUnwrapped())):i}function q(e,t,n,i,r,o,a){var s;const l=function(e,t,n){if(e)for(const i of e){const e=t[i];if(e&&e.source===n&&"fill-extrusion"===e.type)return!0}else for(const i in t){const e=t[i];if(e.source===n&&"fill-extrusion"===e.type)return!0}return!1}(null!==(s=null==r?void 0:r.layers)&&void 0!==s?s:null,t,e.id),c=o.maxPitchScaleFactor(),u=e.tilesIn(i,c,l);u.sort(Z);const h=[];for(const d of u)h.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,n,e.getState(),d.queryGeometry,d.cameraQueryGeometry,d.scale,r,o,c,U(o,d.tileID),a?(e,t)=>a(d.tileID,e,t):void 0)});return function(e,t){for(const n in e)for(const i of e[n])H(i,t);return e}(function(e){const t={},n={};for(const i of e){const e=i.queryResults,r=i.wrappedTileID,o=n[r]=n[r]||{};for(const n in e){const i=e[n],r=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of i)r[e.featureIndex]||(r[e.featureIndex]=!0,a.push(e))}}return t}(h),e)}function Z(e,t){const n=e.tileID,i=t.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function H(e,t){const n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}function G(e,n,i,r){return t._(this,void 0,void 0,function*(){let o=e;if(e.url?o=(yield t.j(n.transformRequest(e.url,"Source"),i)).data:yield s.frameAsync(i,r),!o)return null;const a=t.U(t.e(o,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in o&&o.vector_layers&&(a.vectorLayerIds=o.vector_layers.map(e=>e.id)),a})}class W{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.V?new t.V(e.lng,e.lat):t.V.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.V?new t.V(e.lng,e.lat):t.V.convert(e),this}extend(e){const n=this._sw,i=this._ne;let r,o;if(e instanceof t.V)r=e,o=e;else{if(!(e instanceof W))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(W.convert(e)):this.extend(t.V.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.V.convert(e)):this;if(r=e._sw,o=e._ne,!r||!o)return this}return n||i?(n.lng=Math.min(r.lng,n.lng),n.lat=Math.min(r.lat,n.lat),i.lng=Math.max(o.lng,i.lng),i.lat=Math.max(o.lat,i.lat)):(this._sw=new t.V(r.lng,r.lat),this._ne=new t.V(o.lng,o.lat)),this}getCenter(){return new t.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.V(this.getWest(),this.getNorth())}getSouthEast(){return new t.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:i}=t.V.convert(e);let r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}intersects(e){if(!((e=W.convert(e)).getNorth()>=this.getSouth()&&e.getSouth()<=this.getNorth()))return!1;const n=Math.abs(this.getEast()-this.getWest()),i=Math.abs(e.getEast()-e.getWest());if(n>=360||i>=360)return!0;const r=t.W(this.getWest(),-180,180),o=t.W(this.getEast(),-180,180),a=t.W(e.getWest(),-180,180),s=t.W(e.getEast(),-180,180),l=r>=o,c=a>=s;return!(!l||!c)||(l?s>=r||a<=o:c?o>=a||r<=s:a<=o&&s>=r)}static convert(e){return e instanceof W?e:e?new W(e):e}static fromLngLat(e){const n=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,i=n/Math.cos(Math.PI/180*e.lat);return new W(new t.V(e.lng-i,e.lat-n),new t.V(e.lng+i,e.lat+n))}adjustAntiMeridian(){const e=new t.V(this._sw.lng,this._sw.lat),n=new t.V(this._ne.lng,this._ne.lat);return new W(e,e.lng>n.lng?new t.V(n.lng+360,n.lat):n)}}class Y{constructor(e,t,n){this.bounds=W.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.Y(this.bounds.getWest())*n),r=Math.floor(t.X(this.bounds.getNorth())*n),o=Math.ceil(t.Y(this.bounds.getEast())*n),a=Math.ceil(t.X(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a}}class X extends t.E{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.U(n,["url","scheme","tileSize","promoteId","encoding"])),this._options=t.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}load(){return t._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield G(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new Y(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this._loaded=!0,t.Z(e)||this.fire(new t.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(e)};n.request.collectResourceTiming=this._collectResourceTiming;let i="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise((t,n)=>{e.reloadPromise={resolve:t,reject:n}})}else e.actor=this.dispatcher.getActor(),i="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:i,data:n},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}})}_getOverzoomParameters(e){if(e.tileID.canonical.z<=this.maxzoom)return;if(void 0===this.map._zoomLevelsToOverscale)return;const t=e.tileID.scaledTo(this.maxzoom).canonical,n=t.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:t,overzoomRequest:this.map._requestManager.transformRequest(n,"Tile")}}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class K extends t.E{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},n),t.e(this,t.U(n,["url","scheme","tileSize"]))}load(){return t._(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){e._loaded=!1,e.fire(new t.l("dataloading",{dataType:"source"})),e._tileJSONRequest=new AbortController;try{const i=yield G(e._options,e.map._requestManager,e._tileJSONRequest,e.map._ownerWindow);e._tileJSONRequest=null,e._loaded=!0,i&&(t.e(e,i),i.bounds&&(e.tileBounds=new Y(i.bounds,e.minzoom,e.maxzoom)),e.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(n){e._tileJSONRequest=null,e._loaded=!0,t.Z(n)||e.fire(new t.k(n))}}()})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const i=yield y.getImage(this.map._requestManager.transformRequest(n,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(i&&i.data){this.map._refreshExpiredTiles&&(i.cacheControl||i.expires)&&e.setExpiryData({cacheControl:i.cacheControl,expires:i.expires});const n=this.map.painter.context,r=n.gl,o=i.data;e.texture=this.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.T(n,o,r.RGBA,{useMipmap:!0}),e.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}})}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class $ extends K{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return t._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i=this.map._requestManager.transformRequest(n,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const n=yield y.getImage(i,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){const i=n.data;this.map._refreshExpiredTiles&&(n.cacheControl||n.expires)&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const r=t.b(i)&&t.$()?i:yield this.readImageNow(i),o={type:this.type,uid:e.uid,source:this.id,rawImageData:r,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:o});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}})}readImageNow(e){return t._(this,void 0,void 0,function*(){if("undefined"!=typeof VideoFrame&&t.a0()){const n=e.width+2,i=e.height+2;try{return new t.R({width:n,height:i},yield t.a1(e,-1,-1,n,i))}catch(e){}}return s.getImageData(e,1)})}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.a2(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},l[new t.a2(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.a2(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.a2(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}function Q(e){return"GeometryCollection"===e.type?e.geometries.map(e=>e.coordinates).flat(1/0):e.coordinates.flat(1/0)}function J(e){const t=new W;let n;switch(e.type){case"FeatureCollection":n=e.features.map(e=>Q(e.geometry)).flat(1/0);break;case"Feature":n=Q(e.geometry);break;default:n=Q(e)}if(0==n.length)return t;for(let i=0;i<n.length-1;i+=2)t.extend([n[i],n[i+1]]);return t}class ee extends t.E{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:n.data},this.actor=i.getActor(),this.setEventedParent(r),this._data="string"==typeof n.data?{url:n.data}:{geojson:n.data},this._options=t.e({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,void 0!==n.clusterMaxZoom&&this.maxzoom<=n.clusterMaxZoom&&t.w('The maxzoom value "'.concat(this.maxzoom,'" is expected to be greater than the clusterMaxZoom value "').concat(n.clusterMaxZoom,'".')),this.workerOptions=t.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(void 0!==n.buffer?n.buffer:128),tolerance:this._pixelsToTileUnits(void 0!==n.tolerance?n.tolerance:.375),extent:t.a5,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(n.clusterMaxZoom),minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.a5,radius:this._pixelsToTileUnits(n.clusterRadius||50),log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return void 0!==this._pendingWorkerUpdate.data||void 0!==this._pendingWorkerUpdate.diff||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(e){return e*(t.a5/this.tileSize)}_getClusterMaxZoom(e){const n=e?Math.round(e):this.maxzoom-1;return Number.isInteger(e)||void 0===e||t.w("Integer expected for option 'clusterMaxZoom': provided value \"".concat(e,'" rounded to "').concat(n,'"')),n}load(){return t._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e,t){this._data="string"==typeof e?{url:e}:{geojson:e},this._pendingWorkerUpdate={data:e};const n=this._updateWorkerData();return t?n:this}updateData(e,n){this._pendingWorkerUpdate.diff=t.a6(this._pendingWorkerUpdate.diff,e);const i=this._updateWorkerData();return n?i:this}getData(){return t._(this,void 0,void 0,function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getBounds(){return t._(this,void 0,void 0,function*(){return J(yield this.getData())})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(e.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,n){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:n}})}_updateWorkerData(){return t._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void t.w("No pending worker updates for GeoJSONSource ".concat(this.id,"."));const{data:e,diff:n}=this._pendingWorkerUpdate,i=this._getLoadGeoJSONParameters(e,n);void 0!==e?this._pendingWorkerUpdate.data=void 0:n&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(i)})}_getLoadGeoJSONParameters(e,n){const i=t.e({type:this.type},this.workerOptions);return"string"==typeof e?(i.request=this.map._requestManager.transformRequest(s.resolveURL(e),"Source"),i.request.collectResourceTiming=this._collectResourceTiming,i):void 0!==e?(i.data=e,i):n?(i.dataDiff=n,i):i}_dispatchWorkerUpdate(e){return t._(this,void 0,void 0,function*(){this._isUpdatingWorker=!0,this.fire(new t.l("dataloading",{dataType:"source"}));try{const n=yield this.actor.sendAsync({type:"LD",data:e});if(this._isUpdatingWorker=!1,this._removed||n.abandoned)return void this.fire(new t.l("dataabort",{dataType:"source"}));n.data&&(this._data={geojson:n.data});const i=this._applyDiffToSource(e.dataDiff),r=this._getShouldReloadTileOptions(i),o={dataType:"source"};this._applyResourceTiming(o,n),this.fire(new t.l("data",Object.assign(Object.assign({},o),{sourceDataType:"metadata"}))),this.fire(new t.l("data",Object.assign(Object.assign({},o),{sourceDataType:"content",shouldReloadTileOptions:r})))}catch(e){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new t.l("dataabort",{dataType:"source"}));this.fire(new t.k(e))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}})}_applyResourceTiming(e,n){var i;if(!this._collectResourceTiming)return;const r=null===(i=n.resourceTiming)||void 0===i?void 0:i[this.id];if(!r)return;const o=r.slice(0);(null==o?void 0:o.length)&&t.e(e,{resourceTiming:o})}_applyDiffToSource(e){if(!e)return;const n="string"==typeof this.promoteId?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const e=t.a7(this._data.geojson,n);if(!e)throw new Error('GeoJSONSource "'.concat(this.id,'": GeoJSON data is not compatible with updateData'));this._data={updateable:e}}if(!this._data.updateable)return;const i=t.a8(this._data.updateable,e,n);return e.removeAll||this._options.cluster?void 0:i}_getShouldReloadTileOptions(e){if(e)return{affectedBounds:e.filter(Boolean).map(e=>J(e))}}shouldReloadTile(e,n){let{affectedBounds:i}=n;if("loading"===e.state)return!0;if("unloaded"===e.state)return!1;const{buffer:r,extent:o}=this.workerOptions.geojsonVtOptions,a=function(e){let{x:n,y:i,z:r}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=t.a3((n-o)/Math.pow(2,r)),s=t.a4((i+1+o)/Math.pow(2,r)),l=t.a3((n+1+o)/Math.pow(2,r)),c=t.a4((i-o)/Math.pow(2,r));return new W([a,s],[l,c])}(e.tileID.canonical,r/o);for(const t of i)if(a.intersects(t))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(e){return t._(this,void 0,void 0,function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const n={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const i=yield this.actor.sendAsync({type:t,data:n},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(i,this.map.painter,"RT"===t)})}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class te extends t.E{constructor(e,t,n,i){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=t}load(e){return t._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield y.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this._loaded=!0,t.Z(e)||this.fire(new t.k(e))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const n=e.map(t.a9.fromLngLat);var i;return this.tileID=function(e){const n=t.aa.fromPoints(e),i=n.width(),r=n.height(),o=Math.max(i,r),a=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),s=Math.pow(2,a);return new t.ac(a,Math.floor((n.minX+n.maxX)/2*s),Math.floor((n.minY+n.maxY)/2*s))}(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map(e=>this.tileID.getTilePoint(e)._round()),this.flippedWindingOrder=((i=this.tileCoords)[1].x-i[0].x)*(i[2].y-i[0].y)-(i[1].y-i[0].y)*(i[2].x-i[0].x)<0,this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.texture||(this.texture=new t.T(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){const{minX:n,minY:i,maxX:r,maxY:o}=t.aa.fromPoints(e),a={};for(let s=0;s<=t.ab;s++){const e=Math.pow(2,s),t=Math.floor(n*e),l=Math.floor(i*e),c=Math.floor(r*e),u=Math.floor(o*e),h=(t%e+e)%e,d=c%e,p=Math.floor(t/e),f=Math.floor(c/e);a[s]={minWrap:p,maxWrap:f,minTileXWrapped:h,maxTileXWrapped:d,minTileY:l,maxTileY:u}}return a}}class ne extends te{constructor(e,t,n,i){super(e,t,n,i),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.ad(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.k(e))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.k(new t.ae("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.T(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ie extends te{constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new t.k(new t.ae("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.k(new t.ae("sources.".concat(e),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.k(new t.ae("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.k(new t.ae("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.k(new t.ae("sources.".concat(e),null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){return t._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,i=n.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new t.T(n,this.canvas,i.RGBA,{premultiply:!0}),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const re={},oe=e=>{switch(e){case"geojson":return ee;case"image":return te;case"raster":return K;case"raster-dem":return $;case"vector":return X;case"video":return ne;case"canvas":return ie}return re[e]},ae="RTLPluginLoaded";class se extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=V()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(e=>{throw this.status="error",e})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){if(t.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(t.url=s.resolveURL(e),!t.url)throw new Error("requested url ".concat(e," is invalid"));if("unavailable"===t.status){if(!n)return t._requestImport();t.status="deferred",t._syncState(t.status)}else if("requested"===t.status)return t._requestImport()}()})}_requestImport(){return t._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.l(ae))})}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let le=null;function ce(){return le||(le=new se),le}var ue,he;!function(e){e[e.Base=0]="Base",e[e.Parent=1]="Parent"}(ue||(ue={})),function(e){e[e.Departing=0]="Departing",e[e.Incoming=1]="Incoming"}(he||(he={}));class de{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=e,this.uid=t.af(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(e){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(e||!this.holdingForSymbolFade())}setCrossFadeLogic(e){let{fadingRole:t,fadingDirection:n,fadingParentID:i,fadeEndTime:r}=e;this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=n,this.fadingParentID=i,this.fadeEndTime=r}setSelfFadeLogic(e){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=e}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=c(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData,this.latestFeatureIndex.encoding=e.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const i of e){const e=i.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){i.layers=e,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)n[t.id]=i}}return n}(e.buckets,null==n?void 0:n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.ah){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.ah&&n.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),this.dashPositions=e.dashPositions}else this.collisionBoxArray=new t.ag}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new t.T(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new t.T(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,i,r,o,a,s,l,c,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l,getElevation:u},e,t,n):{}}querySourceFeatures(e,n){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const r=i.loadVTLayers(),o=n&&n.sourceLayer?n.sourceLayer:"",a=r[t.ai]||r[o];if(!a)return;const s=t.aj(null==n?void 0:n.filter,null==n?void 0:n.globalState),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<a.length;d++){const n=a.feature(d);if(s.needGeometry){const e=t.ak(n,!0);if(!s.filter(new t.H(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.H(this.tileID.overscaledZ),n))continue;const r=i.getId(n,o),p=new t.al(n,l,c,u,r);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.am(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(n)if(this.expirationTime<n)t=!0;else{const i=this.expirationTime-n;i?this.expirationTime=e+Math.max(i,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!n.style.hasLayer(r))continue;const o=this.buckets[r],a=o.layers[0].sourceLayer||t.ai,s=i[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;o.update(l,s,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const c=n&&n.style&&n.style.getLayer(r);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForSymbolFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(e){this.symbolFadeHoldUntil=c()+e}setDependencies(e,t){const n={};for(const i of t)n[i]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}}class pe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,i){const r=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},t.e(this.stateChanges[e][r],i),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])i[t]||(this.deletedStates[e][r][t]=null)}else for(const t in i)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(n in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][n]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}getState(e,n){const i=String(n),r=t.e({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,n){const i={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const e={};for(const n in this.stateChanges[r])this.state[r][n]||(this.state[r][n]={}),t.e(this.state[r][n],this.stateChanges[r][n]),e[n]=this.state[r][n];i[r]=e}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const e={};if(null===this.deletedStates[r])for(const t in this.state[r])e[t]={},this.state[r][t]={};else for(const t in this.deletedStates[r]){if(null===this.deletedStates[r][t])this.state[r][t]={};else for(const e of Object.keys(this.deletedStates[r][t]))delete this.state[r][t][e];e[t]=this.state[r][t]}i[r]=i[r]||{},t.e(i[r],e)}this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length&&e.setFeatureState(i,n)}}const fe=89.25;function me(e,n){const i=t.an(n.lat,-t.ao,t.ao);return new t.P(t.Y(n.lng)*e,t.X(i)*e)}function ge(e,n){return new t.a9(n.x/e,n.y/e).toLngLat()}function ye(e){return e.cameraToCenterDistance*Math.min(.85*Math.tan(t.ap(90-e.pitch)),Math.tan(t.ap(fe-e.pitch)))}function ve(e,n){const i=e.canonical,r=n/t.aq(i.z),o=i.x+Math.pow(2,i.z)*e.wrap,a=t.ar(new Float64Array(16));return t.O(a,a,[o*r,i.y*r,0]),t.Q(a,a,[r/t.a5,r/t.a5,1]),a}function _e(e,n,i,r,o){const a=t.a9.fromLngLat(e,n),s=o*t.as(1,e.lat),{x:l,y:c,z:u}=xe(i,r);return new t.a9(a.x+s*-l,a.y+s*-c,a.z+s*-u)}function xe(e,n){const i=t.ap(e),r=t.ap(n),o=Math.cos(-i),a=Math.sin(i);return{x:a*Math.sin(r),y:-a*Math.cos(r),z:o}}function be(e,t,n){const i=t.intersectsFrustum(e);if(!n||0===i)return i;const r=t.intersectsPlane(n);return 0===r?0:2===i&&2===r?2:1}function we(e,t,n){let i=0;const r=(n-t)/10;for(let o=0;o<10;o++)i+=r*Math.pow(Math.cos(t+(o+.5)/10*(n-t)),e);return i}function De(e,n){return function(i,r,o,a,s){const l=2*((e-1)/t.at(Math.cos(t.ap(fe-s))/Math.cos(t.ap(fe)))-1),c=Math.acos(o/a),u=2*we(l-1,0,t.ap(s/2)),h=Math.min(t.ap(fe),c+t.ap(s/2)),d=we(l-1,Math.min(h,c-t.ap(s/2)),h),p=Math.atan(r/o),f=Math.hypot(r,o);let m=i;return m+=t.at(a/f/Math.max(.5,Math.cos(t.ap(s/2)))),m+=l*t.at(Math.cos(p))/2,m-=t.at(Math.max(1,d/u/n))/2,m}}const Ee=De(9.314,3);function Ce(e,n){const i=(n.roundZoom?Math.round:Math.floor)(e.zoom+t.at(e.tileSize/n.tileSize));return Math.max(0,i)}function Ae(e,n){const i=e.getCameraFrustum(),r=e.getClippingPlane(),o=e.screenPointToMercatorCoordinate(e.getCameraPoint()),a=t.a9.fromLngLat(e.center,e.elevation);o.z=a.z+Math.cos(e.pitchInRadians)*e.cameraToCenterDistance/e.worldSize;const s=e.getCoveringTilesDetailsProvider(),l=s.allowVariableZoom(e,n),c=Ce(e,n),u=n.minzoom||0,h=void 0!==n.maxzoom?n.maxzoom:e.maxZoom,d=Math.min(Math.max(0,c),h),p=Math.pow(2,d),f=[p*o.x,p*o.y,0],m=[p*a.x,p*a.y,0],g=Math.hypot(a.x-o.x,a.y-o.y),y=Math.abs(a.z-o.z),v=Math.hypot(g,y),_=e=>({zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),x=[],b=[];if(e.renderWorldCopies&&s.allowWorldCopies())for(let t=1;t<=3;t++)x.push(_(-t)),x.push(_(t));for(x.push(_(0));x.length>0;){const p=x.pop(),g=p.x,_=p.y;let w=p.fullyVisible;const D={x:g,y:_,z:p.zoom},E=s.getTileBoundingVolume(D,p.wrap,e.elevation,n);if(!w){const e=be(i,E,r);if(0===e)continue;w=2===e}const C=s.distanceToTile2d(o.x,o.y,D,E);let A=c;l&&(A=(n.calculateTileZoom||Ee)(e.zoom+t.at(e.tileSize/n.tileSize),C,y,v,e.fov)),A=(n.roundZoom?Math.round:Math.floor)(A),A=Math.max(0,A);const S=Math.min(A,h);if(p.wrap=s.getWrap(a,D,p.wrap),p.zoom>=S){if(p.zoom<u)continue;const e=d-p.zoom,i=f[0]-.5-(g<<e),r=f[1]-.5-(_<<e),o=n.reparseOverscaled?Math.max(p.zoom,A):p.zoom;b.push({tileID:new t.a2(p.zoom===h?o:p.zoom,p.wrap,p.zoom,g,_),distanceSq:t.au([m[0]-.5-g,m[1]-.5-_]),tileDistanceToCamera:Math.sqrt(i*i+r*r)})}else for(let e=0;e<4;e++)x.push({zoom:p.zoom+1,x:(g<<1)+e%2,y:(_<<1)+(e>>1),wrap:p.wrap,fullyVisible:w})}return b.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}const Se=t.aa.fromPoints([new t.P(0,0),new t.P(t.a5,t.a5)]);function Te(e){return"raster"===e||"image"===e||"video"===e}function Fe(e,t,n,i,r,o,a){if(!t.hasData())return!1;const{tileID:s,fadingRole:l,fadingDirection:c,fadingParentID:u}=t;if(l===ue.Base&&c===he.Incoming&&u)return n[u.key]=u,!0;const h=Math.max(s.overscaledZ-r,o);for(let d=s.overscaledZ-1;d>=h;d--){const r=s.scaledTo(d),o=e.getLoadedTile(r);if(o)return t.setCrossFadeLogic({fadingRole:ue.Base,fadingDirection:he.Incoming,fadingParentID:o.tileID,fadeEndTime:i+a}),o.setCrossFadeLogic({fadingRole:ue.Parent,fadingDirection:he.Departing,fadeEndTime:i+a}),n[r.key]=r,!0}return!1}function ke(e,t,n,i,r,o){if(!t.hasData())return!1;const a=t.tileID.children(r);let s=Pe(e,t,a,n,i,r,o);if(s)return!0;for(const l of a)Pe(e,t,l.children(r),n,i,r,o)&&(s=!0);return s}function Pe(e,t,n,i,r,o,a){if(n[0].overscaledZ>=o)return!1;let s=!1;for(const l of n){const n=e.getLoadedTile(l);if(!n)continue;const{fadingRole:o,fadingDirection:c,fadingParentID:u}=n;o===ue.Base&&c===he.Departing&&u||(n.setCrossFadeLogic({fadingRole:ue.Base,fadingDirection:he.Departing,fadingParentID:t.tileID,fadeEndTime:r+a}),t.setCrossFadeLogic({fadingRole:ue.Parent,fadingDirection:he.Incoming,fadeEndTime:r+a})),i[l.key]=l,s=!0}return s}function Me(e,t,n,i){const r=e.tileID;return!!e.selfFading||!e.hasData()&&!!t.has(r)&&(e.setSelfFadeLogic(n+i),!0)}function Ie(e,t){var n;e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let i=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,o=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+o)?i+=o:1===Math.abs(i-o)&&(i-=o)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,r),(null===(n=e.neighboringTiles)||void 0===n?void 0:n[a])&&(e.neighboringTiles[a].backfilled=!0)))}class je{constructor(){this._tiles={}}handleWrapJump(e){const t={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),t[i.tileID.key]=i}this._tiles=t}setFeatureState(e,t){for(const n in this._tiles)this._tiles[n].setFeatureState(e,t)}getAllTiles(){return Object.values(this._tiles)}getAllIds(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Object.values(this._tiles).map(e=>e.tileID).sort(t.aw).map(e=>e.key):Object.keys(this._tiles)}getTileById(e){return this._tiles[e]}setTile(e,t){this._tiles[e]=t}deleteTileById(e){delete this._tiles[e]}getLoadedTile(e){const t=this.getTileById(e.key);return(null==t?void 0:t.hasData())?t:null}isIdRenderable(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;return null===(n=this.getTileById(e))||void 0===n?void 0:n.isRenderable(t)}getRenderableIds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;const i=[];for(const t of this.getAllIds())this.isIdRenderable(t,n)&&i.push(this.getTileById(t));return n?i.sort((n,i)=>{const r=n.tileID,o=i.tileID,a=new t.P(r.canonical.x,r.canonical.y)._rotate(-e),s=new t.P(o.canonical.x,o.canonical.y)._rotate(-e);return r.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}).map(e=>e.tileID.key):i.map(e=>e.tileID).sort(t.aw).map(e=>e.key)}}class Ne extends t.E{constructor(e,n,i){super(),this.id=e,this.dispatcher=i,this.on("data",e=>this._dataHandler(e)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((e,t,n,i)=>{const r=new(oe(t.type))(e,t,n,i);if(r.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(r.id));return r})(e,n,i,this),this._inViewTiles=new je,this._outOfViewCache=new t.ax(0,e=>this._unloadTile(e)),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new pe,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){for(const t of this._inViewTiles.getAllTiles())t.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e),this._inViewTiles=new je}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e of this._inViewTiles.getAllTiles())if("loaded"!==e.state&&"errored"!==e.state)return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,i){return t._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,i)}catch(n){e.state="errored",404!==n.status?this._source.fire(new t.k(n,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const t of this._inViewTiles.getAllTiles())t.upload(e),t.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(e){var t;return this._inViewTiles.getRenderableIds(null===(t=this.transform)||void 0===t?void 0:t.bearingInRadians,e)}hasRenderableParent(e){const t=e.overscaledZ-1;if(t>=this._source.minzoom){const n=this.getLoadedTile(e.scaledTo(t));if(n)return this._inViewTiles.isIdRenderable(n.tileID.key)}return!1}reload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const n of this._inViewTiles.getAllIds()){const i=this._inViewTiles.getTileById(n);t&&!this._source.shouldReloadTile(i,t)||(e?this._reloadTile(n,"expired"):"errored"!==i.state&&this._reloadTile(n,"reloading"))}}}_reloadTile(e,n){return t._(this,void 0,void 0,function*(){const t=this._inViewTiles.getTileById(e);t&&("loading"!==t.state&&(t.state=n),yield this._loadTile(t,e,n))})}_tileLoaded(e,n,i){e.timeAdded=c(),e.selfFading&&(e.fadeEndTime=e.timeAdded+this._rasterFadeDuration),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&function(e,t){var n,i;const r=t.getRenderableIds();for(const o of r){if(!e.neighboringTiles||!e.neighboringTiles[o])continue;const r=t.getTileById(o);e.neighboringTiles[o].backfilled||Ie(e,r),(null===(i=null===(n=r.neighboringTiles)||void 0===n?void 0:n[e.tileID.key])||void 0===i?void 0:i.backfilled)||Ie(r,e)}}(e,this._inViewTiles),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.l("data",{dataType:"source",tile:e,coord:e.tileID}))}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._inViewTiles.getTileById(e)}_retainLoadedChildren(e,t){const n=this._getLoadedDescendents(t),i=new Set;for(const r of t){const t=n[r.key];if(!(null==t?void 0:t.length)){i.add(r);continue}const o=r.overscaledZ+Ne.maxOverzooming,a=t.filter(e=>e.tileID.overscaledZ<=o);if(!a.length){i.add(r);continue}const s=Math.min(...a.map(e=>e.tileID.overscaledZ)),l=a.filter(e=>e.tileID.overscaledZ===s).map(e=>e.tileID);for(const n of l)e[n.key]=n;this._areDescendentsComplete(l,s,r.overscaledZ)||i.add(r)}return i}_getLoadedDescendents(e){var t;const n={};for(const i of this._inViewTiles.getAllTiles().filter(e=>e.hasData()))for(const r of e)i.tileID.isChildOf(r)&&(n[t=r.key]||(n[t]=[])).push(i);return n}_areDescendentsComplete(e,t,n){return 1===e.length&&e[0].isOverscaled()?e[0].overscaledZ===t:Math.pow(4,t-n)===e.length}getLoadedTile(e){return this._inViewTiles.getLoadedTile(e)}updateCacheSize(e){const n=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(n*i*(null===this._maxTileCacheZoomLevels?t.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._outOfViewCache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);this._prevLng=e,t&&(this._inViewTiles.handleWrapJump(t),this._resetTileReloadTimers())}update(e,n){if(!this._sourceLoaded||this._paused)return;let i;this.transform=e,this.terrain=n,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new t.a2(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(i=Ae(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:"vector"===this._source.type&&void 0!==this.map._zoomLevelsToOverscale?e.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(i=i.filter(e=>this._source.hasTile(e)))):i=[],this.usedForTerrain&&(i=this._addTerrainIdealTiles(i));const r=0===i.length&&!this._updated&&this._didEmitContent;this._updated=!0,r&&this.fire(new t.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const o=Ce(e,this._source),a=this._updateRetainedTiles(i,o),s=Te(this._source.type);s&&this._rasterFadeDuration>0&&!n&&function(e,n,i,r,o,a,s){const l=c(),u=t.av(n);for(const t of n){const n=e.getTileById(t.key);n.fadingDirection!==he.Departing&&0!==n.fadeOpacity||n.resetFadeLogic(),Fe(e,n,i,l,r,o,s)||ke(e,n,i,l,a,s)||Me(n,u,l,s)||n.resetFadeLogic()}}(this._inViewTiles,i,a,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),s?this._cleanUpRasterTiles(a):this._cleanUpVectorTiles(a)}_cleanUpRasterTiles(e){for(const t of this._inViewTiles.getAllIds())e[t]||this._removeTile(t)}_cleanUpVectorTiles(e){for(const t of this._inViewTiles.getAllIds()){const n=this._inViewTiles.getTileById(t);e[t]?n.clearSymbolFadeHold():n.hasSymbolBuckets?n.holdingForSymbolFade()?n.symbolFadeFinished()&&this._removeTile(t):n.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(t)}}_addTerrainIdealTiles(e){const t=[];for(const n of e)if(n.canonical.z>this._source.minzoom){const e=n.scaledTo(n.canonical.z-1);t.push(e);const i=n.scaledTo(Math.max(this._source.minzoom,Math.min(n.canonical.z,5)));t.push(i)}return e.concat(t)}releaseSymbolFadeTiles(){for(const e of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(e).holdingForSymbolFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){var n;const i=new Set;for(const l of e)this._addTile(l).hasData()||i.add(l);const r=e.reduce((e,t)=>(e[t.key]=t,e),{}),o=this._retainLoadedChildren(r,i),a={},s=Math.max(t-Ne.maxUnderzooming,this._source.minzoom);for(const l of o){let e=this._inViewTiles.getTileById(l.key),t=null==e?void 0:e.wasRequested();for(let i=l.overscaledZ-1;i>=s;--i){const o=l.scaledTo(i);if(a[o.key])break;if(a[o.key]=!0,e=this.getTile(o),!e&&t&&(e=this._addTile(o)),e){const i=e.hasData();if((i||!(null===(n=this.map)||void 0===n?void 0:n.cancelPendingTileRequestsWhileZooming)||t)&&(r[o.key]=o),t=e.wasRequested(),i)break}}}return r}_addTile(e){let n=this._inViewTiles.getTileById(e.key);if(n)return n;n=this._outOfViewCache.getAndRemove(e),n&&(n.resetFadeLogic(),this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null));const i=n;return n||(n=new de(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._inViewTiles.setTile(e.key,n),i||this._source.fire(new t.l("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,t){this._clearTileReloadTimer(e);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},n))}_clearTileReloadTimer(e){const t=this._timers[e];t&&(clearTimeout(t),delete this._timers[e])}_resetTileReloadTimers(){for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e of this._inViewTiles.getAllIds()){const t=this._inViewTiles.getTileById(e);this._setTileReloadTimer(e,t)}}refreshTiles(e){for(const t of this._inViewTiles.getAllIds()){const n=this._inViewTiles.getTileById(t);(this._inViewTiles.isIdRenderable(t)||"errored"==n.state)&&e.some(e=>e.equals(n.tileID.canonical))&&this._reloadTile(t,"expired")}}_removeTile(e){const t=this._inViewTiles.getTileById(e);t&&(t.uses--,this._inViewTiles.deleteTileById(e),this._clearTileReloadTimer(e),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._outOfViewCache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}_dataHandler(e){"source"===e.dataType&&("metadata"!==e.sourceDataType?"content"===e.sourceDataType&&this._sourceLoaded&&!this._paused&&(this.reload(e.sourceDataChanged,e.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e of this._inViewTiles.getAllIds())this._removeTile(e);this._outOfViewCache.reset()}tilesIn(e,n,i){const r=[],o=this.transform;if(!o)return r;const a=o.getCoveringTilesDetailsProvider().allowWorldCopies(),s=i?o.getCameraQueryGeometry(e):e,l=e=>o.screenPointToMercatorCoordinate(e,this.terrain),c=this.transformBbox(e,l,!a),u=this.transformBbox(s,l,!a),h=this.getIds(),d=t.aa.fromPoints(u);for(let p=0;p<h.length;p++){const e=this._inViewTiles.getTileById(h[p]);if(e.holdingForSymbolFade())continue;const i=a?[e.tileID]:[e.tileID.unwrapTo(-1),e.tileID.unwrapTo(0)],s=Math.pow(2,o.zoom-e.tileID.overscaledZ),l=n*e.queryPadding*t.a5/e.tileSize/s;for(const n of i){const i=d.map(e=>n.getTilePoint(new t.a9(e.x,e.y)));if(i.expandBy(l),i.intersects(Se)){const t=c.map(e=>n.getTilePoint(e)),i=u.map(e=>n.getTilePoint(e));r.push({tile:e,tileID:a?n:n.unwrapTo(0),queryGeometry:t,cameraQueryGeometry:i,scale:s})}}}return r}transformBbox(e,n,i){let r=e.map(n);if(i){const i=t.aa.fromPoints(e);i.shrinkBy(.001*Math.min(i.width(),i.height()));const o=i.map(n);t.aa.fromPoints(r).covers(o)||(r=r.map(e=>e.x>.5?new t.a9(e.x-1,e.y,e.z):e))}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map(e=>this._inViewTiles.getTileById(e).tileID);return this.transform&&this.transform.populateCache(t),t}hasTransition(){return!!this._source.hasTransition()||!(!Te(this._source.type)||!function(e,t){if(t<=0)return!1;const n=c();for(const i of e.getAllTiles())if(i.fadeEndTime>=n)return!0;return!1}(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(e){this._rasterFadeDuration=e}setFeatureState(e,n,i){this._state.updateState(e=e||t.ai,n,i)}removeFeatureState(e,n,i){this._state.removeFeatureState(e=e||t.ai,n,i)}getFeatureState(e,n){return this._state.getState(e=e||t.ai,n)}setDependencies(e,t,n){const i=this._inViewTiles.getTileById(e);i&&i.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(n).hasDependency(e,t)&&this._reloadTile(n,"reloading");this._outOfViewCache.filter(n=>!n.hasDependency(e,t))}areTilesLoaded(){for(const e of this._inViewTiles.getAllTiles())if("loaded"!==e.state&&"errored"!==e.state)return!1;return!0}}Ne.maxUnderzooming=10,Ne.maxOverzooming=3;class Oe{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.an(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const o=n-1,a=this._distances[o],s=i-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}function Be(e,t){let n=!0;return"always"===e||"never"!==e&&"never"!==t||(n=!1),n}class Le{constructor(e,t,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(e,t,n,i){this._forEachCell(t-i,n-i,t+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(i)}_insertBoxCell(e,t,n,i,r,o){this.boxCells[r].push(o)}_insertCircleCell(e,t,n,i,r,o){this.circleCells[r].push(o)}_query(e,t,n,i,r,o,a){if(n<0||e>this.width||i<0||t>this.height)return[];const s=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=i){if(r)return[{key:null,x1:e,y1:t,x2:n,y2:i}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],i=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-i,y1:n-i,x2:t+i,y2:n+i})}}else this._forEachCell(e,t,n,i,this._queryCell,s,{hitTest:r,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(e,t,n,i){return this._query(e,t,n,i,!1,null)}hitTest(e,t,n,i,r,o){return this._query(e,t,n,i,!0,r,o).length>0}hitTestCircle(e,t,n,i,r){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:i,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},r),c.length>0}_queryCell(e,t,n,i,r,o,a,s){const{seenUids:l,hitTest:c,overlapMode:u}=a,h=this.boxCells[r];if(null!==h){const r=this.bboxes;for(const a of h)if(!l.box[a]){l.box[a]=!0;const h=4*a,d=this.boxKeys[a];if(e<=r[h+2]&&t<=r[h+3]&&n>=r[h+0]&&i>=r[h+1]&&(!s||s(d))&&(!c||!Be(u,d.overlapMode))&&(o.push({key:d,x1:r[h],y1:r[h+1],x2:r[h+2],y2:r[h+3]}),c))return!0}}const d=this.circleCells[r];if(null!==d){const r=this.circles;for(const a of d)if(!l.circle[a]){l.circle[a]=!0;const h=3*a,d=this.circleKeys[a];if(this._circleAndRectCollide(r[h],r[h+1],r[h+2],e,t,n,i)&&(!s||s(d))&&(!c||!Be(u,d.overlapMode))){const e=r[h],t=r[h+1],n=r[h+2];if(o.push({key:d,x1:e-n,y1:t-n,x2:e+n,y2:t+n}),c)return!0}}}return!1}_queryCellCircle(e,t,n,i,r,o,a,s){const{circle:l,seenUids:c,overlapMode:u}=a,h=this.boxCells[r];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const n=4*t,i=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(i))&&!Be(u,i.overlapMode))return o.push(!0),!0}}const d=this.circleCells[r];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t,i=this.circleKeys[t];if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(i))&&!Be(u,i.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,n,i,r,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(r.call(this,e,t,n,i,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,i,r,o){const a=i-e,s=r-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,i,r,o,a){const s=(o-i)/2,l=Math.abs(e-(i+s));if(l>s+n)return!1;const c=(a-r)/2,u=Math.abs(t-(r+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}function ze(e,n,r){const o=t.N();if(!e){const{vecSouth:e,vecEast:t}=Ve(n),r=i();r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],a=r,(d=(l=(s=r)[0])*(h=s[3])-(u=s[2])*(c=s[1]))&&(a[0]=h*(d=1/d),a[1]=-c*d,a[2]=-u*d,a[3]=l*d),o[0]=r[0],o[1]=r[1],o[4]=r[2],o[5]=r[3]}var a,s,l,c,u,h,d;return t.Q(o,o,[1/r,1/r,1]),o}function Re(e,n,i,r){if(e){const e=t.N();if(!n){const{vecSouth:t,vecEast:n}=Ve(i);e[0]=n[0],e[1]=n[1],e[4]=t[0],e[5]=t[1]}return t.Q(e,e,[r,r,1]),e}return i.pixelsToClipSpaceMatrix}function Ve(e){const n=Math.cos(e.rollInRadians),i=Math.sin(e.rollInRadians),r=Math.cos(e.pitchInRadians),o=Math.cos(e.bearingInRadians),a=Math.sin(e.bearingInRadians),s=t.aC();s[0]=-o*r*i-a*n,s[1]=-a*r*i+o*n;const l=t.aD(s);l<1e-9?t.aE(s):t.aF(s,s,1/l);const c=t.aC();c[0]=o*r*n-a*i,c[1]=a*r*n+o*i;const u=t.aD(c);return u<1e-9?t.aE(c):t.aF(c,c,1/u),{vecEast:c,vecSouth:s}}function Ue(e,n,i,r){let o;r?(o=[e,n,r(e,n),1],t.aH(o,o,i)):(o=[e,n,0,1],ot(o,o,i));const a=o[3];return{point:new t.P(o[0]/a,o[1]/a),signedDistanceFromCamera:a,isOccluded:!1}}function qe(e,t){return.5+e/t*.5}function Ze(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function He(e,n,i,r,o,a,s,l,c,u,h,d,p){const f=i?e.textSizeData:e.iconSizeData,m=t.ay(f,n.transform.zoom),g=[256/n.width*2+1,256/n.height*2+1],y=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;y.clear();const v=e.lineVertexArray,_=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,x=n.transform.width/n.transform.height;let b=!1;for(let w=0;w<_.length;w++){const i=_.get(w);if(i.hidden||i.writingMode===t.az.vertical&&!b){rt(i.numGlyphs,y);continue}b=!1;const D=new t.P(i.anchorX,i.anchorY),E={getElevation:p,pitchedLabelPlaneMatrix:r,lineVertexArray:v,pitchWithMap:a,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:D,unwrappedTileID:c,width:u,height:h,translation:d},C=Je(i.anchorX,i.anchorY,E);if(!Ze(C.point,g)){rt(i.numGlyphs,y);continue}const A=qe(n.transform.cameraToCenterDistance,C.signedDistanceFromCamera),S=t.aA(f,m,i),T=a?S*n.transform.getPitchedTextCorrection(i.anchorX,i.anchorY,c)/A:S*A,F=Ye({projectionContext:E,pitchedLabelPlaneMatrixInverse:o,symbol:i,fontSize:T,flip:!1,keepUpright:s,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:y,aspectRatio:x,rotateToLine:l});b=F.useVertical,(F.notEnoughRoom||b||F.needsFlipping&&Ye({projectionContext:E,pitchedLabelPlaneMatrixInverse:o,symbol:i,fontSize:T,flip:!0,keepUpright:s,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:y,aspectRatio:x,rotateToLine:l}).notEnoughRoom)&&rt(i.numGlyphs,y)}i?e.text.dynamicLayoutVertexBuffer.updateData(y):e.icon.dynamicLayoutVertexBuffer.updateData(y)}function Ge(e,t,n,i,r,o,a,s){const l=o.glyphStartIndex+o.numGlyphs,c=o.lineStartIndex,u=o.lineStartIndex+o.lineLength,h=t.getoffsetX(o.glyphStartIndex),d=t.getoffsetX(l-1),p=nt(e*h,n,i,r,o.segment,c,u,s,a);if(!p)return null;const f=nt(e*d,n,i,r,o.segment,c,u,s,a);return f?s.projectionCache.anyProjectionOccluded?null:{first:p,last:f}:null}function We(e,n,i,r){return e===t.az.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.az.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function Ye(e){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:i,symbol:r,fontSize:o,flip:a,keepUpright:s,glyphOffsetArray:l,dynamicLayoutVertexArray:c,aspectRatio:u,rotateToLine:h}=e,d=o/24,p=r.lineOffsetX*d,f=r.lineOffsetY*d;let m;if(r.numGlyphs>1){const e=r.glyphStartIndex+r.numGlyphs,t=r.lineStartIndex,o=r.lineStartIndex+r.lineLength,c=Ge(d,l,p,f,a,r,h,n);if(!c)return{notEnoughRoom:!0};const g=Qe(c.first.point.x,c.first.point.y,n,i),y=Qe(c.last.point.x,c.last.point.y,n,i);if(s&&!a){const e=We(r.writingMode,g,y,u);if(e)return e}m=[c.first];for(let i=r.glyphStartIndex+1;i<e-1;i++){const e=nt(d*l.getoffsetX(i),p,f,a,r.segment,t,o,n,h);if(!e)return{notEnoughRoom:!0};m.push(e)}m.push(c.last)}else{if(s&&!a){const e=$e(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,o=r.lineStartIndex+r.segment+1,a=new t.P(n.lineVertexArray.getx(o),n.lineVertexArray.gety(o)),s=$e(a.x,a.y,n),l=s.signedDistanceFromCamera>0?s.point:Xe(n.tileAnchorPoint,a,e,1,n),c=Qe(e.x,e.y,n,i),h=Qe(l.x,l.y,n,i),d=We(r.writingMode,c,h,u);if(d)return d}const e=nt(d*l.getoffsetX(r.glyphStartIndex),p,f,a,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,n,h);if(!e||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};m=[e]}for(const g of m)t.aG(c,g.point,g.angle);return{}}function Xe(e,t,n,i,r){const o=e.add(e.sub(t)._unit()),a=$e(o.x,o.y,r).point,s=n.sub(a);return n.add(s._mult(i/s.mag()))}function Ke(e,n,i){const r=n.projectionCache;if(r.projections[e])return r.projections[e];const o=new t.P(n.lineVertexArray.getx(e),n.lineVertexArray.gety(e)),a=$e(o.x,o.y,n);if(a.signedDistanceFromCamera>0)return r.projections[e]=a.point,r.anyProjectionOccluded=r.anyProjectionOccluded||a.isOccluded,a.point;const s=e-i.direction;return Xe(0===i.distanceFromAnchor?n.tileAnchorPoint:new t.P(n.lineVertexArray.getx(s),n.lineVertexArray.gety(s)),o,i.previousVertex,i.absOffsetX-i.distanceFromAnchor+1,n)}function $e(e,t,n){const i=e+n.translation[0],r=t+n.translation[1];let o;return n.pitchWithMap?(o=Ue(i,r,n.pitchedLabelPlaneMatrix,n.getElevation),o.isOccluded=!1):(o=n.transform.projectTileCoordinates(i,r,n.unwrappedTileID,n.getElevation),o.point.x=(.5*o.point.x+.5)*n.width,o.point.y=(.5*-o.point.y+.5)*n.height),o}function Qe(e,n,i,r){if(i.pitchWithMap){const o=[e,n,0,1];return t.aH(o,o,r),i.transform.projectTileCoordinates(o[0]/o[3],o[1]/o[3],i.unwrappedTileID,i.getElevation).point}return{x:e/i.width*2-1,y:1-n/i.height*2}}function Je(e,t,n){return n.transform.projectTileCoordinates(e,t,n.unwrappedTileID,n.getElevation)}function et(e,t,n){return e._unit()._perp()._mult(t*n)}function tt(e,n,i,r,o,a,s,l,c){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const u=i.add(n);if(e+c.direction<r||e+c.direction>=o)return l.projectionCache.offsets[e]=u,u;const h=Ke(e+c.direction,l,c),d=et(h.sub(i),s,c.direction),p=i.add(d),f=h.add(d);return l.projectionCache.offsets[e]=t.aI(a,u,p,f)||u,l.projectionCache.offsets[e]}function nt(e,t,n,i,r,o,a,s,l){const c=i?e-t:e+t;let u=c>0?1:-1,h=0;i&&(u*=-1,h=Math.PI),u<0&&(h+=Math.PI);let d,p=u>0?o+r:o+r+1;s.projectionCache.cachedAnchorPoint?d=s.projectionCache.cachedAnchorPoint:(d=$e(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,s.projectionCache.cachedAnchorPoint=d);let f,m,g=d,y=d,v=0,_=0;const x=Math.abs(c),b=[];let w;for(;v+_<=x;){if(p+=u,p<o||p>=a)return null;v+=_,y=g,m=f;const e={absOffsetX:x,direction:u,distanceFromAnchor:v,previousVertex:y};if(g=Ke(p,s,e),0===n)b.push(y),w=g.sub(y);else{let t;const i=g.sub(y);t=0===i.mag()?et(Ke(p+u,s,e).sub(g),n,u):et(i,n,u),m||(m=y.add(t)),f=tt(p,t,g,o,a,m,n,s,e),b.push(m),w=f.sub(m)}_=w.mag()}const D=w._mult((x-v)/_)._add(m||y),E=h+Math.atan2(g.y-y.y,g.x-y.x);return b.push(D),{point:D,angle:l?E:0,path:b}}const it=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rt(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(it,3*e)}}function ot(e,t,n){const i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e[3]=n[3]*i+n[7]*r+n[15],e}const at=100;class st{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Le(e.width+200,e.height+200,25),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Le(e.width+200,e.height+200,25);this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+at,this.screenBottomBoundary=e.height+at,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,n,i,r,o,a,s,l,c,u,h){const d=this.projectAndGetPerspectiveRatio(e.anchorPointX+s[0],e.anchorPointY+s[1],r,c,h),p=n*d.perspectiveRatio;let f;if(o||a)f=this._projectCollisionBox(e,p,i,r,o,a,s,d,c,u,h);else{const t=d.x+(u?u.x*p:0),n=d.y+(u?u.y*p:0);f={allPointsOccluded:!1,box:[t+e.x1*p,n+e.y1*p,t+e.x2*p,n+e.y2*p]}}const[m,g,y,v]=f.box,_=o?f.allPointsOccluded:d.isOccluded;let x=_;return x||(x=d.perspectiveRatio<this.perspectiveRatioCutoff),x||(x=!this.isInsideGrid(m,g,y,v)),x||"always"!==t&&this.grid.hitTest(m,g,y,v,t,l)?{box:[m,g,y,v],placeable:!1,offscreen:!1,occluded:_}:{box:[m,g,y,v],placeable:!0,offscreen:this.isOffscreen(m,g,y,v),occluded:_}}placeCollisionCircles(e,n,i,r,o,a,s,l,c,u,h,d,p,f){const m=[],g=new t.P(n.anchorX,n.anchorY),y=this.getPerspectiveRatio(g.x,g.y,a,f),v=(c?o*this.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,a)/y:o*y)/t.aM,_={getElevation:f,pitchedLabelPlaneMatrix:s,lineVertexArray:i,pitchWithMap:c,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:g,unwrappedTileID:a,width:this.transform.width,height:this.transform.height,translation:p},x=Ge(v,r,n.lineOffsetX*v,n.lineOffsetY*v,!1,n,!1,_);let b=!1,w=!1,D=!0;if(x){const n=.5*h*y+d,i=new t.P(-100,-100),r=new t.P(this.screenRightBoundary,this.screenBottomBoundary),o=new Oe,a=x.first,s=x.last;let p=[];for(let e=a.path.length-1;e>=1;e--)p.push(a.path[e]);for(let e=1;e<s.path.length;e++)p.push(s.path[e]);const f=2.5*n;if(c){const e=this.projectPathToScreenSpace(p,_);p=e.some(e=>e.signedDistanceFromCamera<=0)?[]:e.map(e=>e.point)}let g=[];if(p.length>0){const e=p[0].clone(),n=p[0].clone();for(let t=1;t<p.length;t++)e.x=Math.min(e.x,p[t].x),e.y=Math.min(e.y,p[t].y),n.x=Math.max(n.x,p[t].x),n.y=Math.max(n.y,p[t].y);g=e.x>=i.x&&n.x<=r.x&&e.y>=i.y&&n.y<=r.y?[p]:n.x<i.x||e.x>r.x||n.y<i.y||e.y>r.y?[]:t.aJ([p],i.x,i.y,r.x,r.y)}for(const t of g){o.reset(t,.25*n);let i=0;i=o.length<=.5*n?1:Math.ceil(o.paddedLength/f)+1;for(let t=0;t<i;t++){const r=t/Math.max(i-1,1),a=o.lerp(r),s=a.x+at,c=a.y+at;m.push(s,c,n,0);const h=s-n,d=c-n,p=s+n,f=c+n;if(D=D&&this.isOffscreen(h,d,p,f),w=w||this.isInsideGrid(h,d,p,f),"always"!==e&&this.grid.hitTestCircle(s,c,n,e,u)&&(b=!0,!l))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!l&&b||!w||y<this.perspectiveRatioCutoff?[]:m,offscreen:D,collisionDetected:b}}projectPathToScreenSpace(e,n){const i=function(e,n){const i=t.N();return t.aB(i,n.pitchedLabelPlaneMatrix),e.map(e=>{const t=Ue(e.x,e.y,i,n.getElevation),r=n.transform.projectTileCoordinates(t.point.x,t.point.y,n.unwrappedTileID,n.getElevation);return r.point.x=(.5*r.point.x+.5)*n.width,r.point.y=(.5*-r.point.y+.5)*n.height,r})}(e,n);return function(e){let t=0,n=0,i=0,r=0;for(let o=0;o<e.length;o++)e[o].isOccluded?(i=o+1,r=0):(r++,r>n&&(n=r,t=i));return e.slice(t,t+n)}(i)}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[],i=new t.aa;for(const h of e){const e=new t.P(h.x+at,h.y+at);i.extend(e),n.push(e)}const{minX:r,minY:o,maxX:a,maxY:s}=i,l=this.grid.query(r,o,a,s).concat(this.ignoredGrid.query(r,o,a,s)),c={},u={};for(const h of l){const e=h.key;if(void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]={}),c[e.bucketInstanceId][e.featureIndex])continue;const i=[new t.P(h.x1,h.y1),new t.P(h.x2,h.y1),new t.P(h.x2,h.y2),new t.P(h.x1,h.y2)];t.aK(n,i)&&(c[e.bucketInstanceId][e.featureIndex]=!0,void 0===u[e.bucketInstanceId]&&(u[e.bucketInstanceId]=[]),u[e.bucketInstanceId].push(e.featureIndex))}return u}insertCollisionBox(e,t,n,i,r,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,i,r,o){const a=n?this.ignoredGrid:this.grid,s={bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:t};for(let l=0;l<e.length;l+=4)a.insertCircle(s,e[l],e[l+1],e[l+2])}projectAndGetPerspectiveRatio(e,n,i,r,o){if(o){let i;r?(i=[e,n,r(e,n),1],t.aH(i,i,o)):(i=[e,n,0,1],ot(i,i,o));const a=i[3];return{x:(i[0]/a+1)/2*this.transform.width+at,y:(-i[1]/a+1)/2*this.transform.height+at,perspectiveRatio:.5+this.transform.cameraToCenterDistance/a*.5,isOccluded:!1,signedDistanceFromCamera:a}}{const t=this.transform.projectTileCoordinates(e,n,i,r);return{x:(t.point.x+1)/2*this.transform.width+at,y:(1-t.point.y)/2*this.transform.height+at,perspectiveRatio:.5+this.transform.cameraToCenterDistance/t.signedDistanceFromCamera*.5,isOccluded:t.isOccluded,signedDistanceFromCamera:t.signedDistanceFromCamera}}}getPerspectiveRatio(e,t,n,i){const r=this.transform.projectTileCoordinates(e,t,n,i);return.5+this.transform.cameraToCenterDistance/r.signedDistanceFromCamera*.5}isOffscreen(e,t,n,i){return n<at||e>=this.screenRightBoundary||i<at||t>this.screenBottomBoundary}isInsideGrid(e,t,n,i){return n>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.ar([]);return t.O(e,e,[-100,-100,0]),e}_projectCollisionBox(e,n,i,r,o,a,s,l,c,u,h){let d=1,p=0,f=0,m=1;const g=e.anchorPointX+s[0],y=e.anchorPointY+s[1];if(a&&!o){const e=this.projectAndGetPerspectiveRatio(g+1,y,r,c,h),t=e.x-l.x,n=Math.atan((e.y-l.y)/t)+(t<0?Math.PI:0),i=Math.sin(n),o=Math.cos(n);d=o,p=i,f=-i,m=o}else if(!a&&o){const e=Ve(this.transform);d=e.vecEast[0],p=e.vecEast[1],f=e.vecSouth[0],m=e.vecSouth[1]}let v=l.x,_=l.y,x=n;o&&(v=g,_=y,x=Math.pow(2,-(this.transform.zoom-i.overscaledZ)),x*=this.transform.getPitchedTextCorrection(g,y,r),u||(x*=t.an(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),u&&(v+=d*u.x*x+f*u.y*x,_+=p*u.x*x+m*u.y*x);const b=e.x1*x,w=e.x2*x,D=(b+w)/2,E=e.y1*x,C=e.y2*x,A=(E+C)/2,S=[{offsetX:b,offsetY:E},{offsetX:D,offsetY:E},{offsetX:w,offsetY:E},{offsetX:w,offsetY:A},{offsetX:w,offsetY:C},{offsetX:D,offsetY:C},{offsetX:b,offsetY:C},{offsetX:b,offsetY:A}];let T=[];for(const{offsetX:k,offsetY:P}of S)T.push(new t.P(v+d*k+f*P,_+p*k+m*P));let F=!1;if(o){const e=T.map(e=>this.projectAndGetPerspectiveRatio(e.x,e.y,r,c,h));F=e.some(e=>!e.isOccluded),T=e.map(e=>new t.P(e.x,e.y))}else F=!0;return{box:t.aL(T),allPointsOccluded:!F}}}class lt{constructor(e,t,n,i){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class ct{constructor(e,t,n,i,r){this.text=new lt(e?e.text:null,t,n,r),this.icon=new lt(e?e.icon:null,t,i,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ut{constructor(e,t,n){this.text=e,this.icon=t,this.skipFade=n}}class ht{constructor(e,t,n,i,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class dt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function pt(e,n,i,r,o){const{horizontalAlign:a,verticalAlign:s}=t.aS(e);return new t.P(-(a-.5)*n+r[0]*o,-(s-.5)*i+r[1]*o)}class ft{constructor(e,t,n,i,r){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new st(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new dt(i),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const t=this.terrain;return t?(n,i)=>t.getElevation(e,n,i):null}getBucketParts(e,n,i,r){const o=i.getBucket(n),a=i.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=i.collisionBoxArray,l=o.layers[0].layout,c=o.layers[0].paint,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),h=i.tileSize/t.a5,d=i.tileID.toUnwrapped(),p="map"===l.get("text-rotation-alignment"),f=t.aN(i,1,this.transform.zoom),m=t.aO(this.collisionIndex.transform,i,c.get("text-translate"),c.get("text-translate-anchor")),g=t.aO(this.collisionIndex.transform,i,c.get("icon-translate"),c.get("icon-translate-anchor")),y=ze(p,this.transform,f);this.retainedQueryData[o.bucketInstanceId]=new ht(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);const v={bucket:o,layout:l,translationText:m,translationIcon:g,unwrappedTileID:d,pitchedLabelPlaneMatrix:y,scale:u,textPixelRatio:h,holdingForFade:i.holdingForSymbolFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.ay(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v})}attemptAnchorPlacement(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x){const b=t.aP[e.textAnchor],w=[e.textOffset0,e.textOffset1],D=pt(b,i,r,w,o),E=this.collisionIndex.placeCollisionBox(n,d,l,c,u,s,a,g,h.predicate,_,D,x);if((!v||this.collisionIndex.placeCollisionBox(v,d,l,c,u,s,a,y,h.predicate,_,D,x).placeable)&&E.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(e=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:w,width:i,height:r,anchor:b,textBoxScale:o,prevAnchor:e},this.markUsedJustification(f,b,p,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,p),this.placedOrientations[p.crossTileID]=m),{shift:D,placedGlyphBoxes:E}}}placeLayerBucketPart(e,n,i){const{bucket:r,layout:o,translationText:a,translationIcon:s,unwrappedTileID:l,pitchedLabelPlaneMatrix:c,textPixelRatio:u,holdingForFade:h,collisionBoxArray:d,partiallyEvaluatedTextSize:p,collisionGroup:f}=e.parameters,m=o.get("text-optional"),g=o.get("icon-optional"),y=t.aQ(o,"text-overlap","text-allow-overlap"),v="always"===y,_=t.aQ(o,"icon-overlap","icon-allow-overlap"),x="always"===_,b="map"===o.get("text-rotation-alignment"),w="map"===o.get("text-pitch-alignment"),D="none"!==o.get("icon-text-fit"),E="viewport-y"===o.get("symbol-z-order"),C=v&&(x||!r.hasIconData()||g),A=x&&(v||!r.hasTextData()||m);!r.collisionArrays&&d&&r.deserializeCollisionBoxes(d);const S=this.retainedQueryData[r.bucketInstanceId].tileID,T=this._getTerrainElevationFunc(S),F=this.transform.getFastPathSimpleProjectionMatrix(S),k=(e,d,x)=>{var E,k;if(n[e.crossTileID])return;if(h)return void(this.placements[e.crossTileID]=new ut(!1,!1,!1));let P=!1,M=!1,I=!0,j=null,N={box:null,placeable:!1,offscreen:null,occluded:!1},O={placeable:!1},B=null,L=null,z=null,R=0,V=0,U=0;d.textFeatureIndex?R=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(R=e.featureIndex),d.verticalTextFeatureIndex&&(V=d.verticalTextFeatureIndex);const q=d.textBox;if(q){const n=n=>{let i=t.az.horizontal;if(r.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,i=t,this.markUsedOrientation(r,i,e))}return i},o=(n,i)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const e of r.writingModes)if(e===t.az.vertical?(N=i(),O=N):N=n(),N&&N.placeable)break}else N=n()},c=e.textAnchorOffsetStartIndex,h=e.textAnchorOffsetEndIndex;if(h===c){const i=(t,n)=>{const i=this.collisionIndex.placeCollisionBox(t,y,u,S,l,w,b,a,f.predicate,T,void 0,F);return i&&i.placeable&&(this.markUsedOrientation(r,n,e),this.placedOrientations[e.crossTileID]=n),i};o(()=>i(q,t.az.horizontal),()=>{const n=d.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?i(n,t.az.vertical):{box:null,offscreen:null}}),n(N&&N.placeable)}else{let p=t.aP[null===(k=null===(E=this.prevPlacement)||void 0===E?void 0:E.variableOffsets[e.crossTileID])||void 0===k?void 0:k.anchor];const m=(t,n,o)=>{const d=t.x2-t.x1,m=t.y2-t.y1,g=e.textBoxScale,v=D&&"never"===_?n:null;let x=null,E="never"===y?1:2,C="never";p&&E++;for(let i=0;i<E;i++){for(let n=c;n<h;n++){const i=r.textAnchorOffsets.get(n);if(p&&i.textAnchor!==p)continue;const c=this.attemptAnchorPlacement(i,t,d,m,g,b,w,u,S,l,f,C,e,r,o,a,s,v,T);if(c&&(x=c.placedGlyphBoxes,x&&x.placeable))return P=!0,j=c.shift,x}p?p=null:C=y}return i&&!x&&(x={box:this.collisionIndex.placeCollisionBox(q,"always",u,S,l,w,b,a,f.predicate,T,void 0,F).box,offscreen:!1,placeable:!1,occluded:!1}),x};o(()=>m(q,d.iconBox,t.az.horizontal),()=>{const n=d.verticalTextBox;return r.allowVerticalPlacement&&(!N||!N.placeable)&&e.numVerticalGlyphVertices>0&&n?m(n,d.verticalIconBox,t.az.vertical):{box:null,occluded:!0,offscreen:null}}),N&&(P=N.placeable,I=N.offscreen);const g=n(N&&N.placeable);if(!P&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,g))}}}if(B=N,P=B&&B.placeable,I=B&&B.offscreen,e.useRuntimeCollisionCircles&&e.centerJustifiedTextSymbolIndex>=0){const n=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),s=t.aA(r.textSizeData,p,n),u=o.get("text-padding");L=this.collisionIndex.placeCollisionCircles(y,n,r.lineVertexArray,r.glyphOffsetArray,s,l,c,i,w,f.predicate,e.collisionCircleDiameter,u,a,T),L.circles.length&&L.collisionDetected&&!i&&t.w("Collisions detected, but collision boxes are not shown"),P=v||L.circles.length>0&&!L.collisionDetected,I=I&&L.offscreen}if(d.iconFeatureIndex&&(U=d.iconFeatureIndex),d.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,_,u,S,l,w,b,s,f.predicate,T,D&&j?j:void 0,F);O&&O.placeable&&d.verticalIconBox?(z=e(d.verticalIconBox),M=z.placeable):(z=e(d.iconBox),M=z.placeable),I=I&&z.offscreen}const Z=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,H=g||0===e.numIconVertices;Z||H?H?Z||(M=M&&P):P=M&&P:M=P=M&&P;const G=M&&z.placeable;if(P&&B.placeable&&this.collisionIndex.insertCollisionBox(B.box,y,o.get("text-ignore-placement"),r.bucketInstanceId,O&&O.placeable&&V?V:R,f.ID),G&&this.collisionIndex.insertCollisionBox(z.box,_,o.get("icon-ignore-placement"),r.bucketInstanceId,U,f.ID),L&&P&&this.collisionIndex.insertCollisionCircles(L.circles,y,o.get("text-ignore-placement"),r.bucketInstanceId,R,f.ID),i&&this.storeCollisionData(r.bucketInstanceId,x,d,B,z,L),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===r.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new ut((P||C)&&!(null==B?void 0:B.occluded),(M||A)&&!(null==z?void 0:z.occluded),I||r.justReloaded),n[e.crossTileID]=!0};if(E){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=r.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let e=t.length-1;e>=0;--e){const n=t[e];k(r.symbolInstances.get(n),r.collisionArrays[n],n)}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)k(r.symbolInstances.get(t),r.collisionArrays[t],t);r.justReloaded=!1}storeCollisionData(e,t,n,i,r,o){if(n.textBox||n.iconBox){let o,a;this.collisionBoxArrays.has(e)?o=this.collisionBoxArrays.get(e):(o=new Map,this.collisionBoxArrays.set(e,o)),o.has(t)?a=o.get(t):(a={text:null,icon:null},o.set(t,a)),n.textBox&&(a.text=i.box),n.iconBox&&(a.icon=r.box)}if(o){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=[]);for(let e=0;e<o.circles.length;e+=4)t.push(o.circles[e+0]-at),t.push(o.circles[e+1]-at),t.push(o.circles[e+2]),t.push(o.collisionDetected?1:0)}}markUsedJustification(e,n,i,r){let o;o=r===t.az.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.aR(n)];const a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:i.crossTileID)}markUsedOrientation(e,n,i){const r=n===t.az.horizontal||n===t.az.horizontalOnly?n:0,o=n===t.az.vertical?n:0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const i=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=r[s];t?(this.opacities[s]=new ct(t,i,e.text,e.icon),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new ct(null,i,e.text,e.icon,e.skipFade),n=n||e.text||e.icon)}for(const s in r){const e=r[s];if(!this.opacities[s]){const t=new ct(e,i,!1,!1);t.isHidden()||(this.opacities[s]=t,n=n||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const i of t){const t=i.getBucket(e);t&&i.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i.tileID,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i,r){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const o=e.layers[0],a=o.layout,s=new ct(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),c=a.get("icon-allow-overlap"),u=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),h="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),f=new ct(null,0,l&&(c||!e.hasIconData()||a.get("icon-optional")),c&&(l||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const m=(e,t,n)=>{for(let i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(n);e.hasVisibleVertices=e.hasVisibleVertices||n!==Et},g=this.collisionBoxArrays.get(e.bucketInstanceId);for(let y=0;y<e.symbolInstances.length;y++){const n=e.symbolInstances.get(y),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:o,crossTileID:a}=n;let l=this.opacities[a];i[a]?l=s:l||(l=f,this.opacities[a]=l),i[a]=!0;const c=n.numIconVertices>0,v=this.placedOrientations[n.crossTileID],_=v===t.az.vertical,x=v===t.az.horizontal||v===t.az.horizontalOnly;if(r>0||o>0){const t=Dt(l.text);m(e.text,r,_?Et:t),m(e.text,o,x?Et:t);const i=l.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach(t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||_?1:0)}),n.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=i||x?1:0);const a=this.variableOffsets[n.crossTileID];a&&this.markUsedJustification(e,a.anchor,n,v);const s=this.placedOrientations[n.crossTileID];s&&(this.markUsedJustification(e,"left",n,s),this.markUsedOrientation(e,s,n))}if(c){const t=Dt(l.icon),i=!(p&&n.verticalPlacedIconSymbolIndex&&_);n.placedIconSymbolIndex>=0&&(m(e.icon,n.numIconVertices,i?t:Et),e.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=l.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,n.numVerticalIconVertices,i?Et:t),e.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const b=g&&g.has(y)?g.get(y):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[y];if(n){let i=new t.P(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(u){const e=this.variableOffsets[a];e?(i=pt(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),h&&i._rotate(d?-this.transform.bearingInRadians:this.transform.bearingInRadians)):t=!1}if(n.textBox||n.verticalTextBox){let r;n.textBox&&(r=_),n.verticalTextBox&&(r=x),mt(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||r,b.text,i.x,i.y)}}if(n.iconBox||n.verticalIconBox){const t=Boolean(!x&&n.verticalIconBox);let r;n.iconBox&&(r=t),n.verticalIconBox&&(r=!t),mt(e.iconCollisionBox.collisionVertexArray,l.icon.placed,r,b.icon,p?i.x:0,p?i.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error("bucket.text.opacityVertexArray.length (= ".concat(e.text.opacityVertexArray.length,") !== bucket.text.layoutVertexArray.length (= ").concat(e.text.layoutVertexArray.length,") / 4"));if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error("bucket.icon.opacityVertexArray.length (= ".concat(e.icon.opacityVertexArray.length,") !== bucket.icon.layoutVertexArray.length (= ").concat(e.icon.layoutVertexArray.length,") / 4"));e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function mt(e,t,n,i,r,o){i&&0!==i.length||(i=[0,0,0,0]);const a=i[0]-at,s=i[1]-at,l=i[2]-at,c=i[3]-at;e.emplaceBack(t?1:0,n?1:0,r||0,o||0,a,s),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,l,s),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,l,c),e.emplaceBack(t?1:0,n?1:0,r||0,o||0,a,c)}const gt=Math.pow(2,25),yt=Math.pow(2,24),vt=Math.pow(2,17),_t=Math.pow(2,16),xt=Math.pow(2,9),bt=Math.pow(2,8),wt=Math.pow(2,1);function Dt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*gt+t*yt+n*vt+t*_t+n*xt+t*bt+n*wt+t}const Et=0;class Ct{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,i,r){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1}}class At{constructor(e,t,n,i,r,o,a,s){this.placement=new ft(e,t,o,a,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,t,n){const i=c(),r=()=>!this._forceFullPlacement&&c()-i>2;for(;this._currentPlacementIndex>=0;){const i=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===i.type&&(!i.minzoom||i.minzoom<=o)&&(!i.maxzoom||i.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new Ct(i)),this._inProgressLayer.continuePlacement(n[i.source],this.placement,this._showCollisionBoxes,i,r))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const St=512/t.a5/2;class Tt{constructor(e,n,i){this.tileID=e,this.bucketInstanceId=i,this._symbolsByKey={};const r=new Map;for(let t=0;t<n.length;t++){const e=n.get(t),i=e.key,o=r.get(i);o?o.push(e):r.set(i,[e])}for(const[o,a]of r){const e={positions:a.map(e=>({x:Math.floor(e.anchorX*St),y:Math.floor(e.anchorY*St)})),crossTileIDs:a.map(e=>e.crossTileID)};if(e.positions.length>128){const n=new t.aT(e.positions.length,16,Uint16Array);for(const{x:t,y:i}of e.positions)n.add(t,i);n.finish(),delete e.positions,e.index=n}this._symbolsByKey[o]=e}}getScaledCoordinates(e,n){const{x:i,y:r,z:o}=this.tileID.canonical,{x:a,y:s,z:l}=n.canonical,c=St/Math.pow(2,l-o),u=(s*t.a5+e.anchorY)*c,h=r*t.a5*St;return{x:Math.floor((a*t.a5+e.anchorX)*c-i*t.a5*St),y:Math.floor(u-h)}}findMatches(e,t,n){const i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let r=0;r<e.length;r++){const o=e.get(r);if(o.crossTileID)continue;const a=this._symbolsByKey[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);if(a.index){const e=a.index.range(s.x-i,s.y-i,s.x+i,s.y+i).sort();for(const t of e){const e=a.crossTileIDs[t];if(!n[e]){n[e]=!0,o.crossTileID=e;break}}}else if(a.positions)for(let e=0;e<a.positions.length;e++){const t=a.positions[e],r=a.crossTileIDs[e];if(Math.abs(t.x-s.x)<=i&&Math.abs(t.y-s.y)<=i&&!n[r]){n[r]=!0,o.crossTileID=r;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(e=>{let{crossTileIDs:t}=e;return t})}}class Ft{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class kt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],i={};for(const n in e){const r=e[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),i[r.tileID.key]=r}this.indexes[n]=i}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const i=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const n=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in n){const o=n[r];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,i)}else{const o=n[e.scaledTo(Number(r)).key];o&&o.findMatches(t.symbolInstances,e,i)}}for(let r=0;r<t.symbolInstances.length;r++){const e=t.symbolInstances.get(r);e.crossTileID||(e.crossTileID=n.generate(),i[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Tt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.getCrossTileIDsLists())for(const t of n)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)e[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],t=!0)}return t}}class Pt{constructor(){this.layerIndexes={},this.crossTileIDs=new Ft,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new kt);let r=!1;const o={};i.handleWrapJump(n);for(const a of t){const t=a.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(a.tileID,t,this.crossTileIDs)&&(r=!0),o[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}var Mt="void main() {fragColor=vec4(1.0);}";const It={prelude:jt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nout highp vec4 fragColor;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c\n);}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\n#ifdef GLOBE\nif ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}\n#endif\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;"),projectionMercator:jt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:jt("","#define GLOBE_RADIUS 6371008.8\nuniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos\n);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); \nif (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len\n);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}"),background:jt("uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:jt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:jt("in vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {\n#ifdef GLOBE\nvec3 center_vector=projectToSphere(circle_center);\n#endif\nfloat angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {\n#ifdef GLOBE\nvec4 projected_center=interpolateProjection(circle_center,center_vector,ele);\n#else\nvec4 projected_center=projectTileWithElevation(circle_center,ele);\n#endif\ncorner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}\n#ifdef GLOBE\nvec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);\n#else\ngl_Position=projectTileWithElevation(corner_position,ele);\n#endif\n} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:jt(Mt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:jt("uniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);\n#ifdef GLOBE\nvec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);\n#else\ngl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));\n#endif\n}"),heatmapTexture:jt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:jt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:jt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:jt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else\n{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:jt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:jt(Mt,"in vec2 a_pos;void main() {\n#ifdef GLOBE\ngl_Position=projectTileFor3D(a_pos,0.0);\n#else\ngl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);\n#endif\n}"),fill:jt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nfragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_fill_translate;in vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);}"),fillOutline:jt("in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillOutlinePattern:jt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillPattern:jt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:jt("in vec4 v_color;void main() {fragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\nout vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);\n#ifdef GLOBE\nmat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);\n#endif\ndirectional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:jt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\n#ifdef GLOBE\nout vec3 v_sphere_pos;\n#endif\nout vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:jt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:jt("uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];\n#define PI 3.141592653589793\n#define STANDARD 0\n#define COMBINED 1\n#define IGOR 2\n#define MULTIDIRECTIONAL 3\n#define BASIC 4\nfloat get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else\n{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else\n{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:jt("uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:jt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:jt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:jt("uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nfloat u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}"),lineGradientSDF:jt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nfloat u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}"),raster:jt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;\n#ifdef GLOBE\nif (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}\n#endif\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:jt("uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:jt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:jt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:jt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:jt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:jt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:jt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:jt("#ifdef GL_ES\nprecision highp float;\n#endif\nin vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758\n);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}","in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:jt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function jt(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/in ([\w]+) ([\w]+)/g),r=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(r):r,s={};return{fragmentSource:e=e.replace(n,(e,t,n,i,r)=>(s[r]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nin ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"))),vertexSource:t=t.replace(n,(e,t,n,i,r)=>{const o="float"===i?"vec2":"vec4",a=r.match(/color/)?"color":o;return s[r]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nin ").concat(n," ").concat(o," a_").concat(r,";\nout ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = unpack_mix_").concat(a,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nin ").concat(n," ").concat(o," a_").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = unpack_mix_").concat(a,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")}),staticAttributes:i,staticUniforms:a}}class Nt{constructor(e,t,n){this.vertexBuffer=e,this.indexBuffer=t,this.segments=n}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ot=t.aU([{name:"a_pos",type:"Int16",components:2}]);const Bt="#define PROJECTION_MERCATOR",Lt="mercator";class zt{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Lt}get shaderDefine(){return Bt}get shaderPreludeCode(){return It.projectionMercator}get vertexShaderPreludeCode(){return It.projectionMercator.vertexSource}get subdivisionGranularity(){return t.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,n,i,r,o){if(this._cachedMesh)return this._cachedMesh;const a=new t.aW;a.emplaceBack(0,0),a.emplaceBack(t.a5,0),a.emplaceBack(0,t.a5),a.emplaceBack(t.a5,t.a5);const s=e.createVertexBuffer(a,Ot.members),l=t.aX.simpleSegment(0,0,4,2),c=new t.aY;c.emplaceBack(1,0,2),c.emplaceBack(1,2,3);const u=e.createIndexBuffer(c);return this._cachedMesh=new Nt(s,u,l),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class Rt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.G.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.G.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.G.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.G.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.an((this.left+e-this.right)/2,0,e),r=t.an((this.top+n-this.bottom)/2,0,n);return new t.P(i,r)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Rt(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Vt(e,t){if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}function Ut(e){return Math.max(0,Math.floor(e))}class qt{constructor(e,n){var i;this.applyConstrain=(e,t)=>null!==this._constrainOverride?this._constrainOverride(e,t):this._callbacks.defaultConstrain(e,t),this._callbacks=e,this._tileSize=512,this._renderWorldCopies=void 0===(null==n?void 0:n.renderWorldCopies)||!!(null==n?void 0:n.renderWorldCopies),this._minZoom=(null==n?void 0:n.minZoom)||0,this._maxZoom=(null==n?void 0:n.maxZoom)||22,this._minPitch=null==(null==n?void 0:n.minPitch)?0:null==n?void 0:n.minPitch,this._maxPitch=null==(null==n?void 0:n.maxPitch)?60:null==n?void 0:n.maxPitch,this._constrainOverride=null!==(i=null==n?void 0:n.constrainOverride)&&void 0!==i?i:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new t.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ut(this._zoom),this._scale=t.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Rt,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,n,i){this._constrainOverride=e.constrainOverride,this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=Ut(this._zoom),this._scale=t.aq(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new Rt(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!i&&e.autoCalculateNearFarZ,n&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get constrainOverride(){return this._constrainOverride}setConstrainOverride(e){void 0===e&&(e=null),this._constrainOverride!==e&&(this._constrainOverride=e,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const n=t.W(e,-180,180)*Math.PI/180;var r,o,a,s,l,c,u,h,d;this._bearingInRadians!==n&&(this._unmodified=!1,this._bearingInRadians=n,this._calcMatrices(),this._rotationMatrix=i(),r=this._rotationMatrix,a=-this._bearingInRadians,s=(o=this._rotationMatrix)[0],l=o[1],c=o[2],u=o[3],h=Math.sin(a),d=Math.cos(a),r[0]=s*d+c*h,r[1]=l*d+u*h,r[2]=s*-h+c*d,r[3]=l*-h+u*d)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const n=t.an(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==n&&(this._unmodified=!1,this._pitchInRadians=n,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const t=e/180*Math.PI;this._rollInRadians!==t&&(this._unmodified=!1,this._rollInRadians=t,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return t.aZ(this._fovInRadians)}setFov(e){e=t.an(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=t.ap(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const n=this.applyConstrain(this._center,e).zoom;this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this._tileZoom=Math.max(0,Math.floor(n)),this._scale=t.aq(n),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,t){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=t,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this.constrainInternal(),this._calcMatrices()}resize(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._width=e,this._height=t,n&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&2===this._latRange.length&&this._lngRange&&2===this._lngRange.length?new W([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-t.ao,t.ao])}getCameraQueryGeometry(e,n){if(1===n.length)return[n[0],e];{const{minX:i,minY:r,maxX:o,maxY:a}=t.aa.fromPoints(n).extend(e);return[new t.P(i,r),new t.P(o,r),new t.P(o,a),new t.P(i,a),new t.P(i,r)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:n}=this.applyConstrain(this.center,this.zoom);this.setCenter(t),this.setZoom(n),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=t.ar(new Float64Array(16));t.Q(e,e,[this._width/2,-this._height/2,1]),t.O(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=t.ar(new Float64Array(16)),t.Q(e,e,[1,-1,1]),t.O(e,e,[-1,-1,0]),t.Q(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,n,i,r){const o=void 0!==i?i:this.bearing,a=r=void 0!==r?r:this.pitch,{distanceToCenter:s,clampedElevation:l}=this._distanceToCenterFromAltElevationPitch(n,this.elevation,a),{x:c,y:u}=xe(a,o),h=t.a9.fromLngLat(e,n);let d,p,f=t.a_(1,h.y),m=0;do{if(m+=1,m>10)break;p=s/f,d=new t.a9(h.x+c*p,h.y+u*p),f=1/d.meterInMercatorCoordinateUnits()}while(Math.abs(s-p*f)>1e-12);return{center:d.toLngLat(),elevation:l,zoom:t.at(this.height/2/Math.tan(this.fovInRadians/2)/p/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const n=1/this.worldSize,i=t.as(1,this.center.lat)*this.worldSize,r=t.a9.fromLngLat(this.center,this.elevation),o=r.x/n,a=r.y/n,s=r.z/n,l=this.pitch,c=this.bearing,{x:u,y:h,z:d}=xe(l,c),p=this.cameraToCenterDistance,f=o+p*-u,m=a+p*-h,g=s+p*d,{distanceToCenter:y,clampedElevation:v}=this._distanceToCenterFromAltElevationPitch(g/i,e,l),_=y*i,x=new t.a9((f+u*_)*n,(m+h*_)*n,0).toLngLat(),b=t.as(1,x.lat),w=t.at(this.height/2/Math.tan(this.fovInRadians/2)/y/b/this.tileSize);this._elevation=v,this._center=x,this.setZoom(w)}_distanceToCenterFromAltElevationPitch(e,n,i){const r=-Math.cos(t.ap(i)),o=e-n;let a,s=n;return r*o>=0||Math.abs(r)<.1?(a=1e4,s=e+a*r):a=-o/r,{distanceToCenter:a,clampedElevation:s}}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=t.as(1,this.center.lat)*this.worldSize;return _e(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const n=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/n,e.canonical.y/n,1/n/t.a5,1/n/t.a5]}}class Zt{constructor(e,n){this.min=e,this.max=n,this.center=t.a$([],t.b0([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],i=t.b1(this.min),r=t.b1(this.max);for(let t=0;t<n.length;t++)i[t]=n[t]?this.min[t]:this.center[t],r[t]=n[t]?this.center[t]:this.max[t];return r[2]=this.max[2],new Zt(i,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let t=!0;for(let n=0;n<e.planes.length;n++){const i=this.intersectsPlane(e.planes[n]);if(0===i)return 0;1===i&&(t=!1)}return t?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let t=e[3],n=e[3];for(let i=0;i<3;i++)e[i]>0?(t+=e[i]*this.min[i],n+=e[i]*this.max[i]):(n+=e[i]*this.min[i],t+=e[i]*this.max[i]);return t>=0?2:n<0?0:1}}class Ht{distanceToTile2d(e,t,n,i){const r=i.distanceX([e,t]),o=i.distanceY([e,t]);return Math.hypot(r,o)}getWrap(e,t,n){return n}getTileBoundingVolume(e,n,i,r){var o,a;let s=0,l=0;if(null==r?void 0:r.terrain){const c=new t.a2(e.z,n,e.z,e.x,e.y),u=r.terrain.getMinMaxElevation(c);s=null!==(o=u.minElevation)&&void 0!==o?o:Math.min(0,i),l=null!==(a=u.maxElevation)&&void 0!==a?a:Math.max(0,i)}const c=1<<e.z;return new Zt([n+e.x/c,e.y/c,s],[n+(e.x+1)/c,(e.y+1)/c,l])}allowVariableZoom(e,n){const i=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,r=t.an(78.5-i/2,0,60);return!!n.terrain||e.pitch>r}allowWorldCopies(){return!0}prepareNextFrame(){}}class Gt{constructor(e,t,n){this.points=e,this.planes=t,this.aabb=n}static fromInvProjectionMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const a=o?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],s=Math.pow(2,i),l=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(i=>function(e,n,i,r){const o=t.aH([],e,n),a=1/o[3]/i*r;return t.b6(o,o,[a,a,1/o[3],a])}(i,e,n,s));r&&function(e,n,i,r){const o=r?4:0,a=r?0:4;let s=0;const l=[],c=[];for(let d=0;d<4;d++){const n=t.b2([],e[d+a],e[d+o]),i=t.b7(n);t.a$(n,n,1/i),l.push(i),c.push(n)}for(let d=0;d<4;d++){const n=t.b8(e[d+o],c[d],i);s=null!==n&&n>=0?Math.max(s,n):Math.max(s,l[d])}const u=function(e,n){const i=t.b2([],e[n[0]],e[n[1]]),r=t.b2([],e[n[2]],e[n[1]]),o=[0,0,0,0];return t.b3(o,t.b4([],i,r)),o[3]=-t.b5(o,e[n[0]]),o}(e,n),h=function(e,n){const i=t.b9(e),r=t.ba([],e,1/i),o=t.b2([],n,t.a$([],r,t.b5(n,r))),a=t.b9(o);if(a>0){const e=Math.sqrt(1-r[3]*r[3]),i=t.a$([],r,-r[3]),s=t.b0([],i,t.a$([],o,e/a));return t.bb(n,s)}return null}(i,u);if(null!==h){const e=h/t.b5(c[0],u);s=Math.min(s,e)}for(let t=0;t<4;t++){const n=Math.min(s,l[t]);e[t+a]=[e[t+o][0]+c[t][0]*n,e[t+o][1]+c[t][1]*n,e[t+o][2]+c[t][2]*n,1]}}(l,a[0],r,o);const c=a.map(e=>{const n=t.b2([],l[e[0]],l[e[1]]),i=t.b2([],l[e[2]],l[e[1]]),r=t.b3([],t.b4([],n,i)),o=-t.b5(r,l[e[1]]);return r.concat(o)}),u=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],h=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const t of l)for(let e=0;e<3;e++)u[e]=Math.min(u[e],t[e]),h[e]=Math.max(h[e],t[e]);return new Gt(l,c,new Zt(u,h))}}class Wt{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,n){return this._helper.interpolatePadding(e,t,n)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._helper.resize(e,t,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrainOverride(e){this._helper.setConstrainOverride(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,t){}constructor(e){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(e,n)=>{n=t.an(+n,this.minZoom,this.maxZoom);const i={center:new t.V(e.lng,e.lat),zoom:n};let r=this._helper._lngRange;if(!this._helper._renderWorldCopies&&null===r){const e=180-1e-10;r=[-e,e]}const o=this.tileSize*t.aq(i.zoom);let a=0,s=o,l=0,c=o,u=0,h=0;const{x:d,y:p}=this.size;if(this._helper._latRange){const e=this._helper._latRange;a=t.X(e[1])*o,s=t.X(e[0])*o,s-a<p&&(u=p/(s-a))}r&&(l=t.W(t.Y(r[0])*o,0,o),c=t.W(t.Y(r[1])*o,0,o),c<l&&(c+=o),c-l<d&&(h=d/(c-l)));const{x:f,y:m}=me(o,e);let g,y;const v=Math.max(h||0,u||0);if(v){const e=new t.P(h?(c+l)/2:f,u?(s+a)/2:m);return i.center=ge(o,e).wrap(),i.zoom+=t.at(v),i}if(this._helper._latRange){const e=p/2;m-e<a&&(y=a+e),m+e>s&&(y=s-e)}if(r){const e=(l+c)/2;let n=f;this._helper._renderWorldCopies&&(n=t.W(f,e-o/2,e+o/2));const i=d/2;n-i<l&&(g=l+i),n+i>c&&(g=c-i)}if(void 0!==g||void 0!==y){const e=new t.P(null!=g?g:f,null!=y?y:m);i.center=ge(o,e).wrap()}return i},this.applyConstrain=(e,t)=>this._helper.applyConstrain(e,t),this._helper=new qt({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(e,t)=>this.defaultConstrain(e,t)},e),this._coveringTilesDetailsProvider=new Ht}clone(){const e=new Wt;return e.apply(this,!1),e}apply(e,t,n){this._helper.apply(e,t,n)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const n=[new t.bc(0,e)];if(this._helper._renderWorldCopies){const i=this.screenPointToMercatorCoordinate(new t.P(0,0)),r=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,0)),o=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,this._helper._height)),a=this.screenPointToMercatorCoordinate(new t.P(0,this._helper._height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),l=Math.floor(Math.max(i.x,r.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new t.bc(u,e))}return n}getCameraFrustum(){return Gt.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const t=this.screenPointToLocation(this.centerPoint,e),n=e?e.getElevationForLngLatZoom(t,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(n)}setLocationAtPoint(e,n){const i=t.as(this.elevation,this.center.lat),r=this.screenPointToMercatorCoordinateAtZ(n,i),o=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,i),a=t.a9.fromLngLat(e),s=new t.a9(a.x-(r.x-o.x),a.y-(r.y-o.y));this.setCenter(null==s?void 0:s.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,n){return n?this.coordinatePoint(t.a9.fromLngLat(e),n.getElevationForLngLat(e,this),this._pixelMatrix3D):this.coordinatePoint(t.a9.fromLngLat(e))}screenPointToLocation(e,t){var n;return null===(n=this.screenPointToMercatorCoordinate(e,t))||void 0===n?void 0:n.toLngLat()}screenPointToMercatorCoordinate(e,t){if(t){const n=t.pointCoordinate(e);if(null!=n)return n}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,n){const i=n||0,r=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.aH(r,r,this._pixelMatrixInverse),t.aH(o,o,this._pixelMatrixInverse);const a=r[3],s=o[3],l=r[1]/a,c=o[1]/s,u=r[2]/a,h=o[2]/s,d=u===h?0:(i-u)/(h-u);return new t.a9(t.G.number(r[0]/a,o[0]/s,d)/this.worldSize,t.G.number(l,c,d)/this.worldSize,i)}coordinatePoint(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._pixelMatrix;const r=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.aH(r,r,i),new t.P(r[0]/r[3],r[1]/r[3])}getBounds(){const e=Math.max(0,this._helper._height/2-ye(this));return(new W).extend(this.screenPointToLocation(new t.P(0,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new t.P(0,this._helper._height)))}isPointOnMapSurface(e,t){return t?null!=t.pointCoordinate(e):e.y>this.height/2-ye(this)}calculatePosMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;var r;const o=null!==(r=e.key)&&void 0!==r?r:t.bd(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),a=n?this._alignedPosMatrixCache:this._posMatrixCache;if(a.has(o)){const e=a.get(o);return i?e.f32:e.f64}const s=ve(e,this.worldSize);t.S(s,n?this._alignedProjMatrix:this._viewProjMatrix,s);const l={f64:s,f32:new Float32Array(s)};return a.set(o,l),i?l.f32:l.f64}calculateFogMatrix(e){const n=e.key,i=this._fogMatrixCacheF32;if(i.has(n))return i.get(n);const r=ve(e,this.worldSize);return t.S(r,this._fogMatrix,r),i.set(n,new Float32Array(r)),i.get(n)}calculateCenterFromCameraLngLatAlt(e,t,n,i){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,n,i)}_calculateNearFarZIfNeeded(e,n,i){if(!this._helper.autoCalculateNearFarZ)return;const r=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),o=e-r*this._helper._pixelPerMeter/Math.cos(n),a=r<0?o:e,s=Math.PI/2+this.pitchInRadians,l=t.ap(this.fov)*(Math.abs(Math.cos(t.ap(this.roll)))*this.height+Math.abs(Math.sin(t.ap(this.roll)))*this.width)/this.height*(.5+i.y/this.height),c=Math.sin(l)*a/Math.sin(t.an(Math.PI-s-l,.01,Math.PI-.01)),u=ye(this),h=Math.atan(u/this._helper.cameraToCenterDistance),d=t.ap(.75),p=h>d?2*h*(.5+i.y/(2*u)):d,f=Math.sin(p)*a/Math.sin(t.an(Math.PI-s-p,.01,Math.PI-.01)),m=Math.min(c,f);this._helper._farZ=1.01*(Math.cos(Math.PI/2-n)*m+a),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,n=me(this.worldSize,this.center),i=n.x,r=n.y;this._helper._pixelPerMeter=t.as(1,this.center.lat)*this.worldSize;const o=t.ap(Math.min(this.pitch,fe)),a=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(o));let s;this._calculateNearFarZIfNeeded(a,o,e),s=new Float64Array(16),t.be(s,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),t.aB(this._invProjMatrix,s),s[8]=2*-e.x/this._helper._width,s[9]=2*e.y/this._helper._height,this._projectionMatrix=t.bf(s),t.Q(s,s,[1,-1,1]),t.O(s,s,[0,0,-this._helper.cameraToCenterDistance]),t.bg(s,s,-this.rollInRadians),t.bh(s,s,this.pitchInRadians),t.bg(s,s,-this.bearingInRadians),t.O(s,s,[-i,-r,0]),this._mercatorMatrix=t.Q([],s,[this.worldSize,this.worldSize,this.worldSize]),t.Q(s,s,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=t.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,s),t.O(s,s,[0,0,-this.elevation]),this._viewProjMatrix=s,this._invViewProjMatrix=t.aB([],s);const l=[0,0,-1,1];t.aH(l,l,this._invViewProjMatrix),this._cameraPosition=[l[0]/l[3],l[1]/l[3],l[2]/l[3]],this._fogMatrix=new Float64Array(16),t.be(this._fogMatrix,this.fovInRadians,this.width/this.height,a,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,t.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),t.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),t.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),t.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),t.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),t.O(this._fogMatrix,this._fogMatrix,[-i,-r,0]),t.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),t.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=t.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,s);const c=this._helper._width%2/2,u=this._helper._height%2/2,h=Math.cos(this.bearingInRadians),d=Math.sin(-this.bearingInRadians),p=i-Math.round(i)+h*c+d*u,f=r-Math.round(r)+h*u+d*c,m=new Float64Array(s);if(t.O(m,m,[p>.5?p-1:p,f>.5?f-1:f,0]),this._alignedProjMatrix=m,s=t.aB(new Float64Array(16),this._pixelMatrix),!s)throw new Error("failed to invert matrix");this._pixelMatrixInverse=s,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new t.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.aH(n,n,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=t.as(1,this.center.lat)*this.worldSize;return _e(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,n){const i=t.a9.fromLngLat(e),r=[i.x*this.worldSize,i.y*this.worldSize,n,1];return t.aH(r,r,this._viewProjMatrix),r[2]/r[3]}getProjectionData(e){const{overscaledTileID:n,aligned:i,applyTerrainMatrix:r}=e,o=this._helper.getMercatorTileCoordinates(n),a=n?this.calculatePosMatrix(n,i,!0):null;let s;return s=n&&n.terrainRttPosMatrix32f&&r?n.terrainRttPosMatrix32f:a||t.bi(),{mainMatrix:s,tileMercatorCoords:o,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:s}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,t,n){return 1}transformLightDirection(e){return t.b1(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,n,i,r){const o=this.calculatePosMatrix(i);let a;r?(a=[e,n,r(e,n),1],t.aH(a,a,o)):(a=[e,n,0,1],ot(a,a,o));const s=a[3];return{point:new t.P(a[0]/s,a[1]/s),signedDistanceFromCamera:s,isOccluded:!1}}populateCache(e){for(const t of e)this.calculatePosMatrix(t)}getMatrixForModel(e,n){const i=t.a9.fromLngLat(e,n),r=i.meterInMercatorCoordinateUnits(),o=t.bj();return t.O(o,o,[i.x,i.y,i.z]),t.bg(o,o,Math.PI),t.bh(o,o,Math.PI/2),t.Q(o,o,[-r,r,r]),o}getProjectionDataForCustomLayer(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=new t.a2(0,0,0,0,0),i=this.getProjectionData({overscaledTileID:n,applyGlobeMatrix:e}),r=ve(n,this.worldSize);t.S(r,this._viewProjMatrix,r),i.tileMercatorCoords=[0,0,1,1];const o=[t.a5,t.a5,this.worldSize/this._helper.pixelsPerMeter],a=t.bk();return t.Q(a,r,o),i.fallbackMatrix=a,i.mainMatrix=a,i}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Yt(){t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Xt(e){if(e.useSlerp)if(e.k<1){const n=t.bl(e.startEulerAngles.roll,e.startEulerAngles.pitch,e.startEulerAngles.bearing),i=t.bl(e.endEulerAngles.roll,e.endEulerAngles.pitch,e.endEulerAngles.bearing),r=new Float64Array(4);t.bm(r,n,i,e.k);const o=t.bn(r);e.tr.setRoll(o.roll),e.tr.setPitch(o.pitch),e.tr.setBearing(o.bearing)}else e.tr.setRoll(e.endEulerAngles.roll),e.tr.setPitch(e.endEulerAngles.pitch),e.tr.setBearing(e.endEulerAngles.bearing);else e.tr.setRoll(t.G.number(e.startEulerAngles.roll,e.endEulerAngles.roll,e.k)),e.tr.setPitch(t.G.number(e.startEulerAngles.pitch,e.endEulerAngles.pitch,e.k)),e.tr.setBearing(t.G.number(e.startEulerAngles.bearing,e.endEulerAngles.bearing,e.k))}function Kt(e,n,i,r,o){const a=o.padding,s=me(o.worldSize,i.getNorthWest()),l=me(o.worldSize,i.getNorthEast()),c=me(o.worldSize,i.getSouthEast()),u=me(o.worldSize,i.getSouthWest()),h=t.ap(-r),d=s.rotate(h),p=l.rotate(h),f=c.rotate(h),m=u.rotate(h),g=new t.P(Math.max(d.x,p.x,m.x,f.x),Math.max(d.y,p.y,m.y,f.y)),y=new t.P(Math.min(d.x,p.x,m.x,f.x),Math.min(d.y,p.y,m.y,f.y)),v=g.sub(y),_=(o.width-(a.left+a.right+n.left+n.right))/v.x,x=(o.height-(a.top+a.bottom+n.top+n.bottom))/v.y;if(x<0||_<0)return void Yt();const b=Math.min(t.at(o.scale*Math.min(_,x)),e.maxZoom),w=t.P.convert(e.offset),D=new t.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(t.ap(r)),E=w.add(D).mult(o.scale/t.aq(b));return{center:ge(o.worldSize,s.add(c).div(2).sub(E)),zoom:b,bearing:r}}class $t{get useGlobeControls(){return!1}handlePanInertia(e,t){const n=e.mag(),i=Math.abs(ye(t));return{easingOffset:e.mult(Math.min(.75*i/n,1)),easingCenter:t.center}}handleMapControlsRollPitchBearingZoom(e,t){e.bearingDelta&&t.setBearing(t.bearing+e.bearingDelta),e.pitchDelta&&t.setPitch(t.pitch+e.pitchDelta),e.rollDelta&&t.setRoll(t.roll+e.rollDelta),e.zoomDelta&&t.setZoom(t.zoom+e.zoomDelta)}handleMapControlsPan(e,t,n){e.around.distSqr(t.centerPoint)<.01||t.setLocationAtPoint(n,e.around)}cameraForBoxAndBearing(e,t,n,i,r){return Kt(e,t,n,i,r)}handleJumpToCenterZoom(e,n){e.zoom!==(void 0!==n.zoom?+n.zoom:e.zoom)&&e.setZoom(+n.zoom),void 0!==n.center&&e.setCenter(t.V.convert(n.center))}handleEaseTo(e,n){const i=e.zoom,r=e.padding,o={roll:e.roll,pitch:e.pitch,bearing:e.bearing},a={roll:void 0===n.roll?e.roll:n.roll,pitch:void 0===n.pitch?e.pitch:n.pitch,bearing:void 0===n.bearing?e.bearing:n.bearing},s=void 0!==n.zoom,l=!e.isPaddingEqual(n.padding);let c=!1;const u=s?+n.zoom:e.zoom;let h=e.centerPoint.add(n.offsetAsPoint);const d=e.screenPointToLocation(h),{center:p,zoom:f}=e.applyConstrain(t.V.convert(n.center||d),null!=u?u:i);Vt(e,p);const m=me(e.worldSize,d),g=me(e.worldSize,p).sub(m),y=t.aq(f-i);return c=f!==i,{easeFunc:s=>{if(c&&e.setZoom(t.G.number(i,f,s)),t.bo(o,a)||Xt({startEulerAngles:o,endEulerAngles:a,tr:e,k:s,useSlerp:o.roll!=a.roll}),l&&(e.interpolatePadding(r,n.padding,s),h=e.centerPoint.add(n.offsetAsPoint)),n.around)e.setLocationAtPoint(n.around,n.aroundPoint);else{const n=t.aq(e.zoom-i),r=f>i?Math.min(2,y):Math.max(.5,y),o=Math.pow(r,1-s),a=ge(e.worldSize,m.add(g.mult(s*o)).mult(n));e.setLocationAtPoint(e.renderWorldCopies?a.wrap():a,h)}},isZooming:c,elevationCenter:p}}handleFlyTo(e,n){const i=void 0!==n.zoom,r=e.zoom,o=e.applyConstrain(t.V.convert(n.center||n.locationAtOffset),i?+n.zoom:r),a=o.center,s=o.zoom;Vt(e,a);const l=me(e.worldSize,n.locationAtOffset),c=me(e.worldSize,a).sub(l),u=c.mag(),h=t.aq(s-r);let d;if(void 0!==n.minZoom){const i=Math.min(+n.minZoom,r,s),o=e.applyConstrain(a,i).zoom;d=t.aq(o-r)}return{easeFunc:(n,i,o,u)=>{e.setZoom(1===n?s:r+t.at(i));const h=1===n?a:ge(e.worldSize,l.add(c.mult(o)).mult(i));e.setLocationAtPoint(e.renderWorldCopies?h.wrap():h,u)},scaleOfZoom:h,targetCenter:a,scaleOfMinZoom:d,pixelPathLength:u}}}class Qt{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Qt.Replace=[1,0],Qt.disabled=new Qt(Qt.Replace,t.bp.transparent,[!1,!1,!1,!1]),Qt.unblended=new Qt(Qt.Replace,t.bp.transparent,[!0,!0,!0,!0]),Qt.alphaBlended=new Qt([1,771],t.bp.transparent,[!0,!0,!0,!0]);const Jt=2305;class en{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}en.disabled=new en(!1,1029,Jt),en.backCCW=new en(!0,1029,Jt),en.frontCCW=new en(!0,1028,Jt);class tn{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}tn.ReadOnly=!1,tn.ReadWrite=!0,tn.disabled=new tn(519,tn.ReadOnly,[0,1]);const nn=7680;class rn{constructor(e,t,n,i,r,o){this.test=e,this.ref=t,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o}}rn.disabled=new rn({func:519,mask:0},0,0,nn,nn,nn);const on=new WeakMap;function an(e){var t;if(on.has(e))return on.get(e);{const n=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return on.set(e,n),n}}class sn{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const n=e.context,i=n.gl;this._texFormat=i.RGBA,this._texType=i.UNSIGNED_BYTE;const r=new t.aW;r.emplaceBack(-1,-1),r.emplaceBack(2,-1),r.emplaceBack(-1,2);const o=new t.aY;o.emplaceBack(0,1,2),this._fullscreenTriangle=new Nt(n.createVertexBuffer(r,Ot.members),n.createIndexBuffer(o),t.aX.simpleSegment(0,0,r.length,o.length)),this._resultBuffer=new Uint8Array(4),n.activeTexture.set(i.TEXTURE1);const a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=n.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(a),an(i)&&(this._pbo=i.createBuffer(),i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.bufferData(i.PIXEL_PACK_BUFFER,4,i.STREAM_READ),i.bindBuffer(i.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,t){const n=this._updateCount;return this._readbackQueue?n>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():n>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,t),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,t=e.gl;e.activeTexture.set(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,n){const i=this._cachedRenderContext.context,r=i.gl;if(this._bindFramebuffer(),i.viewport.set([0,0,this._texWidth,this._texHeight]),i.clear({color:t.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(i,r.TRIANGLES,tn.disabled,rn.disabled,Qt.unblended,en.disabled,((e,t)=>({u_input:e,u_output_expected:t}))(e,n),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&an(r)){r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.readBuffer(r.COLOR_ATTACHMENT0),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),r.bindBuffer(r.PIXEL_PACK_BUFFER,null);const e=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);r.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:e}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&an(e)){const n=e.clientWaitSync(this._readbackQueue.sync,0,0);if(n===e.WAIT_FAILED)return t.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(n===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=sn._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let t=0;return t+=e[0]/256,t+=e[1]/65536,t+=e[2]/16777216,e[3]<127&&(t=-t),t/128}}const ln=t.a5/128;function cn(e,n){const i=void 0!==e.granularity?Math.max(e.granularity,1):1,r=i+(e.generateBorders?2:0),o=i+(e.extendToNorthPole||e.generateBorders?1:0)+(e.extendToSouthPole||e.generateBorders?1:0),a=r+1,s=o+1,l=e.generateBorders?-1:0,c=e.generateBorders||e.extendToNorthPole?-1:0,u=i+(e.generateBorders?1:0),h=i+(e.generateBorders||e.extendToSouthPole?1:0),d=a*s,p=r*o*6,f=a*s>65536;if(f&&"16bit"===n)throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const m=f||"32bit"===n,g=new Int16Array(2*d);let y=0;for(let x=c;x<=h;x++)for(let n=l;n<=u;n++){let r=n/i*t.a5;-1===n&&(r=-ln),n===i+1&&(r=t.a5+ln);let o=x/i*t.a5;-1===x&&(o=e.extendToNorthPole?t.br:-ln),x===i+1&&(o=e.extendToSouthPole?t.bs:t.a5+ln),g[y++]=r,g[y++]=o}const v=m?new Uint32Array(p):new Uint16Array(p);let _=0;for(let t=0;t<o;t++)for(let e=0;e<r;e++){const n=e+1+t*a,i=e+(t+1)*a,r=e+1+(t+1)*a;v[_++]=e+t*a,v[_++]=i,v[_++]=n,v[_++]=n,v[_++]=i,v[_++]=r}return{vertices:g.buffer.slice(0),indices:v.buffer.slice(0),uses32bitIndices:m}}const un=new t.aV({fill:new t.bt(128,2),line:new t.bt(512,0),tile:new t.bt(128,32),stencil:new t.bt(128,1),circle:3});class hn{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return It.projectionGlobe}get vertexShaderPreludeCode(){return It.projectionMercator.vertexSource}get subdivisionGranularity(){return un}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new sn(e));const n=t.X(this._errorQueryLatitudeDegrees),i=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,r=this._errorMeasurement.updateErrorLoop(n,i),o=c();r!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=r,this._errorMeasurementLastChangeTime=o);const a=Math.min(Math.max((o-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=t.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,t.bv(a))}_getMeshKey(e){return"".concat(e.granularity.toString(36),"_").concat(e.generateBorders?"b":"").concat(e.extendToNorthPole?"n":"").concat(e.extendToSouthPole?"s":"")}getMeshFromTileID(e,t,n,i,r){const o=("stencil"===r?un.stencil:un.tile).getGranularityForZoomLevel(t.z);return this._getMesh(e,{granularity:o,generateBorders:n,extendToNorthPole:0===t.y&&i,extendToSouthPole:t.y===(1<<t.z)-1&&i})}_getMesh(e,n){const i=this._getMeshKey(n);if(i in this._tileMeshCache)return this._tileMeshCache[i];const r=function(e,n){const i=cn(n,"16bit"),r=t.aW.deserialize({arrayBuffer:i.vertices,length:i.vertices.byteLength/2/2}),o=t.aY.deserialize({arrayBuffer:i.indices,length:i.indices.byteLength/2/3});return new Nt(e.createVertexBuffer(r,Ot.members),e.createIndexBuffer(o),t.aX.simpleSegment(0,0,r.length,o.length))}(e,n);return this._tileMeshCache[i]=r,r}recalculate(e){}hasTransition(){const e=c();let t=!1;return t=t||(e-this._errorMeasurementLastChangeTime)/1e3<.7,t=t||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,t}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const dn=new t.t({type:new t.D(t.u.projection.type)});class pn extends t.E{constructor(e){super(),this._transitionable=new t.x(dn,void 0),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.H(0)),this._mercatorProjection=new zt,this._verticalPerspectiveProjection=new hn}get transitionState(){const e=this.properties.get("type");if("string"==typeof e&&"mercator"===e)return 0;if("string"==typeof e&&"vertical-perspective"===e)return 1;if(e instanceof t.bw){if("vertical-perspective"===e.from&&"mercator"===e.to)return 1-e.transition;if("mercator"===e.from&&"vertical-perspective"===e.to)return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,t,n,i,r){return this.currentProjection.getMeshFromTileID(e,t,n,i,r)}setProjection(e){this._transitionable.setValue("type",(null==e?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function fn(e){const t=yn(e.worldSize,e.center.lat);return 2*Math.PI*t}function mn(e,n,i,r,o){const a=1/(1<<o),s=n/t.a5*a+r*a,l=t.bz((e/t.a5*a+i*a)*Math.PI*2+Math.PI,2*Math.PI),c=2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI,u=Math.cos(c),h=new Float64Array(3);return h[0]=Math.sin(l)*u,h[1]=Math.sin(c),h[2]=Math.cos(l)*u,h}function gn(e){return function(e,t){const n=Math.cos(t),i=new Float64Array(3);return i[0]=Math.sin(e)*n,i[1]=Math.sin(t),i[2]=Math.cos(e)*n,i}(e.lng*Math.PI/180,e.lat*Math.PI/180)}function yn(e,t){return e/(2*Math.PI)/Math.cos(t*Math.PI/180)}function vn(e){const n=Math.asin(e[1])/Math.PI*180,i=Math.sqrt(e[0]*e[0]+e[2]*e[2]);if(i>1e-6){const r=e[0]/i,o=Math.acos(e[2]/i),a=(r>0?o:-o)/Math.PI*180;return new t.V(t.W(a,-180,180),n)}return new t.V(0,n)}function _n(e){return Math.cos(e*Math.PI/180)}function xn(e,n){const i=_n(e),r=_n(n);return t.at(r/i)}function bn(e,n){const i=e.rotate(n.bearingInRadians),r=n.zoom+xn(n.center.lat,0),o=t.bu(1/_n(n.center.lat),1/_n(Math.min(Math.abs(n.center.lat),60)),t.bx(r,7,3,0,1)),a=360/fn({worldSize:n.worldSize,center:{lat:n.center.lat}});return new t.V(n.center.lng-i.x*a*o,t.an(n.center.lat+i.y*a,-t.ao,t.ao))}function wn(e){const t=.5*e,n=Math.sin(t),i=Math.cos(t);return Math.log(n+i)-Math.log(i-n)}function Dn(e,n,i,r){const o=e.lat+i*r;if(Math.abs(i)>1){const a=(Math.sign(e.lat+i)!==Math.sign(e.lat)?-Math.abs(e.lat):Math.abs(e.lat))*Math.PI/180,s=Math.abs(e.lat+i)*Math.PI/180,l=wn(a+r*(s-a)),c=wn(a),u=wn(s);return new t.V(e.lng+n*((l-c)/(u-c)),o)}return new t.V(e.lng+n*r,o)}class En{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=e}swapBuffers(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(e,t,n,i){const r="".concat(e.z,"_").concat(e.x,"_").concat(e.y,"_").concat((null==i?void 0:i.terrain)?"t":""),o=this._cache.get(r);if(o)return o;const a=this._cachePrevious.get(r);if(a)return this._cache.set(r,a),a;const s=this._boundingVolumeFactory(e,t,n,i);return this._cache.set(r,s),this._hadAnyChanges=!0,s}}class Cn{constructor(e,t,n,i){this.min=n,this.max=i,this.points=e,this.planes=t}static fromAabb(e,t){const n=[];for(let i=0;i<8;i++)n.push([1&~i?e[0]:t[0],1==(i>>1&1)?t[1]:e[1],1==(i>>2&1)?t[2]:e[2]]);return new Cn(n,[[-1,0,0,t[0]],[1,0,0,-e[0]],[0,-1,0,t[1]],[0,1,0,-e[1]],[0,0,-1,t[2]],[0,0,1,-e[2]]],e,t)}static fromCenterSizeAngles(e,n,i){const r=t.bB([],i[0],i[1],i[2]),o=t.bC([],[n[0],0,0],r),a=t.bC([],[0,n[1],0],r),s=t.bC([],[0,0,n[2]],r),l=[...e],c=[...e];for(let t=0;t<8;t++)for(let n=0;n<3;n++){const i=e[n]+o[n]*(1&~t?-1:1)+a[n]*(1==(t>>1&1)?1:-1)+s[n]*(1==(t>>2&1)?1:-1);l[n]=Math.min(l[n],i),c[n]=Math.max(c[n],i)}const u=[];for(let h=0;h<8;h++){const n=[...e];t.b0(n,n,t.a$([],o,1&~h?-1:1)),t.b0(n,n,t.a$([],a,1==(h>>1&1)?1:-1)),t.b0(n,n,t.a$([],s,1==(h>>2&1)?1:-1)),u.push(n)}return new Cn(u,[[...o,-t.b5(o,u[0])],[...a,-t.b5(a,u[0])],[...s,-t.b5(s,u[0])],[-o[0],-o[1],-o[2],-t.b5(o,u[7])],[-a[0],-a[1],-a[2],-t.b5(a,u[7])],[-s[0],-s[1],-s[2],-t.b5(s,u[7])]],l,c)}intersectsFrustum(e){let t=!0;const n=this.points.length,i=this.planes.length,r=e.planes.length,o=e.points.length;for(let a=0;a<r;a++){const i=e.planes[a];let r=0;for(let e=0;e<n;e++){const t=this.points[e];i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]>=0&&r++}if(0===r)return 0;r<n&&(t=!1)}if(t)return 2;for(let a=0;a<i;a++){const t=this.planes[a];let n=0;for(let i=0;i<o;i++){const r=e.points[i];t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]>=0&&n++}if(0===n)return 0}return 1}intersectsPlane(e){const t=this.points.length;let n=0;for(let i=0;i<t;i++){const t=this.points[i];e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]>=0&&n++}return n===t?2:0===n?0:1}}function An(e,t,n){const i=e-t;return i<0?-i:Math.max(0,i-n)}function Sn(e,t,n,i,r){const o=e-n;let a;return a=o<0?Math.min(-o,1+o-r):o>1?Math.min(Math.max(o-r,0),1-o):0,Math.max(a,An(t,i,r))}class Tn{constructor(){this._boundingVolumeCache=new En(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(e,t,n,i){const r=1<<n.z,o=1/r,a=n.x/r,s=n.y/r;let l=2;return l=Math.min(l,Sn(e,t,a,s,o)),l=Math.min(l,Sn(e,t,a+.5,-s-o,o)),l=Math.min(l,Sn(e,t,a+.5,2-s-o,o)),l}getWrap(e,t,n){const i=1<<t.z,r=1/i,o=t.x/i,a=An(e.x,o,r),s=An(e.x,o-1,r),l=An(e.x,o+1,r),c=Math.min(a,s,l);return c===l?1:c===s?-1:0}allowVariableZoom(e,t){return Ce(e,t)>4}allowWorldCopies(){return!1}getTileBoundingVolume(e,t,n,i){return this._boundingVolumeCache.getTileBoundingVolume(e,t,n,i)}_computeTileBoundingVolume(e,n,i,r){var o,a;let s=0,l=0;if(null==r?void 0:r.terrain){const c=new t.a2(e.z,n,e.z,e.x,e.y),u=r.terrain.getMinMaxElevation(c);s=null!==(o=u.minElevation)&&void 0!==o?o:Math.min(0,i),l=null!==(a=u.maxElevation)&&void 0!==a?a:Math.max(0,i)}if(s/=t.bE,l/=t.bE,s+=1,l+=1,e.z<=0)return Cn.fromAabb([-l,-l,-l],[l,l,l]);if(1===e.z)return Cn.fromAabb([0===e.x?-l:0,0===e.y?0:-l,-l],[0===e.x?0:l,0===e.y?l:0,l]);{const n=[mn(0,0,e.x,e.y,e.z),mn(t.a5,0,e.x,e.y,e.z),mn(t.a5,t.a5,e.x,e.y,e.z),mn(0,t.a5,e.x,e.y,e.z)],i=[];for(const e of n)i.push(t.a$([],e,l));if(l!==s)for(const e of n)i.push(t.a$([],e,s));0===e.y&&i.push([0,1,0]),e.y===(1<<e.z)-1&&i.push([0,-1,0]);const r=[1,1,1],o=[-1,-1,-1];for(const e of i)for(let t=0;t<3;t++)r[t]=Math.min(r[t],e[t]),o[t]=Math.max(o[t],e[t]);const a=mn(t.a5/2,t.a5/2,e.x,e.y,e.z),c=t.b4([],[0,1,0],a);t.b3(c,c);const u=t.b4([],a,c);t.b3(u,u);const h=t.b4([],n[2],n[1]);t.b3(h,h);const d=t.b4([],n[0],n[3]);t.b3(d,d),i.push(t.a$([],a,l)),e.y>=(1<<e.z)/2&&i.push(t.a$([],mn(t.a5/2,0,e.x,e.y,e.z),l)),e.y<(1<<e.z)/2&&i.push(t.a$([],mn(t.a5/2,t.a5,e.x,e.y,e.z),l));const p=Fn(a,i),f=Fn(u,i),m=[-a[0],-a[1],-a[2],p.max],g=[a[0],a[1],a[2],-p.min],y=[-u[0],-u[1],-u[2],f.max],v=[u[0],u[1],u[2],-f.min],_=[...h,0],x=[...d,0],b=[];return 0===e.y?b.push(t.bD(x,_,m),t.bD(x,_,g)):b.push(t.bD(y,_,m),t.bD(y,_,g),t.bD(y,x,m),t.bD(y,x,g)),e.y===(1<<e.z)-1?b.push(t.bD(x,_,m),t.bD(x,_,g)):b.push(t.bD(v,_,m),t.bD(v,_,g),t.bD(v,x,m),t.bD(v,x,g)),new Cn(b,[m,g,y,v,_,x],r,o)}}}function Fn(e,n){let i=1/0,r=-1/0;for(const o of n){const n=t.b5(e,o);i=Math.min(i,n),r=Math.max(r,n)}return{min:i,max:r}}class kn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,n){return this._helper.interpolatePadding(e,t,n)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){this._helper.resize(e,t)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrainOverride(e){this._helper.setConstrainOverride(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(e){this._cachedClippingPlane=t.bF(),this._projectionMatrix=t.bj(),this._globeViewProjMatrix32f=t.bi(),this._globeViewProjMatrixNoCorrection=t.bj(),this._globeViewProjMatrixNoCorrectionInverted=t.bj(),this._globeProjMatrixInverted=t.bj(),this._cameraPosition=t.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(e,n)=>{const i=t.an(e.lat,-t.ao,t.ao),r=t.an(+n,this.minZoom+xn(0,i),this.maxZoom);return{center:new t.V(e.lng,i),zoom:r}},this.applyConstrain=(e,t)=>this._helper.applyConstrain(e,t),this._helper=new qt({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(e,t)=>this.defaultConstrain(e,t)},e),this._coveringTilesDetailsProvider=new Tn}clone(){const e=new kn;return e.apply(this,!1),e}apply(e,t,n){this._globeLatitudeErrorCorrectionRadians=n||0,this._helper.apply(e,t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=t.bA();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:t,applyGlobeMatrix:n}=e,i=this._helper.getMercatorTileCoordinates(t);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:i,clippingPlane:this._cachedClippingPlane,projectionTransition:n?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const n=this.pitchInRadians,i=this.cameraToCenterDistance/e,r=Math.sin(n)*i,o=Math.cos(n)*i+1,a=1/Math.sqrt(r*r+o*o)*1;let s=-r,l=o;const c=Math.sqrt(s*s+l*l);s/=c,l/=c;const u=[0,s,l];t.bG(u,u,[0,0,0],-this.bearingInRadians),t.bH(u,u,[0,0,0],-1*this.center.lat*Math.PI/180),t.bI(u,u,[0,0,0],this.center.lng*Math.PI/180);const h=1/t.b7(u);return t.a$(u,u,h),[...u,-a*h]}isLocationOccluded(e){return!this.isSurfacePointVisible(gn(e))}transformLightDirection(e){const n=this._helper._center.lng*Math.PI/180,i=this._helper._center.lat*Math.PI/180,r=Math.cos(i),o=[Math.sin(n)*r,Math.sin(i),Math.cos(n)*r],a=[o[2],0,-o[0]],s=[0,0,0];t.b4(s,a,o),t.b3(a,a),t.b3(s,s);const l=[0,0,0];return t.b3(l,[a[0]*e[0]+s[0]*e[1]+o[0]*e[2],a[1]*e[0]+s[1]*e[1]+o[1]*e[2],a[2]*e[0]+s[2]*e[1]+o[2]*e[2]]),l}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,n,i){const r=function(e,n,i){const r=1/(1<<i.z);return new t.a9(e/t.a5*r+i.x*r,n/t.a5*r+i.y*r)}(e,n,i.canonical),o=(a=r.y,[t.bz(r.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-a*Math.PI*2))-.5*Math.PI]);var a;return this.getCircleRadiusCorrection()/Math.cos(o[1])}projectTileCoordinates(e,n,i,r){const o=i.canonical,a=mn(e,n,o.x,o.y,o.z),s=1+(r?r(e,n):0)/t.bE,l=[a[0]*s,a[1]*s,a[2]*s,1];t.aH(l,l,this._globeViewProjMatrixNoCorrection);const c=this._cachedClippingPlane,u=c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]<0;return{point:new t.P(l[0]/l[3],l[1]/l[3]),signedDistanceFromCamera:l[3],isOccluded:u}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=yn(this.worldSize,this.center.lat),n=t.bk(),i=t.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),t.be(n,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const r=this.centerOffset;n[8]=2*-r.x/this._helper._width,n[9]=2*r.y/this._helper._height,this._projectionMatrix=t.bf(n),this._globeProjMatrixInverted=t.bk(),t.aB(this._globeProjMatrixInverted,n),t.O(n,n,[0,0,-this.cameraToCenterDistance]),t.bg(n,n,this.rollInRadians),t.bh(n,n,-this.pitchInRadians),t.bg(n,n,this.bearingInRadians),t.O(n,n,[0,0,-e]);const o=t.bA();o[0]=e,o[1]=e,o[2]=e,t.bh(i,n,this.center.lat*Math.PI/180),t.bJ(i,i,-this.center.lng*Math.PI/180),t.Q(i,i,o),this._globeViewProjMatrixNoCorrection=i,t.bh(n,n,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),t.bJ(n,n,-this.center.lng*Math.PI/180),t.Q(n,n,o),this._globeViewProjMatrix32f=new Float32Array(n),this._globeViewProjMatrixNoCorrectionInverted=t.bk(),t.aB(this._globeViewProjMatrixNoCorrectionInverted,i);const a=t.bA();this._cameraPosition=t.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/e,t.bG(this._cameraPosition,this._cameraPosition,a,-this.rollInRadians),t.bH(this._cameraPosition,this._cameraPosition,a,this.pitchInRadians),t.bG(this._cameraPosition,this._cameraPosition,a,-this.bearingInRadians),t.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),t.bH(this._cameraPosition,this._cameraPosition,a,-this.center.lat*Math.PI/180),t.bI(this._cameraPosition,this._cameraPosition,a,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const s=t.bf(this._globeViewProjMatrixNoCorrectionInverted);t.Q(s,s,[1,1,-1]),this._cachedFrustum=Gt.fromInvProjectionMatrix(s,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(e){t.w("calculateFogMatrix is not supported on globe projection.");const n=t.bk();return t.ar(n),n}getVisibleUnwrappedCoordinates(e){return[new t.bc(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&t.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){if(!this._globeViewProjMatrixNoCorrection)return 1;const i=gn(e);t.a$(i,i,1+n/t.bE);const r=t.bF();return t.aH(r,[i[0],i[1],i[2],1],this._globeViewProjMatrixNoCorrection),r[2]/r[3]}populateCache(e){}getBounds(){const e=.5*this.width,n=.5*this.height,i=[new t.P(0,0),new t.P(e,0),new t.P(this.width,0),new t.P(this.width,n),new t.P(this.width,this.height),new t.P(e,this.height),new t.P(0,this.height),new t.P(0,n)],r=[];for(const t of i)r.push(this.unprojectScreenPoint(t));let o=0,a=0,s=0,l=0;const c=this.center;for(const h of r){const e=t.bK(c.lng,h.lng),n=t.bK(c.lat,h.lat);e<a&&(a=e),e>o&&(o=e),n<l&&(l=n),n>s&&(s=n)}const u=[c.lng+a,c.lat+l,c.lng+o,c.lat+s];return this.isSurfacePointOnScreen([0,1,0])&&(u[3]=90,u[0]=-180,u[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(u[1]=-90,u[0]=-180,u[2]=180),new W(u)}calculateCenterFromCameraLngLatAlt(e,t,n,i){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,n,i)}setLocationAtPoint(e,n){const i=gn(this.unprojectScreenPoint(n)),r=gn(e),o=t.bA();t.bL(o);const a=t.bA();t.bI(a,i,o,-this.center.lng*Math.PI/180),t.bH(a,a,o,this.center.lat*Math.PI/180);const s=r[0]*r[0]+r[2]*r[2],l=a[0]*a[0];if(s<l)return;const c=Math.sqrt(s-l),u=-c,h=t.bM(r[0],r[2],a[0],c),d=t.bM(r[0],r[2],a[0],u),p=t.bA();t.bI(p,r,o,-h);const f=t.bM(p[1],p[2],a[1],a[2]),m=t.bA();t.bI(m,r,o,-d);const g=t.bM(m[1],m[2],a[1],a[2]),y=.5*Math.PI,v=f>=-y&&f<=y,_=g>=-y&&g<=y;let x,b;if(v&&_){const e=this.center.lng*Math.PI/180,n=this.center.lat*Math.PI/180;t.bN(h,e)+t.bN(f,n)<t.bN(d,e)+t.bN(g,n)?(x=h,b=f):(x=d,b=g)}else if(v)x=h,b=f;else{if(!_)return;x=d,b=g}const w=x/Math.PI*180,D=b/Math.PI*180,E=this.center.lat;this.setCenter(new t.V(w,t.an(D,-90,90))),this.setZoom(this.zoom+xn(E,this.center.lat))}locationToScreenPoint(e,n){const i=gn(e);if(n){const r=n.getElevationForLngLatZoom(e,this._helper._tileZoom);t.a$(i,i,1+r/t.bE)}return this._projectSurfacePointToScreen(i)}_projectSurfacePointToScreen(e){const n=t.bF();return t.aH(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],new t.P((.5*n[0]+.5)*this.width,(.5*-n[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,n){if(n){const t=n.pointCoordinate(e);if(t)return t}return t.a9.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,t){var n;return null===(n=this.screenPointToMercatorCoordinate(e,t))||void 0===n?void 0:n.toLngLat()}isPointOnMapSurface(e,t){const n=this._cameraPosition,i=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(n,i)}getRayDirectionFromPixel(e){const n=t.bF();n[0]=e.x/this.width*2-1,n[1]=-1*(e.y/this.height*2-1),n[2]=1,n[3]=1,t.aH(n,n,this._globeViewProjMatrixNoCorrectionInverted),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3];const i=t.bA();i[0]=n[0]-this._cameraPosition[0],i[1]=n[1]-this._cameraPosition[1],i[2]=n[2]-this._cameraPosition[2];const r=t.bA();return t.b3(r,i),r}isSurfacePointVisible(e){const t=this._cachedClippingPlane;return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const n=t.bF();return t.aH(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3],n[0]>-1&&n[0]<1&&n[1]>-1&&n[1]<1&&n[2]>-1&&n[2]<1}rayPlanetIntersection(e,n){const i=t.b5(e,n),r=t.bA(),o=t.bA();t.a$(o,n,i),t.b2(r,e,o);const a=1-t.b5(r,r);if(a<0)return null;const s=t.b5(e,e)-1,l=-i+(i<0?1:-1)*Math.sqrt(a),c=s/l,u=l;return{tMin:Math.min(c,u),tMax:Math.max(c,u)}}unprojectScreenPoint(e){const n=this._cameraPosition,i=this.getRayDirectionFromPixel(e),r=this.rayPlanetIntersection(n,i);if(r){const e=t.bA();t.b0(e,n,[i[0]*r.tMin,i[1]*r.tMin,i[2]*r.tMin]);const o=t.bA();return t.b3(o,e),vn(o)}const o=this._cachedClippingPlane,a=o[0]*i[0]+o[1]*i[1]+o[2]*i[2],s=-t.bb(o,n)/a,l=t.bA();if(s>0)t.b0(l,n,[i[0]*s,i[1]*s,i[2]*s]);else{const e=t.bA();t.b0(e,n,[2*i[0],2*i[1],2*i[2]]);const r=t.bb(this._cachedClippingPlane,e);t.b2(l,e,[this._cachedClippingPlane[0]*r,this._cachedClippingPlane[1]*r,this._cachedClippingPlane[2]*r])}const c=function(e){const n=t.bA();return n[0]=e[0]*-e[3],n[1]=e[1]*-e[3],n[2]=e[2]*-e[3],{center:n,radius:Math.sqrt(1-e[3]*e[3])}}(o);return vn(function(e,n,i){const r=t.bA();t.b2(r,i,e);const o=t.bA();return t.by(o,e,r,n/t.b9(r)),o}(c.center,c.radius,l))}getMatrixForModel(e,n){const i=t.V.convert(e),r=1/t.bE,o=t.bj();return t.bJ(o,o,i.lng/180*Math.PI),t.bh(o,o,-i.lat/180*Math.PI),t.O(o,o,[0,0,1+n/t.bE]),t.bh(o,o,.5*Math.PI),t.Q(o,o,[r,r,r]),o}getProjectionDataForCustomLayer(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=this.getProjectionData({overscaledTileID:new t.a2(0,0,0,0,0),applyGlobeMatrix:e});return n.tileMercatorCoords=[0,0,1,1],n}getFastPathSimpleProjectionMatrix(e){}}class Pn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,n){return this._helper.interpolatePadding(e,t,n)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._helper.resize(e,t,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}setConstrainOverride(e){this._helper.setConstrainOverride(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,t){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=t,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(e){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(e,t)=>this.currentTransform.defaultConstrain(e,t),this.applyConstrain=(e,t)=>this._helper.applyConstrain(e,t),this._helper=new qt({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(e,t)=>this.defaultConstrain(e,t)},e),this._globeness=1,this._mercatorTransform=new Wt,this._verticalPerspectiveTransform=new kn}clone(){const e=new Pn;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this,!1),e}apply(e,t){this._helper.apply(e,t),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const t=this._mercatorTransform.getProjectionData(e),n=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?n.mainMatrix:t.mainMatrix,clippingPlane:n.clippingPlane,tileMercatorCoords:n.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:t.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return t.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return t.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,n,i){const r=this._mercatorTransform.getPitchedTextCorrection(e,n,i),o=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,n,i);return t.bu(r,o,this._globeness)}projectTileCoordinates(e,t,n,i){return this.currentTransform.projectTileCoordinates(e,t,n,i)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,t){return this.currentTransform.lngLatToCameraDepth(e,t)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(e,t,n,i){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,n,i)}setLocationAtPoint(e,t){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,t),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(e,t),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(e,t){return this.currentTransform.locationToScreenPoint(e,t)}screenPointToMercatorCoordinate(e,t){return this.currentTransform.screenPointToMercatorCoordinate(e,t)}screenPointToLocation(e,t){return this.currentTransform.screenPointToLocation(e,t)}isPointOnMapSurface(e,t){return this.currentTransform.isPointOnMapSurface(e,t)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,t){return this.currentTransform.getMatrixForModel(e,t)}getProjectionDataForCustomLayer(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return t;const n=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return n.fallbackMatrix=t.mainMatrix,n}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class Mn{get useGlobeControls(){return!0}handlePanInertia(e,n){const i=bn(e,n);return Math.abs(i.lng-n.center.lng)>180&&(i.lng=n.center.lng+179.5*Math.sign(i.lng-n.center.lng)),{easingCenter:i,easingOffset:new t.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,n){const i=e.around,r=n.screenPointToLocation(i);e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta);const o=n.zoom;e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta);const a=n.zoom-o;if(0===a)return;const s=t.bK(n.center.lng,r.lng),l=s/(Math.abs(s/180)+1),c=t.bK(n.center.lat,r.lat),u=n.getRayDirectionFromPixel(i),h=n.cameraPosition,d=-1*t.b5(h,u),p=t.bA();t.b0(p,h,[u[0]*d,u[1]*d,u[2]*d]);const f=t.b7(p)-1,m=Math.exp(.5*-Math.max(f-.3,0)),g=yn(n.worldSize,n.center.lat)/Math.min(n.width,n.height),y=t.bx(g,.9,.5,1,.25),v=(1-t.aq(-a))*Math.min(m,y),_=n.center.lat,x=n.zoom,b=new t.V(n.center.lng+l*v,t.an(n.center.lat+c*v,-t.ao,t.ao));n.setLocationAtPoint(r,i);const w=n.center,D=t.bx(Math.abs(s),45,85,0,1),E=t.bx(g,.75,.35,0,1),C=Math.pow(Math.max(D,E),.25),A=t.bK(w.lng,b.lng),S=t.bK(w.lat,b.lat);n.setCenter(new t.V(w.lng+A*C,w.lat+S*C).wrap()),n.setZoom(x+xn(_,n.center.lat))}handleMapControlsPan(e,t,n){if(!e.panDelta)return;const i=t.center.lat,r=t.zoom;t.setCenter(bn(e.panDelta,t).wrap()),t.setZoom(r+xn(i,t.center.lat))}cameraForBoxAndBearing(e,n,i,r,o){const a=Kt(e,n,i,r,o),s=n.left/o.width*2-1,l=(o.width-n.right)/o.width*2-1,c=n.top/o.height*-2+1,u=(o.height-n.bottom)/o.height*-2+1,h=t.bK(i.getWest(),i.getEast())<0,d=h?i.getEast():i.getWest(),p=h?i.getWest():i.getEast(),f=Math.max(i.getNorth(),i.getSouth()),m=Math.min(i.getNorth(),i.getSouth()),g=d+.5*t.bK(d,p),y=f+.5*t.bK(f,m),v=o.clone();v.setCenter(a.center),v.setBearing(a.bearing),v.setPitch(0),v.setRoll(0),v.setZoom(a.zoom);const _=v.modelViewProjectionMatrix,x=[gn(i.getNorthWest()),gn(i.getNorthEast()),gn(i.getSouthWest()),gn(i.getSouthEast()),gn(new t.V(p,y)),gn(new t.V(d,y)),gn(new t.V(g,f)),gn(new t.V(g,m))],b=gn(a.center);let w=Number.POSITIVE_INFINITY;for(const t of x)s<0&&(w=Mn.getLesserNonNegativeNonNull(w,Mn.solveVectorScale(t,b,_,"x",s))),l>0&&(w=Mn.getLesserNonNegativeNonNull(w,Mn.solveVectorScale(t,b,_,"x",l))),c>0&&(w=Mn.getLesserNonNegativeNonNull(w,Mn.solveVectorScale(t,b,_,"y",c))),u<0&&(w=Mn.getLesserNonNegativeNonNull(w,Mn.solveVectorScale(t,b,_,"y",u)));if(Number.isFinite(w)&&0!==w)return a.zoom=v.zoom+t.at(w),a;Yt()}handleJumpToCenterZoom(e,n){const i=e.center.lat,r=e.applyConstrain(n.center?t.V.convert(n.center):e.center,e.zoom).center;e.setCenter(r.wrap());const o=void 0!==n.zoom?+n.zoom:e.zoom+xn(i,r.lat);e.zoom!==o&&e.setZoom(o)}handleEaseTo(e,n){const i=e.zoom,r=e.center,o=e.padding,a={roll:e.roll,pitch:e.pitch,bearing:e.bearing},s={roll:void 0===n.roll?e.roll:n.roll,pitch:void 0===n.pitch?e.pitch:n.pitch,bearing:void 0===n.bearing?e.bearing:n.bearing},l=void 0!==n.zoom,c=!e.isPaddingEqual(n.padding);let u=!1;const h=n.center?t.V.convert(n.center):r,d=e.applyConstrain(h,i).center;Vt(e,d);const p=e.clone();p.setCenter(d),p.setZoom(l?+n.zoom:i+xn(r.lat,h.lat)),p.setBearing(n.bearing);const f=new t.P(t.an(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),t.an(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));p.setLocationAtPoint(d,f);const m=(n.offset&&n.offsetAsPoint.mag())>0?p.center:d,g=l?+n.zoom:i+xn(r.lat,m.lat),y=i+xn(r.lat,0),v=g+xn(m.lat,0),_=t.bK(r.lng,m.lng),x=t.bK(r.lat,m.lat),b=t.aq(v-y);return u=g!==i,{easeFunc:i=>{if(t.bo(a,s)||Xt({startEulerAngles:a,endEulerAngles:s,tr:e,k:i,useSlerp:a.roll!=s.roll}),c&&e.interpolatePadding(o,n.padding,i),n.around)t.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(n.around,n.aroundPoint);else{const t=v>y?Math.min(2,b):Math.max(.5,b),n=Math.pow(t,1-i),o=Dn(r,_,x,i*n);e.setCenter(o.wrap())}if(u){const n=t.G.number(y,v,i)+xn(0,e.center.lat);e.setZoom(n)}},isZooming:u,elevationCenter:m}}handleFlyTo(e,n){const i=void 0!==n.zoom,r=e.center,o=e.zoom,a=e.padding,s=!e.isPaddingEqual(n.padding),l=e.applyConstrain(t.V.convert(n.center||n.locationAtOffset),o).center,c=i?+n.zoom:e.zoom+xn(e.center.lat,l.lat),u=e.clone();u.setCenter(l),u.setZoom(c),u.setBearing(n.bearing);const h=new t.P(t.an(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),t.an(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));u.setLocationAtPoint(l,h);const d=u.center;Vt(e,d);const p=function(e,n,i){const r=gn(n),o=gn(i),a=t.b5(r,o),s=Math.acos(a),l=fn(e);return s/(2*Math.PI)*l}(e,r,d),f=o+xn(r.lat,0),m=c+xn(d.lat,0),g=t.aq(m-f);let y;if("number"==typeof n.minZoom){const i=+n.minZoom+xn(d.lat,0),r=Math.min(i,f,m)+xn(0,d.lat),o=e.applyConstrain(d,r).zoom+xn(d.lat,0);y=t.aq(o-f)}const v=t.bK(r.lng,d.lng),_=t.bK(r.lat,d.lat);return{easeFunc:(i,o,l,u)=>{const h=Dn(r,v,_,l);s&&e.interpolatePadding(a,n.padding,i);const p=1===i?d:h;e.setCenter(p.wrap());const m=f+t.at(o);e.setZoom(1===i?c:m+xn(0,p.lat))},scaleOfZoom:g,targetCenter:d,scaleOfMinZoom:y,pixelPathLength:p}}static solveVectorScale(e,t,n,i,r){const o="x"===i?[n[0],n[4],n[8],n[12]]:[n[1],n[5],n[9],n[13]],a=[n[3],n[7],n[11],n[15]],s=e[0]*o[0]+e[1]*o[1]+e[2]*o[2],l=e[0]*a[0]+e[1]*a[1]+e[2]*a[2],c=t[0]*o[0]+t[1]*o[1]+t[2]*o[2],u=t[0]*a[0]+t[1]*a[1]+t[2]*a[2];return c+r*l===s+r*u||a[3]*(s-c)+o[3]*(u-l)+s*u==c*l?null:(c+o[3]-r*u-r*a[3])/(c-s-r*u+r*l)}static getLesserNonNegativeNonNull(e,t){return null!==t&&t>=0&&t<e?t:e}}class In{constructor(e){this._globe=e,this._mercatorCameraHelper=new $t,this._verticalPerspectiveCameraHelper=new Mn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,t){return this.currentHelper.handlePanInertia(e,t)}handleMapControlsRollPitchBearingZoom(e,t){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,t)}handleMapControlsPan(e,t,n){this.currentHelper.handleMapControlsPan(e,t,n)}cameraForBoxAndBearing(e,t,n,i,r){return this.currentHelper.cameraForBoxAndBearing(e,t,n,i,r)}handleJumpToCenterZoom(e,t){this.currentHelper.handleJumpToCenterZoom(e,t)}handleEaseTo(e,t){return this.currentHelper.handleEaseTo(e,t)}handleFlyTo(e,t){return this.currentHelper.handleFlyTo(e,t)}}const jn=(e,n)=>t.B(e,n&&n.filter(e=>"source.canvas"!==e.identifier)),Nn=t.bO();class On extends t.E{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,r;super(),this._rtlPluginLoaded=()=>{for(const e in this.tileManagers){const t=this.tileManagers[e].getSource().type;"vector"!==t&&"geojson"!==t||this.tileManagers[e].reload()}},this.map=e,this.dispatcher=new R(z(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(e,t)=>this.getGlyphs(e,t)),this.dispatcher.registerMessageHandler("GI",(e,t)=>this.getImages(e,t)),this.dispatcher.registerMessageHandler("GDA",(e,t)=>this.getDashes(e,t)),this.imageManager=new w,this.imageManager.setEventedParent(this);const o=(null===(i=e._container)||void 0===i?void 0:i.lang)||"undefined"!=typeof document&&(null===(r=document.documentElement)||void 0===r?void 0:r.lang)||void 0;this.glyphManager=new S(e._requestManager,n.localIdeographFontFamily,o),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new Pt,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",t.bP()),ce().on(ae,this._rtlPluginLoaded),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.tileManagers[e.sourceId];if(!t)return;const n=t.getSource();if(n&&n.vectorLayerIds)for(const i in this._layers){const e=this._layers[i];e.source===n.id&&this._validateLayer(e)}})}_setInitialValues(){var e;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new t.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new((null===(e=this.crossTileSymbolIndex)||void 0===e?void 0:e.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(e,n){var i,r,o;this._checkLoaded();const a=null===n?null!==(o=null===(r=null===(i=this.stylesheet.state)||void 0===i?void 0:i[e])||void 0===r?void 0:r.default)&&void 0!==o?o:null:n;if(t.bR(a,this._globalState[e]))return this;this._globalState[e]=a,this._applyGlobalStateChanges([e])}getGlobalState(){return this._globalState}setGlobalState(e){this._checkLoaded();const n=[];for(const i in e)!t.bR(this._globalState[i],e[i].default)&&(n.push(i),this._globalState[i]=e[i].default);this._applyGlobalStateChanges(n)}_applyGlobalStateChanges(e){if(0===e.length)return;const t=new Set,n={};for(const i of e){n[i]=this._globalState[i];for(const e in this._layers){const n=this._layers[e],r=n.getLayoutAffectingGlobalStateRefs(),o=n.getPaintAffectingGlobalStateRefs(),a=n.getVisibilityAffectingGlobalStateRefs();if(r.has(i)&&t.add(n.source),o.has(i))for(const{name:e,value:t}of o.get(i))this._updatePaintProperty(n,e,t);(null==a?void 0:a.has(i))&&(n.recalculateVisibility(),this._updateLayer(n))}}this.dispatcher.broadcast("UGS",n);for(const i in this.tileManagers)t.has(i)&&(this._reloadSource(i),this._changed=!0)}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.l("dataloading",{dataType:"style"})),n.validate="boolean"!=typeof n.validate||n.validate;const r=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const o=this._loadStyleRequest;t.j(r,this._loadStyleRequest).then(e=>{this._loadStyleRequest=null,this._load(e.data,n,i)}).catch(e=>{this._loadStyleRequest=null,e&&!o.signal.aborted&&this.fire(new t.k(e))})}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,s.frameAsync(this._frameRequest,this.map._ownerWindow).then(()=>{this._frameRequest=null,n.validate=!1!==n.validate,this._load(e,n,i)}).catch(()=>{})}loadEmpty(){this.fire(new t.l("dataloading",{dataType:"style"})),this._load(Nn,{validate:!1})}_load(e,n,i){var r,o;let a=n.transformStyle?n.transformStyle(i,e):e;if(!n.validate||!jn(this,t.C(a))){a=Object.assign({},a),this._loaded=!0,this.stylesheet=a;for(const e in a.sources)this.addSource(e,a.sources[e],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs),this._createLayers(),this.light=new k(this.stylesheet.light),this._setProjectionInternal((null===(r=this.stylesheet.projection)||void 0===r?void 0:r.type)||"mercator"),this.sky=new M(this.stylesheet.sky),this.map.setTerrain(null!==(o=this.stylesheet.terrain)&&void 0!==o?o:null),this.fire(new t.l("data",{dataType:"style"})),this.fire(new t.l("style.load"))}}_createLayers(){var e,n,i;const r=t.bS(this.stylesheet.layers);this.setGlobalState(null!==(e=this.stylesheet.state)&&void 0!==e?e:null),this.dispatcher.broadcast("SL",r),this._order=r.map(e=>e.id),this._layers={},this._serializedLayers=null;for(const o of r){const e=t.bT(o,this._globalState);if(e.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=e,t.bU(e)&&this.tileManagers[e.source]){const t=null!==(i=null===(n=o.paint)||void 0===n?void 0:n["raster-fade-duration"])&&void 0!==i?i:e.paint.get("raster-fade-duration");this.tileManagers[e.source].setRasterFadeDuration(t)}}}_loadSprite(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1);const r=new AbortController;let o;this._spriteRequest=r,function(e,n,i,r){return t._(this,void 0,void 0,function*(){const o=_(e),a=i>1?"@2x":"",l={},c={};for(const{id:e,url:i}of o){const o=n.transformRequest(x(i,a,".json"),"SpriteJSON");l[e]=t.j(o,r);const s=n.transformRequest(x(i,a,".png"),"SpriteImage");c[e]=y.getImage(s,r)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,n){return t._(this,void 0,void 0,function*(){const t={};for(const i in e){t[i]={};const r=s.getImageCanvasContext((yield n[i]).data),o=(yield e[i]).data;for(const e in o){const{width:n,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m}=o[e];t[i][e]={data:null,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m,spriteData:{width:n,height:a,x:s,y:l,context:r}}}}return t})}(l,c)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const i=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter(t=>!(t in e)):[];for(const e of i)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const r in e[t]){const i="default"===t?r:"".concat(t,":").concat(r);this._spritesImagesIds[t].push(i),i in this.imageManager.images?this.imageManager.updateImage(i,e[t][r],!1):this.imageManager.addImage(i,e[t][r]),n&&(this._changedImages[i]=!0)}}}).catch(e=>{this._spriteRequest=null,o=e,r.signal.aborted||this.fire(new t.k(o))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"})),i&&i(o)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}_validateLayer(e){const n=this.tileManagers[e.source];if(!n)return;const i=e.sourceLayer;if(!i)return;const r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.k(new Error('Source layer "'.concat(i,'" does not exist on source "').concat(r.id,'" as specified by style layer "').concat(e.id,'".'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.tileManagers)if(!this.tileManagers[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._serializedAllLayers();if(!e||0===e.length)return Object.values(n?t.bV(i):i);const r=[];for(const o of e)if(i[o]){const e=n?t.bV(i[o]):i[o];r.push(e)}return r}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const n of t){const t=this._layers[n];"custom"!==t.type&&(e[n]=t.serialize())}return e}hasTransitions(){var e,t,n;if(null===(e=this.light)||void 0===e?void 0:e.hasTransition())return!0;if(null===(t=this.sky)||void 0===t?void 0:t.hasTransition())return!0;if(null===(n=this.projection)||void 0===n?void 0:n.hasTransition())return!0;for(const i in this.tileManagers)if(this.tileManagers[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(n){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error("Invalid action ".concat(t));this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const i in this._updatedPaintProps)this._layers[i].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this.tileManagers){const e=this.tileManagers[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.tileManagers[n.source].used=!0)}for(const r in i){const e=this.tileManagers[r];!!i[r]!=!!e.used&&e.fire(new t.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:r}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,n&&this.fire(new t.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.tileManagers)this.tileManagers[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;this._checkLoaded();const r=this.serialize();if(e=n.transformStyle?n.transformStyle(r,e):e,(null===(i=n.validate)||void 0===i||i)&&jn(this,t.C(e)))return!1;(e=t.bV(e)).layers=t.bS(e.layers);const o=t.bW(r,e),a=this._getOperationsToPerform(o);if(a.unimplemented.length>0)throw new Error("Unimplemented: ".concat(a.unimplemented.join(", "),"."));if(0===a.operations.length)return!1;for(const t of a.operations)t();return this.stylesheet=e,this._serializedLayers=null,this.fire(new t.l("style.load",{style:this})),!0}_getOperationsToPerform(e){const t=[],n=[];for(const i of e)switch(i.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":t.push(()=>this.addLayer.apply(this,i.args));break;case"removeLayer":t.push(()=>this.removeLayer.apply(this,i.args));break;case"setPaintProperty":t.push(()=>this.setPaintProperty.apply(this,i.args));break;case"setLayoutProperty":t.push(()=>this.setLayoutProperty.apply(this,i.args));break;case"setFilter":t.push(()=>this.setFilter.apply(this,i.args));break;case"addSource":t.push(()=>this.addSource.apply(this,i.args));break;case"removeSource":t.push(()=>this.removeSource.apply(this,i.args));break;case"setLayerZoomRange":t.push(()=>this.setLayerZoomRange.apply(this,i.args));break;case"setLight":t.push(()=>this.setLight.apply(this,i.args));break;case"setGeoJSONSourceData":t.push(()=>this.setGeoJSONSourceData.apply(this,i.args));break;case"setGlyphs":t.push(()=>this.setGlyphs.apply(this,i.args));break;case"setSprite":t.push(()=>this.setSprite.apply(this,i.args));break;case"setTerrain":t.push(()=>this.map.setTerrain.apply(this,i.args));break;case"setSky":t.push(()=>this.setSky.apply(this,i.args));break;case"setProjection":this.setProjection.apply(this,i.args);break;case"setGlobalState":t.push(()=>this.setGlobalState.apply(this,i.args));break;case"setTransition":t.push(()=>{});break;default:n.push(i.command)}return{operations:t,unimplemented:n}}addImage(e,n){if(this.getImage(e))return this.fire(new t.k(new Error('An image named "'.concat(e,'" already exists.'))));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.k(new Error('An image named "'.concat(e,'" does not exist.'))));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.tileManagers[e])throw new Error('Source "'.concat(e,'" already exists.'));if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.C.source,"sources.".concat(e),n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=this.tileManagers[e]=new Ne(e,n,this.dispatcher);r.style=this,r.setEventedParent(this,()=>({isSourceLoaded:r.loaded(),source:r.serialize(),sourceId:e})),r.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.tileManagers[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.k(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(i,'" is using it.'))));const n=this.tileManagers[e];delete this.tileManagers[e],delete this._updatedSources[e],n.fire(new t.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.tileManagers[e])throw new Error("There is no source with this ID=".concat(e));const n=this.tileManagers[e].getSource();if("geojson"!==n.type)throw new Error("geojsonSource.type is ".concat(n.type,", which is !== 'geojson"));n.setData(t),this._changed=!0}getSource(e){return this.tileManagers[e]&&this.tileManagers[e].getSource()}addLayer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.k(new Error('Layer "'.concat(r,'" already exists on this map.'))));let o;if("custom"===e.type){if(jn(this,t.bX(e)))return;o=t.bT(e,this._globalState)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(r,e.source),e=t.bV(e),e=t.e(e,{source:r})),this._validate(t.C.layer,"layers.".concat(r),e,{arrayIndex:-1},i))return;o=t.bT(e,this._globalState),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}})}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.k(new Error('Cannot add layer "'.concat(r,'" before non-existing layer "').concat(n,'".'))));else{if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){const e=this._removedLayers[r];delete this._removedLayers[r],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.tileManagers[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.k(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.k(new Error('Cannot move layer "'.concat(e,'" before non-existing layer "').concat(n,'".')))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.k(new Error('Cannot remove non-existing layer "'.concat(e,'".'))));n.setEventedParent(null);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.k(new Error('Cannot set the zoom range of non-existing layer "'.concat(e,'".'))))}setFilter(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=this.getLayer(e);if(r){if(!t.bR(r.filter,n))return null==n?(r.setFilter(void 0),void this._updateLayer(r)):void(this._validate(t.C.filter,"layers.".concat(r.id,".filter"),n,null,i)||(r.setFilter(t.bV(n)),this._updateLayer(r)))}else this.fire(new t.k(new Error('Cannot filter non-existing layer "'.concat(e,'".'))))}getFilter(e){return t.bV(this.getLayer(e).filter)}setLayoutProperty(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.bR(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.k(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.k(new Error('Cannot get style of non-existing layer "'.concat(e,'".'))))}setPaintProperty(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.bR(o.getPaintProperty(n),i)||this._updatePaintProperty(o,n,i,r):this.fire(new t.k(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}_updatePaintProperty(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.setPaintProperty(n,i,r)&&this._updateLayer(e),t.bU(e)&&"raster-fade-duration"===n&&this.tileManagers[e.source].setRasterFadeDuration(i),this._changed=!0,this._updatedPaintProps[e.id]=!0,this._serializedLayers=null}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,o=this.tileManagers[i];if(void 0===o)return void this.fire(new t.k(new Error("The source '".concat(i,"' does not exist in the map's style."))));const a=o.getSource().type;"geojson"===a&&r?this.fire(new t.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||r?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,n)):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.tileManagers[i];if(void 0===r)return void this.fire(new t.k(new Error("The source '".concat(i,"' does not exist in the map's style."))));const o=r.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.k(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(a,e.id,n):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.tileManagers[n];if(void 0!==r)return"vector"!==r.getSource().type||i?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,e.id)):void this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.k(new Error("The source '".concat(n,"' does not exist in the map's style."))))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.bY(this.tileManagers,e=>e.serialize()),n=this._serializeByIds(this._order,!0),i=this.map.getTerrain()||void 0,r=this.stylesheet;return t.bZ({version:r.version,name:r.name,metadata:r.metadata,light:r.light,sky:r.sky,center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,sprite:r.sprite,glyphs:r.glyphs,transition:r.transition,projection:r.projection,sources:e,layers:n,terrain:i},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.tileManagers[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.tileManagers[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},i=[];for(let o=this._order.length-1;o>=0;o--){const r=this._order[o];if(t(r)){n[r]=o;for(const t of e){const e=t[r];if(e)for(const t of e)i.push(t)}}}i.sort((e,t)=>t.intersectionZ-e.intersectionZ);const r=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=i.length-1;e>=0;e--){const t=i[e].feature;if(n[t.layer.id]<o)break;r.push(t),i.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)r.push(t.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.C.filter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!(Array.isArray(n.layers)||n.layers instanceof Set))return this.fire(new t.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.k(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be queried for features.")))),[];r[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=this._serializedAllLayers(),s=n.layers instanceof Set?n.layers:Array.isArray(n.layers)?new Set(n.layers):null,l=Object.assign(Object.assign({},n),{layers:s,globalState:this._globalState});for(const t in this.tileManagers)n.layers&&!r[t]||o.push(q(this.tileManagers[t],this._layers,a,e,l,i,this.map.terrain?(e,t,n)=>this.map.terrain.getElevation(e,t,n):void 0));return this.placement&&o.push(function(e,t,n,i,r,o,a){const s={},l=o.queryRenderedSymbols(i),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(Z);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,{filterSpec:r.filter,globalState:r.globalState},r.layers,r.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],i=n[e];i.sort((e,t)=>{const n=u.featureSortOrder;if(n){const i=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex});for(const e of i)t.push(e)}}return function(e,t,n){for(const i in e)for(const r of e[i])H(r,n[t[i].source]);return e}(s,e,n)}(this._layers,a,this.tileManagers,e,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){(null==n?void 0:n.filter)&&this._validate(t.C.filter,"querySourceFeatures.filter",n.filter,null,n);const i=this.tileManagers[e];return i?function(e,t){const n=e.getRenderableIds().map(t=>e.getTileByID(t)),i=[],r={};for(let o=0;o<n.length;o++){const e=n[o],a=e.tileID.canonical.key;r[a]||(r[a]=!0,e.querySourceFeatures(i,t))}return i}(i,n?Object.assign(Object.assign({},n),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const i=this.light.getLight();let r=!1;for(const a in e)if(!t.bR(e[a],i[a])){r=!0;break}if(!r)return;const o={now:c(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(o)}getProjection(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.sky}setSky(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const i=this.getSky();let r=!1;if(!e&&!i)return;if(e&&!i)r=!0;else if(!e&&i)r=!0;else for(const a in e)if(!t.bR(e[a],i[a])){r=!0;break}if(!r)return;const o={now:c(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,n),this.sky.updateTransitions(o)}_setProjectionInternal(e){const n=function(e,n){const i={constrainOverride:n};if(Array.isArray(e)){const t=new pn({type:e});return{projection:t,transform:new Pn(i),cameraHelper:new In(t)}}switch(e){case"mercator":return{projection:new zt,transform:new Wt(i),cameraHelper:new $t};case"globe":{const e=new pn({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:e,transform:new Pn(i),cameraHelper:new In(e)}}case"vertical-perspective":return{projection:new hn,transform:new kn(i),cameraHelper:new Mn};default:return t.w("Unknown projection name: ".concat(e,". Falling back to mercator projection.")),{projection:new zt,transform:new Wt(i),cameraHelper:new $t}}}(e,this.map.transformConstrain);this.projection=n.projection,this.map.migrateProjection(n.transform,n.cameraHelper);for(const t in this.tileManagers)this.tileManagers[t].reload()}_validate(e,n,i,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&jn(this,e.call(t.C,t.e({key:n,style:this.serialize(),value:i,styleSpec:t.u},r)))}_remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(ae,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.tileManagers){const e=this.tileManagers[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.tileManagers[e].clearTiles()}_reloadSource(e){this.tileManagers[e].resume(),this.tileManagers[e].reload()}_updateSources(e){for(const t in this.tileManagers)this.tileManagers[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.tileManagers)this._reloadSource(e)}_updatePlacement(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!1,a=!1;const s={};for(const l of this._order){const t=this._layers[l];if("symbol"!==t.type)continue;if(!s[t.source]){const e=this.tileManagers[t.source];s[t.source]=e.getRenderableIds(!0).map(t=>e.getTileByID(t)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const n=this.crossTileSymbolIndex.addLayer(t,s[t.source],e.center.lng);o=o||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c(),e.zoom))&&(this.pauseablePlacement=new At(e,this.map.terrain,this._order,r,t,n,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(const l of this._order){const e=this._layers[l];"symbol"===e.type&&this.placement.updateLayerOpacities(e,s[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c())}_releaseSymbolFadeTiles(){for(const e in this.tileManagers)this.tileManagers[e].releaseSymbolFadeTiles()}getImages(e,n){return t._(this,void 0,void 0,function*(){const e=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const t=this.tileManagers[n.source];return t&&t.setDependencies(n.tileID.key,n.type,n.icons),e})}getGlyphs(e,n){return t._(this,void 0,void 0,function*(){const e=yield this.glyphManager.getGlyphs(n.stacks),t=this.tileManagers[n.source];return t&&t.setDependencies(n.tileID.key,n.type,[""]),e})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),e&&this._validate(t.C.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}getDashes(e,n){return t._(this,void 0,void 0,function*(){const e={};for(const[t,i]of Object.entries(n.dashes))e[t]=this.lineAtlas.getDash(i.dasharray,i.round);return e})}addSprite(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const o=[{id:e,url:n}],a=[..._(this.stylesheet.sprite),...o];this._validate(t.C.sprite,"sprite",a,null,i)||(this.stylesheet.sprite=a,this._loadSprite(o,!0,r))}removeSprite(e){this._checkLoaded();const n=_(this.stylesheet.sprite);if(n.find(t=>t.id===e)){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;n.splice(n.findIndex(t=>t.id===e),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}else this.fire(new t.k(new Error('Sprite "'.concat(e,"\" doesn't exists on this map."))))}getSprite(){return _(this.stylesheet.sprite)}setSprite(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),e&&this._validate(t.C.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,i):(this._unloadSprite(),i&&i(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const e in this.tileManagers){const t=this.tileManagers[e];t.setEventedParent(null),t.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const e in this._layers){const t=this._layers[e];t.setEventedParent(null),t.onRemove&&t.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Bn=t.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ln{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,i,r,o,a,s,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==i.length;for(let u=0;!c&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||c||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,n,i,r,o,a,s,l):(e.bindVertexArray.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind(),l&&l.bind())}freshBind(e,t,n,i,r,o,a,s){const l=e.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s,t.enableAttributes(u,e);for(const h of n)h.enableAttributes(u,e);o&&o.enableAttributes(u,e),a&&a.enableAttributes(u,e),s&&s.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,r);for(const h of n)h.bind(),h.setVertexAttribPointers(u,e,r);o&&(o.bind(),o.setVertexAttribPointers(u,e,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,e,r)),s&&(s.bind(),s.setVertexAttribPointers(u,e,r)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const zn=(e,n,i,r,o)=>({u_texture:0,u_ele_delta:e,u_fog_matrix:n,u_fog_color:i?i.properties.get("fog-color"):t.bp.white,u_fog_ground_blend:i?i.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:o?0:i?i.calculateFogBlendOpacity(r):0,u_horizon_color:i?i.properties.get("horizon-color"):t.bp.white,u_horizon_fog_blend:i?i.properties.get("horizon-fog-blend"):1,u_is_globe_mode:o?1:0}),Rn={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Vn(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const i=e[n].split(" ");t.push(i.pop())}return t}class Un{constructor(e,n,i,r,o,a,s,l){let c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];const u=e.gl;this.program=u.createProgram();const h=Vn(n.staticAttributes),d=i?i.getBinderAttributes():[],p=h.concat(d),f=It.prelude.staticUniforms?Vn(It.prelude.staticUniforms):[],m=s.staticUniforms?Vn(s.staticUniforms):[],g=n.staticUniforms?Vn(n.staticUniforms):[],y=i?i.getBinderUniforms():[],v=f.concat(m).concat(g).concat(y),_=[];for(const t of v)_.indexOf(t)<0&&_.push(t);const x=i?i.defines():[];an(u)&&x.unshift("#version 300 es"),o&&x.push("#define OVERDRAW_INSPECTOR;"),a&&x.push("#define TERRAIN3D;"),l&&x.push(l),c&&x.push(...c);let b=x.concat(It.prelude.fragmentSource,s.fragmentSource,n.fragmentSource).join("\n"),w=x.concat(It.prelude.vertexSource,s.vertexSource,n.vertexSource).join("\n");an(u)||(b=function(e){return e.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(b),w=function(e){return e.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(w));const D=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(D,b),u.compileShader(D),!u.getShaderParameter(D,u.COMPILE_STATUS))throw new Error("Could not compile fragment shader: ".concat(u.getShaderInfoLog(D)));u.attachShader(this.program,D);const E=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(E,w),u.compileShader(E),!u.getShaderParameter(E,u.COMPILE_STATUS))throw new Error("Could not compile vertex shader: ".concat(u.getShaderInfoLog(E)));u.attachShader(this.program,E),this.attributes={};const C={};this.numAttributes=p.length;for(let t=0;t<this.numAttributes;t++)p[t]&&(u.bindAttribLocation(this.program,t,p[t]),this.attributes[p[t]]=t);if(u.linkProgram(this.program),!u.getProgramParameter(this.program,u.LINK_STATUS))throw new Error("Program failed to link: ".concat(u.getProgramInfoLog(this.program)));u.deleteShader(E),u.deleteShader(D);for(let t=0;t<_.length;t++){const e=_[t];if(e&&!C[e]){const t=u.getUniformLocation(this.program,e);t&&(C[e]=t)}}this.fixedUniforms=r(e,C),this.terrainUniforms=((e,n)=>({u_depth:new t.b_(e,n.u_depth),u_terrain:new t.b_(e,n.u_terrain),u_terrain_dim:new t.bq(e,n.u_terrain_dim),u_terrain_matrix:new t.c0(e,n.u_terrain_matrix),u_terrain_unpack:new t.c1(e,n.u_terrain_unpack),u_terrain_exaggeration:new t.bq(e,n.u_terrain_exaggeration)}))(e,C),this.projectionUniforms=((e,n)=>({u_projection_matrix:new t.c0(e,n.u_projection_matrix),u_projection_tile_mercator_coords:new t.c1(e,n.u_projection_tile_mercator_coords),u_projection_clipping_plane:new t.c1(e,n.u_projection_clipping_plane),u_projection_transition:new t.bq(e,n.u_projection_transition),u_projection_fallback_matrix:new t.c0(e,n.u_projection_fallback_matrix)}))(e,C),this.binderUniforms=i?i.getUniforms(e,C):[]}draw(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(r),e.setCullFace(o),s){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,s.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,s.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(s[e])}if(l)for(const b in l)this.projectionUniforms[Rn[b]].set(l[b]);if(a)for(const b in this.fixedUniforms)this.fixedUniforms[b].set(a[b]);m&&m.setUniforms(e,this.binderUniforms,p,{zoom:f});let x=0;switch(t){case _.LINES:x=2;break;case _.TRIANGLES:x=3;break;case _.LINE_STRIP:x=1}for(const b of d.get()){const n=b.vaos||(b.vaos={});(n[c]||(n[c]=new Ln)).bind(e,this,u,m?m.getPaintVertexBuffers():[],h,b.vertexOffset,g,y,v),_.drawElements(t,b.primitiveLength*x,_.UNSIGNED_SHORT,b.primitiveOffset*x*2)}}}function qn(e,n,i){const r=1/t.aN(i,1,n.transform.tileZoom),o=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,n.transform.tileZoom)/o,s=a*(i.tileID.canonical.x+i.tileID.wrap*o),l=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}const Zn=(e,n,i,r)=>{const o=e.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.c4();"viewport"===o.properties.get("anchor")&&t.c5(l,e.transform.bearingInRadians),t.c6(s,s,l);const c=e.transform.transformLightDirection(s),u=o.properties.get("color");return{u_lightpos:s,u_lightpos_globe:c,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+n,u_opacity:i,u_fill_translate:r}},Hn=(e,n,i,r,o,a,s)=>t.e(Zn(e,n,i,r),qn(a,e,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),Gn=(e,n,i,r)=>t.e(qn(n,e,i),{u_fill_translate:r}),Wn=(e,t)=>({u_world:e,u_fill_translate:t}),Yn=(e,n,i,r,o)=>t.e(Gn(e,n,i,o),{u_world:r}),Xn=(e,n,i,r,o)=>{const a=e.transform;let s,l,c=0;if("map"===i.paint.get("circle-pitch-alignment")){const e=t.aN(n,1,a.zoom);s=!0,l=[e,e],c=e/(t.a5*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*o}else s=!1,l=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_pitch_with_map:+s,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:l,u_globe_extrude_scale:c,u_translate:r}},Kn=e=>({u_pixel_extrude_scale:[1/e.width,1/e.height]}),$n=e=>({u_viewport_size:[e.width,e.height]}),Qn=function(e){return{u_color:e,u_overlay:0,u_overlay_scale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1}},Jn=(e,n,i,r)=>{const o=t.aN(e,1,n)/(t.a5*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*r;return{u_extrude_scale:t.aN(e,1,n),u_intensity:i,u_globe_extrude_scale:o}},ei=(e,n,i,r)=>{const o=t.N();t.c7(o,0,e.width,e.height,0,0,1);const a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:i,u_color_ramp:r,u_opacity:n.paint.get("heatmap-opacity")}},ti=(e,t,n)=>{const i=n.paint.get("hillshade-accent-color");let r;switch(n.paint.get("hillshade-method")){case"basic":r=4;break;case"combined":r=1;break;case"igor":r=2;break;case"multidirectional":r=3;break;default:r=0}const o=n.getIlluminationProperties();for(let a=0;a<o.directionRadians.length;a++)"viewport"===n.paint.get("hillshade-illumination-anchor")&&(o.directionRadians[a]+=e.transform.bearingInRadians);return{u_image:0,u_latrange:ii(0,t.tileID),u_exaggeration:n.paint.get("hillshade-exaggeration"),u_altitudes:o.altitudeRadians,u_azimuths:o.directionRadians,u_accent:i,u_method:r,u_highlights:o.highlightColor,u_shadows:o.shadowColor}},ni=(e,n)=>{const i=n.stride,r=t.N();return t.c7(r,0,t.a5,-t.a5,0,0,1),t.O(r,r,[0,-t.a5,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}};function ii(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.a9(0,r/i).toLngLat().lat,new t.a9(0,(r+1)/i).toLngLat().lat]}const ri=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:n,u_opacity:e.paint.get("color-relief-opacity")}},oi=(e,n,i,r)=>{const o=e.transform;return{u_translation:hi(e,n,i),u_ratio:r/t.aN(n,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},ai=(e,n,i,r,o)=>t.e(oi(e,n,i,r),{u_image:0,u_image_height:o}),si=(e,n,i,r,o)=>{const a=e.transform,s=ui(n,a);return{u_translation:hi(e,n,i),u_texsize:n.imageAtlasTexture.size,u_ratio:r/t.aN(n,1,a.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[s,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},li=(e,n,i,r,o)=>{const a=ui(n,e.transform);return t.e(oi(e,n,i,r),{u_tileratio:a,u_crossfade_from:o.fromScale,u_crossfade_to:o.toScale,u_image:0,u_mix:o.t,u_lineatlas_width:e.lineAtlas.width,u_lineatlas_height:e.lineAtlas.height})},ci=(e,n,i,r,o,a)=>{const s=ui(n,e.transform);return t.e(oi(e,n,i,r),{u_image:0,u_image_height:a,u_tileratio:s,u_crossfade_from:o.fromScale,u_crossfade_to:o.toScale,u_image_dash:1,u_mix:o.t,u_lineatlas_width:e.lineAtlas.width,u_lineatlas_height:e.lineAtlas.height})};function ui(e,n){return 1/t.aN(e,1,n.tileZoom)}function hi(e,n,i){return t.aO(e.transform,n,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const di=(e,t,n,i,r)=>{return{u_tl_parent:e,u_scale_parent:t,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:pi(i.paint.get("raster-hue-rotate")),u_coords_top:[r[0].x,r[0].y,r[1].x,r[1].y],u_coords_bottom:[r[3].x,r[3].y,r[2].x,r[2].y]};var o,a};function pi(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const fi=(e,t,n,i,r,o,a,s,l,c,u,h,d)=>{const p=a.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:p.cameraToCenterDistance,u_pitch:p.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:p.width/p.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+i,u_is_along_line:r,u_is_variable_anchor:o,u_texsize:h,u_texture:0,u_translation:c,u_pitched_scale:d}},mi=(e,n,i,r,o,a,s,l,c,u,h,d,p,f)=>{const m=s.transform;return t.e(fi(e,n,i,r,o,a,s,l,c,u,h,d,f),{u_gamma_scale:r?Math.cos(m.pitch*Math.PI/180)*m.cameraToCenterDistance:1,u_device_pixel_ratio:s.pixelRatio,u_is_halo:1})},gi=(e,n,i,r,o,a,s,l,c,u,h,d,p)=>t.e(mi(e,n,i,r,o,a,s,l,c,u,!0,h,0,p),{u_texsize_icon:d,u_texture_icon:1}),yi=(e,t)=>({u_opacity:e,u_color:t}),vi=(e,n,i,r,o)=>t.e(function(e,n,i,r){const o=i.imageManager.getPattern(e.from.toString()),a=i.imageManager.getPattern(e.to.toString()),{width:s,height:l}=i.imageManager.getPixelSize(),c=Math.pow(2,r.tileID.overscaledZ),u=r.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(r.tileID.canonical.x+r.tileID.wrap*c),d=u*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:n.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:n.fromScale,u_scale_b:n.toScale,u_tile_units_to_pixels:1/t.aN(r,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(i,o,n,r),{u_opacity:e}),_i=(e,t)=>{},xi={fillExtrusion:(e,n)=>({u_lightpos:new t.c2(e,n.u_lightpos),u_lightpos_globe:new t.c2(e,n.u_lightpos_globe),u_lightintensity:new t.bq(e,n.u_lightintensity),u_lightcolor:new t.c2(e,n.u_lightcolor),u_vertical_gradient:new t.bq(e,n.u_vertical_gradient),u_opacity:new t.bq(e,n.u_opacity),u_fill_translate:new t.c3(e,n.u_fill_translate)}),fillExtrusionPattern:(e,n)=>({u_lightpos:new t.c2(e,n.u_lightpos),u_lightpos_globe:new t.c2(e,n.u_lightpos_globe),u_lightintensity:new t.bq(e,n.u_lightintensity),u_lightcolor:new t.c2(e,n.u_lightcolor),u_vertical_gradient:new t.bq(e,n.u_vertical_gradient),u_height_factor:new t.bq(e,n.u_height_factor),u_opacity:new t.bq(e,n.u_opacity),u_fill_translate:new t.c3(e,n.u_fill_translate),u_image:new t.b_(e,n.u_image),u_texsize:new t.c3(e,n.u_texsize),u_pixel_coord_upper:new t.c3(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,n.u_pixel_coord_lower),u_scale:new t.c2(e,n.u_scale),u_fade:new t.bq(e,n.u_fade)}),fill:(e,n)=>({u_fill_translate:new t.c3(e,n.u_fill_translate)}),fillPattern:(e,n)=>({u_image:new t.b_(e,n.u_image),u_texsize:new t.c3(e,n.u_texsize),u_pixel_coord_upper:new t.c3(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,n.u_pixel_coord_lower),u_scale:new t.c2(e,n.u_scale),u_fade:new t.bq(e,n.u_fade),u_fill_translate:new t.c3(e,n.u_fill_translate)}),fillOutline:(e,n)=>({u_world:new t.c3(e,n.u_world),u_fill_translate:new t.c3(e,n.u_fill_translate)}),fillOutlinePattern:(e,n)=>({u_world:new t.c3(e,n.u_world),u_image:new t.b_(e,n.u_image),u_texsize:new t.c3(e,n.u_texsize),u_pixel_coord_upper:new t.c3(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,n.u_pixel_coord_lower),u_scale:new t.c2(e,n.u_scale),u_fade:new t.bq(e,n.u_fade),u_fill_translate:new t.c3(e,n.u_fill_translate)}),circle:(e,n)=>({u_camera_to_center_distance:new t.bq(e,n.u_camera_to_center_distance),u_scale_with_map:new t.b_(e,n.u_scale_with_map),u_pitch_with_map:new t.b_(e,n.u_pitch_with_map),u_extrude_scale:new t.c3(e,n.u_extrude_scale),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_globe_extrude_scale:new t.bq(e,n.u_globe_extrude_scale),u_translate:new t.c3(e,n.u_translate)}),collisionBox:(e,n)=>({u_pixel_extrude_scale:new t.c3(e,n.u_pixel_extrude_scale)}),collisionCircle:(e,n)=>({u_viewport_size:new t.c3(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.b$(e,n.u_color),u_overlay:new t.b_(e,n.u_overlay),u_overlay_scale:new t.bq(e,n.u_overlay_scale)}),depth:_i,clippingMask:_i,heatmap:(e,n)=>({u_extrude_scale:new t.bq(e,n.u_extrude_scale),u_intensity:new t.bq(e,n.u_intensity),u_globe_extrude_scale:new t.bq(e,n.u_globe_extrude_scale)}),heatmapTexture:(e,n)=>({u_matrix:new t.c0(e,n.u_matrix),u_world:new t.c3(e,n.u_world),u_image:new t.b_(e,n.u_image),u_color_ramp:new t.b_(e,n.u_color_ramp),u_opacity:new t.bq(e,n.u_opacity)}),hillshade:(e,n)=>({u_image:new t.b_(e,n.u_image),u_latrange:new t.c3(e,n.u_latrange),u_exaggeration:new t.bq(e,n.u_exaggeration),u_altitudes:new t.c9(e,n.u_altitudes),u_azimuths:new t.c9(e,n.u_azimuths),u_accent:new t.b$(e,n.u_accent),u_method:new t.b_(e,n.u_method),u_shadows:new t.c8(e,n.u_shadows),u_highlights:new t.c8(e,n.u_highlights)}),hillshadePrepare:(e,n)=>({u_matrix:new t.c0(e,n.u_matrix),u_image:new t.b_(e,n.u_image),u_dimension:new t.c3(e,n.u_dimension),u_zoom:new t.bq(e,n.u_zoom),u_unpack:new t.c1(e,n.u_unpack)}),colorRelief:(e,n)=>({u_image:new t.b_(e,n.u_image),u_unpack:new t.c1(e,n.u_unpack),u_dimension:new t.c3(e,n.u_dimension),u_elevation_stops:new t.b_(e,n.u_elevation_stops),u_color_stops:new t.b_(e,n.u_color_stops),u_color_ramp_size:new t.b_(e,n.u_color_ramp_size),u_opacity:new t.bq(e,n.u_opacity)}),line:(e,n)=>({u_translation:new t.c3(e,n.u_translation),u_ratio:new t.bq(e,n.u_ratio),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_translation:new t.c3(e,n.u_translation),u_ratio:new t.bq(e,n.u_ratio),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,n.u_units_to_pixels),u_image:new t.b_(e,n.u_image),u_image_height:new t.bq(e,n.u_image_height)}),linePattern:(e,n)=>({u_translation:new t.c3(e,n.u_translation),u_texsize:new t.c3(e,n.u_texsize),u_ratio:new t.bq(e,n.u_ratio),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_image:new t.b_(e,n.u_image),u_units_to_pixels:new t.c3(e,n.u_units_to_pixels),u_scale:new t.c2(e,n.u_scale),u_fade:new t.bq(e,n.u_fade)}),lineSDF:(e,n)=>({u_translation:new t.c3(e,n.u_translation),u_ratio:new t.bq(e,n.u_ratio),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,n.u_units_to_pixels),u_image:new t.b_(e,n.u_image),u_mix:new t.bq(e,n.u_mix),u_tileratio:new t.bq(e,n.u_tileratio),u_crossfade_from:new t.bq(e,n.u_crossfade_from),u_crossfade_to:new t.bq(e,n.u_crossfade_to),u_lineatlas_width:new t.bq(e,n.u_lineatlas_width),u_lineatlas_height:new t.bq(e,n.u_lineatlas_height)}),lineGradientSDF:(e,n)=>({u_translation:new t.c3(e,n.u_translation),u_ratio:new t.bq(e,n.u_ratio),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,n.u_units_to_pixels),u_image:new t.b_(e,n.u_image),u_image_height:new t.bq(e,n.u_image_height),u_tileratio:new t.bq(e,n.u_tileratio),u_crossfade_from:new t.bq(e,n.u_crossfade_from),u_crossfade_to:new t.bq(e,n.u_crossfade_to),u_image_dash:new t.b_(e,n.u_image_dash),u_mix:new t.bq(e,n.u_mix),u_lineatlas_width:new t.bq(e,n.u_lineatlas_width),u_lineatlas_height:new t.bq(e,n.u_lineatlas_height)}),raster:(e,n)=>({u_tl_parent:new t.c3(e,n.u_tl_parent),u_scale_parent:new t.bq(e,n.u_scale_parent),u_buffer_scale:new t.bq(e,n.u_buffer_scale),u_fade_t:new t.bq(e,n.u_fade_t),u_opacity:new t.bq(e,n.u_opacity),u_image0:new t.b_(e,n.u_image0),u_image1:new t.b_(e,n.u_image1),u_brightness_low:new t.bq(e,n.u_brightness_low),u_brightness_high:new t.bq(e,n.u_brightness_high),u_saturation_factor:new t.bq(e,n.u_saturation_factor),u_contrast_factor:new t.bq(e,n.u_contrast_factor),u_spin_weights:new t.c2(e,n.u_spin_weights),u_coords_top:new t.c1(e,n.u_coords_top),u_coords_bottom:new t.c1(e,n.u_coords_bottom)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.b_(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.b_(e,n.u_is_size_feature_constant),u_size_t:new t.bq(e,n.u_size_t),u_size:new t.bq(e,n.u_size),u_camera_to_center_distance:new t.bq(e,n.u_camera_to_center_distance),u_pitch:new t.bq(e,n.u_pitch),u_rotate_symbol:new t.b_(e,n.u_rotate_symbol),u_aspect_ratio:new t.bq(e,n.u_aspect_ratio),u_fade_change:new t.bq(e,n.u_fade_change),u_label_plane_matrix:new t.c0(e,n.u_label_plane_matrix),u_coord_matrix:new t.c0(e,n.u_coord_matrix),u_is_text:new t.b_(e,n.u_is_text),u_pitch_with_map:new t.b_(e,n.u_pitch_with_map),u_is_along_line:new t.b_(e,n.u_is_along_line),u_is_variable_anchor:new t.b_(e,n.u_is_variable_anchor),u_texsize:new t.c3(e,n.u_texsize),u_texture:new t.b_(e,n.u_texture),u_translation:new t.c3(e,n.u_translation),u_pitched_scale:new t.bq(e,n.u_pitched_scale)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.b_(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.b_(e,n.u_is_size_feature_constant),u_size_t:new t.bq(e,n.u_size_t),u_size:new t.bq(e,n.u_size),u_camera_to_center_distance:new t.bq(e,n.u_camera_to_center_distance),u_pitch:new t.bq(e,n.u_pitch),u_rotate_symbol:new t.b_(e,n.u_rotate_symbol),u_aspect_ratio:new t.bq(e,n.u_aspect_ratio),u_fade_change:new t.bq(e,n.u_fade_change),u_label_plane_matrix:new t.c0(e,n.u_label_plane_matrix),u_coord_matrix:new t.c0(e,n.u_coord_matrix),u_is_text:new t.b_(e,n.u_is_text),u_pitch_with_map:new t.b_(e,n.u_pitch_with_map),u_is_along_line:new t.b_(e,n.u_is_along_line),u_is_variable_anchor:new t.b_(e,n.u_is_variable_anchor),u_texsize:new t.c3(e,n.u_texsize),u_texture:new t.b_(e,n.u_texture),u_gamma_scale:new t.bq(e,n.u_gamma_scale),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_is_halo:new t.b_(e,n.u_is_halo),u_translation:new t.c3(e,n.u_translation),u_pitched_scale:new t.bq(e,n.u_pitched_scale)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.b_(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.b_(e,n.u_is_size_feature_constant),u_size_t:new t.bq(e,n.u_size_t),u_size:new t.bq(e,n.u_size),u_camera_to_center_distance:new t.bq(e,n.u_camera_to_center_distance),u_pitch:new t.bq(e,n.u_pitch),u_rotate_symbol:new t.b_(e,n.u_rotate_symbol),u_aspect_ratio:new t.bq(e,n.u_aspect_ratio),u_fade_change:new t.bq(e,n.u_fade_change),u_label_plane_matrix:new t.c0(e,n.u_label_plane_matrix),u_coord_matrix:new t.c0(e,n.u_coord_matrix),u_is_text:new t.b_(e,n.u_is_text),u_pitch_with_map:new t.b_(e,n.u_pitch_with_map),u_is_along_line:new t.b_(e,n.u_is_along_line),u_is_variable_anchor:new t.b_(e,n.u_is_variable_anchor),u_texsize:new t.c3(e,n.u_texsize),u_texsize_icon:new t.c3(e,n.u_texsize_icon),u_texture:new t.b_(e,n.u_texture),u_texture_icon:new t.b_(e,n.u_texture_icon),u_gamma_scale:new t.bq(e,n.u_gamma_scale),u_device_pixel_ratio:new t.bq(e,n.u_device_pixel_ratio),u_is_halo:new t.b_(e,n.u_is_halo),u_translation:new t.c3(e,n.u_translation),u_pitched_scale:new t.bq(e,n.u_pitched_scale)}),background:(e,n)=>({u_opacity:new t.bq(e,n.u_opacity),u_color:new t.b$(e,n.u_color)}),backgroundPattern:(e,n)=>({u_opacity:new t.bq(e,n.u_opacity),u_image:new t.b_(e,n.u_image),u_pattern_tl_a:new t.c3(e,n.u_pattern_tl_a),u_pattern_br_a:new t.c3(e,n.u_pattern_br_a),u_pattern_tl_b:new t.c3(e,n.u_pattern_tl_b),u_pattern_br_b:new t.c3(e,n.u_pattern_br_b),u_texsize:new t.c3(e,n.u_texsize),u_mix:new t.bq(e,n.u_mix),u_pattern_size_a:new t.c3(e,n.u_pattern_size_a),u_pattern_size_b:new t.c3(e,n.u_pattern_size_b),u_scale_a:new t.bq(e,n.u_scale_a),u_scale_b:new t.bq(e,n.u_scale_b),u_pixel_coord_upper:new t.c3(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.bq(e,n.u_tile_units_to_pixels)}),terrain:(e,n)=>({u_texture:new t.b_(e,n.u_texture),u_ele_delta:new t.bq(e,n.u_ele_delta),u_fog_matrix:new t.c0(e,n.u_fog_matrix),u_fog_color:new t.b$(e,n.u_fog_color),u_fog_ground_blend:new t.bq(e,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new t.bq(e,n.u_fog_ground_blend_opacity),u_horizon_color:new t.b$(e,n.u_horizon_color),u_horizon_fog_blend:new t.bq(e,n.u_horizon_fog_blend),u_is_globe_mode:new t.bq(e,n.u_is_globe_mode)}),terrainDepth:(e,n)=>({u_ele_delta:new t.bq(e,n.u_ele_delta)}),terrainCoords:(e,n)=>({u_texture:new t.b_(e,n.u_texture),u_terrain_coords_id:new t.bq(e,n.u_terrain_coords_id),u_ele_delta:new t.bq(e,n.u_ele_delta)}),projectionErrorMeasurement:(e,n)=>({u_input:new t.bq(e,n.u_input),u_output_expected:new t.bq(e,n.u_output_expected)}),atmosphere:(e,n)=>({u_sun_pos:new t.c2(e,n.u_sun_pos),u_atmosphere_blend:new t.bq(e,n.u_atmosphere_blend),u_globe_position:new t.c2(e,n.u_globe_position),u_globe_radius:new t.bq(e,n.u_globe_radius),u_inv_proj_matrix:new t.c0(e,n.u_inv_proj_matrix)}),sky:(e,n)=>({u_sky_color:new t.b$(e,n.u_sky_color),u_horizon_color:new t.b$(e,n.u_horizon_color),u_horizon:new t.c3(e,n.u_horizon),u_horizon_normal:new t.c3(e,n.u_horizon_normal),u_sky_horizon_blend:new t.bq(e,n.u_sky_horizon_blend),u_sky_blend:new t.bq(e,n.u_sky_blend)})};class bi{constructor(e,t,n){this.context=e;const i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Di{constructor(e,t,n,i){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.context=e;const r=e.gl;this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error("Length of new data is ".concat(e.length,", which doesn't match current length of ").concat(this.length));const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const i=t.attributes[this.attributes[n].name];void 0!==i&&e.enableVertexAttribArray(i)}}setVertexAttribPointers(e,t,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],o=t.attributes[r.name];void 0!==o&&e.vertexAttribPointer(o,r.components,e[wi[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ei{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ci extends Ei{getDefault(){return t.bp.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Ai extends Ei{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Si extends Ei{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Ti extends Ei{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Fi extends Ei{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class ki extends Ei{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Pi extends Ei{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Mi extends Ei{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Ii extends Ei{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class ji extends Ei{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ni extends Ei{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class Oi extends Ei{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Bi extends Ei{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class Li extends Ei{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class zi extends Ei{getDefault(){return t.bp.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Ri extends Ei{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Vi extends Ei{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class Ui extends Ei{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class qi extends Ei{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Zi extends Ei{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Hi extends Ei{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Gi extends Ei{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Wi extends Ei{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Yi extends Ei{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Xi extends Ei{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Ki extends Ei{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class $i extends Ei{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Qi extends Ei{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const n=this.gl;an(n)?n.bindVertexArray(e):null===(t=n.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ji extends Ei{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class er extends Ei{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class tr extends Ei{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class nr extends Ei{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class ir extends nr{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class rr extends nr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class or extends nr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const ar="Framebuffer is not complete";class sr{constructor(e,t,n,i,r){this.context=e,this.width=t,this.height=n;const o=e.gl,a=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new ir(e,a),i)this.depthAttachment=r?new or(e,a):new rr(e,a);else if(r)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error(ar)}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class lr{constructor(e){var t,n;if(this.gl=e,this.clearColor=new Ci(this),this.clearDepth=new Ai(this),this.clearStencil=new Si(this),this.colorMask=new Ti(this),this.depthMask=new Fi(this),this.stencilMask=new ki(this),this.stencilFunc=new Pi(this),this.stencilOp=new Mi(this),this.stencilTest=new Ii(this),this.depthRange=new ji(this),this.depthTest=new Ni(this),this.depthFunc=new Oi(this),this.blend=new Bi(this),this.blendFunc=new Li(this),this.blendColor=new zi(this),this.blendEquation=new Ri(this),this.cullFace=new Vi(this),this.cullFaceSide=new Ui(this),this.frontFace=new qi(this),this.program=new Zi(this),this.activeTexture=new Hi(this),this.viewport=new Gi(this),this.bindFramebuffer=new Wi(this),this.bindRenderbuffer=new Yi(this),this.bindTexture=new Xi(this),this.bindVertexBuffer=new Ki(this),this.bindElementBuffer=new $i(this),this.bindVertexArray=new Qi(this),this.pixelStoreUnpack=new Ji(this),this.pixelStoreUnpackPremultiplyAlpha=new er(this),this.pixelStoreUnpackFlipY=new tr(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),an(e)){this.HALF_FLOAT=e.HALF_FLOAT;const i=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==i?void 0:i.RGBA16F_EXT,this.RGB16F=null!==(n=e.RGB16F)&&void 0!==n?n:null==i?void 0:i.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new bi(this,e,t)}createVertexBuffer(e,t,n){return new Di(this,e,t,n)}createRenderbuffer(e,t,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,n,i){return new sr(this,e,t,n,i)}clear(e){let{color:t,depth:n,stencil:i}=e;const r=this.gl;let o=0;t&&(o|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(o|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(o)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.bR(e.blendFunction,Qt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return an(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return an(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let cr;function ur(e,n,i,r,o){const a=e.context,s=e.transform,l=a.gl,c=e.useProgram("collisionBox"),u=[];let h=0,d=0;for(let t=0;t<r.length;t++){const p=r[t],f=n.getTile(p).getBucket(i);if(!f)continue;const m=o?f.textCollisionBox:f.iconCollisionBox,g=f.collisionCircleArray;g.length>0&&(u.push({circleArray:g,circleOffset:d,coord:p}),h+=g.length/4,d=h),m&&c.draw(a,l.LINES,tn.disabled,rn.disabled,e.colorModeForRenderPass(),en.disabled,Kn(e.transform),e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),s.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer)}if(!o||!u.length)return;const p=e.useProgram("collisionCircle"),f=new t.ca;f.resize(4*h),f._trim();let m=0;for(const t of u)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];f.emplace(m++,i,r,o,a,0),f.emplace(m++,i,r,o,a,1),f.emplace(m++,i,r,o,a,2),f.emplace(m++,i,r,o,a,3)}(!cr||cr.length<2*h)&&(cr=function(e){const n=2*e,i=new t.cc;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(h));const g=a.createIndexBuffer(cr,!0),y=a.createVertexBuffer(f,t.cb.members,!0);for(const v of u){const n=$n(e.transform);p.draw(a,l.TRIANGLES,tn.disabled,rn.disabled,e.colorModeForRenderPass(),en.disabled,n,e.style.map.terrain&&e.style.map.terrain.getTerrainData(v.coord),null,i.id,y,g,t.aX.simpleSegment(0,2*v.circleOffset,v.circleArray.length,v.circleArray.length/2),null,e.transform.zoom,null,null,null)}y.destroy(),g.destroy()}const hr=t.ar(new Float32Array(16));function dr(e,n,i,r,o,a){const{horizontalAlign:s,verticalAlign:l}=t.aS(e);return new t.P((-(s-.5)*n/o+r[0])*a,(-(l-.5)*i/o+r[1])*a)}function pr(e,n,i,r,o,a){const s=n.tileAnchorPoint.add(new t.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let e=r.mult(a);i||(e=e.rotate(-o));const t=s.add(e);return Ue(t.x,t.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(i){const t=$e(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(e),i=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(r.rotate(i))}return e.add(r)}function fr(e,n,i,r,o,a,s,l,c,u,h,d){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,g={};f.clear();for(let y=0;y<p.length;y++){const m=p.get(y),v=m.hidden||!m.crossTileID||e.allowVerticalPlacement&&!m.placedOrientation?null:r[m.crossTileID];if(v){const r=new t.P(m.anchorX,m.anchorY),p={getElevation:d,width:o.width,height:o.height,pitchedLabelPlaneMatrix:a,pitchWithMap:i,transform:o,tileAnchorPoint:r,translation:u,unwrappedTileID:h},y=i?Je(r.x,r.y,p):$e(r.x,r.y,p),_=qe(o.cameraToCenterDistance,y.signedDistanceFromCamera);let x=t.aA(e.textSizeData,l,m)*_/t.aM;i&&(x*=e.tilePixelRatio/s);const{width:b,height:w,anchor:D,textOffset:E,textBoxScale:C}=v,A=dr(D,b,w,E,C,x),S=o.getPitchedTextCorrection(r.x+u[0],r.y+u[1],h),T=pr(y.point,p,n,A,-o.bearingInRadians,S),F=e.allowVerticalPlacement&&m.placedOrientation===t.az.vertical?Math.PI/2:0;for(let e=0;e<m.numGlyphs;e++)t.aG(f,T,F);c&&m.associatedIconIndex>=0&&(g[m.associatedIconIndex]={shiftedAnchor:T,angle:F})}else rt(m.numGlyphs,f)}if(c){m.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e);if(i.hidden)rt(i.numGlyphs,m);else{const n=g[e];if(n)for(let e=0;e<i.numGlyphs;e++)t.aG(m,n.shiftedAnchor,n.angle);else rt(i.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function mr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function gr(e,n,i,r,o,a,s,l,c,u,h,d,p){const f=e.context,m=f.gl,g=e.transform,y="map"===l,v="map"===c,_="viewport"!==l&&"point"!==i.layout.get("symbol-placement"),x=y&&!v&&!_,b=!i.layout.get("symbol-sort-key").isConstant();let w=!1;const D=e.getDepthModeForSublayer(0,tn.ReadOnly),E=i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"),C=[],A=g.getCircleRadiusCorrection();for(const S of r){const r=n.getTile(S),l=r.getBucket(i);if(!l)continue;const c=o?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const h=c.programConfigurations.get(i.id),d=o||l.sdfIcons,f=o?l.textSizeData:l.iconSizeData,D=v||0!==g.pitch,T=e.useProgram(mr(d,o,l),h),F=t.ay(f,g.zoom),k=e.style.map.terrain&&e.style.map.terrain.getTerrainData(S);let P,M,I,j,N=[0,0],O=null;if(o)M=r.glyphAtlasTexture,I=m.LINEAR,P=r.glyphAtlasTexture.size,l.iconsInText&&(N=r.imageAtlasTexture.size,O=r.imageAtlasTexture,j=D||e.options.rotating||e.options.zooming||"composite"===f.kind||"camera"===f.kind?m.LINEAR:m.NEAREST);else{const t=1!==i.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;M=r.imageAtlasTexture,I=d||e.options.rotating||e.options.zooming||t||D?m.LINEAR:m.NEAREST,P=r.imageAtlasTexture.size}const B=t.aN(r,1,e.transform.zoom),L=ze(y,e.transform,B),z=t.N();t.aB(z,L);const R=Re(v,y,e.transform,B),V=t.aO(g,r,a,s),U=g.getProjectionData({overscaledTileID:S,applyGlobeMatrix:!p,applyTerrainMatrix:!0}),q=E&&l.hasTextData(),Z="none"!==i.layout.get("icon-text-fit")&&q&&l.hasIconData();if(_){const t=e.style.map.terrain?(t,n)=>e.style.map.terrain.getElevation(S,t,n):null,n="map"===i.layout.get("text-rotation-alignment");He(l,e,o,L,z,v,u,n,S.toUnwrapped(),g.width,g.height,V,t)}const H=o&&E||Z,G=_||H?hr:v?L:e.transform.clipSpaceToPixelsMatrix,W=d&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let Y;Y=d?l.iconsInText?gi(f.kind,F,x,v,_,H,e,G,R,V,P,N,A):mi(f.kind,F,x,v,_,H,e,G,R,V,o,P,0,A):fi(f.kind,F,x,v,_,H,e,G,R,V,o,P,A);const X={program:T,buffers:c,uniformValues:Y,projectionData:U,atlasTexture:M,atlasTextureIcon:O,atlasInterpolation:I,atlasInterpolationIcon:j,isSDF:d,hasHalo:W};if(b&&l.canOverlap){w=!0;const e=c.segments.get();for(const n of e)C.push({segments:new t.aX([n]),sortKey:n.sortKey,state:X,terrainData:k})}else C.push({segments:c.segments,sortKey:0,state:X,terrainData:k})}w&&C.sort((e,t)=>e.sortKey-t.sortKey);for(const t of C){const n=t.state;if(f.activeTexture.set(m.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,m.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,yr(n.buffers,t.segments,i,e,n.program,D,h,d,r,n.projectionData,t.terrainData)),r.u_is_halo=0}yr(n.buffers,t.segments,i,e,n.program,D,h,d,n.uniformValues,n.projectionData,t.terrainData)}}function yr(e,t,n,i,r,o,a,s,l,c,u){const h=i.context;r.draw(h,h.gl.TRIANGLES,o,a,s,en.backCCW,l,u,c,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,i.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function vr(e,n,i,r,o){const a=e.context,s=a.gl,l=rn.disabled,c=new Qt([s.ONE,s.ONE],t.bp.transparent,[!0,!0,!0,!0]),u=n.getBucket(i);if(!u)return;const h=r.key;let d=i.heatmapFbos.get(h);d||(d=xr(a,n.tileSize,n.tileSize),i.heatmapFbos.set(h,d)),a.bindFramebuffer.set(d.framebuffer),a.viewport.set([0,0,n.tileSize,n.tileSize]),a.clear({color:t.bp.transparent});const p=u.programConfigurations.get(i.id),f=e.useProgram("heatmap",p,!o),m=e.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),g=e.style.map.terrain.getTerrainData(r);f.draw(a,s.TRIANGLES,tn.disabled,l,c,en.disabled,Jn(n,e.transform.zoom,i.paint.get("heatmap-intensity"),1),g,m,i.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,i.paint,e.transform.zoom,p)}function _r(e,t,n,i,r){const o=e.context,a=o.gl,s=e.transform;o.setColorMode(e.colorModeForRenderPass());const l=br(o,t),c=n.key,u=t.heatmapFbos.get(c);if(!u)return;o.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,u.colorAttachment.get()),o.activeTexture.set(a.TEXTURE1),l.bind(a.LINEAR,a.CLAMP_TO_EDGE);const h=s.getProjectionData({overscaledTileID:n,applyTerrainMatrix:r,applyGlobeMatrix:!i});e.useProgram("heatmapTexture").draw(o,a.TRIANGLES,tn.disabled,rn.disabled,e.colorModeForRenderPass(),en.disabled,ei(e,t,0,1),null,h,t.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments,t.paint,s.zoom),u.destroy(),t.heatmapFbos.delete(c)}function xr(e,t,n){var i,r;const o=e.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);const s=null!==(i=e.HALF_FLOAT)&&void 0!==i?i:o.UNSIGNED_BYTE,l=null!==(r=e.RGBA16F)&&void 0!==r?r:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,l,t,n,0,o.RGBA,s,null);const c=e.createFramebuffer(t,n,!1,!1);return c.colorAttachment.set(a),c}function br(e,n){return n.colorRampTexture||(n.colorRampTexture=new t.T(e,n.colorRamp,e.gl.RGBA)),n.colorRampTexture}function wr(e,n,i,r,o,a,s,l){let c=256;if(o.stepInterpolant){const r=n.getSource().maxzoom,o=s.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-s.canonical.z):1;c=t.an(t.ce(a.maxLineLength/t.a5*1024*o),256,i.maxTextureSize)}return l.gradient=t.cf({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:c,image:l.gradient||void 0,clips:a.lineClipsArray}),l.texture?l.texture.update(l.gradient):l.texture=new t.T(i,l.gradient,r.RGBA),l.version=o.gradientVersion,l.texture}function Dr(e,t,n,i,r){e.activeTexture.set(t.TEXTURE0),n.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),i.updatePaintBuffers(r)}function Er(e,t,n,i,r,o){(r||e.lineAtlas.dirty)&&(t.activeTexture.set(n.TEXTURE0),e.lineAtlas.bind(t)),i.updatePaintBuffers(o)}function Cr(e,t,n,i,r,o,a){const s=o.gradients[r.id];let l=s.texture;r.gradientVersion!==s.version&&(l=wr(e,t,n,i,r,o,a,s)),n.activeTexture.set(i.TEXTURE0),l.bind(r.stepInterpolant?i.NEAREST:i.LINEAR,i.CLAMP_TO_EDGE)}function Ar(e,t,n,i,r,o,a,s,l){const c=o.gradients[r.id];let u=c.texture;r.gradientVersion!==c.version&&(u=wr(e,t,n,i,r,o,a,c)),n.activeTexture.set(i.TEXTURE0),u.bind(r.stepInterpolant?i.NEAREST:i.LINEAR,i.CLAMP_TO_EDGE),n.activeTexture.set(i.TEXTURE1),e.lineAtlas.bind(n),s.updatePaintBuffers(l)}function Sr(e,t,n,i,r){if(!n||!i||!i.imageAtlas)return;const o=i.imageAtlas.patternPositions;let a=o[n.to.toString()],s=o[n.from.toString()];if(!a&&s&&(a=s),!s&&a&&(s=a),!a||!s){const e=r.getPaintProperty(t);a=o[e],s=o[e]}a&&s&&e.setConstantPatternPositions(a,s)}function Tr(e,n,i,r,o,a,s,l){const c=e.context.gl,u="fill-pattern",h=i.paint.get(u),d=h&&h.constantOr(1),p=i.getCrossfadeParameters();let f,m,g,y,v;const _=e.transform,x=i.paint.get("fill-translate"),b=i.paint.get("fill-translate-anchor");s?(m=d&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",f=c.LINES):(m=d?"fillPattern":"fill",f=c.TRIANGLES);const w=h.constantOr(null);for(const D of r){const r=n.getTile(D);if(d&&!r.patternsLoaded())continue;const h=r.getBucket(i);if(!h)continue;const E=h.programConfigurations.get(i.id),C=e.useProgram(m,E),A=e.style.map.terrain&&e.style.map.terrain.getTerrainData(D);d&&(e.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),E.updatePaintBuffers(p)),Sr(E,u,w,r,i);const S=_.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!l,applyTerrainMatrix:!0}),T=t.aO(_,r,x,b);if(s){y=h.indexBuffer2,v=h.segments2;const t=[c.drawingBufferWidth,c.drawingBufferHeight];g="fillOutlinePattern"===m&&d?Yn(e,p,r,t,T):Wn(t,T)}else y=h.indexBuffer,v=h.segments,g=d?Gn(e,p,r,T):{u_fill_translate:T};const F=e.stencilModeForClipping(D);C.draw(e.context,f,o,F,a,en.backCCW,g,A,S,i.id,h.layoutVertexBuffer,y,v,i.paint,e.transform.zoom,E)}}function Fr(e,n,i,r,o,a,s,l){const c=e.context,u=c.gl,h="fill-extrusion-pattern",d=i.paint.get(h),p=d.constantOr(1),f=i.getCrossfadeParameters(),m=i.paint.get("fill-extrusion-opacity"),g=d.constantOr(null),y=e.transform;for(const v of r){const r=n.getTile(v),d=r.getBucket(i);if(!d)continue;const _=e.style.map.terrain&&e.style.map.terrain.getTerrainData(v),x=d.programConfigurations.get(i.id),b=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",x);p&&(e.context.activeTexture.set(u.TEXTURE0),r.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),x.updatePaintBuffers(f));const w=y.getProjectionData({overscaledTileID:v,applyGlobeMatrix:!l,applyTerrainMatrix:!0});Sr(x,h,g,r,i);const D=t.aO(y,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),E=i.paint.get("fill-extrusion-vertical-gradient"),C=p?Hn(e,E,m,D,v,f,r):Zn(e,E,m,D);b.draw(c,c.gl.TRIANGLES,o,a,s,en.backCCW,C,_,w,i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,x,e.style.map.terrain&&d.centroidVertexBuffer)}}function kr(e,t,n,i,r,o,a,s,l){var c;const u=e.style.projection,h=e.context,d=e.transform,p=h.gl,f=["#define NUM_ILLUMINATION_SOURCES ".concat(n.paint.get("hillshade-highlight-color").values.length)],m=e.useProgram("hillshade",null,!1,f),g=!e.options.moving;for(const y of i){const i=t.getTile(y),f=i.fbo;if(!f)continue;const v=u.getMeshFromTileID(h,y.canonical,s,!0,"raster"),_=null===(c=e.style.map.terrain)||void 0===c?void 0:c.getTerrainData(y);h.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f.colorAttachment.get());const x=d.getProjectionData({overscaledTileID:y,aligned:g,applyGlobeMatrix:!l,applyTerrainMatrix:!0});m.draw(h,p.TRIANGLES,o,r[y.overscaledZ],a,en.backCCW,ti(e,i,n),_,x,n.id,v.vertexBuffer,v.indexBuffer,v.segments)}}function Pr(e,n,i,r,o,a,s,l,c){var u;const h=e.style.projection,d=e.context,p=e.transform,f=d.gl,m=e.useProgram("colorRelief"),g=!e.options.moving;let y=!0,v=0;for(const _ of r){const r=n.getTile(_),x=r.dem;if(y){const e=f.getParameter(f.MAX_TEXTURE_SIZE),{elevationTexture:t,colorTexture:n}=i.getColorRampTextures(d,e,x.getUnpackVector());d.activeTexture.set(f.TEXTURE1),t.bind(f.NEAREST,f.CLAMP_TO_EDGE),d.activeTexture.set(f.TEXTURE4),n.bind(f.LINEAR,f.CLAMP_TO_EDGE),y=!1,v=t.size[0]}if(!x||!x.data)continue;const b=x.stride,w=x.getPixels();if(d.activeTexture.set(f.TEXTURE0),d.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(b),r.demTexture){const e=r.demTexture;e.update(w,{premultiply:!1}),e.bind(f.LINEAR,f.CLAMP_TO_EDGE)}else r.demTexture=new t.T(d,w,f.RGBA,{premultiply:!1}),r.demTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE);const D=h.getMeshFromTileID(d,_.canonical,l,!0,"raster"),E=null===(u=e.style.map.terrain)||void 0===u?void 0:u.getTerrainData(_),C=p.getProjectionData({overscaledTileID:_,aligned:g,applyGlobeMatrix:!c,applyTerrainMatrix:!0});m.draw(d,f.TRIANGLES,a,o[_.overscaledZ],s,en.backCCW,ri(i,r.dem,v),E,C,i.id,D.vertexBuffer,D.indexBuffer,D.segments)}}const Mr=[new t.P(0,0),new t.P(t.a5,0),new t.P(t.a5,t.a5),new t.P(0,t.a5)];function Ir(e,t,n,i,r,o,a,s){let l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9];const u=i[i.length-1].overscaledZ,h=e.context,d=h.gl,p=e.useProgram("raster"),f=e.transform,m=e.style.projection,g=e.colorModeForRenderPass(),y=!e.options.moving,v=n.paint.get("raster-opacity"),_=n.paint.get("raster-resampling"),x=n.paint.get("raster-fade-duration"),b=!!e.style.map.terrain;for(const w of i){const i=e.getDepthModeForSublayer(w.overscaledZ-u,1===v?tn.ReadWrite:tn.ReadOnly,d.LESS),D=t.getTile(w),E="nearest"===_?d.NEAREST:d.LINEAR;h.activeTexture.set(d.TEXTURE0),D.texture.bind(E,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),h.activeTexture.set(d.TEXTURE1);const{parentTile:C,parentScaleBy:A,parentTopLeft:S,fadeValues:T}=jr(D,t,x,b);D.fadeOpacity=T.tileOpacity,C?(C.fadeOpacity=T.parentTileOpacity,C.texture.bind(E,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST)):D.texture.bind(E,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),D.texture.useMipmap&&h.extTextureFilterAnisotropic&&e.transform.pitch>20&&d.texParameterf(d.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax);const F=e.style.map.terrain&&e.style.map.terrain.getTerrainData(w),k=f.getProjectionData({overscaledTileID:w,aligned:y,applyGlobeMatrix:!c,applyTerrainMatrix:!0}),P=di(S,A,T.fadeMix,n,s),M=m.getMeshFromTileID(h,w.canonical,o,a,"raster");p.draw(h,d.TRIANGLES,i,r?r[w.overscaledZ]:rn.disabled,g,l?en.frontCCW:en.backCCW,P,F,k,n.id,M.vertexBuffer,M.indexBuffer,M.segments)}}function jr(e,n,i,r){const o={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(0===i||r)return o;if(e.fadingParentID){const r=n.getLoadedTile(e.fadingParentID);if(!r)return o;const a=Math.pow(2,r.tileID.overscaledZ-e.tileID.overscaledZ),s=[e.tileID.canonical.x*a%1,e.tileID.canonical.y*a%1],l=function(e,n,i){const r=c(),o=(r-n.timeAdded)/i,a=e.fadingDirection===he.Incoming,s=t.an((r-e.timeAdded)/i,0,1),l=t.an(1-o,0,1),u=a?s:l;return{tileOpacity:u,parentTileOpacity:a?l:s,fadeMix:{opacity:1,mix:1-u}}}(e,r,i);return{parentTile:r,parentScaleBy:a,parentTopLeft:s,fadeValues:l}}if(e.selfFading){const n=function(e,n){const i=(c()-e.timeAdded)/n,r=t.an(i,0,1);return{tileOpacity:r,fadeMix:{opacity:r,mix:0}}}(e,i);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:n}}return o}const Nr=new t.bp(1,0,0,1),Or=new t.bp(0,1,0,1),Br=new t.bp(0,0,1,1),Lr=new t.bp(1,0,1,1),zr=new t.bp(0,1,1,1);function Rr(e,t,n,i){Ur(e,0,t+n/2,e.transform.width,n,i)}function Vr(e,t,n,i){Ur(e,t-n/2,0,n,e.transform.height,i)}function Ur(e,t,n,i,r,o){const a=e.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,n*e.pixelRatio,i*e.pixelRatio,r*e.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function qr(e,n,i){const r=e.context,o=r.gl,a=e.useProgram("debug"),s=tn.disabled,l=rn.disabled,c=e.colorModeForRenderPass(),u="$debug",h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(i);r.activeTexture.set(o.TEXTURE0);const d=n.getTileByID(i.key).latestRawTileData,p=Math.floor((d&&d.byteLength||0)/1024),f=n.getTile(i).tileSize,m=512/Math.min(f,512)*(i.overscaledZ/e.transform.zoom)*.5;let g=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(g+=" => ".concat(i.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,i=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,"".concat(g," ").concat(p,"kB"));const y=e.transform.getProjectionData({overscaledTileID:i,applyGlobeMatrix:!0,applyTerrainMatrix:!0});a.draw(r,o.TRIANGLES,s,l,Qt.alphaBlended,en.disabled,Qn(t.bp.transparent,m),null,y,u,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),a.draw(r,o.LINE_STRIP,s,l,c,en.disabled,Qn(t.bp.red),h,y,u,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function Zr(e,t,n,i){const{isRenderingGlobe:r}=i,o=e.context,a=o.gl,s=e.transform,l=e.colorModeForRenderPass(),c=e.getDepthModeFor3D(),u=e.useProgram("terrain");o.bindFramebuffer.set(null),o.viewport.set([0,0,e.width,e.height]);for(const h of n){const n=t.getTerrainMesh(h.tileID),i=e.renderToTexture.getTexture(h),d=t.getTerrainData(h.tileID);o.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,i.texture);const p=t.getMeshFrameDelta(s.zoom),f=s.calculateFogMatrix(h.tileID.toUnwrapped()),m=zn(p,f,e.style.sky,s.pitch,r),g=s.getProjectionData({overscaledTileID:h.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});u.draw(o,a.TRIANGLES,c,rn.disabled,l,en.backCCW,m,d,g,"terrain",n.vertexBuffer,n.indexBuffer,n.segments)}}function Hr(e,n){if(!n.mesh){const i=new t.aW;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(1,1),i.emplaceBack(-1,1);const r=new t.aY;r.emplaceBack(0,1,2),r.emplaceBack(0,2,3),n.mesh=new Nt(e.createVertexBuffer(i,Ot.members),e.createIndexBuffer(r),t.aX.simpleSegment(0,0,i.length,r.length))}return n.mesh}class Gr{constructor(e,n){this.context=new lr(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ne.maxOverzooming+Ne.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Pt}resize(e,t,n){if(this.width=Math.floor(e*n),this.height=Math.floor(t*n),this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const i of this.style._order)this.style._layers[i].resize()}setup(){const e=this.context,n=new t.aW;n.emplaceBack(0,0),n.emplaceBack(t.a5,0),n.emplaceBack(0,t.a5),n.emplaceBack(t.a5,t.a5),this.tileExtentBuffer=e.createVertexBuffer(n,Ot.members),this.tileExtentSegments=t.aX.simpleSegment(0,0,4,2);const i=new t.aW;i.emplaceBack(0,0),i.emplaceBack(t.a5,0),i.emplaceBack(0,t.a5),i.emplaceBack(t.a5,t.a5),this.debugBuffer=e.createVertexBuffer(i,Ot.members),this.debugSegments=t.aX.simpleSegment(0,0,4,5);const r=new t.ch;r.emplaceBack(0,0,0,0),r.emplaceBack(t.a5,0,t.a5,0),r.emplaceBack(0,t.a5,0,t.a5),r.emplaceBack(t.a5,t.a5,t.a5,t.a5),this.rasterBoundsBuffer=e.createVertexBuffer(r,Bn.members),this.rasterBoundsSegments=t.aX.simpleSegment(0,0,4,2);const o=new t.aW;o.emplaceBack(0,0),o.emplaceBack(t.a5,0),o.emplaceBack(0,t.a5),o.emplaceBack(t.a5,t.a5),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(o,Ot.members),this.rasterBoundsSegmentsPosOnly=t.aX.simpleSegment(0,0,4,5);const a=new t.aW;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Ot.members),this.viewportSegments=t.aX.simpleSegment(0,0,4,2);const s=new t.ci;s.emplaceBack(0),s.emplaceBack(1),s.emplaceBack(3),s.emplaceBack(2),s.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(s);const l=new t.aY;l.emplaceBack(1,0,2),l.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(l);const c=this.context.gl;this.stencilClearMode=new rn({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO),this.tileExtentMesh=new Nt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const i=t.N();t.c7(i,0,this.width,this.height,0,0,1),t.Q(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]);const r={mainMatrix:i,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:i};this.useProgram("clippingMask",null,!0).draw(e,n.TRIANGLES,tn.disabled,this.stencilClearMode,Qt.disabled,en.disabled,null,null,r,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t,n){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source,this.nextStencilID+t.length>256&&this.clearStencil();const i=this.context;i.setColorMode(Qt.disabled),i.setDepthMode(tn.disabled);const r={};for(const o of t)r[o.key]=this.nextStencilID++;this._renderTileMasks(r,t,n,!0),this._renderTileMasks(r,t,n,!1),this._tileClippingMaskIDs=r}_renderTileMasks(e,t,n,i){const r=this.context,o=r.gl,a=this.style.projection,s=this.transform,l=this.useProgram("clippingMask");for(const c of t){const t=e[c.key],u=this.style.map.terrain&&this.style.map.terrain.getTerrainData(c),h=a.getMeshFromTileID(this.context,c.canonical,i,!0,"stencil"),d=s.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!n,applyTerrainMatrix:!0});l.draw(r,o.TRIANGLES,tn.disabled,new rn({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),Qt.disabled,n?en.disabled:en.backCCW,null,u,d,"$clipping",h.vertexBuffer,h.indexBuffer,h.segments)}}_renderTilesDepthBuffer(){const e=this.context,t=e.gl,n=this.style.projection,i=this.transform,r=this.useProgram("depth"),o=this.getDepthModeFor3D(),a=Ae(i,{tileSize:i.tileSize});for(const s of a){const a=this.style.map.terrain&&this.style.map.terrain.getTerrainData(s),l=n.getMeshFromTileID(this.context,s.canonical,!0,!0,"raster"),c=i.getProjectionData({overscaledTileID:s,applyGlobeMatrix:!0,applyTerrainMatrix:!0});r.draw(e,t.TRIANGLES,o,rn.disabled,Qt.disabled,en.backCCW,null,a,c,"$clipping",l.vertexBuffer,l.indexBuffer,l.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new rn({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new rn({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const t=this.context.gl,n=e.sort((e,t)=>t.overscaledZ-e.overscaledZ),i=n[n.length-1].overscaledZ,r=n[0].overscaledZ-i+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();const e={};for(let n=0;n<r;n++)e[n+i]=new rn({func:t.GEQUAL,mask:255},n+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=r,[e,n]}return[{[i]:rn.disabled},n]}stencilConfigForOverlapTwoPass(e){const t=this.context.gl,n=e.sort((e,t)=>t.overscaledZ-e.overscaledZ),i=n[n.length-1].overscaledZ,r=n[0].overscaledZ-i+1;if(this.clearStencil(),r>1){const e={},o={};for(let n=0;n<r;n++)e[n+i]=new rn({func:t.GREATER,mask:255},r+1+n,255,t.KEEP,t.KEEP,t.REPLACE),o[n+i]=new rn({func:t.GREATER,mask:255},1+n,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID=2*r+1,[e,o,n]}return this.nextStencilID=3,[{[i]:new rn({func:t.GREATER,mask:255},2,255,t.KEEP,t.KEEP,t.REPLACE)},{[i]:new rn({func:t.GREATER,mask:255},1,255,t.KEEP,t.KEEP,t.REPLACE)},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new Qt([e.CONSTANT_COLOR,e.ONE],new t.bp(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Qt.unblended:Qt.alphaBlended}getDepthModeForSublayer(e,t,n){if(!this.opaquePassEnabledForLayer())return tn.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new tn(n||this.context.gl.LEQUAL,t,[i,i])}getDepthModeFor3D(){return new tn(this.context.gl.LEQUAL,tn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){var i,r;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(c()),this.imageManager.beginFrame();const o=this.style._order,a=this.style.tileManagers,s={},l={},u={},h={isRenderingToTexture:!1,isRenderingGlobe:(null===(i=e.projection)||void 0===i?void 0:i.transitionState)>0};for(const t in a){const e=a[t];e.used&&e.prepare(this.context),s[t]=e.getVisibleCoordinates(!1),l[t]=s[t].slice().reverse(),u[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<o.length;t++)if(this.style._layers[o[t]].is3D()){this.opaquePassCutoff=t;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of o){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=l[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,a[e.source],e,n,h)}if(null===(r=this.style.projection)||void 0===r||r.updateGPUdependent({context:this.context,useProgram:e=>this.useProgram(e)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.bp.black:t.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(e,t){const n=e.context,i=n.gl,r=((e,t,n)=>{const i=Math.cos(t.rollInRadians),r=Math.sin(t.rollInRadians),o=ye(t),a=t.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:e.properties.get("sky-color"),u_horizon_color:e.properties.get("horizon-color"),u_horizon:[(t.width/2-o*r)*n,(t.height/2+o*i)*n],u_horizon_normal:[-r,i],u_sky_horizon_blend:e.properties.get("sky-horizon-blend")*t.height/2*n,u_sky_blend:a}})(t,e.style.map.transform,e.pixelRatio),o=new tn(i.LEQUAL,tn.ReadWrite,[0,1]),a=rn.disabled,s=e.colorModeForRenderPass(),l=e.useProgram("sky"),c=Hr(n,t);l.draw(n,i.TRIANGLES,o,a,s,en.disabled,r,null,void 0,"sky",c.vertexBuffer,c.indexBuffer,c.segments)}(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[o[this.currentLayer]],t=a[e.source],n=s[e.source];this._renderTileClippingMasks(e,n,!1),this.renderLayer(this,t,e,n,h)}this.renderPass="translucent";let d=!1;for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],t=a[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e,h))continue;this.opaquePassEnabledForLayer()||d||(d=!0,h.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const n=("symbol"===e.type?u:l)[e.source];this._renderTileClippingMasks(e,s[e.source],!!this.renderToTexture),this.renderLayer(this,t,e,n,h)}if(h.isRenderingGlobe&&function(e,n,i){const r=e.context,o=r.gl,a=e.useProgram("atmosphere"),s=new tn(o.LEQUAL,tn.ReadOnly,[0,1]),l=e.transform,c=function(e,n){const i=e.properties.get("position"),r=[-i.x,-i.y,-i.z],o=t.ar(new Float64Array(16));return"map"===e.properties.get("anchor")&&(t.bg(o,o,n.rollInRadians),t.bh(o,o,-n.pitchInRadians),t.bg(o,o,n.bearingInRadians),t.bh(o,o,n.center.lat*Math.PI/180),t.bJ(o,o,-n.center.lng*Math.PI/180)),t.cg(r,r,o),r}(i,e.transform),u=l.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h=n.properties.get("atmosphere-blend")*u.projectionTransition;if(0===h)return;const d=yn(l.worldSize,l.center.lat),p=l.inverseProjectionMatrix,f=new Float64Array(4);f[3]=1,t.aH(f,f,l.modelViewProjectionMatrix),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[3]=1,t.aH(f,f,p),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[3]=1;const m=((e,t,n,i,r)=>({u_sun_pos:e,u_atmosphere_blend:t,u_globe_position:n,u_globe_radius:i,u_inv_proj_matrix:r}))(c,h,[f[0],f[1],f[2]],d,p),g=Hr(r,n);a.draw(r,o.TRIANGLES,s,rn.disabled,Qt.alphaBlended,en.disabled,m,null,null,"atmosphere",g.vertexBuffer,g.indexBuffer,g.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const e=function(e,t){let n=null;const i=Object.values(e._layers).flatMap(n=>n.source&&!n.isHidden(t)?[e.tileManagers[n.source]]:[]),r=i.filter(e=>"vector"===e.getSource().type),o=i.filter(e=>"vector"!==e.getSource().type),a=e=>{(!n||n.getSource().maxzoom<e.getSource().maxzoom)&&(n=e)};return r.forEach(e=>a(e)),n||o.forEach(e=>a(e)),n}(this.style,this.transform.zoom);e&&function(e,t,n){for(let i=0;i<n.length;i++)qr(e,t,n[i])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Rr(e,e.transform.height-(t.top||0),3,Nr),Rr(e,t.bottom||0,3,Or),Vr(e,t.left||0,3,Br),Vr(e,e.transform.width-(t.right||0),3,Lr);const n=e.transform.centerPoint;!function(e,t,n,i){Ur(e,t-1,n-10,2,20,i),Ur(e,t-10,n-1,20,2,i)}(e,n.x,e.transform.height-n.y,zr)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const n=this.terrainFacilitator.matrix,i=this.transform.modelViewProjectionMatrix;let r=this.terrainFacilitator.dirty;r||(r=e?!t.cj(n,i):!t.ck(n,i)),r||(r=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),r&&(t.cl(n,i),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){const i=e.context,r=i.gl,o=e.transform,a=Qt.unblended,s=new tn(r.LEQUAL,tn.ReadWrite,[0,1]),l=n.tileManager.getRenderableTiles(),c=e.useProgram("terrainDepth");i.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.bp.transparent,depth:1});for(const t of l){const e=n.getTerrainMesh(t.tileID),l=n.getTerrainData(t.tileID),u=o.getProjectionData({overscaledTileID:t.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),h={u_ele_delta:n.getMeshFrameDelta(o.zoom)};c.draw(i,r.TRIANGLES,s,rn.disabled,a,en.backCCW,h,l,u,"terrain",e.vertexBuffer,e.indexBuffer,e.segments)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,n){const i=e.context,r=i.gl,o=e.transform,a=Qt.unblended,s=new tn(r.LEQUAL,tn.ReadWrite,[0,1]),l=n.getCoordsTexture(),c=n.tileManager.getRenderableTiles(),u=e.useProgram("terrainCoords");i.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.bp.transparent,depth:1}),n.coordsIndex=[];for(const t of c){const e=n.getTerrainMesh(t.tileID),c=n.getTerrainData(t.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l.texture);const h={u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0,u_ele_delta:n.getMeshFrameDelta(o.zoom)},d=o.getProjectionData({overscaledTileID:t.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});u.draw(i,r.TRIANGLES,s,rn.disabled,a,en.backCCW,h,c,d,"terrain",e.vertexBuffer,e.indexBuffer,e.segments),n.coordsIndex.push(t.tileID.key)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}renderLayer(e,n,i,r,o){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||(r||[]).length)&&(this.id=i.id,t.cm(i)?function(e,n,i,r,o,a){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=a,l=rn.disabled,c=e.colorModeForRenderPass();(i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,n,i,r,o,a,s,l,c){const u=n.transform,h=n.style.map.terrain,d="map"===o,p="map"===a;for(const f of e){const e=r.getTile(f),o=e.getBucket(i);if(!o||!o.text||!o.text.segments.get().length)continue;const a=t.ay(o.textSizeData,u.zoom),m=t.aN(e,1,n.transform.zoom),g=ze(d,n.transform,m),y="none"!==i.layout.get("icon-text-fit")&&o.hasIconData();if(a){const n=Math.pow(2,u.zoom-e.tileID.overscaledZ),i=h?(e,t)=>h.getElevation(f,e,t):null;fr(o,d,p,c,u,g,n,a,y,t.aO(u,e,s,l),f.toUnwrapped(),i)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&gr(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),l,c,s),0!==i.paint.get("text-opacity").constantOr(1)&&gr(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),l,c,s),n.map.showCollisionBoxes&&(ur(e,n,i,r,!0),ur(e,n,i,r,!1))}(e,n,i,r,this.style.placement.variableOffsets,o):t.cn(i)?function(e,n,i,r,o){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:a}=o,s=i.paint.get("circle-opacity"),l=i.paint.get("circle-stroke-width"),c=i.paint.get("circle-stroke-opacity"),u=!i.layout.get("circle-sort-key").isConstant();if(0===s.constantOr(1)&&(0===l.constantOr(1)||0===c.constantOr(1)))return;const h=e.context,d=h.gl,p=e.transform,f=e.getDepthModeForSublayer(0,tn.ReadOnly),m=rn.disabled,g=e.colorModeForRenderPass(),y=[],v=p.getCircleRadiusCorrection();for(let _=0;_<r.length;_++){const o=r[_],s=n.getTile(o),l=s.getBucket(i);if(!l)continue;const c=i.paint.get("circle-translate"),h=i.paint.get("circle-translate-anchor"),d=t.aO(p,s,c,h),f=l.programConfigurations.get(i.id),m=e.useProgram("circle",f),g=l.layoutVertexBuffer,x=l.indexBuffer,b=e.style.map.terrain&&e.style.map.terrain.getTerrainData(o),w={programConfiguration:f,program:m,layoutVertexBuffer:g,indexBuffer:x,uniformValues:Xn(e,s,i,d,v),terrainData:b,projectionData:p.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!a,applyTerrainMatrix:!0})};if(u){const e=l.segments.get();for(const n of e)y.push({segments:new t.aX([n]),sortKey:n.sortKey,state:w})}else y.push({segments:l.segments,sortKey:0,state:w})}u&&y.sort((e,t)=>e.sortKey-t.sortKey);for(const t of y){const{programConfiguration:n,program:r,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l,projectionData:c}=t.state;r.draw(h,d.TRIANGLES,f,m,g,en.backCCW,s,l,c,i.id,o,a,t.segments,i.paint,e.transform.zoom,n)}}(e,n,i,r,o):t.co(i)?function(e,n,i,r,o){if(0===i.paint.get("heatmap-opacity"))return;const a=e.context,{isRenderingToTexture:s,isRenderingGlobe:l}=o;if(e.style.map.terrain){for(const t of r){const r=n.getTile(t);n.hasRenderableParent(t)||("offscreen"===e.renderPass?vr(e,r,i,t,l):"translucent"===e.renderPass&&_r(e,i,t,s,l))}a.viewport.set([0,0,e.width,e.height])}else"offscreen"===e.renderPass?function(e,n,i,r){const o=e.context,a=o.gl,s=e.transform,l=rn.disabled,c=new Qt([a.ONE,a.ONE],t.bp.transparent,[!0,!0,!0,!0]);(function(e,n,i){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,n.width/4,n.height/4]);let o=i.heatmapFbos.get(t.cd);o?(r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)):(o=xr(e,n.width/4,n.height/4),i.heatmapFbos.set(t.cd,o))})(o,e,i),o.clear({color:t.bp.transparent});for(let t=0;t<r.length;t++){const u=r[t];if(n.hasRenderableParent(u))continue;const h=n.getTile(u),d=h.getBucket(i);if(!d)continue;const p=d.programConfigurations.get(i.id),f=e.useProgram("heatmap",p),m=s.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),g=s.getCircleRadiusCorrection();f.draw(o,a.TRIANGLES,tn.disabled,l,c,en.backCCW,Jn(h,s.zoom,i.paint.get("heatmap-intensity"),g),null,m,i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,s.zoom,p)}o.viewport.set([0,0,e.width,e.height])}(e,n,i,r):"translucent"===e.renderPass&&function(e,n){const i=e.context,r=i.gl;i.setColorMode(e.colorModeForRenderPass());const o=n.heatmapFbos.get(t.cd);o&&(i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1),br(i,n).bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,tn.disabled,rn.disabled,e.colorModeForRenderPass(),en.disabled,ei(e,n,0,1),null,null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom))}(e,i)}(e,n,i,r,o):t.cp(i)?function(e,t,n,i,r){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:o}=r,a=n.paint.get("line-opacity"),s=n.paint.get("line-width");if(0===a.constantOr(1)||0===s.constantOr(1))return;const l=e.getDepthModeForSublayer(0,tn.ReadOnly),c=e.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),h=u.constantOr(1),d=n.paint.get("line-pattern"),p=d.constantOr(1),f=n.paint.get("line-gradient"),m=n.getCrossfadeParameters();let g;g=p?"linePattern":h&&f?"lineGradientSDF":h?"lineSDF":f?"lineGradient":"line";const y=e.context,v=y.gl,_=e.transform;let x=!0;for(const b of i){const i=t.getTile(b);if(p&&!i.patternsLoaded())continue;const r=i.getBucket(n);if(!r)continue;const a=r.programConfigurations.get(n.id),s=e.context.program.get(),w=e.useProgram(g,a),D=x||w.program!==s,E=e.style.map.terrain&&e.style.map.terrain.getTerrainData(b),C=d.constantOr(null),A=u&&u.constantOr(null);if(C&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[C.to.toString()],n=e.patternPositions[C.from.toString()];t&&n&&a.setConstantPatternPositions(t,n)}else if(A){const t="round"===n.layout.get("line-cap"),i=e.lineAtlas.getDash(A.to,t),r=e.lineAtlas.getDash(A.from,t);a.setConstantDashPositions(i,r)}const S=_.getProjectionData({overscaledTileID:b,applyGlobeMatrix:!o,applyTerrainMatrix:!0}),T=_.getPixelScale();let F;p?(F=si(e,i,n,T,m),Dr(y,v,i,a,m)):h&&f?(F=ci(e,i,n,T,m,r.lineClipsArray.length),Ar(e,t,y,v,n,r,b,a,m)):h?(F=li(e,i,n,T,m),Er(e,y,v,a,D,m)):f?(F=ai(e,i,n,T,r.lineClipsArray.length),Cr(e,t,y,v,n,r,b)):F=oi(e,i,n,T);const k=e.stencilModeForClipping(b);w.draw(y,v.TRIANGLES,l,k,c,en.disabled,F,E,S,n.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,n.paint,e.transform.zoom,a,r.layoutVertexBuffer2),x=!1}}(e,n,i,r,o):t.cq(i)?function(e,n,i,r,o){const a=i.paint.get("fill-color"),s=i.paint.get("fill-opacity");if(0===s.constantOr(1))return;const{isRenderingToTexture:l}=o,c=e.colorModeForRenderPass(),u=i.paint.get("fill-pattern"),h=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===a.constantOr(t.bp.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===h){const t=e.getDepthModeForSublayer(1,"opaque"===e.renderPass?tn.ReadWrite:tn.ReadOnly);Tr(e,n,i,r,t,c,!1,l)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const t=e.getDepthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,tn.ReadOnly);Tr(e,n,i,r,t,c,!0,l)}}(e,n,i,r,o):t.cr(i)?function(e,t,n,i,r){const o=n.paint.get("fill-extrusion-opacity");if(0===o)return;const{isRenderingToTexture:a}=r;if("translucent"===e.renderPass){const r=new tn(e.context.gl.LEQUAL,tn.ReadWrite,e.depthRangeFor3D);if(1!==o||n.paint.get("fill-extrusion-pattern").constantOr(1))Fr(e,t,n,i,r,rn.disabled,Qt.disabled,a),Fr(e,t,n,i,r,e.stencilModeFor3D(),e.colorModeForRenderPass(),a);else{const o=e.colorModeForRenderPass();Fr(e,t,n,i,r,rn.disabled,o,a)}}}(e,n,i,r,o):t.cs(i)?function(e,n,i,r,o){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const{isRenderingToTexture:a}=o,s=e.context,l=e.style.projection.useSubdivision,c=e.getDepthModeForSublayer(0,tn.ReadOnly),u=e.colorModeForRenderPass();if("offscreen"===e.renderPass)!function(e,n,i,r,o,a,s){const l=e.context,c=l.gl;for(const u of i){const i=n.getTile(u),h=i.dem;if(!h||!h.data)continue;if(!i.needsHillshadePrepare)continue;const d=h.dim,p=h.stride,f=h.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(p),i.demTexture){const e=i.demTexture;e.update(f,{premultiply:!1}),e.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new t.T(l,f,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);let m=i.fbo;if(!m){const e=new t.T(l,{width:d,height:d,data:null},c.RGBA);e.bind(c.LINEAR,c.CLAMP_TO_EDGE),m=i.fbo=l.createFramebuffer(d,d,!0,!1),m.colorAttachment.set(e.texture)}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,d,d]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,o,a,s,en.disabled,ni(i.tileID,h),null,null,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}(e,n,r,i,c,rn.disabled,u),s.viewport.set([0,0,e.width,e.height]);else if("translucent"===e.renderPass)if(l){const[t,o,s]=e.stencilConfigForOverlapTwoPass(r);kr(e,n,i,s,t,c,u,!1,a),kr(e,n,i,s,o,c,u,!0,a)}else{const[t,o]=e.getStencilConfigForOverlapAndUpdateStencilID(r);kr(e,n,i,o,t,c,u,!1,a)}}(e,n,i,r,o):t.ct(i)?function(e,t,n,i,r){if("translucent"!==e.renderPass)return;if(!i.length)return;const{isRenderingToTexture:o}=r,a=e.style.projection.useSubdivision,s=e.getDepthModeForSublayer(0,tn.ReadOnly),l=e.colorModeForRenderPass();if(a){const[r,a,c]=e.stencilConfigForOverlapTwoPass(i);Pr(e,t,n,c,r,s,l,!1,o),Pr(e,t,n,c,a,s,l,!0,o)}else{const[r,a]=e.getStencilConfigForOverlapAndUpdateStencilID(i);Pr(e,t,n,a,r,s,l,!1,o)}}(e,n,i,r,o):t.bU(i)?function(e,t,n,i,r){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!i.length)return;const{isRenderingToTexture:o}=r,a=t.getSource(),s=e.style.projection.useSubdivision;if(a instanceof te)Ir(e,t,n,i,null,!1,!1,a.tileCoords,a.flippedWindingOrder,o);else if(s){const[r,a,s]=e.stencilConfigForOverlapTwoPass(i);Ir(e,t,n,s,r,!1,!0,Mr,!1,o),Ir(e,t,n,s,a,!0,!0,Mr,!1,o)}else{const[r,a]=e.getStencilConfigForOverlapAndUpdateStencilID(i);Ir(e,t,n,a,r,!1,!0,Mr,!1,o)}}(e,n,i,r,o):t.cu(i)?function(e,t,n,i,r){const o=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0===a)return;const{isRenderingToTexture:s}=r,l=e.context,c=l.gl,u=e.style.projection,h=e.transform,d=h.tileSize,p=n.paint.get("background-pattern");if(e.isPatternMissing(p))return;const f=!p&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==f)return;const m=rn.disabled,g=e.getDepthModeForSublayer(0,"opaque"===f?tn.ReadWrite:tn.ReadOnly),y=e.colorModeForRenderPass(),v=e.useProgram(p?"backgroundPattern":"background"),_=i||Ae(h,{tileSize:d,terrain:e.style.map.terrain});p&&(l.activeTexture.set(c.TEXTURE0),e.imageManager.bind(e.context));const x=n.getCrossfadeParameters();for(const b of _){const t=h.getProjectionData({overscaledTileID:b,applyGlobeMatrix:!s,applyTerrainMatrix:!0}),i=p?vi(a,e,p,{tileID:b,tileSize:d},x):yi(a,o),r=e.style.map.terrain&&e.style.map.terrain.getTerrainData(b),f=u.getMeshFromTileID(l,b.canonical,!1,!0,"raster");v.draw(l,c.TRIANGLES,g,m,y,en.backCCW,i,r,t,n.id,f.vertexBuffer,f.indexBuffer,f.segments)}}(e,0,i,r,o):t.cv(i)&&function(e,t,n,i){const{isRenderingGlobe:r}=i,o=e.context,a=n.implementation,s=e.style.projection,l=e.transform,c=l.getProjectionDataForCustomLayer(r),u={farZ:l.farZ,nearZ:l.nearZ,fov:l.fov*Math.PI/180,modelViewProjectionMatrix:l.modelViewProjectionMatrix,projectionMatrix:l.projectionMatrix,shaderData:{variantName:s.shaderVariantName,vertexShaderPrelude:"const float PI = 3.141592653589793;\nuniform mat4 u_projection_matrix;\n".concat(s.shaderPreludeCode.vertexSource),define:s.shaderDefine},defaultProjectionData:c},h=a.renderingMode?a.renderingMode:"2d";if("offscreen"===e.renderPass){const t=a.prerender;t&&(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),t.call(a,o.gl,u),o.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode(rn.disabled);const t="3d"===h?e.getDepthModeFor3D():e.getDepthModeForSublayer(0,tn.ReadOnly);o.setDepthMode(t),a.render(o.gl,u),o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null)}}(e,0,i,o))}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}useProgram(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.cache=this.cache||{};const r=!!this.style.map.terrain,o=this.style.projection,a=n?It.projectionMercator:o.shaderPreludeCode,s=n?Bt:o.shaderDefine,l=e+(t?t.cacheKey:"")+"/".concat(n?Lt:o.shaderVariantName)+(this._showOverdrawInspector?"/overdraw":"")+(r?"/terrain":"")+(i?"/".concat(i.join("/")):"");return this.cache[l]||(this.cache[l]=new Un(this.context,It[e],t,xi[e],this._showOverdrawInspector,r,a,s,i)),this.cache[l]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var e,t;if(this._tileTextures){for(const e in this._tileTextures){const t=this._tileTextures[e];if(t)for(const e of t)e.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&(null===(e=this.tileExtentMesh.vertexBuffer)||void 0===e||e.destroy()),this.tileExtentMesh&&(null===(t=this.tileExtentMesh.indexBuffer)||void 0===t||t.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const e in this.cache){const t=this.cache[e];t&&t.program&&this.context.gl.deleteProgram(t.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}function Wr(e,t){var n=this;let i,r=!1,o=null,a=null;const s=()=>{o=null,r&&(e.apply(a,i),o=setTimeout(s,t),r=!1)};return function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];return r=!0,a=n,i=t,o||s(),o}}class Yr{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map(e=>e.split("=")).forEach(e=>{e[0]===this._hashName&&(t=e)}),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(!this._isValidHash(e))return!1;const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,e)},this._removeHash=()=>{const e=this._getCurrentHash();if(0===e.length)return;const t=e.join("/");let n=t;n.split("&").length>0&&(n=n.split("&")[0]),this._hashName&&(n="".concat(this._hashName,"=").concat(t));let i=window.location.hash.replace(n,"");i.startsWith("#&")?i=i.slice(0,1)+i.slice(2):"#"===i&&(i="");let r=window.location.href.replace(/(#.+)?$/,i);r=r.replace("&&","&"),window.history.replaceState(window.history.state,null,r)},this._updateHash=Wr(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),o=Math.round(t.lng*r)/r,a=Math.round(t.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?"/".concat(o,"/").concat(a,"/").concat(n):"".concat(n,"/").concat(a,"/").concat(o),(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/".concat(Math.round(l))),this._hashName){const e=this._hashName;let t=!1;const n=window.location.hash.slice(1).split("&").map(n=>{const i=n.split("=")[0];return i===e?(t=!0,"".concat(i,"=").concat(c)):n}).filter(e=>e);return t||n.push("".concat(e,"=").concat(c)),"#".concat(n.join("&"))}return"#".concat(c)}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new t.V(+e[2],+e[1])}catch(e){return!1}const n=+e[0],i=+(e[3]||0),r=+(e[4]||0);return n>=this._map.getMinZoom()&&n<=this._map.getMaxZoom()&&i>=-180&&i<=180&&r>=this._map.getMinPitch()&&r<=this._map.getMaxPitch()}}const Xr={linearity:.3,easing:t.cw(0,0,.3,1)},Kr=t.e({deceleration:2500,maxSpeed:1400},Xr),$r=t.e({deceleration:20,maxSpeed:1400},Xr),Qr=t.e({deceleration:1e3,maxSpeed:360},Xr),Jr=t.e({deceleration:1e3,maxSpeed:90},Xr),eo=t.e({deceleration:1e3,maxSpeed:360},Xr);class to{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=c();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,roll:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,n.roll+=t.rollDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const o=io(n.pan.mag(),i,t.e({},Kr,e||{})),a=n.pan.mult(o.amount/n.pan.mag()),s=this._map.cameraHelper.handlePanInertia(a,this._map.transform);r.center=s.easingCenter,r.offset=s.easingOffset,no(r,o)}if(n.zoom){const e=io(n.zoom,i,$r),o=t.cx(this._map.transform.zoom+e.amount,this._map.getZoomSnap(),e.amount);r.zoom=o,no(r,e)}if(n.bearing){const e=io(n.bearing,i,Qr);r.bearing=this._map.transform.bearing+t.an(e.amount,-179,179),no(r,e)}if(n.pitch){const e=io(n.pitch,i,Jr);r.pitch=this._map.transform.pitch+e.amount,no(r,e)}if(n.roll){const e=io(n.roll,i,eo);r.roll=this._map.transform.roll+t.an(e.amount,-179,179),no(r,e)}if(r.zoom||r.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;r.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(r,{noMoveStart:!0})}}function no(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function io(e,n,i){const{maxSpeed:r,linearity:o,deceleration:a}=i,s=t.an(e*o/(n/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class ro extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i=i instanceof MouseEvent?i:new MouseEvent(e,i);const o=u.mousePos(n.getCanvas(),i),a=n.unproject(o);super(e,t.e({point:o,lngLat:a,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class oo extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const r="touchend"===e?i.changedTouches:i.touches,o=u.touchPos(n.getCanvasContainer(),r),a=o.map(e=>n.unproject(e)),s=o.reduce((e,t,n,i)=>e.add(t.div(i.length)),new t.P(0,0));super(e,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:i}),this._defaultPrevented=!1}}class ao extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class so{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new ao(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ro(e.type,this._map,e))}mouseup(e){this._map.fire(new ro(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new ro(e.type,this._map,e))}dblclick(e){return this._firePreventable(new ro(e.type,this._map,e))}mouseover(e){this._map.fire(new ro(e.type,this._map,e))}mouseout(e){this._map.fire(new ro(e.type,this._map,e))}touchstart(e){return this._firePreventable(new oo(e.type,this._map,e))}touchmove(e){this._map.fire(new oo(e.type,this._map,e))}touchend(e){this._map.fire(new oo(e.type,this._map,e))}touchcancel(e){this._map.fire(new oo(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lo{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new ro(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ro("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new ro(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class co{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this._map.terrain)}}class uo{constructor(e,t){this._map=e,this._tr=new co(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=n,this._box||(this._box=u.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const r=Math.min(i.x,n.x),o=Math.max(i.x,n.x),a=Math.min(i.y,n.y),s=Math.max(i.y,n.y);u.setTransform(this._box,"translate(".concat(r,"px,").concat(a,"px)")),this._box.style.width=o-r+"px",this._box.style.height=s-a+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const i=this._startPos,r=n;if(this.reset(),u.suppressClick(),i.x!==r.x||i.y!==r.y)return this._map.fire(new t.l("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(i,r,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(u.remove(this._box),this._box=null),u.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.l(e,{originalEvent:n}))}}function ho(e,t){if(e.length!==t.length)throw new Error("The number of touches and points are not equal - touches ".concat(e.length,", points ").concat(t.length));const n={};for(let i=0;i<e.length;i++)n[e[i].identifier]=t[i];return n}class po{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.P(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=ho(i,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const i=ho(n,t);for(const r in this.touches){const e=i[r];(!e||e.dist(this.touches[r])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class fo{constructor(e){this.singleTap=new po(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const i=this.singleTap.touchend(e,t,n);if(i){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class mo{constructor(e){this._tr=new co(e),this._zoomIn=new fo({numTouches:1,numTaps:2}),this._zoomOut=new fo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,n,i){const r=this._zoomIn.touchend(e,n,i),o=this._zoomOut.touchend(e,n,i),a=this._tr;return r?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:n=>n.easeTo({duration:300,zoom:t.cx(a.zoom+1,n.getZoomSnap()),around:a.unproject(r)},{originalEvent:e})}):o?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:n=>n.easeTo({duration:300,zoom:t.cx(a.zoom-1,n.getZoomSnap()),around:a.unproject(o)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class go{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(){const e=this._moveFunction(...arguments);if(e.bearingDelta||e.pitchDelta||e.rollDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(t)?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const n=this._lastPoint;if(!n)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const i=Array.isArray(t)?t[0]:t;return!this._moved&&i.dist(n)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=i,this._move(n,i))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&u.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const yo=0,vo=2,_o={[yo]:1,[vo]:2};class xo{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=u.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const n=_o[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton)}isValidEndEvent(e){return u.mouseButton(e)===this._eventButton}}class bo{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class wo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xo({checkCorrectEvent:()=>!0}),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bo;this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=t}_executeRelevantHandler(e,t,n){return e instanceof MouseEvent?t(e):"undefined"!=typeof TouchEvent&&e instanceof TouchEvent?n(e):void 0}startMove(e){this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.startMove(e),e=>this.oneFingerTouchMoveStateManager.startMove(e))}endMove(e){this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.endMove(e),e=>this.oneFingerTouchMoveStateManager.endMove(e))}isValidStartEvent(e){return this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.isValidStartEvent(e),e=>this.oneFingerTouchMoveStateManager.isValidStartEvent(e))}isValidMoveEvent(e){return this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.isValidMoveEvent(e),e=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(e))}isValidEndEvent(e){return this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.isValidEndEvent(e),e=>this.oneFingerTouchMoveStateManager.isValidEndEvent(e))}}const Do=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault()}};class Eo{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active){if(!this._shouldBePrevented(n.length))return e.preventDefault(),this._calculateTransform(e,t,n);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&this._shouldBePrevented(n.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=ho(i,n),o=new t.P(0,0),a=new t.P(0,0);let s=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,r[t]=e)}if(this._touches=r,this._shouldBePrevented(s)||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Co{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[i,r]=this._firstTwoTouches,o=Ao(n,t,i),a=Ao(n,t,r);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,o=Ao(n,t,i),a=Ao(n,t,r);o&&a||(this._active&&u.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ao(e,t,n){for(let i=0;i<e.length;i++)if(e[i].identifier===n)return t[i]}function So(e,t){return Math.log(e/t)/Math.LN2}class To extends Co{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(So(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:So(this._distance,n),pinchAround:t}}}function Fo(e,t){return 180*e.angleWith(t)/Math.PI}class ko extends Co{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,n){const i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fo(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=Fo(e,this._startVector);return Math.abs(n)<t}}function Po(e){return Math.abs(e.y)>Math.abs(e.x)}class Mo extends Co{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,n){super.touchstart(e,t,n),this._currentTouchCount=n.length}_start(e){this._lastPoints=e,Po(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const i=e[0].sub(this._lastPoints[0]),r=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const i=e.mag()>=2,r=t.mag()>=2;if(!i&&!r)return;if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Po(e)&&Po(t)&&o}}const Io={panStep:100,bearingStep:15,pitchStep:10};class jo{constructor(e){this._tr=new co(e);const t=Io;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let n=0,i=0,r=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:s=>{const l=this._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:No,zoom:n?t.cx(l.zoom+n*(e.shiftKey?2:1),s.getZoomSnap()):l.zoom,bearing:l.bearing+i*this._bearingStep,pitch:l.pitch+r*this._pitchStep,offset:[-o*this._panStep,-a*this._panStep],center:l.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function No(e){return e*(2-e)}const Oo=4.000244140625,Bo=1/450;class Lo{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new co(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bo}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=c(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%Oo==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=u.mousePos(this._map.getCanvas(),e),i=this._tr;this._aroundPoint=this._aroundCenter?i.transform.locationToScreenPoint(t.V.convert(i.center)):n,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if("number"==typeof this._lastExpectedZoom){const t=e.zoom-this._lastExpectedZoom;"number"==typeof this._startZoom&&(this._startZoom+=t),"number"==typeof this._targetZoom&&(this._targetZoom+=t)}if(0!==this._delta){const n="wheel"===this._type&&Math.abs(this._delta)>Oo?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==i&&(i=1/i);const r="number"!=typeof this._targetZoom?e.scale:t.aq(this._targetZoom),o=e.applyConstrain(e.getCameraLngLat(),t.at(r*i)).zoom,a=this._map.getZoomSnap();if("wheel"===this._type&&a>0){const n=t.cx(e.zoom,a);this._targetZoom=t.cx(o,a,o-n)}else this._targetZoom=o;"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"!=typeof this._targetZoom?e.zoom:this._targetZoom,i=this._startZoom,r=this._easing;let o,a=!1;if("wheel"===this._type&&i&&r){const e=c()-this._lastWheelEventTime,s=Math.min((e+5)/200,1),l=r(s);o=t.G.number(i,n,l),s<1?this._frameId||(this._frameId=!0):a=!0}else o=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=o,{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.cz;if(this._prevEase){const e=this._prevEase,i=(c()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),o=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.cw(o,a,.25,1)}return this._prevEase={start:c(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class zo{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ro{constructor(e){this._tr=new co(e),this.reset()}reset(){this._active=!1}dblclick(e,n){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:t.cx(this._tr.zoom+(e.shiftKey?-1:1),i.getZoomSnap()),around:this._tr.unproject(n)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vo{constructor(){this._tap=new fo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,n){if(!this._swipePoint)if(this._tapTime){const i=t[0],r=e.timeStamp-this._tapTime<500,o=this._tapPoint.dist(i)<30;r&&o?n.length>0&&(this._swipePoint=i,this._swipeTouch=n[0].identifier):this.reset()}else this._tap.touchstart(e,t,n)}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=t[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){if(this._tapTime)this._swipePoint&&0===n.length&&this.reset();else{const i=this._tap.touchend(e,t,n);i&&(this._tapTime=e.timeStamp,this._tapPoint=i)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uo{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qo{constructor(e,t,n,i){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=t,this._mousePitch=n,this._mouseRoll=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Zo{constructor(e,t,n,i){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ho{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=u.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const n=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),i=document.createElement("div");i.className="maplibregl-desktop-message",i.textContent=t,this._container.appendChild(i);const r=document.createElement("div");r.className="maplibregl-mobile-message",r.textContent=n,this._container.appendChild(r),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(u.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,n){this._enabled&&(this._map.fire(new t.l("cooperativegestureprevented",{gestureType:e,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Go=e=>e.zoom||e.drag||e.roll||e.pitch||e.rotate;class Wo extends t.l{}function Yo(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta||e.rollDelta}class Xo{get _ownerDocument(){var e;return(null===(e=this._el)||void 0===e?void 0:e.ownerDocument)||document}get _ownerWindow(){var e,t;return(null===(t=null===(e=this._el)||void 0===e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView)||window}constructor(e,n){this.handleWindowEvent=e=>{this.handleEvent(e,"".concat(e.type,"Window"))},this.handleEvent=(e,n)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const i="renderFrame"===e.type?void 0:e,r={needsRenderFrame:!1},o={},a={};for(const{handlerName:c,handler:h,allowed:d}of this._handlers){if(!h.isEnabled())continue;let s;if(this._blockedByActive(a,d,c))h.reset();else if(h[n||e.type]){if(t.cA(e,n||e.type)){const t=u.mousePos(this._map.getCanvas(),e);s=h[n||e.type](e,t)}else if(t.cB(e,n||e.type)){const t=this._getMapTouches(e.touches),i=u.touchPos(this._map.getCanvas(),t);s=h[n||e.type](e,i,t)}else t.cC(n||e.type)||(s=h[n||e.type](e));this.mergeHandlerResult(r,o,s,c,i),s&&s.needsRenderFrame&&this._triggerRenderFrame()}(s||h.isActive())&&(a[c]=h)}const s={};for(const t in this._previousActiveHandlers)a[t]||(s[t]=i);this._previousActiveHandlers=a,(Object.keys(s).length||Yo(r))&&(this._changes.push([r,o,s]),this._triggerRenderFrame()),(Object.keys(a).length||Yo(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:l}=r;l&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],l(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new to(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(const[t,r,o]of this._listeners)u.addEventListener(t,r,t===this._ownerDocument?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,t,n]of this._listeners)u.removeEventListener(e,t,e===this._ownerDocument?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const n=this._map,i=n.getCanvasContainer();this._add("mapEvent",new so(n,e));const r=n.boxZoom=new uo(n,e);this._add("boxZoom",r),e.interactive&&e.boxZoom&&r.enable();const o=n.cooperativeGestures=new Ho(n,e.cooperativeGestures);this._add("cooperativeGestures",o),e.cooperativeGestures&&o.enable();const a=new mo(n),s=new Ro(n);n.doubleClickZoom=new zo(s,a),this._add("tapZoom",a),this._add("clickZoom",s),e.interactive&&e.doubleClickZoom&&n.doubleClickZoom.enable();const l=new Vo;this._add("tapDragZoom",l);const c=n.touchPitch=new Mo(n);this._add("touchPitch",c),e.interactive&&e.touchPitch&&n.touchPitch.enable(e.touchPitch);const h=()=>n.project(n.getCenter()),d=function(e,n){let{enable:i,clickTolerance:r,aroundCenter:o=!0,minPixelCenterThreshold:a=100,rotateDegreesPerPixelMoved:s=.8}=e;const l=new xo({checkCorrectEvent:e=>0===u.mouseButton(e)&&e.ctrlKey||2===u.mouseButton(e)&&!e.ctrlKey});return new go({clickTolerance:r,move:(e,i)=>{const r=n();if(o&&Math.abs(r.y-e.y)>a)return{bearingDelta:t.cy(new t.P(e.x,i.y),i,r)};let l=(i.x-e.x)*s;return o&&i.y<r.y&&(l=-l),{bearingDelta:l}},moveStateManager:l,enable:i,assignEvents:Do})}(e,h),p=function(e){let{enable:t,clickTolerance:n,pitchDegreesPerPixelMoved:i=-.5}=e;const r=new xo({checkCorrectEvent:e=>0===u.mouseButton(e)&&e.ctrlKey||2===u.mouseButton(e)});return new go({clickTolerance:n,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:r,enable:t,assignEvents:Do})}(e),f=function(e,t){let{enable:n,clickTolerance:i,rollDegreesPerPixelMoved:r=.3}=e;const o=new xo({checkCorrectEvent:e=>2===u.mouseButton(e)&&e.ctrlKey});return new go({clickTolerance:i,move:(e,n)=>{const i=t();let o=(n.x-e.x)*r;return n.y<i.y&&(o=-o),{rollDelta:o}},moveStateManager:o,enable:n,assignEvents:Do})}(e,h);n.dragRotate=new qo(e,d,p,f),this._add("mouseRotate",d,["mousePitch"]),this._add("mousePitch",p,["mouseRotate","mouseRoll"]),this._add("mouseRoll",f,["mousePitch"]),e.interactive&&e.dragRotate&&n.dragRotate.enable();const m=function(e){let{enable:t,clickTolerance:n}=e;const i=new xo({checkCorrectEvent:e=>0===u.mouseButton(e)&&!e.ctrlKey});return new go({clickTolerance:n,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:i,enable:t,assignEvents:Do})}(e),g=new Eo(e,n);n.dragPan=new Uo(i,m,g),this._add("mousePan",m),this._add("touchPan",g,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&n.dragPan.enable(e.dragPan);const y=new ko,v=new To;n.touchZoomRotate=new Zo(i,v,y,l),this._add("touchRotate",y,["touchPan","touchZoom"]),this._add("touchZoom",v,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&n.touchZoomRotate.enable(e.touchZoomRotate),this._add("blockableMapEvent",new lo(n));const _=n.scrollZoom=new Lo(n,()=>this._triggerRenderFrame());this._add("scrollZoom",_,["mousePan"]),e.interactive&&e.scrollZoom&&n.scrollZoom.enable(e.scrollZoom);const x=n.keyboard=new jo(n);this._add("keyboard",x),e.interactive&&e.keyboard&&n.keyboard.enable()}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Go(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const i in e)if(i!==n&&(!t||t.indexOf(i)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}mergeHandlerResult(e,n,i,r,o){if(!i)return;t.e(e,i);const a={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.rollDelta&&(n.roll=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},i={};for(const[r,o,a]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),r.rollDelta&&(e.rollDelta=(e.rollDelta||0)+r.rollDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.e(n,o),t.e(i,a);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,t,n){const i=this._map,r=i._getTransformForUpdate(),o=i.terrain;if(!(Yo(e)||o&&this._terrainMovement))return this._fireEvents(t,n,!0);i._stop(!0);let{panDelta:a,zoomDelta:s,bearingDelta:l,pitchDelta:c,rollDelta:u,around:h,pinchAround:d}=e;void 0!==d&&(h=d),h=h||i.transform.centerPoint,o&&!r.isPointOnMapSurface(h)&&(h=r.centerPoint);const p={panDelta:a,zoomDelta:s,rollDelta:u,pitchDelta:c,bearingDelta:l,around:h};this._map.cameraHelper.useGlobeControls&&!r.isPointOnMapSurface(h)&&(h=r.centerPoint);const f=h.distSqr(r.centerPoint)<.01?r.center:r.screenPointToLocation(a?h.sub(a):h);this._handleMapControls({terrain:o,tr:r,deltasForHelper:p,preZoomAroundLoc:f,combinedEventsInProgress:t,panDelta:a}),i._applyUpdatedTransform(r),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)}_handleMapControls(e){let{terrain:t,tr:n,deltasForHelper:i,preZoomAroundLoc:r,combinedEventsInProgress:o,panDelta:a}=e;const s=this._map.cameraHelper;if(s.handleMapControlsRollPitchBearingZoom(i,n),t)return s.useGlobeControls?(this._terrainMovement||!o.drag&&!o.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void s.handleMapControlsPan(i,n,r)):this._terrainMovement||!o.drag&&!o.zoom?void(o.drag&&this._terrainMovement&&a?n.setCenter(n.screenPointToLocation(n.centerPoint.sub(a))):s.handleMapControlsPan(i,n,r)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void s.handleMapControlsPan(i,n,r));s.handleMapControlsPan(i,n,r)}_fireEvents(e,n,i){const r=Go(this._eventsInProgress),o=Go(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a["".concat(t,"start")]=n),this._eventsInProgress[t]=e[t]}!r&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const l={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=n[e]||i,l["".concat(t,"end")]=c)}for(const t in l)this._fireEvent(t,l[t]);const u=Go(this._eventsInProgress),h=(r||o)&&!u;if(h&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const e=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&e.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(e)}if(i&&h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&s.prefersReducedMotion?(this._map.fire(new t.l("moveend",{originalEvent:c})),n(this._map.getBearing())&&this._map.resetNorth()):(n(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.l(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Wo("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Ko extends t.E{constructor(e,t,n){super(),this._renderFrameCallback=()=>{const e=Math.min((c()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,this._zoomSnap=n.zoomSnap,this.cameraHelper=t,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,t){e.apply(this.transform,!0),this.transform=e,this.cameraHelper=t}getCenter(){return new t.V(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,t){return this.jumpTo({elevation:e},t),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,n,i){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.e({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,n,i){return this.easeTo(t.e({zoom:e},n),i)}zoomIn(e,n){return this.zoomTo(t.cx(this.getZoom()+1,this._zoomSnap),e,n),this}zoomOut(e,n){return this.zoomTo(t.cx(this.getZoom()-1,this._zoomSnap),e,n),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,n){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new t.l("movestart",n)).fire(new t.l("move",n)).fire(new t.l("moveend",n))),this}getBearing(){return this.transform.bearing}setZoomSnap(e){return this._zoomSnap=e,this}getZoomSnap(){return this._zoomSnap}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,n,i){return this.easeTo(t.e({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.e({bearing:0,pitch:0,roll:0,duration:1e3},e),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}getRoll(){return this.transform.roll}setRoll(e,t){return this.jumpTo({roll:e},t),this}cameraForBounds(e,t){e=W.convert(e).adjustAntiMeridian();const n=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,t)}_cameraForBoxAndBearing(e,n,i,r){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){const e=r.padding;r.padding={top:e,bottom:e,right:e,left:e}}const a=t.e(o,r.padding);r.padding=a;const s=this.transform,l=new W(e,n);return this.cameraHelper.cameraForBoxAndBearing(r,a,l,i,s)}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}fitScreenCoordinates(e,n,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(t.P.convert(e)),this.transform.screenPointToLocation(t.P.convert(n)),i,r),r,o)}_fitInternal(e,n,i){return e?(delete(n=t.e(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=this._getTransformForUpdate();let r=!1,o=!1,a=!1;const s=i.zoom;this.cameraHelper.handleJumpToCenterZoom(i,e);const l=i.zoom!==s;return"elevation"in e&&i.elevation!==+e.elevation&&i.setElevation(+e.elevation),"bearing"in e&&i.bearing!==+e.bearing&&(r=!0,i.setBearing(+e.bearing)),"pitch"in e&&i.pitch!==+e.pitch&&(o=!0,i.setPitch(+e.pitch)),"roll"in e&&i.roll!==+e.roll&&(a=!0,i.setRoll(+e.roll)),null==e.padding||i.isPaddingEqual(e.padding)||i.setPadding(e.padding),this._applyUpdatedTransform(i),this.fire(new t.l("movestart",n)).fire(new t.l("move",n)),l&&this.fire(new t.l("zoomstart",n)).fire(new t.l("zoom",n)).fire(new t.l("zoomend",n)),r&&this.fire(new t.l("rotatestart",n)).fire(new t.l("rotate",n)).fire(new t.l("rotateend",n)),o&&this.fire(new t.l("pitchstart",n)).fire(new t.l("pitch",n)).fire(new t.l("pitchend",n)),a&&this.fire(new t.l("rollstart",n)).fire(new t.l("roll",n)).fire(new t.l("rollend",n)),this.fire(new t.l("moveend",n))}calculateCameraOptionsFromTo(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=t.a9.fromLngLat(e,n),a=t.a9.fromLngLat(i,r),s=a.x-o.x,l=a.y-o.y,c=a.z-o.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),d=t.at(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:a.toLngLat(),elevation:r,zoom:d,pitch:f,bearing:p}}calculateCameraOptionsFromCameraLngLatAltRotation(e,t,n,i,r){const o=this.transform.calculateCenterFromCameraLngLatAlt(e,t,n,i);return{center:o.center,elevation:o.elevation,zoom:o.zoom,bearing:n,pitch:i,roll:r}}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.cz},e)).animate||!e.essential&&s.prefersReducedMotion)&&(e.duration=0);const i=this._getTransformForUpdate(),r=this.getBearing(),o=i.pitch,a=i.roll,l="bearing"in e?this._normalizeBearing(e.bearing,r):r,c="pitch"in e?+e.pitch:o,u="roll"in e?this._normalizeBearing(e.roll,a):a,h="padding"in e?e.padding:i.padding,d=t.P.convert(e.offset);let p,f;e.around&&(p=t.V.convert(e.around),f=i.locationToScreenPoint(p));const m={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},g=this.cameraHelper.handleEaseTo(i,{bearing:l,pitch:c,roll:u,padding:h,around:p,aroundPoint:f,offsetAsPoint:d,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||r!==l,this._pitching=this._pitching||c!==o,this._rolling=this._rolling||u!==a,this._padding=!i.isPaddingEqual(h),this._zooming=this._zooming||g.isZooming,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,m),this.terrain&&this._prepareElevation(g.elevationCenter),this._ease(t=>{g.easeFunc(t),this.terrain&&!e.freezeElevation&&this._updateElevation(t),this._applyUpdatedTransform(i),this._fireMoveEvents(n)},t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n,t)},e),this}_prepareEase(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,n||i.moving||this.fire(new t.l("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.l("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.l("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.l("pitchstart",e)),this._rolling&&!i.rolling&&this.fire(new t.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){void 0!==this._elevationStart&&void 0!==this._elevationCenter||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(n-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.setElevation(t.G.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const t=e.getCameraLngLat(),n=e.getCameraAltitude(),i=this.terrain?this.terrain.getElevationForLngLatZoom(t,e.zoom):0;if(n<i){const n=this.calculateCameraOptionsFromTo(t,i,e.center,e.elevation);return{pitch:n.pitch,zoom:n.zoom}}return{}}_applyUpdatedTransform(e){const t=[];if(t.push(e=>this._elevateCameraIfInsideTerrain(e)),this.transformCameraUpdate&&t.push(e=>this.transformCameraUpdate(e)),!t.length)return;const n=e.clone();for(const i of t){const e=n.clone(),{center:t,zoom:r,roll:o,pitch:a,bearing:s,elevation:l}=i(e);t&&e.setCenter(t),void 0!==l&&e.setElevation(l),void 0!==r&&e.setZoom(r),void 0!==o&&e.setRoll(o),void 0!==a&&e.setPitch(a),void 0!==s&&e.setBearing(s),n.apply(e,!1)}this.transform.apply(n,!1)}_fireMoveEvents(e){this.fire(new t.l("move",e)),this._zooming&&this.fire(new t.l("zoom",e)),this._rotating&&this.fire(new t.l("rotate",e)),this._pitching&&this.fire(new t.l("pitch",e)),this._rolling&&this.fire(new t.l("roll",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const i=this._zooming,r=this._rotating,o=this._pitching,a=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,i&&this.fire(new t.l("zoomend",e)),r&&this.fire(new t.l("rotateend",e)),o&&this.fire(new t.l("pitchend",e)),a&&this.fire(new t.l("rollend",e)),this.fire(new t.l("moveend",e))}flyTo(e,n){if(!e.essential&&s.prefersReducedMotion){const i=t.U(e,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(i,n)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.cz},e);const i=this._getTransformForUpdate(),r=i.bearing,o=i.pitch,a=i.roll,l=i.padding,c="bearing"in e?this._normalizeBearing(e.bearing,r):r,u="pitch"in e?+e.pitch:o,h="roll"in e?this._normalizeBearing(e.roll,a):a,d="padding"in e?e.padding:i.padding,p=t.P.convert(e.offset);let f=i.centerPoint.add(p);const m=i.screenPointToLocation(f),g=this.cameraHelper.handleFlyTo(i,{bearing:c,pitch:u,roll:h,padding:d,locationAtOffset:m,offsetAsPoint:p,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let y=e.curve;const v=Math.max(i.width,i.height),_=v/g.scaleOfZoom,x=g.pixelPathLength;"number"==typeof g.scaleOfMinZoom&&(y=Math.sqrt(v/g.scaleOfMinZoom/x*2));const b=y*y;function w(e){const t=(_*_-v*v+(e?-1:1)*b*b*x*x)/(2*(e?_:v)*b*x);return Math.log(Math.sqrt(t*t+1)-t)}function D(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}const C=w(!1);let A=function(e){return E(C)/E(C+y*e)},S=function(e){return v*((E(C)*(D(t=C+y*e)/E(t))-D(C))/b)/x;var t},T=(w(!0)-C)/y;if(Math.abs(x)<2e-6||!isFinite(T)){if(Math.abs(v-_)<1e-6)return this.easeTo(e,n);const t=_<v?-1:1;T=Math.abs(Math.log(_/v))/y,S=()=>0,A=e=>Math.exp(t*y*e)}return e.duration="duration"in e?+e.duration:1e3*T/("screenSpeed"in e?+e.screenSpeed/y:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=r!==c,this._pitching=u!==o,this._rolling=h!==a,this._padding=!i.isPaddingEqual(d),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(g.targetCenter),this._ease(s=>{const m=s*T,y=1/A(m),v=S(m);this._rotating&&i.setBearing(t.G.number(r,c,s)),this._pitching&&i.setPitch(t.G.number(o,u,s)),this._rolling&&i.setRoll(t.G.number(a,h,s)),this._padding&&(i.interpolatePadding(l,d,s),f=i.centerPoint.add(p)),g.easeFunc(s,y,v,f),this.terrain&&!e.freezeElevation&&this._updateElevation(s),this._applyUpdatedTransform(i),this._fireMoveEvents(n)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var n;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}return e||null===(n=this.handlers)||void 0===n||n.stop(!1),this}_ease(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=c(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=t.W(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLat(t.V.convert(e),this.transform):null}}const $o={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Qo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$o;this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=u.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=u.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=u.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){u.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString("AttributionControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(e=>"string"!=typeof e?"":e)):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.tileManagers;for(const i in t){const n=t[i];if(n.used||n.usedForTerrain){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter(e=>String(e).trim()),e.sort((e,t)=>e.length-t.length),e=e.filter((t,n)=>{for(let i=n+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0});const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=u.sanitize(n),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=u.create("div","maplibregl-ctrl");const t=u.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){u.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ea{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const i of n)if(i.id===e)return void(i.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ta=t.aU([{name:"a_pos3d",type:"Int16",components:3}]);class na extends t.E{constructor(e){super(),this._lastTilesetChange=c(),this.tileManager=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(e,n){this.tileManager.update(e,n),this._renderableTilesKeys=[];const i={};for(const r of Ae(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n,calculateTileZoom:this.tileManager._source.calculateTileZoom}))i[r.key]=!0,this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.terrainRttPosMatrix32f=new Float64Array(16),t.c7(r.terrainRttPosMatrix32f,0,t.a5,t.a5,0,0,1),this._tiles[r.key]=new de(r,this.tileSize),this._lastTilesetChange=c());for(const t in this._tiles)i[t]||delete this._tiles[t]}freeRtt(e){for(const t in this._tiles){const n=this._tiles[t];(!e||n.tileID.equals(e)||n.tileID.isChildOf(e)||e.isChildOf(n.tileID))&&(n.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,t){return t?this._getTerrainCoordsForTileRanges(e,t):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const n={};for(const i of this._renderableTilesKeys){const r=this._tiles[i].tileID,o=e.clone(),a=t.bk();if(r.canonical.equals(e.canonical))t.c7(a,0,t.a5,t.a5,0,0,1);else if(r.canonical.isChildOf(e.canonical)){const n=r.canonical.z-e.canonical.z,i=r.canonical.x-(r.canonical.x>>n<<n),o=r.canonical.y-(r.canonical.y>>n<<n),s=t.a5>>n;t.c7(a,0,s,s,0,0,1),t.O(a,a,[-i*s,-o*s,0])}else{if(!e.canonical.isChildOf(r.canonical))continue;{const n=e.canonical.z-r.canonical.z,i=e.canonical.x-(e.canonical.x>>n<<n),o=e.canonical.y-(e.canonical.y>>n<<n),s=t.a5>>n;t.c7(a,0,t.a5,t.a5,0,0,1),t.O(a,a,[i*s,o*s,0]),t.Q(a,a,[1/2**n,1/2**n,0])}}o.terrainRttPosMatrix32f=new Float32Array(a),n[i]=o}return n}_getTerrainCoordsForTileRanges(e,n){const i={};for(const r of this._renderableTilesKeys){const o=this._tiles[r].tileID;if(!this._isWithinTileRanges(o,n))continue;const a=e.clone(),s=t.bk();if(o.canonical.z===e.canonical.z){const n=e.canonical.x-o.canonical.x+e.wrap*(1<<e.canonical.z),i=e.canonical.y-o.canonical.y;t.c7(s,0,t.a5,t.a5,0,0,1),t.O(s,s,[n*t.a5,i*t.a5,0])}else if(o.canonical.z>e.canonical.z){const n=o.canonical.z-e.canonical.z,i=o.canonical.x-(o.canonical.x>>n<<n)+e.wrap*(1<<o.canonical.z),r=o.canonical.y-(o.canonical.y>>n<<n),a=e.canonical.x-(o.canonical.x>>n),l=e.canonical.y-(o.canonical.y>>n),c=t.a5>>n;t.c7(s,0,c,c,0,0,1),t.O(s,s,[-i*c+a*t.a5,-r*c+l*t.a5,0])}else{const n=e.canonical.z-o.canonical.z,i=e.canonical.x-(e.canonical.x>>n<<n)+e.wrap*(1<<e.canonical.z),r=e.canonical.y-(e.canonical.y>>n<<n),a=(e.canonical.x>>n)-o.canonical.x,l=(e.canonical.y>>n)-o.canonical.y,c=t.a5<<n;t.c7(s,0,c,c,0,0,1),t.O(s,s,[i*t.a5+a*c,r*t.a5+l*c,0])}a.terrainRttPosMatrix32f=new Float32Array(s),i[r]=a}return i}getSourceTile(e,t){const n=this.tileManager._source;let i=e.overscaledZ-this.deltaZoom;if(i>n.maxzoom&&(i=n.maxzoom),i<n.minzoom)return;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(i).key);let r=this.findTileInCaches(this._sourceTileCache[e.key]);if(!(null==r?void 0:r.dem)&&t)for(;i>=n.minzoom&&!(null==r?void 0:r.dem);)r=this.findTileInCaches(e.scaledTo(i--).key);return r}findTileInCaches(e){let t=this.tileManager.getTileByID(e);return t||(t=this.tileManager._outOfViewCache.getByKey(e),t)}anyTilesAfterTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this._lastTilesetChange>=e}_isWithinTileRanges(e,t){const n=t[e.canonical.z];return!!n&&(e.wrap>n.minWrap||e.wrap<n.maxWrap||e.canonical.x>=n.minTileXWrapped&&e.canonical.x<=n.maxTileXWrapped&&e.canonical.y>=n.minTileY&&e.canonical.y<=n.maxTileY)}}class ia{constructor(e,t,n){this._meshCache={},this.painter=e,this.tileManager=new na(t),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.a5;var o;if(!(n>=0&&n<r&&i>=0&&i<r))return 0;const a=this.getTerrainData(e),s=null===(o=a.tile)||void 0===o?void 0:o.dem;if(!s)return 0;const l=t.cD([],[n/r*t.a5,i/r*t.a5],a.u_terrain_matrix),c=[l[0]*s.dim,l[1]*s.dim],u=Math.floor(c[0]),h=Math.floor(c[1]),d=c[0]-u,p=c[1]-h;return s.get(u,h)*(1-d)*(1-p)+s.get(u+1,h)*d*(1-p)+s.get(u,h+1)*(1-d)*p+s.get(u+1,h+1)*d*p}getElevationForLngLatZoom(e,n){if(!t.cE(n,e.wrap()))return 0;const{tileID:i,mercatorX:r,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(i,r%t.a5,o%t.a5,t.a5)}getElevationForLngLat(e,t){const n=Ae(t,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let i=0;for(const r of n)r.canonical.z>i&&(i=Math.min(r.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(e,i)}getElevation(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.a5;return this.getDEMElevation(e,n,i,r)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,n=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new t.T(e,n,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new t.T(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.ar([])}const n=this.tileManager.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const e=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new t.T(e,n.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),n.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const i=n&&n.toString()+n.tileID.key+e.key;if(i&&!this._demMatrixCache[i]){const i=this.tileManager.getSource().maxzoom;let r=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=i?r=e.canonical.z-i:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>r<<r),a=e.canonical.y-(e.canonical.y>>r<<r),s=t.cF(new Float64Array(16),[1/(t.a5<<r),1/(t.a5<<r),0]);t.O(s,s,[o*t.a5,a*t.a5,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:i?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){const n=this.painter,i=n.width/devicePixelRatio,r=n.height/devicePixelRatio;return!this._fbo||this._fbo.width===i&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new t.T(n.context,{width:i,height:r,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new t.T(n.context,{width:i,height:r,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=n.context.createFramebuffer(i,r,!0,!1),this._fbo.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,i,r))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,o=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,o+=4)n[o+0]=255&e,n[o+1]=255&t,n[o+2]=e>>8<<4|t>>8,n[o+3]=0;const i=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),r=new t.T(e,i,e.gl.RGBA,{premultiply:!1});return r.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=r,r}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const n=new Uint8Array(4),i=this.painter.context,r=i.gl,o=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),a=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),s=Math.round(this.painter.height/devicePixelRatio);i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),r.readPixels(o,s-a-1,1,1,r.RGBA,r.UNSIGNED_BYTE,n),i.bindFramebuffer.set(null);const l=n[0]+(n[2]>>4<<8),c=n[1]+((15&n[2])<<8),u=this.coordsIndex[255-n[3]],h=u&&this.tileManager.getTileByID(u);if(!h)return null;const d=this._coordsTextureSize,p=(1<<h.tileID.canonical.z)*d;return new t.a9((h.tileID.canonical.x*d+l)/p+h.tileID.wrap,(h.tileID.canonical.y*d+c)/p,this.getElevation(h.tileID,l,c,d))}depthAtPoint(e){const t=new Uint8Array(4),n=this.painter.context,i=n.gl;return n.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),i.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,t),n.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(e){var n;const i=(null===(n=this.painter.style.projection)||void 0===n?void 0:n.transitionState)>0,r=i&&0===e.canonical.y,o=i&&e.canonical.y===(1<<e.canonical.z)-1,a="m_".concat(r?"n":"","_").concat(o?"s":"");if(this._meshCache[a])return this._meshCache[a];const s=this.painter.context,l=new t.cG,c=new t.aY,u=this.meshSize,h=t.a5/u,d=u*u;for(let t=0;t<=u;t++)for(let e=0;e<=u;e++)l.emplaceBack(e*h,t*h,0);for(let t=0;t<d;t+=u+1)for(let e=0;e<u;e++)c.emplaceBack(e+t,u+e+t+1,u+e+t+2),c.emplaceBack(e+t,u+e+t+2,e+t+1);const p=l.length,f=p+(u+1),m=(u+1)*u,g=r?t.br:0,y=r?0:1,v=o?t.bs:t.a5,_=o?0:1;for(let t=0;t<=u;t++)l.emplaceBack(t*h,g,y);for(let t=0;t<=u;t++)l.emplaceBack(t*h,v,_);for(let t=0;t<u;t++)c.emplaceBack(m+t,f+t,f+t+1),c.emplaceBack(m+t,f+t+1,m+t+1),c.emplaceBack(0+t,p+t+1,p+t),c.emplaceBack(0+t,0+t+1,p+t+1);const x=l.length,b=x+2*(u+1);for(const D of[0,1])for(let e=0;e<=u;e++)for(const n of[0,1])l.emplaceBack(D*t.a5,e*h,n);for(let t=0;t<2*u;t+=2)c.emplaceBack(x+t,x+t+1,x+t+3),c.emplaceBack(x+t,x+t+3,x+t+2),c.emplaceBack(b+t,b+t+3,b+t+1),c.emplaceBack(b+t,b+t+2,b+t+3);const w=new Nt(s.createVertexBuffer(l,ta.members),s.createIndexBuffer(c),t.aX.simpleSegment(0,0,l.length,c.length));return this._meshCache[a]=w,w}getMeshFrameDelta(e){return 2*Math.PI*t.bE/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,n){var i;if(!t.cE(n,e.wrap()))return 0;const{tileID:r}=this._getOverscaledTileIDFromLngLatZoom(e,n);return null!==(i=this.getMinMaxElevation(r).minElevation)&&void 0!==i?i:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,n={minElevation:null,maxElevation:null};return t&&t.dem&&(n.minElevation=t.dem.min*this.exaggeration,n.maxElevation=t.dem.max*this.exaggeration),n}_getOverscaledTileIDFromLngLatZoom(e,n){const i=t.a9.fromLngLat(e.wrap()),r=(1<<n)*t.a5,o=i.x*r,a=i.y*r,s=Math.floor(o/t.a5),l=Math.floor(a/t.a5);return{tileID:new t.a2(n,0,n,s,l),mercatorX:o,mercatorY:a}}}class ra{constructor(e,t,n){this._context=e,this._size=t,this._tileSize=n,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const n=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),i=new t.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return i.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),n.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),n.colorAttachment.set(i.texture),{id:e,fbo:n,texture:i,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(t=>e.id!==t),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(e=>!e.inUse)}}const oa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class aa{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new ra(e.context,30,t.tileManager.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=e._order.filter(n=>!e._layers[n].isHidden(t)),this._coordsAscending={};for(const n in e.tileManagers){this._coordsAscending[n]={};const t=e.tileManagers[n].getVisibleCoordinates(),i=e.tileManagers[n].getSource(),r=i instanceof te?i.terrainTileRanges:null;for(const e of t){const t=this.terrain.tileManager.getTerrainCoords(e,r);for(const e in t)this._coordsAscending[n][e]||(this._coordsAscending[n][e]=[]),this._coordsAscending[n][e].push(t[e])}}this._coordsAscendingStr={};for(const n of e._order){const t=e._layers[n],i=t.source;if(oa[t.type]&&!this._coordsAscendingStr[i]){this._coordsAscendingStr[i]={};for(const e in this._coordsAscending[i])this._coordsAscendingStr[i][e]=this._coordsAscending[i][e].map(e=>e.key).sort().join()}}for(const n of this._renderableTiles)for(const e in this._coordsAscendingStr){const t=this._coordsAscendingStr[e][n.tileID.key];t&&t!==n.rttCoords[e]&&(n.rtt=[])}}renderLayer(e,n){if(e.isHidden(this.painter.transform.zoom))return!1;const i=Object.assign(Object.assign({},n),{isRenderingToTexture:!0}),r=e.type,o=this.painter,a=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(oa[r]&&(this._prevType&&oa[this._prevType]||this._stacks.push([]),this._prevType=r,this._stacks[this._stacks.length-1].push(e.id),!a))return!0;if(oa[this._prevType]||oa[r]&&a){this._prevType=r;const e=this._stacks.length-1,n=this._stacks[e]||[];for(const r of this._renderableTiles){if(this.pool.isFull()&&(Zr(this.painter,this.terrain,this._rttTiles,i),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(r),r.rtt[e]){const t=this.pool.getObjectForId(r.rtt[e].id);if(t.stamp===r.rtt[e].stamp){this.pool.useObject(t);continue}}const a=this.pool.getOrCreateFreeObject();this.pool.useObject(a),this.pool.stampObject(a),r.rtt[e]={id:a.id,stamp:a.stamp},o.context.bindFramebuffer.set(a.fbo.framebuffer),o.context.clear({color:t.bp.transparent,stencil:0}),o.currentStencilSource=void 0;for(let e=0;e<n.length;e++){const t=o.style._layers[n[e]],s=t.source?this._coordsAscending[t.source][r.tileID.key]:[r.tileID];o.context.viewport.set([0,0,a.fbo.width,a.fbo.height]),o._renderTileClippingMasks(t,s,!0),o.renderLayer(o,o.style.tileManagers[t.source],t,s,i),t.source&&(r.rttCoords[t.source]=this._coordsAscendingStr[t.source][r.tileID.key])}}return Zr(this.painter,this.terrain,this._rttTiles,i),this._rttTiles=[],this.pool.freeAllObjects(),oa[r]}return!1}}const sa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},la=n,ca={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:$o,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},ua={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ha{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mousedown=e=>{this.startMove(e,u.mousePos(this.element,e)),u.addEventListener(window,"mousemove",this.mousemove),u.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.move(e,u.mousePos(this.element,e))},this.mouseup=e=>{this._rotatePitchHandler.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=u.touchPos(this.element,e.targetTouches)[0],this.startMove(e,this._startPos),u.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),u.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=u.touchPos(this.element,e.targetTouches)[0],this.move(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=n;const r=new wo;this._rotatePitchHandler=new go({clickTolerance:3,move:(e,r)=>{const o=n.getBoundingClientRect(),a=new t.P((o.bottom-o.top)/2,(o.right-o.left)/2);return{bearingDelta:t.cy(new t.P(e.x,r.y),r,a),pitchDelta:i?-.5*(r.y-e.y):void 0}},moveStateManager:r,enable:!0,assignEvents:()=>{}}),this.map=e,u.addEventListener(n,"mousedown",this.mousedown),u.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),u.addEventListener(n,"touchcancel",this.reset)}startMove(e,t){this._rotatePitchHandler.dragStart(e,t),u.disableDrag()}move(e,t){const n=this.map,{bearingDelta:i,pitchDelta:r}=this._rotatePitchHandler.dragMove(e,t)||{};i&&n.setBearing(n.getBearing()+i),r&&n.setPitch(n.getPitch()+r)}off(){const e=this.element;u.removeEventListener(e,"mousedown",this.mousedown),u.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),u.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),u.removeEventListener(window,"touchend",this.touchend),u.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){u.enableDrag(),u.removeEventListener(window,"mousemove",this.mousemove),u.removeEventListener(window,"mouseup",this.mouseup),u.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),u.removeEventListener(window,"touchend",this.touchend)}}let da;function pa(e,n,i){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]||!i.getCoveringTilesDetailsProvider().allowWorldCopies())return null==e?void 0:e.wrap();const r=new t.V(e.lng,e.lat);if(e=new t.V(e.lng,e.lat),n){const r=new t.V(e.lng-360,e.lat),o=new t.V(e.lng+360,e.lat),a=i.locationToScreenPoint(e).distSqr(n);i.locationToScreenPoint(r).distSqr(n)<a?e=r:i.locationToScreenPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationToScreenPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e.lng!==r.lng&&i.isPointOnMapSurface(i.locationToScreenPoint(e))?e:r}const fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ma(e,t,n){const i=e.classList;for(const r in fa)i.remove("maplibregl-".concat(n,"-anchor-").concat(r));i.add("maplibregl-".concat(n,"-anchor-").concat(t))}class ga extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},this._update=e=>{if(!this._map)return;const t=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!t)&&this._map.once("render",this._update),this._lngLat=pa(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let n="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?n="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(n="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX(".concat(this._map.getPitch(),"deg)")),this._subpixelPositioning||e&&"moveend"!==e.type||(this._pos=this._pos.round()),u.setTransform(this._element,"".concat(fa[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(i," ").concat(n)),s.frameAsync(new AbortController,this._map._ownerWindow).then(()=>{this._updateOpacity(e&&"moveend"===e.type)}).catch(()=>{})},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.l("dragstart"))),this.fire(new t.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.l("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=u.create("div");const n=u.createNS("http://www.w3.org/2000/svg","svg"),i=41,r=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height","".concat(i,"px")),n.setAttributeNS(null,"width","".concat(r,"px")),n.setAttributeNS(null,"viewBox","0 0 ".concat(r," ").concat(i));const o=u.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const a=u.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");const s=u.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");const l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of l){const t=u.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),s.appendChild(t)}const c=u.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const h=u.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(h);const d=u.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=u.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=u.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=u.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=u.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=u.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),a.appendChild(s),a.appendChild(c),a.appendChild(d),a.appendChild(f),a.appendChild(m),n.appendChild(a),n.setAttributeNS(null,"height",i*this._scale+"px"),n.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(n),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()}),ma(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),u.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.V.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,i=Math.abs(n)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-n+i)],"bottom-right":[-i,-1*(t-n+i)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n,i;const r=null===(n=this._map)||void 0===n?void 0:n.terrain,o=this._map.transform.isLocationOccluded(this._lngLat);if(!r||o){const e=o?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==e&&(this._element.style.opacity=e))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const a=this._map,s=a.terrain.depthAtPoint(this._pos),l=a.terrain.getElevationForLngLat(this._lngLat,a.transform);if(a.transform.lngLatToCameraDepth(this._lngLat,l)-s<.006)return void(this._element.style.opacity=this._opacity);const c=-this._offset.y/a.transform.pixelsPerMeter,u=Math.sin(a.getPitch()*Math.PI/180)*c,h=a.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),d=a.transform.lngLatToCameraDepth(this._lngLat,l+u)-h>.006;(null===(i=this._popup)||void 0===i?void 0:i.isOpen())&&d&&this._popup.remove(),this._element.style.opacity=d?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return(void 0===this._opacity||void 0===e&&void 0===t)&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const ya={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let va=0,_a=!1;const xa={maxWidth:100,unit:"metric"};function ba(e,t,n){const i=n&&n.maxWidth||100,r=e._container.clientHeight/2,o=e._container.clientWidth/2,a=e.unproject([o-i/2,r]),s=e.unproject([o+i/2,r]),l=Math.round(e.project(s).x-e.project(a).x),c=Math.min(i,l,e._container.clientWidth),u=a.distanceTo(s);if(n&&"imperial"===n.unit){const n=3.2808*u;n>5280?wa(t,c,n/5280,e._getUIString("ScaleControl.Miles")):wa(t,c,n,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?wa(t,c,u/1852,e._getUIString("ScaleControl.NauticalMiles")):u>=1e3?wa(t,c,u/1e3,e._getUIString("ScaleControl.Kilometers")):wa(t,c,u,e._getUIString("ScaleControl.Meters"))}function wa(e,t,n,i){const r=function(e){const t=Math.pow(10,"".concat(Math.floor(e)).length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n);e.style.width=t*(r/n)+"px",e.innerHTML="".concat(r,"&nbsp;").concat(i)}const Da={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},Ea=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ca(e){if(e){if("number"==typeof e){const n=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(n,n),"top-right":new t.P(-n,n),bottom:new t.P(0,-e),"bottom-left":new t.P(n,-n),"bottom-right":new t.P(-n,-n),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const n=t.P.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return Ca(new t.P(0,0))}const Aa=n;e.AJAXError=t.cJ,e.Event=t.l,e.Evented=t.E,e.LngLat=t.V,e.MercatorCoordinate=t.a9,e.Point=t.P,e.addProtocol=t.cK,e.config=t.c,e.removeProtocol=t.cL,e.AttributionControl=Qo,e.BoxZoomHandler=uo,e.CanvasSource=ie,e.CooperativeGesturesHandler=Ho,e.DoubleClickZoomHandler=zo,e.DragPanHandler=Uo,e.DragRotateHandler=qo,e.EdgeInsets=Rt,e.FullscreenControl=class extends t.E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=u.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){u.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=u.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);u.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=ee,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const n=new t.V(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.e({bearing:r},this.options.fitBoundsOptions),a=W.fromLngLat(n,i);this._map.fitBounds(a,o,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const n=new t.V(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=e=>{if(this._map){if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&_a)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=u.create("button","maplibregl-ctrl-geolocate",this._container),u.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=u.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ga({element:this._dotElement}),this._circleElement=u.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ga({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",e=>{const n=(null==e?void 0:e[0])instanceof ResizeObserverEntry;e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||n||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.l("trackuserlocationend")),this.fire(new t.l("userlocationlostfocus")))})}},this.options=t.e({},ya,e)}onAdd(e){return this._map=e,this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return t._(this,arguments,void 0,function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){if(void 0!==da&&!e)return da;if(void 0===window.navigator.permissions)return da=!!window.navigator.geolocation,da;try{const e=yield window.navigator.permissions.query({name:"geolocation"});da="denied"!==e.state}catch(e){da=!!window.navigator.geolocation}return da}()})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),u.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,va=0,_a=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}}_updateCircleRadiusIfNeeded(){const e=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&e))return;const t=this._map.project(e),n=this._map.unproject([t.x+100,t.y]),i=e.distanceTo(n)/100,r=2*this._accuracy/i;this._circleElement.style.width="".concat(r.toFixed(2),"px"),this._circleElement.style.height="".concat(r.toFixed(2),"px")}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":va--,_a=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.l("trackuserlocationstart")),this.fire(new t.l("userlocationfocus"));break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),va++,va>1?(e={maximumAge:6e5,timeout:0},_a=!0):(e=this.options.positionOptions,_a=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.GlobeControl=class{constructor(){this._toggleProjection=()=>{var e;const t=null===(e=this._map.getProjection())||void 0===e?void 0:e.type;this._map.setProjection("mercator"!==t&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var e;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),"globe"===(null===(e=this._map.getProjection())||void 0===e?void 0:e.type)?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(e){return this._map=e,this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=u.create("button","maplibregl-ctrl-globe",this._container),u.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){u.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},e.Hash=Yr,e.ImageSource=te,e.KeyboardHandler=jo,e.LngLatBounds=W,e.LogoControl=Jo,e.Map=class extends Ko{get _ownerWindow(){var e,t;return(null===(t=null===(e=this._container)||void 0===e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView)||window}constructor(e){var n,i;t.cH.mark(t.cI.create);const r=Object.assign(Object.assign(Object.assign({},ca),e),{canvasContextAttributes:Object.assign(Object.assign({},ca.canvasContextAttributes),e.canvasContextAttributes)});if(null!=r.minZoom&&null!=r.maxZoom&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=r.minPitch&&null!=r.maxPitch&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=r.minPitch&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=r.maxPitch&&r.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const o=new Wt,a=new $t;void 0!==r.minZoom&&o.setMinZoom(r.minZoom),void 0!==r.maxZoom&&o.setMaxZoom(r.maxZoom),void 0!==r.minPitch&&o.setMinPitch(r.minPitch),void 0!==r.maxPitch&&o.setMaxPitch(r.maxPitch),void 0!==r.renderWorldCopies&&o.setRenderWorldCopies(r.renderWorldCopies),null!==r.transformConstrain&&o.setConstrainOverride(r.transformConstrain),super(o,a,{bearingSnap:r.bearingSnap,zoomSnap:r.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ea,this._controls=[],this._mapId=t.af(),this._lostContextStyle={style:null,images:null},this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const t of Object.values(this.style._layers))if("custom"===t.type&&console.warn("Custom layer with id '".concat(t.id,"' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.")),t._listeners)for(const[e]of Object.entries(t._listeners))console.warn("Custom layer with id '".concat(t.id,"' had event listeners for event '").concat(e,"' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration."));this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new t.l("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new t.l("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},r.canvasContextAttributes),this._trackResize=!0===r.trackResize,this._bearingSnap=r.bearingSnap,this._zoomSnap=r.zoomSnap,this._centerClampedToGround=r.centerClampedToGround,this._refreshExpiredTiles=!0===r.refreshExpiredTiles,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=!0===r.crossSourceCollisions,this._collectResourceTiming=!0===r.collectResourceTiming,this._locale=Object.assign(Object.assign({},sa),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this._zoomLevelsToOverscale=r.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=r.transformCameraUpdate,this.transformConstrain=r.transformConstrain,this.cancelPendingTileRequestsWhileZooming=!0===r.cancelPendingTileRequestsWhileZooming,void 0!==r.reduceMotion&&(s.prefersReducedMotion=r.reduceMotion),this._imageQueueHandle=y.addThrottleControl(()=>this.isMoving()),this._requestManager=new v(r.transformRequest),this._container=this._resolveContainer(r.container),r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),"undefined"!=typeof window&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new Xo(this,r),this._hash=r.hash&&new Yr("string"==typeof r.hash&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,elevation:r.elevation,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,roll:r.roll}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,t.e({},r.fitBoundsOptions,{duration:0}))));const l="string"==typeof r.style||!("globe"===(null===(i=null===(n=r.style)||void 0===n?void 0:n.projection)||void 0===i?void 0:i.type));this.resize(null,l),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new Qo("boolean"==typeof r.attributionControl?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Jo,r.logoPosition),this.on("style.load",()=>{if(l||this._resizeTransform(),this.transform.unmodified){const e=t.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(e)}}),this.on("data",e=>{this._update("style"===e.dataType),this.fire(new t.l("".concat(e.dataType,"data"),e))}),this.on("dataloading",e=>{this.fire(new t.l("".concat(e.dataType,"dataloading"),e))}),this.on("dataabort",e=>{this.fire(new t.l("sourcedataabort",e))})}_getMapId(){return this._mapId}setGlobalStateProperty(e,t){return this.style.setGlobalStateProperty(e,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}coveringTiles(e){return Ae(this.transform,e)}calculateCameraOptionsFromTo(e,t,n,i){return null==i&&this.terrain&&(i=this.terrain.getElevationForLngLat(n,this.transform)),super.calculateCameraOptionsFromTo(e,t,n,i)}resize(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null!==this._lostContextStyle.style)return this;this._resizeInternal(n);const i=!this._moving;return i&&(this.stop(),this.fire(new t.l("movestart",e)).fire(new t.l("move",e))),this.fire(new t.l("resize",e)),i&&this.fire(new t.l("moveend",e)),this}_resizeInternal(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,n]=this._containerDimensions(),i=this._getClampedPixelRatio(t,n);if(this._resizeCanvas(t,n,i),this.painter.resize(t,n,i),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const i=this._getClampedPixelRatio(t,n);this._resizeCanvas(t,n,i),this.painter.resize(t,n,i)}this._resizeTransform(e)}_resizeTransform(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;const[n,i]=this._containerDimensions();this.transform.resize(n,i,e),null===(t=this._requestedCameraState)||void 0===t||t.resize(n,i,e)}_getClampedPixelRatio(e,t){const{0:n,1:i}=this._maxCanvasSize,r=this.getPixelRatio(),o=e*r,a=t*r;return Math.min(o>n?n/o:1,a>i?i/a:1)*r}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(W.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom){const n=this.transform.zoom,i=this._getTransformForUpdate();return i.setMinZoom(e),this._applyUpdatedTransform(i),this._update(),n!==this.transform.zoom&&this.fire(new t.l("zoomstart")).fire(new t.l("zoom")).fire(new t.l("zoomend")).fire(new t.l("movestart")).fire(new t.l("move")).fire(new t.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom){const n=this.transform.zoom,i=this._getTransformForUpdate();return i.setMaxZoom(e),this._applyUpdatedTransform(i),this._update(),n!==this.transform.zoom&&this.fire(new t.l("zoomstart")).fire(new t.l("zoom")).fire(new t.l("zoomend")).fire(new t.l("movestart")).fire(new t.l("move")).fire(new t.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch){const n=this.transform.pitch,i=this._getTransformForUpdate();return i.setMinPitch(e),this._applyUpdatedTransform(i),this._update(),n!==this.transform.pitch&&this.fire(new t.l("pitchstart")).fire(new t.l("pitch")).fire(new t.l("pitchend")).fire(new t.l("movestart")).fire(new t.l("move")).fire(new t.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>180)throw new Error("maxPitch must be less than or equal to 180");if(e>=this.transform.minPitch){const n=this.transform.pitch,i=this._getTransformForUpdate();return i.setMaxPitch(e),this._applyUpdatedTransform(i),this._update(),n!==this.transform.pitch&&this.fire(new t.l("pitchstart")).fire(new t.l("pitch")).fire(new t.l("pitchend")).fire(new t.l("movestart")).fire(new t.l("move")).fire(new t.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.setRenderWorldCopies(e),this._update()}setTransformConstrain(e){return this.transform.setConstrainOverride(e),this._update()}project(e){return this.transform.locationToScreenPoint(t.V.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let i=!1;const r=r=>{const o=t.filter(e=>this.getLayer(e)),a=0!==o.length?this.queryRenderedFeatures(r.point,{layers:o}):[];a.length?i||(i=!0,n.call(this,new ro(e,this,r.originalEvent,{features:a}))):i=!1};return{layers:t,listener:n,delegates:{mousemove:r,mouseout:()=>{i=!1}}}}if("mouseleave"===e||"mouseout"===e){let i=!1;const r=r=>{const o=t.filter(e=>this.getLayer(e));(0!==o.length?this.queryRenderedFeatures(r.point,{layers:o}):[]).length?i=!0:i&&(i=!1,n.call(this,new ro(e,this,r.originalEvent)))},o=t=>{i&&(i=!1,n.call(this,new ro(e,this,t.originalEvent)))};return{layers:t,listener:n,delegates:{mousemove:r,mouseout:o}}}{const i=e=>{const i=t.filter(e=>this.getLayer(e)),r=0!==i.length?this.queryRenderedFeatures(e.point,{layers:i}):[];r.length&&(e.features=r,n.call(this,e),delete e.features)};return{layers:t,listener:n,delegates:{[e]:i}}}}_saveDelegatedListener(e,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(t)}_removeDelegatedListener(e,t,n){if(!this._delegatedListeners||!this._delegatedListeners[e])return;const i=this._delegatedListeners[e];for(let r=0;r<i.length;r++){const e=i[r];if(e.listener===n&&e.layers.length===t.length&&e.layers.every(e=>t.includes(e))){for(const t in e.delegates)this.off(t,e.delegates[t]);return void i.splice(r,1)}}}on(e,t,n){if(void 0===n)return super.on(e,t);const i="string"==typeof t?[t]:t,r=this._createDelegatedListener(e,i,n);this._saveDelegatedListener(e,r);for(const o in r.delegates)this.on(o,r.delegates[o]);return{unsubscribe:()=>{this._removeDelegatedListener(e,i,n)}}}once(e,t,n){var i=this;if(void 0===n)return super.once(e,t);const r="string"==typeof t?[t]:t,o=this._createDelegatedListener(e,r,n);for(const a in o.delegates){const t=o.delegates[a];o.delegates[a]=function(){i._removeDelegatedListener(e,r,n),t(...arguments)}}this._saveDelegatedListener(e,o);for(const a in o.delegates)this.once(a,o.delegates[a]);return this}off(e,t,n){return void 0===n?super.off(e,t):(this._removeDelegatedListener(e,"string"==typeof t?[t]:t,n),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let i;const r=e instanceof t.P||Array.isArray(e),o=r?e:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(r?{}:e)||{},o instanceof t.P||"number"==typeof o[0])i=[t.P.convert(o)];else{const e=t.P.convert(o[0]),n=t.P.convert(o[1]);i=[e,new t.P(n.x,e.y),n,new t.P(e.x,n.y),e]}return this.style.queryRenderedFeatures(i,n,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,n){return!1!==(n=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}_updateStyle(e,t){var n,i;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(e,t));const r=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new On(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,r):this.style.loadJSON(e,t,r),this):(null===(i=null===(n=this.style)||void 0===n?void 0:n.projection)||void 0===i||i.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new On(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.transformRequest(e,"Style");t.j(i,new AbortController).then(e=>{this._updateDiff(e.data,n)}).catch(e=>{e&&this.fire(new t.k(e))})}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e,n)&&this._update(!0)}catch(i){t.w("Unable to perform style diff: ".concat(i.message||i.error||i,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.tileManagers[e];if(void 0!==n)return n.loaded();this.fire(new t.k(new Error("There is no tile manager with ID '".concat(e,"'"))))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const n=this.style.tileManagers[e.source];if(!n)throw new Error("cannot load terrain, because there exists no source with ID: ".concat(e.source));null===this.terrain&&n.reload();for(const i in this.style._layers){const n=this.style._layers[i];"hillshade"===n.type&&n.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),"color-relief"===n.type&&n.source===e.source&&t.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ia(this.painter,n,e),this.painter.renderToTexture=new aa(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=t=>{var n;"style"===t.dataType?this.terrain.tileManager.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),"image"===(null===(n=t.source)||void 0===n?void 0:n.type)?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new t.l("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.tileManagers;for(const t of Object.values(e))if(!t.areTilesLoaded())return!1;return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}setSourceTileLodParams(e,t,n){if(n){const i=this.getSource(n);if(!i)throw new Error('There is no source with ID "'.concat(n,'", cannot set LOD parameters'));i.calculateTileZoom=De(Math.max(1,e),Math.max(1,t))}else for(const i in this.style.tileManagers)this.style.tileManagers[i].getSource().calculateTileZoom=De(Math.max(1,e),Math.max(1,t));return this._update(!0),this}refreshTiles(e,n){const i=this.style.tileManagers[e];if(!i)throw new Error('There is no tile manager with ID "'.concat(e,'", cannot refresh tile'));void 0===n?i.reload(!0):i.refreshTiles(n.map(e=>new t.ac(e.z,e.x,e.y)))}addImage(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pixelRatio:r=1,sdf:o=!1,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h}=i;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||t.b(n))){if(void 0===n.width||void 0===n.height)return this.fire(new t.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:i,height:s,data:d}=n,p=n;return this.style.addImage(e,{data:new t.R({width:i,height:s},new Uint8Array(d)),pixelRatio:r,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:o,version:0,userImage:p}),p.onAdd&&p.onAdd(this,e),this}}{const{width:i,height:d,data:p}=s.getImageData(n);this.style.addImage(e,{data:new t.R({width:i,height:d},p),pixelRatio:r,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:o,version:0})}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return this.fire(new t.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof HTMLImageElement||t.b(n)?s.getImageData(n):n,{width:o,height:a,data:l}=r;if(void 0===o||void 0===a)return this.fire(new t.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==i.data.width||a!==i.data.height)return this.fire(new t.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(n instanceof HTMLImageElement||t.b(n));return i.data.replace(l,c),this.style.updateImage(e,i),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.k(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return y.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,i),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,i),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,n,e=>{e||this._update(!0)}),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,e=>{e||this._update(!0)}),this}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSky(e,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupResizeObserver(){var e;let t=!1;const n=Wr(e=>{this._trackResize&&!this._removed&&(this.resize(e),this.redraw())},50),i=null!==(e=this._ownerWindow.ResizeObserver)&&void 0!==e?e:ResizeObserver;this._resizeObserver=new i(e=>{t?n(e):t=!0}),this._resizeObserver.observe(this._container)}_resolveContainer(e){if("string"==typeof e){const t=document.getElementById(e);if(!t)throw new Error("Container '".concat(e,"' not found."));return t}if(e instanceof HTMLElement)return e;if(e&&"object"==typeof e&&1===e.nodeType)return e;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=u.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=u.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),i=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],i);const r=this._controlContainer=u.create("div","maplibregl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{o[e]=u.create("div","maplibregl-ctrl-".concat(e," "),r)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,n){this._canvas.width=Math.floor(n*e),this._canvas.height=Math.floor(n*t),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(t,"px")}_setupPainter(){const e=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",n=>{t={requestedAttributes:e},n&&(t.statusMessage=n.statusMessage,t.type=n.type)},{once:!0});let n=null;if(n=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,e):this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e),!n){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new Gr(n,this.transform),h.testSupport(n)}migrateProjection(e,n){super.migrateProjection(e,n),this.painter.transform=e,this.fire(new t.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){var n,i,r,o,a;const s=this._idleTriggered?this._fadeDuration:0,l=(null===(n=this.style.projection)||void 0===n?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=c();this.style.zoomHistory.update(e,n);const i=new t.H(e,{now:n,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=i.crossFadingFactor();1===r&&r===this._crossFadingFactor||(u=!0,this._crossFadingFactor=r),this.style.update(i)}const h=(null===(i=this.style.projection)||void 0===i?void 0:i.transitionState)>0!==l;null===(r=this.style.projection)||void 0===r||r.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState(null===(o=this.style.projection)||void 0===o?void 0:o.transitionState,null===(a=this.style.projection)||void 0===a?void 0:a.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||h)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,s,this._crossSourceCollisions,h),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new t.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.cH.mark(t.cI.load),this.fire(new t.l("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.l("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,t.cH.mark(t.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),y.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==n?void 0:n.loseContext)&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),u.remove(this._canvasContainer),u.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),t.cH.clearMetrics(),this._removed=!0,this.fire(new t.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,s.frame(this._frameRequest,e=>{t.cH.frame(e),this._frameRequest=null;try{this._render(e)}catch(e){if(!t.Z(e)&&!function(e){return e.message===ar}(e))throw e}},()=>{},this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return la}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(e){return this._lazyInitEmptyStyle(),this.style.setProjection(e),this._update(!0)}},e.MapMouseEvent=ro,e.MapTouchEvent=oo,e.MapWheelEvent=ao,e.Marker=ga,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5),") rotateZ(").concat(-this._map.transform.roll,"deg) rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(-this._map.transform.bearing,"deg)"):this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(-this._map.transform.bearing,"deg)"):this.options.visualizeRoll?"rotate(".concat(-this._map.transform.bearing-this._map.transform.roll,"deg)"):"rotate(".concat(-this._map.transform.bearing,"deg)")},this._setButtonTitle=(e,t)=>{const n=this._map._getUIString("NavigationControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)},this.options=t.e({},ua,e),this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),u.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),u.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=u.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ha(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){u.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=u.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},e.Popup=class extends t.E{constructor(e){super(),this._updateOpacity=()=>{void 0!==this.options.locationOccludedOpacity&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?"".concat(this.options.locationOccludedOpacity):"")},this.remove=()=>(this._content&&u.remove(this._content),this._container&&(u.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=u.create("div","maplibregl-popup",this._map.getContainer()),this._tip=u.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=pa(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const t=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let n=this.options.anchor;const i=Ca(this.options.offset);if(!n){const e=this._container.offsetWidth,r=this._container.offsetHeight,o=function(e){var t,n,i,r;return e?{top:null!==(t=e.top)&&void 0!==t?t:0,right:null!==(n=e.right)&&void 0!==n?n:0,bottom:null!==(i=e.bottom)&&void 0!==i?i:0,left:null!==(r=e.left)&&void 0!==r?r:0}:{top:0,right:0,bottom:0,left:0}}(this.options.padding);let a;a=t.y+i.bottom.y<r+o.top?["top"]:t.y>this._map.transform.height-r-o.bottom?["bottom"]:[],t.x<e/2+o.left?a.push("left"):t.x>this._map.transform.width-e/2-o.right&&a.push("right"),n=0===a.length?"bottom":a.join("-")}let r=t.add(i[n]);this.options.subpixelPositioning||(r=r.round()),u.setTransform(this._container,"".concat(fa[n]," translate(").concat(r.x,"px,").concat(r.y,"px)")),ma(this._container,n,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(Da),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.V.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),n=document.createElement("body");let i;for(n.innerHTML=e;i=n.firstChild,i;)t.appendChild(i);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=u.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}setPadding(e){this.options.padding=e,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=u.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Ea);e&&e.focus()}},e.RasterDEMTileSource=$,e.RasterTileSource=K,e.ScaleControl=class{constructor(e){this._onMove=()=>{ba(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,ba(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},xa),e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){u.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=Lo,e.Style=On,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=u.create("button","maplibregl-ctrl-terrain",this._container),u.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){u.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=Mo,e.TwoFingersTouchRotateHandler=ko,e.TwoFingersTouchZoomHandler=To,e.TwoFingersTouchZoomRotateHandler=Zo,e.VectorTileSource=X,e.VideoSource=ne,e.addSourceType=(e,n)=>t._(void 0,void 0,void 0,function*(){if(oe(e))throw new Error('A source type called "'.concat(e,'" already exists.'));((e,t)=>{re[e]=t})(e,n)}),e.clearPrewarmedResources=function(){const e=B;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(j),B=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.createTileMesh=cn,e.getMaxParallelImageRequests=function(){return t.c.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},e.getVersion=function(){return Aa},e.getWorkerCount=function(){return N.workerCount},e.getWorkerUrl=function(){return t.c.WORKER_URL},e.importScriptInWorkers=function(e){return V().broadcast("IS",e)},e.isTimeFrozen=function(){return l.isFrozen()},e.now=c,e.prewarm=function(){z().acquire(j)},e.restoreNow=function(){l.restoreNow()},e.setMaxParallelImageRequests=function(e){t.c.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setNow=function(e){l.setNow(e)},e.setRTLTextPlugin=function(e,t){return ce().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){N.workerCount=e},e.setWorkerUrl=function(e){t.c.WORKER_URL=e}}),e}()},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=_.prototype=new v;x.constructor=_,m(x,y.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,D={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!E.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:D.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function F(e,t,r,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,b(a)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),F(a,t,r,"",function(e){return e})):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",b(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=F(s,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=F(s=s.value,t,r,u=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var i=[],r=0;return F(e,i,"","",function(e){return t.call(n,e,r++)}),i}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},I={transition:null},j={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:I,ReactCurrentOwner:D};function N(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=a,t.PureComponent=_,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=N,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=D.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=N,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},4208:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const n=new Map;for(let i=0;i<e.length;i++){const r=e[i],o=t(r,i,e);n.has(o)||n.set(o,r)}return Array.from(n.values())}},4222:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n=null;if(!e||"string"!==typeof e)return n;const i=(0,r.default)(e),o="function"===typeof t;return i.forEach(e=>{if("declaration"!==e.type)return;const{property:i,value:r}=e;o?t(i,r,e):r&&(n=n||{},n[i]=r)}),n};const r=i(n(8106))},4332:(e,t,n)=>{e.exports=n(5053).uniqBy},4391:(e,t,n)=>{"use strict";var i=n(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4460:e=>{for(var t={glog:function(e){if(e<1)throw new Error("glog("+e+")");return t.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)t.EXP_TABLE[n]=1<<n;for(n=8;n<256;n++)t.EXP_TABLE[n]=t.EXP_TABLE[n-4]^t.EXP_TABLE[n-5]^t.EXP_TABLE[n-6]^t.EXP_TABLE[n-8];for(n=0;n<255;n++)t.LOG_TABLE[t.EXP_TABLE[n]]=n;e.exports=t},4704:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},4803:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let n,{signal:i,edges:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null;const a=null!=r&&r.includes("leading"),s=null==r||r.includes("trailing"),l=()=>{null!==o&&(e.apply(n,o),n=void 0,o=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,s&&l(),h()},t)},h=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,o=null},d=function(){if(null!==i&&void 0!==i&&i.aborted)return;n=this;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o=t;const s=null==c;u(),a&&s&&l()};return d.schedule=u,d.cancel=h,d.flush=()=>{l()},null===i||void 0===i||i.addEventListener("abort",h,{once:!0}),d}},4879:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=i.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5053:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(4208),r=n(9903),o=n(9599),a=n(2104),s=n(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.identity;return a.isArrayLikeObject(e)?i.uniqBy(Array.from(e),r.ary(s.iteratee(t),1)):[]}},5082:(e,t)=>{"use strict";var n=60103,i=60106,r=60107,o=60108,a=60114,s=60109,l=60110,c=60112,u=60113,h=60120,d=60115,p=60116,f=60121,m=60122,g=60117,y=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),i=_("react.portal"),r=_("react.fragment"),o=_("react.strict_mode"),a=_("react.profiler"),s=_("react.provider"),l=_("react.context"),c=_("react.forward_ref"),u=_("react.suspense"),h=_("react.suspense_list"),d=_("react.memo"),p=_("react.lazy"),f=_("react.block"),m=_("react.server.block"),g=_("react.fundamental"),y=_("react.debug_trace_mode"),v=_("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case r:case a:case o:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case d:case s:return e;default:return t}}case i:return t}}}},5093:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isEqualsSameValueZero=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},5173:(e,t,n)=>{e.exports=n(1497)()},5261:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(6433);t.cloneDeep=function(e){return i.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5303:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(2489),r=n(4704),o=n(6321),a=n(1444);t.has=function(e,t){let n;if(n=Array.isArray(t)?t:"string"===typeof t&&i.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?a.toPath(t):[t],0===n.length)return!1;let s=e;for(let i=0;i<n.length;i++){const e=n[i];if(null==s||!Object.hasOwn(s,e)){if(!((Array.isArray(s)||o.isArguments(s))&&r.isIndex(e)&&e<s.length))return!1}s=s[e]}return!0}},5316:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(9709),r=n(7043),o=n(1444);t.orderBy=function(e,t,n,a){if(null==e)return[];n=a?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const s=(e,t)=>{let n=e;for(let i=0;i<t.length&&null!=n;++i)n=n[t[i]];return n},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||r.isKey(e)?e:{key:e,path:o.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:s(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?s(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let r=0;r<l.length;r++){const o=i.compareValues(e.criteria[r],t.criteria[r],n[r]);if(0!==o)return o}return 0}).map(e=>e.original)}},5414:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:r=!0,trailing:o=!0}=n;return i.debounce(e,t,{leading:r,maxWait:t,trailing:o})}},5436:(e,t,n)=>{var i=n(7742);function r(e,t){this.totalCount=e,this.dataCount=t}r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(e,t){var n=r.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,o=new Array,a=0;a<i;a++)for(var s=n[3*a+0],l=n[3*a+1],c=n[3*a+2],u=0;u<s;u++)o.push(new r(l,c));return o},r.getRsBlockTable=function(e,t){switch(t){case i.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case i.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case i.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case i.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=r},5508:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(6433),r=n(5990),o=n(7599);t.cloneDeepWith=function(e,t){return i.cloneDeepWith(e,(n,a,s,l)=>{const c=null===t||void 0===t?void 0:t(n,a,s,l);if(void 0!==c)return c;if("object"===typeof e){if(r.getTag(e)===o.objectTag&&"function"!==typeof e.constructor){const t={};return l.set(e,t),i.copyProperties(t,e,s,l),t}switch(Object.prototype.toString.call(e)){case o.numberTag:case o.stringTag:case o.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return i.copyProperties(t,e),t}case o.argumentsTag:{const t={};return i.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}})}},5957:e=>{e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},5990:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6321:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===i.getTag(e)}},6392:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(6443),r=n(5990),o=n(7599),a=n(4803),s=n(3757);function l(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const h=null===u||void 0===u?void 0:u(e,t,n,i);if(void 0!==h)return h;if(a.isPrimitive(e))return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){const t=new Array(e.length);i.set(e,t);for(let r=0;r<e.length;r++)t[r]=l(e[r],r,n,i,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;i.set(e,t);for(const[r,o]of e)t.set(r,l(o,r,n,i,u));return t}if(e instanceof Set){const t=new Set;i.set(e,t);for(const r of e)t.add(l(r,void 0,n,i,u));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(s.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);i.set(e,t);for(let r=0;r<e.length;r++)t[r]=l(e[r],r,n,i,u);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return i.set(e,t),c(t,e,n,i,u),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return i.set(e,t),c(t,e,n,i,u),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return i.set(e,t),c(t,e,n,i,u),t}if(e instanceof Error){const t=new e.constructor;return i.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,n,i,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return i.set(e,t),c(t,e,n,i,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return i.set(e,t),c(t,e,n,i,u),t}if(e instanceof String){const t=new String(e.valueOf());return i.set(e,t),c(t,e,n,i,u),t}if("object"===typeof e&&function(e){switch(r.getTag(e)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return i.set(e,t),c(t,e,n,i,u),t}return e}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const a=[...Object.keys(t),...i.getSymbols(t)];for(let i=0;i<a.length;i++){const s=a[i],c=Object.getOwnPropertyDescriptor(e,s);(null==c||c.writable)&&(e[s]=l(t[s],s,n,r,o))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6443:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6770:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(2777);t.toNumber=function(e){return i.isSymbol(e)?NaN:Number(e)}},7043:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(2777),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!i.isSymbol(e))||("string"===typeof e&&(o.test(e)||!r.test(e))||null!=t&&Object.hasOwn(t,e)))}},7231:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(3799),r=n(4879);t.range=function(e,t,n){n&&"number"!==typeof n&&i.isIterateeCall(e,t,n)&&(t=n=void 0),e=r.toFinite(e),void 0===t?(t=e,e=0):t=r.toFinite(t),n=void 0===n?e<t?1:-1:r.toFinite(n);const o=Math.max(Math.ceil((t-e)/(n||1)),0),a=new Array(o);for(let i=0;i<o;i++)a[i]=e,e+=n;return a}},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<r&&0>o(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>o(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,I(w);else{var t=i(u);null!==t&&j(b,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,v(A),A=-1),f=!0;var o=p;try{for(x(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!F());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===i(c)&&r(c),x(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&j(b,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var D,E=!1,C=null,A=-1,S=5,T=-1;function F(){return!(t.unstable_now()-T<S)}function k(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?D():(E=!1,C=null)}}else E=!1}if("function"===typeof _)D=function(){_(k)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=k,D=function(){M.postMessage(null)}}else D=function(){y(k,0)};function I(e){C=e,E||(E=!0,D())}function j(e,n){A=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===i(c)&&e===i(u)&&(g?(v(A),A=-1):g=!0,j(b,o-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,I(w))),e},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7237:(e,t,n)=>{"use strict";n(8365)},7260:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7294:function(e,t,n){"use strict";var i=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(4222)),r=n(8146);function o(e,t){var n={};return e&&"string"===typeof e?((0,i.default)(e,function(e,i){e&&i&&(n[(0,r.camelCase)(e,t)]=i)}),n):n}o.default=o,e.exports=o},7312:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[],i=Math.floor(t),r=(e,t)=>{for(let o=0;o<e.length;o++){const a=e[o];Array.isArray(a)&&t<i?r(a,t+1):n.push(a)}};return r(e,0),n}},7330:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(9323);t.property=function(e){return function(t){return i.get(t,e)}}},7599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=s(n(5173)),o=n(5043),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l={bgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,bgD:r.default.string.isRequired,fgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,fgD:r.default.string.isRequired,size:r.default.number.isRequired,title:r.default.string,viewBoxSize:r.default.number.isRequired,xmlns:r.default.string},c=(0,o.forwardRef)(function(e,t){var n=e.bgColor,r=e.bgD,o=e.fgD,s=e.fgColor,l=e.size,c=e.title,u=e.viewBoxSize,h=e.xmlns,d=void 0===h?"http://www.w3.org/2000/svg":h,p=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",i({},p,{height:l,ref:t,viewBox:"0 0 "+u+" "+u,width:l,xmlns:d}),c?a.default.createElement("title",null,c):null,a.default.createElement("path",{d:r,fill:n}),a.default.createElement("path",{d:o,fill:s}))});c.displayName="QRCodeSvg",c.propTypes=l,t.default=c},7736:(e,t,n)=>{var i=n(3738).default,r=n(9045);e.exports=function(e){var t=r(e,"string");return"symbol"==i(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7742:e=>{e.exports={L:1,M:0,Q:3,H:2}},7770:(e,t,n)=>{e.exports=n(9323).get},7820:(e,t,n)=>{e.exports=n(5414).throttle},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8106:e=>{"use strict";var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,i=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var h=1,d=1;function p(e){var t=e.match(n);t&&(h+=t.length);var i=e.lastIndexOf("\n");d=~i?e.length-i:d+e.length}function f(){var e={line:h,column:d};return function(t){return t.position=new m(e),v(),t}}function m(e){this.start=e,this.end={line:h,column:d},this.source=l.source}function g(t){var n=new Error(l.source+":"+h+":"+d+": "+t);if(n.reason=t,n.filename=l.source,n.line=h,n.column=d,n.source=e,!l.silent)throw n}function y(t){var n=t.exec(e);if(n){var i=n[0];return p(i),e=e.slice(i.length),n}}function v(){y(i)}function _(e){var t;for(e=e||[];t=x();)!1!==t&&e.push(t);return e}function x(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return g("End of comment missing");var i=e.slice(2,n-2);return d+=2,p(i),e=e.slice(n),d+=2,t({type:"comment",comment:i})}}function b(){var e=f(),n=y(r);if(n){if(x(),!y(o))return g("property missing ':'");var i=y(a),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:i?u(i[0].replace(t,c)):c});return y(s),l}}return m.prototype.content=e,v(),function(){var e,t=[];for(_(t);e=b();)!1!==e&&(t.push(e),_(t));return t}()}},8146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,i=/-([a-z])/g,r=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||r.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(a,l):e.replace(o,l)).replace(i,s))}},8210:function(e,t,n){var i;!function(){"use strict";var r,o=1e9,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",h=Math.floor,d=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=9007199254740991,g=h(1286742750677284.5),y={};function v(e,t){var n,i,r,o,a,l,c,u,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),s?T(t,d):t;if(c=e.d,u=t.d,a=e.e,r=t.e,c=c.slice(),o=a-r){for(o<0?(i=c,o=-o,l=u.length):(i=u,r=a,l=c.length),o>(l=(a=Math.ceil(d/7))>l?a+1:l+1)&&(o=l,i.length=1),i.reverse();o--;)i.push(0);i.reverse()}for((l=c.length)-(o=u.length)<0&&(o=l,i=u,u=c,c=i),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/f|0,c[o]%=f;for(n&&(c.unshift(n),++r),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=r,s?T(t,d):t}function _(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function x(e){var t,n,i,r=e.length-1,o="",a=e[0];if(r>0){for(o+=a,t=1;t<r;t++)(n=7-(i=e[t]+"").length)&&(o+=C(n)),o+=i;(n=7-(i=(a=e[t])+"").length)&&(o+=C(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return o+a}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,i,r,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(i=o.d.length)<(r=e.d.length)?i:r;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return i===r?0:i>r^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return b(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return T(b(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return D(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,i=n.constructor,o=i.precision,a=o+5;if(void 0===e)e=new i(10);else if((e=new i(e)).s<1||e.eq(r))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(r)?new i(0):(s=!1,t=b(A(n,a),A(e,a),a),s=!0,T(t,o))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?F(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,i=n.constructor,r=i.precision;if(!(e=new i(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=b(n,e,0,1).times(e),s=!0,n.minus(t)):T(new i(n),r)},y.naturalExponential=y.exp=function(){return w(this)},y.naturalLogarithm=y.ln=function(){return A(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):F(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,i,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=D(r)+1,n=7*(i=r.d.length-1)+1,i=r.d[i]){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,i,r,o,a,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=D(c),s=!1,0==(r=Math.sqrt(+c))||r==1/0?(((t=x(c.d)).length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),i=new u(t=r==1/0?"5e"+e:(t=r.toExponential()).slice(0,t.indexOf("e")+1)+e)):i=new u(r.toString()),r=a=(n=u.precision)+3;;)if(i=(o=i).plus(b(c,o,a+2)).times(.5),x(o.d).slice(0,a)===(t=x(i.d)).slice(0,a)){if(t=t.slice(a-3,a+1),r==a&&"4999"==t){if(T(o,n+1,0),o.times(o).eq(c)){i=o;break}}else if("9999"!=t)break;a+=4}return s=!0,T(i,n)},y.times=y.mul=function(e){var t,n,i,r,o,a,l,c,u,h=this,d=h.constructor,p=h.d,m=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,(c=p.length)<(u=m.length)&&(o=p,p=m,m=o,a=c,c=u,u=a),o=[],i=a=c+u;i--;)o.push(0);for(i=u;--i>=0;){for(t=0,r=c+i;r>i;)l=o[r]+m[i]*p[r-i-1]+t,o[r--]=l%f|0,t=l/f|0;o[r]=(o[r]+t)%f|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,s?T(e,d.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),void 0===e?n:(_(e,0,o),void 0===t?t=i.rounding:_(t,0,8),T(n,e+D(n)+1,t))},y.toExponential=function(e,t){var n,i=this,r=i.constructor;return void 0===e?n=k(i,!0):(_(e,0,o),void 0===t?t=r.rounding:_(t,0,8),n=k(i=T(new r(i),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,i,r=this,a=r.constructor;return void 0===e?k(r):(_(e,0,o),void 0===t?t=a.rounding:_(t,0,8),n=k((i=T(new a(r),e+D(r)+1,t)).abs(),!1,e+D(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return T(new t(e),D(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,i,o,a,c,u=this,d=u.constructor,p=+(e=new d(e));if(!e.s)return new d(r);if(!(u=new d(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(r))return u;if(i=d.precision,e.eq(r))return T(u,i);if(c=(t=e.e)>=(n=e.d.length-1),a=u.s,c){if((n=p<0?-p:p)<=m){for(o=new d(r),t=Math.ceil(i/7+4),s=!1;n%2&&P((o=o.times(u)).d,t),0!==(n=h(n/2));)P((u=u.times(u)).d,t);return s=!0,e.s<0?new d(r).div(o):T(o,i)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,s=!1,o=e.times(A(u,i+12)),s=!0,(o=w(o)).s=a,o},y.toPrecision=function(e,t){var n,i,r=this,a=r.constructor;return void 0===e?i=k(r,(n=D(r))<=a.toExpNeg||n>=a.toExpPos):(_(e,1,o),void 0===t?t=a.rounding:_(t,0,8),i=k(r=T(new a(r),e,t),e<=(n=D(r))||n<=a.toExpNeg,e)),i},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(_(e,1,o),void 0===t?t=n.rounding:_(t,0,8)),T(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=D(e),n=e.constructor;return k(e,t<=n.toExpNeg||t>=n.toExpPos)};var b=function(){function e(e,t){var n,i=0,r=e.length;for(e=e.slice();r--;)n=e[r]*t+i,e[r]=n%f|0,i=n/f|0;return i&&e.unshift(i),e}function t(e,t,n,i){var r,o;if(n!=i)o=n>i?1:-1;else for(r=o=0;r<n;r++)if(e[r]!=t[r]){o=e[r]>t[r]?1:-1;break}return o}function n(e,t,n){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,r,o,a){var s,c,u,h,d,p,m,g,y,v,_,x,b,w,E,C,A,S,F=i.constructor,k=i.s==r.s?1:-1,P=i.d,M=r.d;if(!i.s)return new F(i);if(!r.s)throw Error(l+"Division by zero");for(c=i.e-r.e,A=M.length,E=P.length,g=(m=new F(k)).d=[],u=0;M[u]==(P[u]||0);)++u;if(M[u]>(P[u]||0)&&--c,(x=null==o?o=F.precision:a?o+(D(i)-D(r))+1:o)<0)return new F(0);if(x=x/7+2|0,u=0,1==A)for(h=0,M=M[0],x++;(u<E||h)&&x--;u++)b=h*f+(P[u]||0),g[u]=b/M|0,h=b%M|0;else{for((h=f/(M[0]+1)|0)>1&&(M=e(M,h),P=e(P,h),A=M.length,E=P.length),w=A,v=(y=P.slice(0,A)).length;v<A;)y[v++]=0;(S=M.slice()).unshift(0),C=M[0],M[1]>=f/2&&++C;do{h=0,(s=t(M,y,A,v))<0?(_=y[0],A!=v&&(_=_*f+(y[1]||0)),(h=_/C|0)>1?(h>=f&&(h=f-1),1==(s=t(d=e(M,h),y,p=d.length,v=y.length))&&(h--,n(d,A<p?S:M,p))):(0==h&&(s=h=1),d=M.slice()),(p=d.length)<v&&d.unshift(0),n(y,d,v),-1==s&&(s=t(M,y,A,v=y.length))<1&&(h++,n(y,A<v?S:M,v)),v=y.length):0===s&&(h++,y=[0]),g[u++]=h,s&&y[0]?y[v++]=P[w]||0:(y=[P[w]],v=1)}while((w++<E||void 0!==y[0])&&x--)}return g[0]||g.shift(),m.e=c,T(m,a?o+D(m)+1:o)}}();function w(e,t){var n,i,o,a,l,c=0,h=0,p=e.constructor,f=p.precision;if(D(e)>16)throw Error(u+D(e));if(!e.s)return new p(r);for(null==t?(s=!1,l=f):l=t,a=new p(.03125);e.abs().gte(.1);)e=e.times(a),h+=5;for(l+=Math.log(d(2,h))/Math.LN10*2+5|0,n=i=o=new p(r),p.precision=l;;){if(i=T(i.times(e),l),n=n.times(++c),x((a=o.plus(b(i,n,l))).d).slice(0,l)===x(o.d).slice(0,l)){for(;h--;)o=T(o.times(o),l);return p.precision=f,null==t?(s=!0,T(o,f)):o}o=a}}function D(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return T(new e(e.LN10),t)}function C(e){for(var t="";e--;)t+="0";return t}function A(e,t){var n,i,o,a,c,u,h,d,p,f=1,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(r))return new y(0);if(null==t?(s=!1,d=v):d=t,m.eq(10))return null==t&&(s=!0),E(y,d);if(d+=10,y.precision=d,i=(n=x(g)).charAt(0),a=D(m),!(Math.abs(a)<15e14))return h=E(y,d+2,v).times(a+""),m=A(new y(i+"."+n.slice(1)),d-10).plus(h),y.precision=v,null==t?(s=!0,T(m,v)):m;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=x((m=m.times(e)).d)).charAt(0),f++;for(a=D(m),i>1?(m=new y("0."+n),a++):m=new y(i+"."+n.slice(1)),u=c=m=b(m.minus(r),m.plus(r),d),p=T(m.times(m),d),o=3;;){if(c=T(c.times(p),d),x((h=u.plus(b(c,new y(o),d))).d).slice(0,d)===x(u.d).slice(0,d))return u=u.times(2),0!==a&&(u=u.plus(E(y,d+2,v).times(a+""))),u=b(u,new y(f),d),y.precision=v,null==t?(s=!0,T(u,v)):u;u=h,o+=2}}function S(e,t){var n,i,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;48===t.charCodeAt(i);)++i;for(r=t.length;48===t.charCodeAt(r-1);)--r;if(t=t.slice(i,r)){if(r-=i,n=n-i-1,e.e=h(n/7),e.d=[],i=(n+1)%7,n<0&&(i+=7),i<r){for(i&&e.d.push(+t.slice(0,i)),r-=7;i<r;)e.d.push(+t.slice(i,i+=7));i=7-(t=t.slice(i)).length}else i-=r;for(;i--;)t+="0";if(e.d.push(+t),s&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function T(e,t,n){var i,r,o,a,l,c,p,m,y=e.d;for(a=1,o=y[0];o>=10;o/=10)a++;if((i=t-a)<0)i+=7,r=t,p=y[m=0];else{if((m=Math.ceil((i+1)/7))>=(o=y.length))return e;for(p=o=y[m],a=1;o>=10;o/=10)a++;r=(i%=7)-7+a}if(void 0!==n&&(l=p/(o=d(10,a-r-1))%10|0,c=t<0||void 0!==y[m+1]||p%o,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(i>0?r>0?p/d(10,a-r):0:y[m-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return c?(o=D(e),y.length=1,t=t-o-1,y[0]=d(10,(7-t%7)%7),e.e=h(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==i?(y.length=m,o=1,m--):(y.length=m+1,o=d(10,7-i),y[m]=r>0?(p/d(10,a-r)%d(10,r)|0)*o:0),c)for(;;){if(0==m){(y[0]+=o)==f&&(y[0]=1,++e.e);break}if(y[m]+=o,y[m]!=f)break;y[m--]=0,o=1}for(i=y.length;0===y[--i];)y.pop();if(s&&(e.e>g||e.e<-g))throw Error(u+D(e));return e}function F(e,t){var n,i,r,o,a,l,c,u,h,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),s?T(t,m):t;if(c=e.d,d=t.d,i=t.e,u=e.e,c=c.slice(),a=u-i){for((h=a<0)?(n=c,a=-a,l=d.length):(n=d,i=u,l=c.length),a>(r=Math.max(Math.ceil(m/7),l)+2)&&(a=r,n.length=1),n.reverse(),r=a;r--;)n.push(0);n.reverse()}else{for((h=(r=c.length)<(l=d.length))&&(l=r),r=0;r<l;r++)if(c[r]!=d[r]){h=c[r]<d[r];break}a=0}for(h&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,r=d.length-l;r>0;--r)c[l++]=0;for(r=d.length;r>a;){if(c[--r]<d[r]){for(o=r;o&&0===c[--o];)c[o]=f-1;--c[o],c[r]+=f}c[r]-=d[r]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--i;return c[0]?(t.d=c,t.e=i,s?T(t,m):t):new p(0)}function k(e,t,n){var i,r=D(e),o=x(e.d),a=o.length;return t?(n&&(i=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+C(i):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(r<0?"e":"e+")+r):r<0?(o="0."+C(-r-1)+o,n&&(i=n-a)>0&&(o+=C(i))):r>=a?(o+=C(r+1-a),n&&(i=n-r-1)>0&&(o=o+"."+C(i))):((i=r+1)<a&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(o+="."),o+=C(i))),e.s<0?"-"+o:o}function P(e,t){if(e.length>t)return e.length=t,!0}function M(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,i,r=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if(void 0!==(i=e[n=r[t]])){if(!(h(i)===i&&i>=r[t+1]&&i<=r[t+2]))throw Error(c+n+": "+i);this[n]=i}if(void 0!==(i=e[n="LN10"])){if(i!=Math.LN10)throw Error(c+n+": "+i);this[n]=new this(i)}return this}a=function e(t){var n,i,r;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):S(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);S(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=M,void 0===t&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<r.length;)t.hasOwnProperty(i=r[n++])||(t[i]=this[i]);return o.config(t),o}(a),a.default=a.Decimal=a,r=new a(1),void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()},8268:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(2132);t.isMatch=function(e,t){return i.isMatchWith(e,t,()=>{})}},8346:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365:(e,t,n)=>{"use strict";var i=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,a=i.useRef,s=i.useEffect,l=i.useMemo,c=i.useDebugValue},8396:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(5508);t.cloneDeep=function(e){return i.cloneDeepWith(e)}},8420:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8499:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,a){if("function"!==typeof i)throw new TypeError("The listener must be a function");var s=new r(i,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,a=new Array(o);r<o;r++)a[r]=i[r].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,r,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,o),!0;case 6:return u.fn.call(u.context,t,i,r,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,i);break;case 4:u[c].fn.call(u[c].context,t,i,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||r&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},8813:e=>{function t(){this.buffer=new Array,this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},8845:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(8268),r=n(3272),o=n(8396),a=n(9323),s=n(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var n;Object.is(null===(n=e)||void 0===n?void 0:n.valueOf(),-0)&&(e="-0");break;case"number":e=r.toKey(e)}return t=o.cloneDeep(t),function(n){const r=a.get(n,e);return void 0===r?s.has(n,e):void 0===t?void 0===r:i.isMatch(r,t)}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9045:(e,t,n)=>{var i=n(3738).default;e.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9323:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(7260),r=n(2489),o=n(3272),a=n(1444);t.get=function e(t,n,s){if(null==t)return s;switch(typeof n){case"string":{if(i.isUnsafeProperty(n))return s;const o=t[n];return void 0===o?r.isDeepKey(n)?e(t,a.toPath(n),s):s:o}case"number":case"symbol":{"number"===typeof n&&(n=o.toKey(n));const e=t[n];return void 0===e?s:e}default:{var l;if(Array.isArray(n))return function(e,t,n){if(0===t.length)return n;let r=e;for(let o=0;o<t.length;o++){if(null==r)return n;if(i.isUnsafeProperty(t[o]))return n;r=r[t[o]]}if(void 0===r)return n;return r}(t,n,s);if(n=Object.is(null===(l=n)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(n),i.isUnsafeProperty(n))return s;const e=t[n];return void 0===e?s:e}}}},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(6392),r=n(8346),o=n(1203);t.last=function(e){if(o.isArrayLike(e))return i.last(r.toArray(e))}},9709:(e,t)=>{"use strict";function n(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,i)=>{if(e!==t){const r=n(e),o=n(t);if(r===o&&0===r){if(e<t)return"desc"===i?1:-1;if(e>t)return"desc"===i?-1:1}return"desc"===i?o-r:r-o}return 0}},9717:(e,t,n)=>{"use strict";var i=n(5043),r=n(9461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useSyncExternalStore,s=i.useRef,l=i.useEffect,c=i.useMemo,u=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c(function(){function e(e){if(!l){if(l=!0,a=e,e=i(e),void 0!==r&&d.hasValue){var t=d.value;if(r(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=i(e);return void 0!==r&&r(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,i,r]);var p=a(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=p},[p]),u(p),p}},9859:(e,t,n)=>{e.exports=n(7231).range},9885:(e,t,n)=>{var i;!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||p(),"undefined"!==typeof e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var a=t._howls[n]._soundById(i[r]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var a=t._howls[n]._soundById(i[r]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&"undefined"!==typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!==typeof Audio)try{"undefined"===typeof(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!==typeof Audio?new Audio:null}catch(u){return e}if(!t||"function"!==typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",r=i.match(/OPR\/(\d+)/g),a=r&&parseInt(r[0].split("/")[1],10)<33,s=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),l=i.match(/Version\/(.*?) /),c=s&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(a||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(c||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(c||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch(n){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var o=e._howls[r]._getSoundIds(),a=0;a<o.length;a++){var s=e._howls[r]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),"undefined"===typeof l.start?l.noteOn(0):l.start(0),"function"===typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!==typeof Promise&&(t instanceof Promise||"function"===typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!==typeof e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&"undefined"!==typeof e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new r,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return o.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!==typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!==typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!==typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,"undefined"!==typeof o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(o.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"===typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var i,r;if(e._format&&e._format[n])i=e._format[n];else{if("string"!==typeof(r=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(r))||(i=/\.([^.]+)$/.exec(r.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&o.codecs(i)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new s(e),e._webAudio&&c(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,i=null;if("number"===typeof e)i=e,e=null;else{if("string"===typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if("undefined"===typeof e&&(e="__default",!n._playLock)){for(var r=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(r++,i=n._sounds[a]._id);1===r?e=null:i=null}}var s=i?n._soundById(i):n._inactiveSound();if(!s)return null;if(i&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var l=s._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(i&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var c=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),u=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-c),h=1e3*u/Math.abs(s._rate),d=n._sprite[e][0]/1e3,p=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function(){s._paused=!1,s._seek=c,s._start=d,s._stop=p,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(c>=p)){var m=s._node;if(n._webAudio){var g=function(){n._playLock=!1,f(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;m.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,"undefined"===typeof m.bufferSource.start?s._loop?m.bufferSource.noteGrainOn(0,c,86400):m.bufferSource.noteGrainOn(0,c,u):s._loop?m.bufferSource.start(0,c,86400):m.bufferSource.start(0,c,u),h!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h)),t||setTimeout(function(){n._emit("play",s._id),n._loadQueue()},0)};"running"===o.state&&"interrupted"!==o.ctx.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(s._id))}else{var y=function(){m.currentTime=c,m.muted=s._muted||n._muted||o._muted||m.muted,m.volume=s._volume*o.volume(),m.playbackRate=s._rate;try{var i=m.play();if(i&&"undefined"!==typeof Promise&&(i instanceof Promise||"function"===typeof i.then)?(n._playLock=!0,f(),i.then(function(){n._playLock=!1,m._unlocked=!0,t?n._loadQueue():n._emit("play",s._id)}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):t||(n._playLock=!1,f(),n._emit("play",s._id)),m.playbackRate=s._rate,m.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h):(n._endTimers[s._id]=function(){n._ended(s),m.removeEventListener("ended",n._endTimers[s._id],!1)},m.addEventListener("ended",n._endTimers[s._id],!1))}catch(r){n._emit("playerror",s._id,r)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var v=window&&window.ejecta||!m.readyState&&o._navigator.isCocoonJS;if(m.readyState>=3||v)y();else{n._playLock=!0,n._state="loading";var _=function(){n._state="loaded",y(),m.removeEventListener(o._canPlayEvent,_,!1)};m.addEventListener(o._canPlayEvent,_,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),i=0;i<n.length;i++){t._clearTimer(n[i]);var r=t._soundById(n[i]);if(r&&!r._paused&&(r._seek=t.seek(n[i]),r._rateSeek=0,r._paused=!0,t._stopFade(n[i]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;"undefined"===typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var i=n._getSoundIds(e),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(i[r]),o._node&&(n._webAudio?o._node.bufferSource&&("undefined"===typeof o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if("undefined"===typeof t){if("boolean"!==typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(t),r=0;r<i.length;r++){var a=n._soundById(i[r]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._volume;if(1===r.length||2===r.length&&"undefined"===typeof r[1]?i._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0]):r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),!("undefined"!==typeof e&&e>=0&&e<=1))return(n=t?i._soundById(t):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;"undefined"===typeof t&&(i._volume=e),t=i._getSoundIds(t);for(var a=0;a<t.length;a++)(n=i._soundById(t[a]))&&(n._volume=e,r[2]||i._stopFade(t[a]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),i._emit("volume",n._id));return i},fade:function(e,t,n,i){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,i)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),r.volume(e,i);for(var a=r._getSoundIds(i),s=0;s<a.length;s++){var l=r._soundById(a[s]);if(l){if(i||r._stopFade(a[s]),r._webAudio&&!l._muted){var c=o.ctx.currentTime,u=c+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,c),l._node.gain.linearRampToValueAtTime(t,u)}r._startFadeInterval(l,e,t,n,a[s],"undefined"===typeof i)}}return r},_startFadeInterval:function(e,t,n,i,r,o){var a=this,s=t,l=n-t,c=Math.abs(l/.01),u=Math.max(4,c>0?i/c:i),h=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var r=(Date.now()-h)/i;h=Date.now(),s+=l*r,s=Math.round(100*s)/100,s=l<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))},u)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!==typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],i._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var o=i._getSoundIds(t),a=0;a<o.length;a++)(n=i._soundById(o[a]))&&(n._loop=e,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,i.playing(o[a])&&(i.pause(o[a],!0),i.play(o[a],!0)))));return i},rate:function(){var e,t,n,i=this,r=arguments;if(0===r.length)t=i._sounds[0]._id;else if(1===r.length){i._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!==typeof e)return(n=i._soundById(t))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,r)}}),i;"undefined"===typeof t&&(i._rate=e),t=i._getSoundIds(t);for(var a=0;a<t.length;a++)if(n=i._soundById(t[a])){i.playing(t[a])&&(n._rateSeek=i.seek(t[a]),n._playStart=i._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=i.seek(t[a]),l=1e3*((i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);!i._endTimers[t[a]]&&n._paused||(i._clearTimer(t[a]),i._endTimers[t[a]]=setTimeout(i._ended.bind(i,n),l)),i._emit("rate",n._id)}return i},seek:function(){var e,t,n=this,i=arguments;if(0===i.length)n._sounds.length&&(t=n._sounds[0]._id);else if(1===i.length){n._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("undefined"===typeof t)return 0;if("number"===typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var r=n._soundById(t);if(r){if(!("number"===typeof e&&e>=0)){if(n._webAudio){var a=n.playing(t)?o.ctx.currentTime-r._playStart:0,s=r._rateSeek?r._rateSeek-r._seek:0;return r._seek+(s+a*Math.abs(r._rate))}return r._node.currentTime}var l=n.playing(t);l&&n.pause(t,!0),r._seek=e,r._ended=!1,n._clearTimer(t),n._webAudio||!r._node||isNaN(r._node.duration)||(r._node.currentTime=e);var c=function(){l&&n.play(t,!0),n._emit("seek",t)};if(l&&!n._webAudio){var u=function(){n._playLock?setTimeout(u,0):c()};setTimeout(u,0)}else c()}return n},playing:function(e){var t=this;if("number"===typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var i=0;i<t._sounds.length;i++)if(!t._sounds[i]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,i=t._soundById(e);return i&&(n=t._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var i=o._howls.indexOf(e);i>=0&&o._howls.splice(i,1);var r=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){r=!1;break}return l&&r&&delete l[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,i){var r=this["_on"+e];return"function"===typeof t&&r.push(i?{id:n,fn:t,once:i}:{id:n,fn:t}),this},off:function(e,t,n){var i=this,r=i["_on"+e],o=0;if("number"===typeof t&&(n=t,t=null),t||n)for(o=0;o<r.length;o++){var a=n===r[o].id;if(t===r[o].fn&&a||!t&&a){r.splice(o,1);break}}else if(e)i["_on"+e]=[];else{var s=Object.keys(i);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(i[s[o]])&&(i[s[o]]=[])}return i},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var i=this,r=i["_on"+e],o=r.length-1;o>=0;o--)r[o].id&&r[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(i,r[o].fn),0),r[o].once&&i.off(e,r[o].fn,r[o].id));return i._loadQueue(e),i},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var i=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id,!0).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),r)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),o._autoSuspend()),t._webAudio||i||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!==typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new s(e)},_drain:function(){var e=this,t=e._pool,n=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&n++;for(i=e._sounds.length-1;i>=0;i--){if(n<=t)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),n--)}}},_getSoundIds:function(e){if("undefined"===typeof e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(n){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=o._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node="undefined"===typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),e._node.gain.setValueAtTime(n,o.ctx.currentTime),e._node.paused=!0,e._node.connect(o.masterGain)):o.noAudio||(e._node=o._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(o._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*o.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(o._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},c=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);h(i.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){o.setRequestHeader(t,e._xhr.headers[t])}),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?h(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},u(o)}},u=function(e){try{e.send()}catch(t){e.onerror()}},h=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(e){e&&t._sounds.length>0?(l[t._src]=e,d(t,e)):n()};"undefined"!==typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(i).catch(n):o.ctx.decodeAudioData(e,i,n)},d=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(o.usingWebAudio){try{"undefined"!==typeof AudioContext?o.ctx=new AudioContext:"undefined"!==typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(r){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var i=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!i&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain="undefined"===typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(i=function(){return{Howler:o,Howl:a}}.apply(t,[]))||(e.exports=i),t.Howler=o,t.Howl=a,"undefined"!==typeof n.g?(n.g.HowlerGlobal=r,n.g.Howler=o,n.g.Howl=a,n.g.Sound=s):"undefined"!==typeof window&&(window.HowlerGlobal=r,window.Howler=o,window.Howl=a,window.Sound=s)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var i=this;return i.ctx&&i.ctx.listener?(t="number"!==typeof t?i._pos[1]:t,n="number"!==typeof n?i._pos[2]:n,"number"!==typeof e?i._pos:(i._pos=[e,t,n],"undefined"!==typeof i.ctx.listener.positionX?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(e,t,n,i,r,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!==typeof t?s[1]:t,n="number"!==typeof n?s[2]:n,i="number"!==typeof i?s[3]:i,r="number"!==typeof r?s[4]:r,o="number"!==typeof o?s[5]:o,"number"!==typeof e?s:(a._orientation=[e,t,n,i,r,o],"undefined"!==typeof a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,n,i,r,o),a)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!==typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!==typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!==typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!==typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!==typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!==typeof t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,n)}}),i;var r="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof n){if("number"!==typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if("number"!==typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?"undefined"!==typeof s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),i._emit("stereo",s._id)}}return i},Howl.prototype.pos=function(e,n,i,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,n,i,r)}}),o;if(n="number"!==typeof n?0:n,i="number"!==typeof i?-.5:i,"undefined"===typeof r){if("number"!==typeof e)return o._pos;o._pos=[e,n,i]}for(var a=o._getSoundIds(r),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!==typeof e)return l._pos;l._pos=[e,n,i],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),"undefined"!==typeof l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setPosition(e,n,i)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(e,n,i,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,n,i,r)}}),o;if(n="number"!==typeof n?o._orientation[1]:n,i="number"!==typeof i?o._orientation[2]:i,"undefined"===typeof r){if("number"!==typeof e)return o._orientation;o._orientation=[e,n,i]}for(var a=o._getSoundIds(r),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!==typeof e)return l._orientation;l._orientation=[e,n,i],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),t(l,"spatial")),"undefined"!==typeof l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setOrientation(e,n,i)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var e,n,i,r=this,o=arguments;if(!r._webAudio)return r;if(0===o.length)return r._pannerAttr;if(1===o.length){if("object"!==typeof o[0])return(i=r._soundById(parseInt(o[0],10)))?i._pannerAttr:r._pannerAttr;e=o[0],"undefined"===typeof n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:"undefined"!==typeof e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:"undefined"!==typeof e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:"undefined"!==typeof e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:"undefined"!==typeof e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:"undefined"!==typeof e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:"undefined"!==typeof e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:"undefined"!==typeof e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:"undefined"!==typeof e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===o.length&&(e=o[0],n=parseInt(o[1],10));for(var a=r._getSoundIds(n),s=0;s<a.length;s++)if(i=r._soundById(a[s])){var l=i._pannerAttr;l={coneInnerAngle:"undefined"!==typeof e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:"undefined"!==typeof e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:"undefined"!==typeof e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:"undefined"!==typeof e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:"undefined"!==typeof e.maxDistance?e.maxDistance:l.maxDistance,refDistance:"undefined"!==typeof e.refDistance?e.refDistance:l.refDistance,rolloffFactor:"undefined"!==typeof e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:"undefined"!==typeof e.panningModel?e.panningModel:l.panningModel};var c=i._panner;c||(i._pos||(i._pos=r._pos||[0,0,-.5]),t(i,"spatial"),c=i._panner),c.coneInnerAngle=l.coneInnerAngle,c.coneOuterAngle=l.coneOuterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor,c.panningModel=l.panningModel}return r},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,"undefined"!==typeof e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),"undefined"!==typeof e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()},9898:(e,t,n)=>{var i=n(5957),r=n(392),o=n(4460),a=0,s=1,l=2,c=3,u=4,h=5,d=6,p=7,f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;f.getBCHDigit(t)-f.getBCHDigit(f.G15)>=0;)t^=f.G15<<f.getBCHDigit(t)-f.getBCHDigit(f.G15);return(e<<10|t)^f.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;f.getBCHDigit(t)-f.getBCHDigit(f.G18)>=0;)t^=f.G18<<f.getBCHDigit(t)-f.getBCHDigit(f.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return f.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case a:return(t+n)%2==0;case s:return t%2==0;case l:return n%3==0;case c:return(t+n)%3==0;case u:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case h:return t*n%2+t*n%3==0;case d:return(t*n%2+t*n%3)%2==0;case p:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new r([1],0),n=0;n<e;n++)t=t.multiply(new r([1,o.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:case i.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,i=0;i<t;i++)for(var r=0;r<t;r++){for(var o=0,a=e.isDark(i,r),s=-1;s<=1;s++)if(!(i+s<0||t<=i+s))for(var l=-1;l<=1;l++)r+l<0||t<=r+l||0==s&&0==l||a==e.isDark(i+s,r+l)&&o++;o>5&&(n+=3+o-5)}for(i=0;i<t-1;i++)for(r=0;r<t-1;r++){var c=0;e.isDark(i,r)&&c++,e.isDark(i+1,r)&&c++,e.isDark(i,r+1)&&c++,e.isDark(i+1,r+1)&&c++,0!=c&&4!=c||(n+=3)}for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(i,r)&&!e.isDark(i,r+1)&&e.isDark(i,r+2)&&e.isDark(i,r+3)&&e.isDark(i,r+4)&&!e.isDark(i,r+5)&&e.isDark(i,r+6)&&(n+=40);for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(i,r)&&!e.isDark(i+1,r)&&e.isDark(i+2,r)&&e.isDark(i+3,r)&&e.isDark(i+4,r)&&!e.isDark(i+5,r)&&e.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<t;r++)for(i=0;i<t;i++)e.isDark(i,r)&&u++;return n+=10*(Math.abs(100*u/t/t-50)/5)}};e.exports=f},9903:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.ary=function(e,t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(this,i.slice(0,t))}}},9921:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>i[e]);return a.default=()=>i,n.d(o,a),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".54292a4b.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(i,r,o,a)=>{if(e[i])e[i].push(r);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=i),e[i]=[r];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,r[1](s)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,o,a=i[0],s=i[1],l=i[2],c=0;if(a.some(t=>0!==e[t])){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(t&&t(i);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkfrontend=self.webpackChunkfrontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{boolean:()=>lc,booleanish:()=>cc,commaOrSpaceSeparated:()=>fc,commaSeparated:()=>pc,number:()=>hc,overloadedBoolean:()=>uc,spaceSeparated:()=>dc});var t={};n.r(t),n.d(t,{attentionMarkers:()=>Zh,contentInitial:()=>Lh,disable:()=>Hh,document:()=>Bh,flow:()=>Rh,flowInitial:()=>zh,insideSpan:()=>qh,string:()=>Vh,text:()=>Uh});var i={};n.r(i),n.d(i,{scaleBand:()=>Lb,scaleDiverging:()=>MA,scaleDivergingLog:()=>IA,scaleDivergingPow:()=>NA,scaleDivergingSqrt:()=>OA,scaleDivergingSymlog:()=>jA,scaleIdentity:()=>AD,scaleImplicit:()=>Ob,scaleLinear:()=>CD,scaleLog:()=>ND,scaleOrdinal:()=>Bb,scalePoint:()=>Rb,scalePow:()=>ZD,scaleQuantile:()=>nE,scaleQuantize:()=>iE,scaleRadial:()=>WD,scaleSequential:()=>CA,scaleSequentialLog:()=>AA,scaleSequentialPow:()=>TA,scaleSequentialQuantile:()=>kA,scaleSequentialSqrt:()=>FA,scaleSequentialSymlog:()=>SA,scaleSqrt:()=>HD,scaleSymlog:()=>zD,scaleThreshold:()=>rE,scaleTime:()=>bA,scaleUtc:()=>wA,tickFormat:()=>DD});var r,o=n(5043),a=n.t(o,2),s=n(4391),l=n(7950),c=n.t(l,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const h="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,i){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function v(e,t,n,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,s=o.history,l=r.Pop,c=null,p=y();function y(){return(s.state||{idx:null}).idx}function v(){l=r.Pop;let e=y(),t=null==e?null:e-p;p=e,c&&c({action:l,location:x.location,delta:t})}function _(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,s.replaceState(u({},s.state,{idx:p}),""));let x={get action(){return l},get location(){return e(o,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(h,v),c=e,()=>{o.removeEventListener(h,v),c=null}},createHref:e=>t(o,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=m(x.location,e,t);n&&n(i,e),p=y()+1;let u=f(i,p),h=x.createHref(i);try{s.pushState(u,"",h)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;o.location.assign(h)}a&&c&&c({action:l,location:x.location,delta:1})},replace:function(e,t){l=r.Replace;let i=m(x.location,e,t);n&&n(i,e),p=y();let o=f(i,p),u=x.createHref(i);s.replaceState(o,"",u),a&&c&&c({action:l,location:x.location,delta:0})},go:e=>s.go(e)};return x}var _;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(_||(_={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){void 0===n&&(n="/");let i=j(("string"===typeof t?y(t):t).pathname||"/",n);if(null==i)return null;let r=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let o=null;for(let a=0;null==o&&a<r.length;++a){let e=I(i);o=P(r[a],e)}return o}function b(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let s=z([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),b(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:k(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of w(e.path))r(e,t,i);else r(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return r?[o,""]:[o];let a=w(i.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),r&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const D=/^:[\w-]+$/,E=3,C=2,A=1,S=10,T=-2,F=e=>"*"===e;function k(e,t){let n=e.split("/"),i=n.length;return n.some(F)&&(i+=T),t&&(i+=C),n.filter(e=>!F(e)).reduce((e,t)=>e+(D.test(t)?E:""===t?A:S),i)}function P(e,t){let{routesMeta:n}=e,i={},r="/",o=[];for(let a=0;a<n.length;++a){let e=n[a],s=a===n.length-1,l="/"===r?t:t.slice(r.length)||"/",c=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!c)return null;Object.assign(i,c.params);let u=e.route;o.push({params:i,pathname:z([r,c.pathname]),pathnameBase:R(z([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=z([r,c.pathnameBase]))}return o}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let o=new RegExp(r,t?void 0:"i");return[o,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),s=r.slice(1),l=i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function I(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function N(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function B(e,t){let n=O(e);return t?n.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=y(e):(r=u({},e),d(!r.pathname||!r.pathname.includes("?"),N("?","pathname","search",r)),d(!r.pathname||!r.pathname.includes("#"),N("#","pathname","hash",r)),d(!r.search||!r.search.includes("#"),N("#","search","hash",r)));let o,a=""===e||""===r.pathname,s=a?"/":r.pathname;if(null==s)o=n;else{let e=t.length-1;if(!i&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?y(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:V(i),hash:U(r)}}(r,o),c=s&&"/"!==s&&s.endsWith("/"),h=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Z=["post","put","patch","delete"],H=(new Set(Z),["get",...Z]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},G.apply(this,arguments)}const W=o.createContext(null);const Y=o.createContext(null);const X=o.createContext(null);const K=o.createContext(null);const $=o.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=o.createContext(null);function J(){return null!=o.useContext(K)}function ee(){return J()||d(!1),o.useContext(K).location}function te(e){o.useContext(X).static||o.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=o.useContext($);return e?function(){let{router:e}=he(ce.UseNavigateStable),t=pe(ue.UseNavigateStable),n=o.useRef(!1);te(()=>{n.current=!0});let i=o.useCallback(function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,G({fromRouteId:t},r)))},[e,t]);return i}():function(){J()||d(!1);let e=o.useContext(W),{basename:t,future:n,navigator:i}=o.useContext(X),{matches:r}=o.useContext($),{pathname:a}=ee(),s=JSON.stringify(B(r,n.v7_relativeSplatPath)),l=o.useRef(!1);te(()=>{l.current=!0});let c=o.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=L(n,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:z([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)},[t,i,s,a,e]);return c}()}function ie(e,t,n,i){J()||d(!1);let{navigator:a}=o.useContext(X),{matches:s}=o.useContext($),l=s[s.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=ee();if(t){var f;let e="string"===typeof t?y(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||d(!1),h=e}else h=p;let m=h.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=x(e,{pathname:g});let _=le(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,i);return t&&_?o.createElement(K.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},_):_}function re(){let e=function(){var e;let t=o.useContext(Q),n=de(ue.UseRouteError),i=pe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:r},n):null,null)}const oe=o.createElement(re,null);class ae extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement($.Provider,{value:this.props.routeContext},o.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:i}=e,r=o.useContext(W);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement($.Provider,{value:t},i)}function le(e,t,n,i){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}let s=e,l=null==(r=n)?void 0:r.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&(null==l?void 0:l[e.route.id]));e>=0||d(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let o=0;o<s.length;o++){let e=s[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=o),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,i,r)=>{let a,h=!1,d=null,p=null;var f;n&&(a=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||oe,c&&(u<0&&0===r?(f="route-fallback",!1||fe[f]||(fe[f]=!0),h=!0,p=null):u===r&&(h=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,r+1)),g=()=>{let t;return t=a?d:h?p:i.route.Component?o.createElement(i.route.Component,null):i.route.element?i.route.element:e,o.createElement(se,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===r)?o.createElement(ae,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=o.useContext(W);return t||d(!1),t}function de(e){let t=o.useContext(Y);return t||d(!1),t}function pe(e){let t=function(){let e=o.useContext($);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const fe={};a.startTransition;function me(e){d(!1)}function ge(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:s,static:l=!1,future:c}=e;J()&&d(!1);let u=t.replace(/^\/*/,"/"),h=o.useMemo(()=>({basename:u,navigator:s,static:l,future:G({v7_relativeSplatPath:!1},c)}),[u,c,s,l]);"string"===typeof i&&(i=y(i));let{pathname:p="/",search:f="",hash:m="",state:g=null,key:v="default"}=i,_=o.useMemo(()=>{let e=j(p,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:g,key:v},navigationType:a}},[u,p,f,m,g,v,a]);return null==_?null:o.createElement(X.Provider,{value:h},o.createElement(K.Provider,{children:n,value:_}))}function ye(e){let{children:t,location:n}=e;return ie(ve(t),n)}new Promise(()=>{});o.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return o.Children.forEach(e,(e,i)=>{if(!o.isValidElement(e))return;let r=[...t,i];if(e.type===o.Fragment)return void n.push.apply(n,ve(e.props.children,r));e.type!==me&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ve(e.props.children,r)),n.push(a)}),n}function _e(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(e=>[n,e]):[[n,i]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(gV){}new Map;const xe=a.startTransition;c.flushSync,a.useId;function be(e){let{basename:t,children:n,future:i,window:r}=e,a=o.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:r,v5Compat:!0})&&(s={}),v(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return m("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,s)));let l=a.current,[c,u]=o.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=o.useCallback(e=>{h&&xe?xe(()=>u(e)):u(e)},[u,h]);return o.useLayoutEffect(()=>l.listen(d),[l,d]),o.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,De;function Ee(e){let t=o.useRef(_e(e)),n=o.useRef(!1),i=ee(),r=o.useMemo(()=>function(e,t){let n=_e(e);return t&&t.forEach((e,i)=>{n.has(i)||t.getAll(i).forEach(e=>{n.append(i,e)})}),n}(i.search,n.current?null:t.current),[i.search]),a=ne(),s=o.useCallback((e,t)=>{const i=_e("function"===typeof e?e(r):e);n.current=!0,a("?"+i,t)},[a,r]);return[r,s]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(we||(we={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ae(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Ce(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}function Se(e,t,n){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach(function(t){Se(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ke(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Pe=(0,o.createContext)(null),Me=Pe.Provider;function Ie(){const e=(0,o.useContext)(Pe);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var je=n(228),Ne=n.n(je);const Oe=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Be.apply(this,arguments)}function Le(e,t){let{bounds:n,boundsOptions:i,center:r,children:a,className:s,id:l,placeholder:c,style:u,whenReady:h,zoom:d}=e,p=ke(e,Oe);const[f]=(0,o.useState)({className:s,id:l,style:u}),[m,g]=(0,o.useState)(null);(0,o.useImperativeHandle)(t,()=>{var e;return null!==(e=null===m||void 0===m?void 0:m.map)&&void 0!==e?e:null},[m]);const y=(0,o.useCallback)(e=>{if(null!==e&&null===m){const t=new je.Map(e,p);null!=r&&null!=d?t.setView(r,d):null!=n&&t.fitBounds(n,i),null!=h&&t.whenReady(h),g(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,o.useEffect)(()=>()=>{null===m||void 0===m||m.map.remove()},[m]);const v=m?o.createElement(Me,{value:m},a):null!==c&&void 0!==c?c:null;return o.createElement("div",Be({},f,{ref:y}),v)}const ze=(0,o.forwardRef)(Le);function Re(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Ve(e,t){return null==t?function(t,n){const i=(0,o.useRef)();return i.current||(i.current=e(t,n)),i}:function(n,i){const r=(0,o.useRef)();r.current||(r.current=e(n,i));const a=(0,o.useRef)(n),{instance:s}=r.current;return(0,o.useEffect)(function(){a.current!==n&&(t(s,n,a.current),a.current=n)},[s,n,i]),r}}function Ue(e,t){const n=(0,o.useRef)(t);(0,o.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function qe(e,t){const n=(0,o.useRef)();(0,o.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function Ze(e,t){var n;const i=null!==(n=e.pane)&&void 0!==n?n:t.pane;return i?Fe(Fe({},e),{},{pane:i}):e}function He(e){return function(t){const n=Ie(),i=e(Ze(t,n),n);return Ue(n.map,t.attribution),qe(i.current,t.eventHandlers),function(e,t){(0,o.useEffect)(function(){var n;return(null!==(n=t.layerContainer)&&void 0!==n?n:t.map).addLayer(e.instance),function(){var n;null===(n=t.layerContainer)||void 0===n||n.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}(i.current,n),i}}const Ge=["url"],We=(Ye=function(e,t){let{url:n}=e,i=ke(e,Ge);return Re(new je.TileLayer(n,Ze(i,t)),t)},function(e){function t(t,n){const{instance:i}=e(t).current;return(0,o.useImperativeHandle)(n,()=>i),null}return(0,o.forwardRef)(t)}(He(Ve(Ye,function(e,t,n){!function(e,t,n){const{opacity:i,zIndex:r}=t;null!=i&&i!==n.opacity&&e.setOpacity(i),null!=r&&r!==n.zIndex&&e.setZIndex(r)}(e,t,n);const{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)}))));var Ye;const Xe=["position"],Ke=function(e,t){return function(e){function t(t,n){const{instance:i,context:r}=e(t).current;return(0,o.useImperativeHandle)(n,()=>i),null==t.children?null:o.createElement(Me,{value:r},t.children)}return(0,o.forwardRef)(t)}(He(Ve(e,t)))}(function(e,t){let{position:n}=e,i=ke(e,Xe);const r=new je.Marker(n,i);return Re(r,(o=t,a={overlayContainer:r},Object.freeze(Fe(Fe({},o),a))));var o,a},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())});function $e(){return Ie().map}function Qe(e){const t=$e();return(0,o.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const Je=function(e,t){const n=function(e,t){return function(n,i){const r=Ie(),o=e(Ze(n,r),r);return Ue(r.map,n.attribution),qe(o.current,n.eventHandlers),t(o.current,r,n,i),o}}(Ve(e),t);return function(e){function t(t,n){const[i,r]=(0,o.useState)(!1),{instance:a}=e(t,r).current;(0,o.useImperativeHandle)(n,()=>a),(0,o.useEffect)(function(){i&&a.update()},[a,i,t.children]);const s=a._contentNode;return s?(0,l.createPortal)(t.children,s):null}return(0,o.forwardRef)(t)}(n)}(function(e,t){return Re(new je.Popup(e,t.overlayContainer),t)},function(e,t,n,i){let{position:r}=n;(0,o.useEffect)(function(){const{instance:n}=e;function o(e){e.popup===n&&(n.update(),i(!0))}function a(e){e.popup===n&&i(!1)}return t.map.on({popupopen:o,popupclose:a}),null==t.overlayContainer?(null!=r&&n.setLatLng(r),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){var e;t.map.off({popupopen:o,popupclose:a}),null===(e=t.overlayContainer)||void 0===e||e.unbindPopup(),t.map.removeLayer(n)}},[e,t,i,r])});var et=n(579);const tt=function(e){let{label:t,value:n,previousValue:i}=e;const r=Math.max(0,Math.min(100,Number(n||0))),o=void 0!==i?Math.max(0,Math.min(100,Number(i))):null,a=null!==o?r-o:0;let s;return s=r<40?"linear-gradient(90deg, #ef4444, #f87171)":r<70?"linear-gradient(90deg, #f59e0b, #fbbf24)":"linear-gradient(90deg, #10b981, #34d399)",(0,et.jsxs)("div",{className:"factor-item",children:[(0,et.jsxs)("div",{className:"factor-info",children:[(0,et.jsx)("span",{className:"factor-label",children:t}),(0,et.jsxs)("div",{className:"factor-stats",children:[(0,et.jsxs)("span",{className:"current-val",children:[r.toFixed(1),"%"]}),null!==o&&(0,et.jsxs)("span",{className:"trend-indicator ".concat(a>=0?"up":"down"),children:[a>=0?"\u2191":"\u2193"," ",Math.abs(a).toFixed(1),"%"]})]})]}),(0,et.jsxs)("div",{className:"bar-track",children:[(0,et.jsx)("div",{className:"bar-fill",style:{width:"".concat(r,"%"),background:s}}),null!==o&&(0,et.jsx)("div",{className:"history-ghost-marker",style:{left:"".concat(o,"%")},title:"Historical: ".concat(o,"%")})]})]})},nt="http://localhost:5000",it=nt.endsWith("/")?nt.slice(0,-1):nt;var rt=n(3245);function ot(e){let{lat:t,setLat:n,lng:i,setLng:r,locationAName:a,setLocationAName:s,loading:l,handleSubmit:c,handleMyLocation:u,handleSavePlace:h,handleNearbyPlaces:d,result:p,compareResult:f,nearbyLoading:m,showLocationB:g,setShowLocationB:y,locationBName:v,isSelectingB:_,setIsSelectingB:x,bLatInput:b,setBLatInput:w,bLngInput:D,setBLngInput:E,savedPlaces:C,handleCompareSelect:A,compareLoading:S,handleMyLocationB:T,isBFromSavedPlace:F,handleSavePlaceB:k,analyzedCoordsB:P,setAnalyzedCoordsB:M,nearbyLoadingB:I,handleNearbyPlacesB:j,isCompareMode:N,setIsCompareMode:O,editingIndex:B,setEditingIndex:L,editingName:z,setEditingName:R,setSavedPlaces:V,sidebarWidth:U,startResizingSide:q,onSearchResult:Z,setCompareResult:H,setSnapshotDataB:G,setLocationBName:W}=e;const[Y,X]=(0,o.useState)(""),[K,$]=(0,o.useState)([]),[Q,J]=(0,o.useState)(!1),[ee,te]=(0,o.useState)(""),ne=(0,o.useRef)(null),[ie,re]=(0,o.useState)(!1),[oe,ae]=(0,o.useState)("");(0,o.useEffect)(()=>{const e=e=>{ne.current&&!ne.current.contains(e.target)&&$([])};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const[se,le]=(0,o.useState)(!1);return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsxs)("aside",{className:"sidebar glass-morphic",style:{width:"".concat(U,"px"),flex:"0 0 ".concat(U,"px"),position:"relative",display:"flex",flexDirection:"column"},children:[(0,et.jsx)("div",{style:{height:"20px",width:"100%"}}),(0,et.jsxs)("div",{className:"sidebar-scrollable",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,et.jsxs)("section",{className:"sidebar-search-section",ref:ne,style:{width:"100%",padding:"0 10px",boxSizing:"border-box"},children:[(0,et.jsxs)("div",{className:"search-wrapper",style:{width:"100%",position:"relative"},children:[(0,et.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"}),(0,et.jsx)("input",{type:"text",placeholder:"Search location...",value:Y,onChange:e=>(async e=>{if(X(e),e.length>2){J(!0);try{const t=await fetch("https://nominatim.openstreetmap.org/search?format=jsonv2&q=".concat(encodeURIComponent(e))),n=await t.json();$(n.slice(0,5))}catch(t){console.error("Search failed",t)}finally{J(!1)}}else $([])})(e.target.value),className:"sidebar-search-input",style:{width:"100%",boxSizing:"border-box"}}),Q&&(0,et.jsx)("div",{className:"search-spinner-small"})]}),K.length>0&&(0,et.jsx)("div",{className:"sidebar-suggestions-dropdown",style:{width:"calc(100% - 20px)"},children:K.map((e,t)=>(0,et.jsxs)("div",{className:"suggestion-item",onClick:()=>(e=>{Z&&Z(parseFloat(e.lat),parseFloat(e.lon),e.display_name),te(e.display_name),$([]),X("")})(e),children:[(0,et.jsx)("span",{className:"suggestion-pin",children:"\ud83d\udccd"}),(0,et.jsxs)("div",{className:"suggestion-text",children:[(0,et.jsx)("div",{className:"suggestion-main",children:e.display_name.split(",")[0]}),(0,et.jsx)("div",{className:"suggestion-sub",children:e.display_name})]})]},t))}),ee&&(0,et.jsxs)("div",{className:"search-result-description",style:{width:"100%"},children:[(0,et.jsx)("span",{className:"desc-label",children:"Selected Location"}),ee,(0,et.jsx)("button",{className:"clear-desc",onClick:()=>te(""),children:"\u2715"})]})]}),(0,et.jsxs)("section",{className:"control-group compact-group",style:{marginTop:"12px"},children:[(0,et.jsx)("h3",{style:{marginBottom:"8px",fontSize:"14px"},children:"\ud83d\udcc4 Actions"}),(0,et.jsxs)("div",{className:"compact-row",style:{gap:"4px"},children:[(0,et.jsx)("button",{type:"button",className:"btn-save",onClick:async()=>{if(!p)return void alert("Please analyze a location first");le(!0);const e="".concat(window.location.origin).concat(window.location.pathname),n="".concat(e,"?lat=").concat(t,"&lng=").concat(i,"&nameA=").concat(encodeURIComponent(a));try{const e=Fe(Fe({},p),{},{weather:p.weather,locationName:a,shareLink:n,location:{latitude:parseFloat(t),longitude:parseFloat(i)},compareData:N&&f?Fe(Fe({},f),{},{locationName:v,shareLink:"".concat(n,"&bLat=").concat(b,"&bLng=").concat(D,"&nameB=").concat(encodeURIComponent(v),"&compare=true"),location:{latitude:parseFloat(b),longitude:parseFloat(D)}}):null}),r=await fetch("".concat(it,"/generate_report"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw new Error("Backend failed to generate report");const o=await r.blob(),s=window.URL.createObjectURL(new Blob([o],{type:"application/pdf"})),l=document.createElement("a");l.href=s;const c=a.replace(/\s+/g,"_"),u=N?"Comparison_".concat(c,"_vs_").concat(v.replace(/\s+/g,"_"),".pdf"):"GeoAI_Report_".concat(c,".pdf");l.setAttribute("download",u),document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),window.URL.revokeObjectURL(s)},100)}catch(r){console.error("PDF Error:",r),alert("Report download failed. Check if your browser is blocking pop-ups.")}finally{le(!1)}},disabled:!p||se,style:{flex:1,padding:"6px 8px",fontSize:"11px",position:"relative"},children:se?(0,et.jsx)("span",{className:"pdf-loader-text",children:"\u23f3 Generating..."}):"\u2b07\ufe0f Generate Report"}),(0,et.jsx)("button",{type:"button",className:"btn-save",onClick:()=>{const e="".concat(window.location.origin).concat(window.location.pathname,"?lat=").concat(t,"&lng=").concat(i,"&nameA=").concat(encodeURIComponent(a)).concat(N&&b&&D?"&bLat=".concat(encodeURIComponent(b),"&bLng=").concat(encodeURIComponent(D),"&nameB=").concat(encodeURIComponent(v),"&compare=true"):"");ae(e),re(!0)},style:{flex:1,padding:"6px 8px",fontSize:"11px"},children:"\ud83d\udd17 Share this Link"})]})]}),(0,et.jsxs)("section",{className:"control-group compact-group",children:[(0,et.jsxs)("h3",{children:["\ud83d\udccd Location A: ",a]}),(0,et.jsxs)("form",{onSubmit:c,children:[(0,et.jsxs)("div",{className:"geo-unified-logic-row",children:[(0,et.jsxs)("div",{className:"field",children:[(0,et.jsx)("label",{children:"Lat"}),(0,et.jsx)("input",{value:t,onChange:e=>n(e.target.value),className:"highlighted-box"})]}),(0,et.jsxs)("div",{className:"field",children:[(0,et.jsx)("label",{children:"Lng"}),(0,et.jsx)("input",{value:i,onChange:e=>r(e.target.value),className:"highlighted-box"})]}),(0,et.jsx)("button",{type:"submit",className:"btn-analyze",disabled:l,children:l?"...":"Analyze"})]}),(0,et.jsxs)("div",{className:"geo-tools-row-triple",children:[(0,et.jsx)("button",{type:"button",onClick:u,className:"btn-mono-tool",children:"\ud83d\udccd My Loc"}),(0,et.jsx)("button",{type:"button",onClick:h,className:"btn-mono-tool",children:"\u2b50 Save"}),(0,et.jsx)("button",{type:"button",onClick:d,disabled:!p||m,className:"btn-mono-tool",children:"\ud83c\udfd8\ufe0f Nearby"})]})]})]}),(0,et.jsxs)("section",{className:"control-group comparison-box compact",style:{display:g?"block":"none"},children:[(0,et.jsxs)("h3",{children:["\ud83d\udccd Location B: ",v]}),(0,et.jsxs)("div",{className:"compact-row",children:[(0,et.jsx)("button",{className:"btn-save mini",onClick:()=>x(!_),style:{flex:1,border:_?"1px solid #ef4444":"",padding:"4px 6px",fontSize:"10px"},children:_?"Cancel":"\ud83d\uddfa\ufe0f Map"}),(0,et.jsxs)("select",{className:"btn-save mini",style:{flex:1.5,padding:"4px 6px",fontSize:"10px"},onChange:e=>{const t=C[e.target.value];t&&void 0!==t.lat&&A(t.lat,t.lng,t.name)},value:"",children:[(0,et.jsx)("option",{value:"",disabled:!0,children:"Saved Places..."}),C.map((e,t)=>(0,et.jsx)("option",{value:t,children:e.name},t))]})]}),(0,et.jsxs)("div",{className:"geo-unified-logic-row",children:[(0,et.jsxs)("div",{className:"field",children:[(0,et.jsx)("label",{children:"Lat B"}),(0,et.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),className:"highlighted-box"})]}),(0,et.jsxs)("div",{className:"field",children:[(0,et.jsx)("label",{children:"Lng B"}),(0,et.jsx)("input",{type:"text",value:D,onChange:e=>E(e.target.value),className:"highlighted-box"})]}),(0,et.jsx)("button",{type:"button",onClick:()=>b&&D&&A(b,D),className:"btn-analyze",children:S?"...":"Go"}),N&&(0,et.jsx)("button",{onClick:()=>{O(!1),y(!1),w(""),E(""),H(null),G&&G(null),W("Site B"),M&&M({lat:null,lng:null}),localStorage.removeItem("geo_lat_b_analyzed"),localStorage.removeItem("geo_lng_b_analyzed")},className:"btn-cross",title:"Exit Compare",children:"\u2715"})]}),(0,et.jsx)("div",{className:"compact-row",style:{marginTop:"6px",gap:"4px"},children:(0,et.jsxs)("div",{className:"geo-tools-row-triple",children:[(0,et.jsx)("button",{type:"button",onClick:T,className:"btn-mono-tool",title:"My Location",children:"\ud83d\udccd"}),(0,et.jsx)("button",{type:"button",onClick:k,disabled:F,className:"btn-mono-tool",title:"Save Place",children:"\u2b50"}),(0,et.jsx)("button",{type:"button",onClick:j,disabled:!(null!==P&&void 0!==P&&P.lat)||I,className:"btn-mono-tool",title:"Nearby Places",children:I?"...":"\ud83c\udfd8\ufe0f"})]})})]}),(0,et.jsx)("button",{onClick:()=>{g?(y(!1),O(!1),H(null),G&&G(null),w(""),E(""),W("Site B"),M&&M({lat:null,lng:null}),localStorage.removeItem("geo_lat_b_analyzed"),localStorage.removeItem("geo_lng_b_analyzed")):y(!0)},className:"compare-toggle-btn",children:g?"\u2715 Close Comparison":"\ud83d\udd04 Compare with Location B"}),(0,et.jsxs)("section",{className:"saved-places-section",style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:[(0,et.jsx)("h3",{children:"Saved Places"}),(0,et.jsx)("div",{className:"places-grid attractive-scroll",style:{flex:1,overflowY:"auto"},children:C.map((e,t)=>(0,et.jsxs)("div",{className:"place-card-compact",onClick:()=>{s(e.name),n(e.lat.toString()),r(e.lng.toString())},children:[(0,et.jsx)("div",{className:"place-info-mini",children:B===t?(0,et.jsx)("input",{type:"text",value:z,onChange:e=>R(e.target.value),onKeyDown:n=>{if("Enter"===n.key){const n=[...C];n[t].name=z||e.name,V(n),L(null)}else"Escape"===n.key&&L(null)},className:"highlighted-box",style:{padding:"4px",fontSize:"12px"},autoFocus:!0}):(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)("strong",{children:e.name}),(0,et.jsxs)("span",{children:[e.lat.toFixed(2),", ",e.lng.toFixed(2)]})]})}),(0,et.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[B!==t&&(0,et.jsx)("button",{className:"btn-edit",onClick:n=>{n.stopPropagation(),L(t),R(e.name)},children:"\u270e"}),(0,et.jsx)("button",{onClick:e=>{e.stopPropagation(),y(!1),O(!1),w(""),E(""),H(null),G&&G(null),W("Site B"),M&&M({lat:null,lng:null}),localStorage.removeItem("geo_lat_b_analyzed"),localStorage.removeItem("geo_lng_b_analyzed")},className:"btn-cross",title:"Close comparison and stop B analysis",children:"\u2715"})]})]},t))})]})]}),(0,et.jsx)("div",{className:"sidebar-resizer",onMouseDown:q})]}),ie&&(0,et.jsx)("div",{className:"share-modal-overlay",onClick:()=>re(!1),children:(0,et.jsxs)("div",{className:"share-modal-card",onClick:e=>e.stopPropagation(),children:[(0,et.jsx)("button",{className:"share-modal-close-top",onClick:()=>re(!1),children:"\u2715"}),(0,et.jsxs)("div",{className:"share-modal-content",children:[(0,et.jsx)("h3",{className:"share-title",children:"Share Analysis"}),(0,et.jsxs)("div",{className:"share-qr-section",children:[(0,et.jsx)("div",{className:"qr-container-box",children:(0,et.jsx)(rt.Ay,{value:oe,size:180,level:"M"})}),(0,et.jsx)("p",{className:"share-subtitle",children:N?"".concat(a," vs ").concat(v):a})]}),(0,et.jsxs)("div",{className:"share-actions-vertical",children:[(0,et.jsx)("button",{className:"share-action-primary",onClick:async()=>{await navigator.clipboard.writeText(oe),alert("Link copied!")},children:"Copy Link"}),(0,et.jsx)("button",{className:"share-action-secondary",onClick:()=>re(!1),children:"Close"})]})]})]})})]})}var at=n(4066),st=n.n(at);const lt=e=>{let{lat:t,lng:n,setLat:i,setLng:r,factors:a,isDarkMode:s,activeStyle:l,zoom:c,interactive:u=!0,isTacticalMode:h,latA:d,lngA:p,latB:f,lngB:m,onMapLocationSelect:g}=e;const y=(0,o.useRef)(null),v=(0,o.useRef)(null),_=(0,o.useRef)({live:null,a:null,b:null}),x="odjavHm0GMayywLbA9Rq",b=(0,o.useMemo)(()=>({satellite:"https://api.maptiler.com/maps/hybrid/style.json",topo:"https://api.maptiler.com/maps/topo-v2/style.json",dark:"https://api.maptiler.com/maps/basic-v2-dark/style.json",nature:"https://api.maptiler.com/maps/voyager/style.json",streets:"https://api.maptiler.com/maps/streets-v2/style.json",outdoor:"https://api.maptiler.com/maps/outdoor-v2/style.json"}),[]),w=(0,o.useCallback)(e=>{if(!e||"function"!==typeof e.easeTo)return;const i=1200;window.snapToA=()=>{const t=parseFloat(p),n=parseFloat(d);Number.isFinite(n)&&Number.isFinite(t)&&e.easeTo({center:[t,n],zoom:16,pitch:60,duration:i,essential:!0})},window.snapToB=()=>{const t=parseFloat(m),n=parseFloat(f);Number.isFinite(n)&&Number.isFinite(t)&&e.easeTo({center:[t,n],zoom:16,pitch:60,duration:i,essential:!0})},window.snapToLive=()=>{const r=parseFloat(n),o=parseFloat(t);Number.isFinite(o)&&Number.isFinite(r)&&e.easeTo({center:[r,o],zoom:16,pitch:60,duration:i,essential:!0})}},[t,n,d,p,f,m]),D=(0,o.useCallback)(e=>{if(e&&e.isStyleLoaded()&&e.getProjection())try{e.getSource("terrain")||e.addSource("terrain",{type:"raster-dem",url:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=".concat(x),tileSize:512}),e.setTerrain({source:"terrain",exaggeration:2}),e.getLayer("3d-buildings")||e.addLayer({id:"3d-buildings",source:"openmaptiles","source-layer":"building",type:"fill-extrusion",minzoom:13,paint:{"fill-extrusion-color":"satellite"===l?"#ffffff":"#00d4ff","fill-extrusion-height":["get","render_height"],"fill-extrusion-base":["get","render_min_height"],"fill-extrusion-opacity":.6,"fill-extrusion-vertical-gradient":!0}});const t=(null===a||void 0===a?void 0:a.pollution)||0,n="outdoor"===l?"#87CEEB":t>60?"#8d8468":s?"#010b1a":"#ffffff";e.setSky({"sky-color":n,"sky-type":"gradient","horizon-color":"satellite"===l?"#00d4ff":n,"horizon-fog-density":.4,"fog-ground-blend":.6})}catch(gV){console.warn("Syncing 3D...")}},[x,l,a,s]),E=(0,o.useCallback)(e=>{if(!u||!i||!r)return;let t=null;e.off("mousedown"),e.off("mouseup"),e.on("mousedown",e=>{t=e.point}),e.on("mouseup",e=>{if(!t)return;const n=Math.abs(e.point.x-t.x),o=Math.abs(e.point.y-t.y);n<5&&o<5&&(i(e.lngLat.lat.toString()),r(e.lngLat.lng.toString()),g&&g()),t=null})},[u,i,r,g]);return(0,o.useEffect)(()=>{let e;if(v.current)e=v.current,e.setStyle("".concat(b[l]||b.satellite,"?key=").concat(x)),e.once("style.load",()=>{D(e),E(e),w(v.current)}),e.easeTo({center:[parseFloat(n),parseFloat(t)],zoom:e.getZoom(),duration:600,essential:!0}),_.current.live&&_.current.live.setLngLat([parseFloat(n),parseFloat(t)]);else{e=new(st().Map)({container:y.current,style:"".concat(b[l]||b.satellite,"?key=").concat(x),center:[parseFloat(n),parseFloat(t)],zoom:15,pitch:65,bearing:-15,antialias:!0,interactive:u}),v.current=e,E(e),e.on("idle",()=>D(e)),e.once("load",()=>w(v.current));const i=document.createElement("div");i.className="pulse-marker-3d",_.current.live=new(st().Marker)(i).setLngLat([parseFloat(n),parseFloat(t)]).addTo(e)}return h&&d&&p?_.current.a?_.current.a.setLngLat([parseFloat(p),parseFloat(d)]):_.current.a=new(st().Marker)({color:"#3b82f6"}).setLngLat([parseFloat(p),parseFloat(d)]).addTo(e):_.current.a&&(_.current.a.remove(),_.current.a=null),h&&f&&m?_.current.b?_.current.b.setLngLat([parseFloat(m),parseFloat(f)]):_.current.b=new(st().Marker)({color:"#ef4444"}).setLngLat([parseFloat(m),parseFloat(f)]).addTo(e):_.current.b&&(_.current.b.remove(),_.current.b=null),v.current&&w(v.current),()=>{delete window.snapToA,delete window.snapToB,delete window.snapToLive}},[t,n,d,p,f,m,h,l,u,i,r,g,D,E,w,b]),(0,o.useEffect)(()=>{const e=v.current;e&&"function"===typeof e.getCenter&&e.easeTo({center:e.getCenter(),zoom:c,duration:400,essential:!0})},[c]),(0,et.jsx)("div",{ref:y,className:"pro-map-view",style:{width:"100%",height:"100%"}})};function ct(e){let{isDarkMode:t,setIsDarkMode:n,isAudioEnabled:i,setIsAudioEnabled:r,analysisHistory:a=[],compareResult:s,isCompareMode:l,siteAPlaying:c,setSiteAPlaying:u,siteBPlaying:h,setSiteBPlaying:d}=e;const[p,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),[y,v]=(0,o.useState)(!1),[_,x]=(0,o.useState)(!1),[b,w]=(0,o.useState)(window.innerWidth<768),[D,E]=(0,o.useState)(new Date),C=(0,o.useRef)(null),[A,S]=(0,o.useState)(null),T=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const e=setInterval(()=>E(new Date),1e3),t=()=>{const e=window.innerWidth<768;w(e),e&&f(!0)};return window.addEventListener("resize",t),t(),()=>{clearInterval(e),T.current&&clearTimeout(T.current),C.current&&clearTimeout(C.current),window.removeEventListener("resize",t)}},[]),(0,et.jsxs)(et.Fragment,{children:[b&&(0,et.jsx)("div",{className:"nav-mobile-spacer"}),!b&&(0,et.jsx)("div",{className:"nav-trigger-zone",onMouseEnter:()=>f(!0)}),(0,et.jsx)("nav",{className:"geo-navbar ".concat(p?"is-visible":""," ").concat(b?"is-mobile":"is-floating"),onMouseEnter:()=>{C.current&&clearTimeout(C.current),f(!0)},onMouseLeave:()=>{C.current=setTimeout(()=>{f(!1),g(!1)},2e3)},children:(0,et.jsxs)("div",{className:"nav-content-shell",children:[(0,et.jsxs)("div",{className:"nav-group left",children:[!b&&(0,et.jsxs)("div",{className:"compact-sys",children:[(0,et.jsx)("span",{className:"date-val",children:D.toLocaleDateString("en-GB",{day:"2-digit",month:"short"})}),(0,et.jsx)("span",{className:"time-val",children:D.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),(0,et.jsxs)("div",{className:"palette-wrapper",onMouseEnter:()=>{T.current&&clearTimeout(T.current),x(!0)},onMouseLeave:()=>{T.current=setTimeout(()=>{x(!1)},3e3)},children:[(0,et.jsx)("button",{className:"icon-btn palette-trigger ".concat(_?"active":""),onClick:e=>{e.stopPropagation(),_?(T.current&&clearTimeout(T.current),x(!1)):x(!0)},children:"\ud83c\udfa8"}),(0,et.jsx)("div",{className:"palette-dropdown ".concat(_?"expanded":""),children:[{name:"Purple",color:"#8b5cf6"},{name:"Cyan",color:"#06b6d4"},{name:"Emerald",color:"#10b981"},{name:"Rose",color:"#f43f5e"},{name:"Amber",color:"#f59e0b"}].map(e=>(0,et.jsx)("div",{className:"color-dot",style:{backgroundColor:e.color},onClick:t=>{t.stopPropagation(),(e=>{document.documentElement.style.setProperty("--accent-color",e),document.documentElement.style.setProperty("--accent-glow","".concat(e,"44"))})(e.color),x(!1)}},e.name))})]}),(0,et.jsx)("button",{className:"icon-btn audio-toggle ".concat(c?"active":""),onClick:()=>u(!c),title:c?"Mute Site A Audio":"Play Site A Audio",style:{fontSize:"1.2rem"},children:c?"\ud83d\udd0a":"\ud83d\udd07"}),l&&s&&(0,et.jsx)("button",{className:"icon-btn audio-toggle-b ".concat(h?"active":""),onClick:()=>{console.log("\ud83d\udd07 Site B button clicked, current state:",h),d(!h)},title:h?"Mute Site B Audio":"Play Site B Audio",style:{fontSize:"1.2rem"},children:h?"\ud83d\udd0a":"\ud83d\udd07"}),(0,et.jsx)("button",{className:"icon-btn ".concat(y?"active":""),onClick:()=>v(!0),children:"\ud83d\udd52"}),(0,et.jsx)("a",{href:"/wild-facts",className:"icon-btn",title:"Wild World Facts",style:{textDecoration:"none",color:"inherit"},children:"\ud83c\udf0d"})]}),(0,et.jsx)("div",{className:"nav-group center",children:(0,et.jsxs)("div",{className:"brand-wrap",children:[(0,et.jsx)("div",{className:"status-dot"}),(0,et.jsxs)("h1",{className:"logo",children:["Geo",(0,et.jsx)("span",{children:"AI"})]})]})}),(0,et.jsxs)("div",{className:"nav-group right",children:[(0,et.jsxs)("div",{className:"team-trigger-wrapper",children:[(0,et.jsx)("button",{className:"team-btn ".concat(m?"active":""),onClick:()=>g(!m),children:"Team"}),(0,et.jsx)("div",{className:"compact-team-pane ".concat(m?"show":""),children:(0,et.jsxs)("div",{className:"pane-inner",children:[(0,et.jsxs)("div",{className:"pane-header",children:[(0,et.jsx)("h4",{className:"project-title",children:"Project Development Team"}),(0,et.jsxs)("p",{className:"guide-text",children:["Guided by: ",(0,et.jsx)("span",{children:"Dr. G. Naga Chandrika"})]}),(0,et.jsx)("div",{className:"header-divider"})]}),(0,et.jsxs)("div",{className:"team-grid",children:[(0,et.jsx)("div",{className:"member-card",children:"Adepu Vaishnavi"}),(0,et.jsx)("div",{className:"member-card",children:"Chinni Jyothika"}),(0,et.jsx)("div",{className:"member-card",children:"Harsha vardhan Botlagunta"}),(0,et.jsx)("div",{className:"member-card",children:"Maganti Pranathi"})]})]})})]}),(0,et.jsx)("button",{className:"icon-btn fs-toggle",onClick:()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},children:"\u26f6"}),(0,et.jsx)("button",{className:"mode-toggle",onClick:()=>n(!t),children:t?"\u2600\ufe0f":"\ud83c\udf19"})]})]})}),y&&(0,et.jsx)("div",{className:"modal-overlay",onClick:()=>v(!1),children:(0,et.jsxs)("div",{className:"history-table-card glass-morphic",onClick:e=>e.stopPropagation(),children:[A&&(0,et.jsx)("div",{className:"qr-expanded-overlay",onClick:()=>S(null),children:(0,et.jsxs)("div",{className:"qr-expanded-card",onClick:e=>e.stopPropagation(),children:[(0,et.jsx)("div",{className:"qr-container",children:(0,et.jsx)(rt.Ay,{value:A.link,size:240,bgColor:"#ffffff",fgColor:"#000000"})}),(0,et.jsxs)("div",{className:"qr-info",children:[A.name.includes("vs")?(0,et.jsxs)("div",{className:"comparison-title-wrap",children:[(0,et.jsx)("span",{className:"analysis-tag",children:"Comparison Analysis"}),(0,et.jsx)("h4",{children:A.name})]}):(0,et.jsxs)("h4",{children:[A.name," Report"]}),(0,et.jsx)("p",{children:"Scan to view this geospatial report on mobile"})]}),(0,et.jsx)("button",{className:"qr-close-btn",onClick:()=>S(null),children:"Close"})]})}),(0,et.jsxs)("div",{className:"modal-header",style:{borderBottomColor:"var(--accent-color)"},children:[(0,et.jsx)("h3",{children:"\ud83d\udef0\ufe0f Analysis History"}),(0,et.jsx)("button",{className:"modal-close",onClick:()=>v(!1),children:"\u2716"})]}),(0,et.jsx)("div",{className:"history-table-container",children:(0,et.jsxs)("table",{className:"history-table",children:[(0,et.jsx)("thead",{children:(0,et.jsxs)("tr",{children:[(0,et.jsx)("th",{children:"Site"}),(0,et.jsx)("th",{children:"Lat , Lng"}),(0,et.jsx)("th",{children:"Score"}),(0,et.jsx)("th",{children:"Date & Time"}),(0,et.jsx)("th",{children:"Scan"}),(0,et.jsx)("th",{children:"Action"})]})}),(0,et.jsx)("tbody",{children:a.length>0?a.map((e,n)=>{const i=e.isCompareMode||e.bLat&&e.bLng||e.nameB&&"Site B"!==e.nameB,r="".concat(window.location.origin).concat(window.location.pathname);let o="".concat(r,"?lat=").concat(e.lat,"&lng=").concat(e.lng,"&nameA=").concat(encodeURIComponent(e.name||"Location A"));i&&(o+="&bLat=".concat(encodeURIComponent(e.bLat),"&bLng=").concat(encodeURIComponent(e.bLng),"&nameB=").concat(encodeURIComponent(e.nameB||"Location B"),"&compare=true"));const a=e=>e<40?"#ef4444":e<70?"#f59e0b":"#10b981",s=e.timestamp?new Date(e.timestamp):null,l=s?s.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})+" "+s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A";return(0,et.jsxs)("tr",{className:i?"history-row-comp":"",children:[(0,et.jsx)("td",{className:"site-name",children:(0,et.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[(0,et.jsx)("span",{style:{fontSize:"13px",fontWeight:"600",color:"#fff"},children:e.name}),i&&(0,et.jsxs)("span",{style:{fontSize:"10px",color:"var(--accent-color)",opacity:.8},children:["vs ",e.nameB]})]})}),(0,et.jsx)("td",{children:(0,et.jsxs)("div",{style:{fontSize:"11px",fontFamily:"monospace"},children:[(0,et.jsx)("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:"A:"})," ",parseFloat(e.lat).toFixed(4),", ",parseFloat(e.lng).toFixed(4),i&&(0,et.jsxs)("div",{style:{marginTop:"4px",opacity:.7},children:[(0,et.jsx)("span",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:"B:"})," ",parseFloat(e.bLat).toFixed(4),", ",parseFloat(e.bLng).toFixed(4)]})]})}),(0,et.jsx)("td",{children:(0,et.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"center"},children:[(0,et.jsxs)("span",{className:"score-badge",style:{backgroundColor:a(e.score),minWidth:"60px"},children:[i&&(0,et.jsx)("small",{style:{fontSize:"9px",marginRight:"4px",opacity:.8},children:"A:"}),e.score.toFixed(1),"%"]}),i&&void 0!==e.scoreB&&(0,et.jsxs)("span",{className:"score-badge",style:{backgroundColor:a(e.scoreB),minWidth:"60px"},children:[(0,et.jsx)("small",{style:{fontSize:"9px",marginRight:"4px",opacity:.8},children:"B:"}),e.scoreB.toFixed(1),"%"]})]})}),(0,et.jsx)("td",{style:{fontSize:"11px",whiteSpace:"nowrap",opacity:.8},children:l}),(0,et.jsx)("td",{style:{textAlign:"center"},children:(0,et.jsx)("div",{className:"qr-mini-wrapper",onClick:()=>{const t=i?"".concat(e.name," vs ").concat(e.nameB):e.name;S({link:o,name:t})},style:{cursor:"zoom-in",background:"#fff",padding:"3px",borderRadius:"4px",display:"inline-block"},children:(0,et.jsx)(rt.Ay,{value:o,size:28,bordered:t?"true":void 0})})}),(0,et.jsx)("td",{children:(0,et.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"history-direct-link",style:{fontSize:"11px",textDecoration:"none",padding:"6px 10px",borderRadius:"6px",border:"1px solid var(--accent-color)",display:"inline-block"},onClick:e=>e.stopPropagation(),children:i?"View Compare \ud83d\udd17":"View \ud83d\udd17"})})]},n)}):(0,et.jsx)("tr",{children:(0,et.jsx)("td",{colSpan:"4",className:"empty-row",style:{padding:"20px",textAlign:"center",opacity:.5},children:"No history found."})})})]})})]})})]})}function ut(e){return e+.5|0}const ht=(e,t,n)=>Math.max(Math.min(e,n),t);function dt(e){return ht(ut(2.55*e),0,255)}function pt(e){return ht(ut(255*e),0,255)}function ft(e){return ht(ut(e/2.55)/100,0,1)}function mt(e){return ht(ut(100*e),0,100)}const gt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yt=[..."0123456789ABCDEF"],vt=e=>yt[15&e],_t=e=>yt[(240&e)>>4]+yt[15&e],xt=e=>(240&e)>>4===(15&e);function bt(e){var t=(e=>xt(e.r)&&xt(e.g)&&xt(e.b)&&xt(e.a))(e)?vt:_t;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const wt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Dt(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Et(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Ct(e,t,n){const i=Dt(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function At(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),o=Math.min(t,n,i),a=(r+o)/2;let s,l,c;return r!==o&&(c=r-o,l=a>.5?c/(2-r-o):c/(r+o),s=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),s=60*s+.5),[0|s,l||0,a]}function St(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(pt)}function Tt(e,t,n){return St(Dt,e,t,n)}function Ft(e){return(e%360+360)%360}function kt(e){const t=wt.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?dt(+t[5]):pt(+t[5]));const r=Ft(+t[2]),o=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return St(Ct,e,t,n)}(r,o,a):"hsv"===t[1]?function(e,t,n){return St(Et,e,t,n)}(r,o,a):Tt(r,o,a),{r:n[0],g:n[1],b:n[2],a:i}}const Pt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Mt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let It;function jt(e){It||(It=function(){const e={},t=Object.keys(Mt),n=Object.keys(Pt);let i,r,o,a,s;for(i=0;i<t.length;i++){for(a=s=t[i],r=0;r<n.length;r++)o=n[r],s=s.replace(o,Pt[o]);o=parseInt(Mt[a],16),e[s]=[o>>16&255,o>>8&255,255&o]}return e}(),It.transparent=[0,0,0,0]);const t=It[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Nt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Ot=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Bt=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Lt(e,t,n){if(e){let i=At(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Tt(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function zt(e,t){return e?Object.assign(t||{},e):e}function Rt(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=pt(e[3]))):(t=zt(e,{r:0,g:0,b:0,a:1})).a=pt(t.a),t}function Vt(e){return"r"===e.charAt(0)?function(e){const t=Nt.exec(e);let n,i,r,o=255;if(t){if(t[7]!==n){const e=+t[7];o=t[8]?dt(e):ht(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?dt(n):ht(n,0,255)),i=255&(t[4]?dt(i):ht(i,0,255)),r=255&(t[6]?dt(r):ht(r,0,255)),{r:n,g:i,b:r,a:o}}}(e):kt(e)}class Ut{constructor(e){if(e instanceof Ut)return e;const t=typeof e;let n;"object"===t?n=Rt(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*gt[e[1]],g:255&17*gt[e[2]],b:255&17*gt[e[3]],a:5===n?17*gt[e[4]]:255}:7!==n&&9!==n||(t={r:gt[e[1]]<<4|gt[e[2]],g:gt[e[3]]<<4|gt[e[4]],b:gt[e[5]]<<4|gt[e[6]],a:9===n?gt[e[7]]<<4|gt[e[8]]:255})),t}(e)||jt(e)||Vt(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=zt(this._rgb);return e&&(e.a=ft(e.a)),e}set rgb(e){this._rgb=Rt(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(ft(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?bt(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=At(e),n=t[0],i=mt(t[1]),r=mt(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(ft(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,s=n.a-i.a,l=((a*s===-1?a:(a+s)/(1+a*s))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Bt(ft(e.r)),r=Bt(ft(e.g)),o=Bt(ft(e.b));return{r:pt(Ot(i+n*(Bt(ft(t.r))-i))),g:pt(Ot(r+n*(Bt(ft(t.g))-r))),b:pt(Ot(o+n*(Bt(ft(t.b))-o))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ut(this.rgb)}alpha(e){return this._rgb.a=pt(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=ut(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Lt(this._rgb,2,e),this}darken(e){return Lt(this._rgb,2,-e),this}saturate(e){return Lt(this._rgb,1,e),this}desaturate(e){return Lt(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=At(e);n[0]=Ft(n[0]+t),n=Tt(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function qt(){}const Zt=(()=>{let e=0;return()=>e++})();function Ht(e){return null===e||void 0===e}function Gt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Wt(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Yt(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Xt(e,t){return Yt(e)?e:t}function Kt(e,t){return"undefined"===typeof e?t:e}const $t=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Qt(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Jt(e,t,n,i){let r,o,a;if(Gt(e))if(o=e.length,i)for(r=o-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<o;r++)t.call(n,e[r],r);else if(Wt(e))for(a=Object.keys(e),o=a.length,r=0;r<o;r++)t.call(n,e[a[r]],a[r])}function en(e,t){let n,i,r,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],o=t[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function tn(e){if(Gt(e))return e.map(tn);if(Wt(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=tn(e[n[r]]);return t}return e}function nn(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function rn(e,t,n,i){if(!nn(e))return;const r=t[e],o=n[e];Wt(r)&&Wt(o)?on(r,o,i):t[e]=tn(o)}function on(e,t,n){const i=Gt(t)?t:[t],r=i.length;if(!Wt(e))return e;const o=(n=n||{}).merger||rn;let a;for(let s=0;s<r;++s){if(a=i[s],!Wt(a))continue;const t=Object.keys(a);for(let i=0,r=t.length;i<r;++i)o(t[i],e,a,n)}return e}function an(e,t){return on(e,t,{merger:sn})}function sn(e,t,n){if(!nn(e))return;const i=t[e],r=n[e];Wt(i)&&Wt(r)?an(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=tn(r))}const ln={"":e=>e,x:e=>e.x,y:e=>e.y};function cn(e,t){const n=ln[t]||(ln[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function un(e){return e.charAt(0).toUpperCase()+e.slice(1)}const hn=e=>"undefined"!==typeof e,dn=e=>"function"===typeof e,pn=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const fn=Math.PI,mn=2*fn,gn=mn+fn,yn=Number.POSITIVE_INFINITY,vn=fn/180,_n=fn/2,xn=fn/4,bn=2*fn/3,wn=Math.log10,Dn=Math.sign;function En(e,t,n){return Math.abs(e-t)<n}function Cn(e){const t=Math.round(e);e=En(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(wn(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function An(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Sn(e,t,n){let i,r,o;for(i=0,r=e.length;i<r;i++)o=e[i][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Tn(e){return e*(fn/180)}function Fn(e){return e*(180/fn)}function kn(e){if(!Yt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Pn(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*fn&&(o+=mn),{angle:o,distance:r}}function Mn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function In(e,t){return(e-t+gn)%mn-fn}function jn(e){return(e%mn+mn)%mn}function Nn(e,t,n,i){const r=jn(e),o=jn(t),a=jn(n),s=jn(o-r),l=jn(a-r),c=jn(r-o),u=jn(r-a);return r===o||r===a||i&&o===a||s>l&&c<u}function On(e,t,n){return Math.max(t,Math.min(n,e))}function Bn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Ln(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,o=0;for(;r-o>1;)i=o+r>>1,n(i)?o=i:r=i;return{lo:o,hi:r}}const zn=(e,t,n,i)=>Ln(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),Rn=(e,t,n)=>Ln(e,n,i=>e[i][t]>=n);const Vn=["push","pop","shift","splice","unshift"];function Un(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(Vn.forEach(t=>{delete e[t]}),delete e._chartjs)}function qn(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Zn="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Hn(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];n=o,i||(i=!0,Zn.call(window,()=>{i=!1,e.apply(t,n)}))}}const Gn=e=>"start"===e?"left":"end"===e?"right":"center",Wn=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Yn(e,t,n){const i=t.length;let r=0,o=i;if(e._sorted){const{iScale:a,vScale:s,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:p,maxDefined:f}=a.getUserBounds();if(p){if(r=Math.min(zn(l,u,h).lo,n?i:zn(t,u,a.getPixelForValue(h)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!Ht(e[s.axis]));r-=Math.max(0,e)}r=On(r,0,i-1)}if(f){let e=Math.max(zn(l,a.axis,d,!0).hi+1,n?0:zn(t,u,a.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!Ht(e[s.axis]));e+=Math.max(0,t)}o=On(e,r,i)-r}else o=i-r}return{start:r,count:o}}function Xn(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}const Kn=e=>0===e||1===e,$n=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*mn/n),Qn=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*mn/n)+1,Jn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*_n),easeOutSine:e=>Math.sin(e*_n),easeInOutSine:e=>-.5*(Math.cos(fn*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Kn(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Kn(e)?e:$n(e,.075,.3),easeOutElastic:e=>Kn(e)?e:Qn(e,.075,.3),easeInOutElastic(e){const t=.1125;return Kn(e)?e:e<.5?.5*$n(2*e,t,.45):.5+.5*Qn(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Jn.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Jn.easeInBounce(2*e):.5*Jn.easeOutBounce(2*e-1)+.5};function ei(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function ti(e){return ei(e)?e:new Ut(e)}function ni(e){return ei(e)?e:new Ut(e).saturate(.5).darken(.1).hexString()}const ii=["x","y","borderWidth","radius","tension"],ri=["color","borderColor","backgroundColor"];const oi=new Map;function ai(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=oi.get(n);return i||(i=new Intl.NumberFormat(e,t),oi.set(n,i)),i}(t,n).format(e)}const si={values:e=>Gt(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),o=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=wn(Math.abs(o)),s=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),ai(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(wn(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?si.numeric.call(this,e,t,n):""}};var li={formatters:si};const ci=Object.create(null),ui=Object.create(null);function hi(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function di(e,t,n){return"string"===typeof t?on(hi(e,t),n):on(hi(e,""),t)}class pi{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>ni(t.backgroundColor),this.hoverBorderColor=(e,t)=>ni(t.borderColor),this.hoverColor=(e,t)=>ni(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return di(this,e,t)}get(e){return hi(this,e)}describe(e,t){return di(ui,e,t)}override(e,t){return di(ci,e,t)}route(e,t,n,i){const r=hi(this,e),o=hi(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=o[i];return Wt(e)?Object.assign({},t,e):Kt(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var fi=new pi({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:ri},numbers:{type:"number",properties:ii}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:li.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function mi(e,t,n,i,r){let o=t[r];return o||(o=t[r]=e.measureText(r).width,n.push(r)),o>i&&(i=o),i}function gi(e,t,n,i){let r=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},o=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let a=0;const s=n.length;let l,c,u,h,d;for(l=0;l<s;l++)if(h=n[l],void 0===h||null===h||Gt(h)){if(Gt(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Gt(d)||(a=mi(e,r,o,a,d))}else a=mi(e,r,o,a,h);e.restore();const p=o.length/2;if(p>n.length){for(l=0;l<p;l++)delete r[o[l]];o.splice(0,p)}return a}function yi(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function vi(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function _i(e,t,n,i){xi(e,t,n,i,null)}function xi(e,t,n,i,r){let o,a,s,l,c,u,h,d;const p=t.pointStyle,f=t.rotation,m=t.radius;let g=(f||0)*vn;if(p&&"object"===typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:r?e.ellipse(n,i,r/2,m,0,0,mn):e.arc(n,i,m,0,mn),e.closePath();break;case"triangle":u=r?r/2:m,e.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=bn,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=bn,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,a=Math.cos(g+xn)*l,h=Math.cos(g+xn)*(r?r/2-c:l),s=Math.sin(g+xn)*l,d=Math.sin(g+xn)*(r?r/2-c:l),e.arc(n-h,i-s,c,g-fn,g-_n),e.arc(n+d,i-a,c,g-_n,g),e.arc(n+h,i+s,c,g,g+_n),e.arc(n-d,i+a,c,g+_n,g+fn),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*m,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}g+=xn;case"rectRot":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-s),e.lineTo(n+d,i-a),e.lineTo(n+h,i+s),e.lineTo(n-d,i+a),e.closePath();break;case"crossRot":g+=xn;case"cross":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-s),e.lineTo(n+h,i+s),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"star":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-s),e.lineTo(n+h,i+s),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a),g+=xn,h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-s),e.lineTo(n+h,i+s),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(g)*m,s=Math.sin(g)*m,e.moveTo(n-a,i-s),e.lineTo(n+a,i+s);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function bi(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function wi(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Di(e){e.restore()}function Ei(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Ci(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Ai(e,t,n,i,r){if(r.strikethrough||r.underline){const o=e.measureText(i),a=t-o.actualBoundingBoxLeft,s=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(s,u),e.stroke()}}function Si(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Ti(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Gt(t)?t:[t],s=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ht(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),l=0;l<a.length;++l)c=a[l],o.backdrop&&Si(e,o.backdrop),s&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),Ht(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,n,i,o.maxWidth)),e.fillText(c,n,i,o.maxWidth),Ai(e,n,i,c,o),i+=Number(r.lineHeight);e.restore()}function Fi(e,t){const{x:n,y:i,w:r,h:o,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*fn,fn,!0),e.lineTo(n,i+o-a.bottomLeft),e.arc(n+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,fn,_n,!0),e.lineTo(n+r-a.bottomRight,i+o),e.arc(n+r-a.bottomRight,i+o-a.bottomRight,a.bottomRight,_n,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-_n,!0),e.lineTo(n+a.topLeft,i)}const ki=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Pi=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Mi(e,t){const n=(""+e).match(ki);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Ii=e=>+e||0;function ji(e,t){const n={},i=Wt(t),r=i?Object.keys(t):t,o=Wt(e)?i?n=>Kt(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=Ii(o(a));return n}function Ni(e){return ji(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Oi(e){return ji(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Bi(e){const t=Ni(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Li(e,t){e=e||{},t=t||fi.font;let n=Kt(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Kt(e.style,t.style);i&&!(""+i).match(Pi)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Kt(e.family,t.family),lineHeight:Mi(Kt(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Kt(e.weight,t.weight),string:""};return r.string=function(e){return!e||Ht(e.size)||Ht(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function zi(e,t,n,i){let r,o,a,s=!0;for(r=0,o=e.length;r<o;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),s=!1),void 0!==n&&Gt(a)&&(a=a[n%a.length],s=!1),void 0!==a))return i&&!s&&(i.cacheable=!1),a}function Ri(e,t){return Object.assign(Object.create(e),t)}function Vi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Qi("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>Vi([i,...e],t,r,n)};return new Proxy(o,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>Gi(n,i,()=>function(e,t,n,i){let r;for(const o of t)if(r=Qi(Zi(o,e),n),"undefined"!==typeof r)return Hi(e,r)?Ki(n,i,e,r):r}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Ji(e).includes(t),ownKeys:e=>Ji(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Ui(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:qi(e,i),setContext:t=>Ui(e,t,n,i),override:r=>Ui(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Gi(e,t,()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=e;let s=i[t];dn(s)&&a.isScriptable(t)&&(s=function(e,t,n,i){const{_proxy:r,_context:o,_subProxy:a,_stack:s}=n;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e);let l=t(o,a||i);s.delete(e),Hi(e,l)&&(l=Ki(r._scopes,r,e,l));return l}(t,s,e,n));Gt(s)&&s.length&&(s=function(e,t,n,i){const{_proxy:r,_context:o,_subProxy:a,_descriptors:s}=n;if("undefined"!==typeof o.index&&i(e))return t[o.index%t.length];if(Wt(t[0])){const n=t,i=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=Ki(i,r,e,l);t.push(Ui(n,o,a&&a[e],s))}}return t}(t,s,e,a.isIndexable));Hi(t,s)&&(s=Ui(s,r,o&&o[t],a));return s}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function qi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:dn(n)?n:()=>n,isIndexable:dn(i)?i:()=>i}}const Zi=(e,t)=>e?e+un(t):t,Hi=(e,t)=>Wt(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Gi(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function Wi(e,t,n){return dn(e)?e(t,n):e}const Yi=(e,t)=>!0===e?t:"string"===typeof e?cn(t,e):void 0;function Xi(e,t,n,i,r){for(const o of t){const t=Yi(n,o);if(t){e.add(t);const o=Wi(t._fallback,n,r);if("undefined"!==typeof o&&o!==n&&o!==i)return o}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Ki(e,t,n,i){const r=t._rootScopes,o=Wi(t._fallback,n,i),a=[...e,...r],s=new Set;s.add(i);let l=$i(s,a,n,o||n,i);return null!==l&&(("undefined"===typeof o||o===n||(l=$i(s,a,o,l,i),null!==l))&&Vi(Array.from(s),[""],r,o,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Gt(r)&&Wt(n))return n;return r||{}}(t,n,i)))}function $i(e,t,n,i,r){for(;n;)n=Xi(e,t,n,i,r);return n}function Qi(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Ji(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function er(e,t,n,i){const{iScale:r}=e,{key:o="r"}=this._parsing,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=t[c],a[s]={r:r.parse(cn(u,o),c)};return a}const tr=Number.EPSILON||1e-14,nr=(e,t)=>t<e.length&&!e[t].skip&&e[t],ir=e=>"x"===e?"y":"x";function rr(e,t,n,i){const r=e.skip?t:e,o=t,a=n.skip?t:n,s=Mn(o,r),l=Mn(a,o);let c=s/(s+l),u=l/(s+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:o.x-h*(a.x-r.x),y:o.y-h*(a.y-r.y)},next:{x:o.x+d*(a.x-r.x),y:o.y+d*(a.y-r.y)}}}function or(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=ir(t),i=e.length,r=Array(i).fill(0),o=Array(i);let a,s,l,c=nr(e,0);for(a=0;a<i;++a)if(s=l,l=c,c=nr(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}o[a]=s?c?Dn(r[a-1])!==Dn(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const i=e.length;let r,o,a,s,l,c=nr(e,0);for(let u=0;u<i-1;++u)l=c,c=nr(e,u+1),l&&c&&(En(t[u],0,tr)?n[u]=n[u+1]=0:(r=n[u]/t[u],o=n[u+1]/t[u],s=Math.pow(r,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[u]=r*a*t[u],n[u+1]=o*a*t[u])))}(e,r,o),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=ir(n),r=e.length;let o,a,s,l=nr(e,0);for(let c=0;c<r;++c){if(a=s,s=l,l=nr(e,c+1),!s)continue;const r=s[n],u=s[i];a&&(o=(r-a[n])/3,s["cp1".concat(n)]=r-o,s["cp1".concat(i)]=u-o*t[c]),l&&(o=(l[n]-r)/3,s["cp2".concat(n)]=r+o,s["cp2".concat(i)]=u+o*t[c])}}(e,o,t)}function ar(e,t,n){return Math.max(Math.min(e,n),t)}function sr(e,t,n,i,r){let o,a,s,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)or(e,r);else{let n=i?e[e.length-1]:e[0];for(o=0,a=e.length;o<a;++o)s=e[o],l=rr(n,s,e[Math.min(o+1,a-(i?0:1))%a],t.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}t.capBezierPoints&&function(e,t){let n,i,r,o,a,s=bi(e[0],t);for(n=0,i=e.length;n<i;++n)a=o,o=s,s=n<i-1&&bi(e[n+1],t),o&&(r=e[n],a&&(r.cp1x=ar(r.cp1x,t.left,t.right),r.cp1y=ar(r.cp1y,t.top,t.bottom)),s&&(r.cp2x=ar(r.cp2x,t.left,t.right),r.cp2y=ar(r.cp2y,t.top,t.bottom)))}(e,n)}function lr(){return"undefined"!==typeof window&&"undefined"!==typeof document}function cr(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function ur(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const hr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const dr=["top","right","bottom","left"];function pr(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=dr[r];i[o]=parseFloat(e[t+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function fr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=hr(n),o="border-box"===r.boxSizing,a=pr(r,"padding"),s=pr(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:o}=i;let a,s,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,o,e.target))a=r,s=o;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,s=i.clientY-e.top,l=!0}return{x:a,y:s,box:l}}(e,n),h=a.left+(u&&s.left),d=a.top+(u&&s.top);let{width:p,height:f}=t;return o&&(p-=a.width+s.width,f-=a.height+s.height),{x:Math.round((l-h)/p*n.width/i),y:Math.round((c-d)/f*n.height/i)}}const mr=e=>Math.round(10*e)/10;function gr(e,t,n,i){const r=hr(e),o=pr(r,"margin"),a=ur(r.maxWidth,e,"clientWidth")||yn,s=ur(r.maxHeight,e,"clientHeight")||yn,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const o=e&&cr(e);if(o){const e=o.getBoundingClientRect(),a=hr(o),s=pr(a,"border","width"),l=pr(a,"padding");t=e.width-l.width-s.width,n=e.height-l.height-s.height,i=ur(a.maxWidth,o,"clientWidth"),r=ur(a.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||yn,maxHeight:r||yn}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=pr(r,"border","width"),t=pr(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-o.width),u=Math.max(0,i?c/i:u-o.height),c=mr(Math.min(c,a,l.maxWidth)),u=mr(Math.min(u,s,l.maxHeight)),c&&!u&&(u=mr(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=mr(Math.floor(u*i))),{width:c,height:u}}function yr(e,t,n){const i=t||1,r=mr(e.height*i),o=mr(e.width*i);e.height=mr(e.height),e.width=mr(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||a.height!==r||a.width!==o)&&(e.currentDevicePixelRatio=i,a.height=r,a.width=o,e.ctx.setTransform(i,0,0,i,0,0),!0)}const vr=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};lr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(gV){}return e}();function _r(e,t){const n=function(e,t){return hr(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function xr(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function br(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function wr(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},a=xr(e,r,n),s=xr(r,o,n),l=xr(o,t,n),c=xr(a,s,n),u=xr(s,l,n);return xr(c,u,n)}function Dr(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Er(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Cr(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Ar(e){return"angle"===e?{between:Nn,compare:In,normalize:jn}:{between:Bn,compare:(e,t)=>e-t,normalize:e=>e}}function Sr(e){let{start:t,end:n,count:i,loop:r,style:o}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:o}}function Tr(e,t,n){if(!n)return[e];const{property:i,start:r,end:o}=n,a=t.length,{compare:s,between:l,normalize:c}=Ar(i),{start:u,end:h,loop:d,style:p}=function(e,t,n){const{property:i,start:r,end:o}=n,{between:a,normalize:s}=Ar(i),l=t.length;let c,u,{start:h,end:d,loop:p}=e;if(p){for(h+=l,d+=l,c=0,u=l;c<u&&a(s(t[h%l][i]),r,o);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:p,style:e.style}}(e,t,n),f=[];let m,g,y,v=!1,_=null;const x=()=>v||l(r,y,m)&&0!==s(r,y),b=()=>!v||0===s(o,m)||l(o,y,m);for(let w=u,D=u;w<=h;++w)g=t[w%a],g.skip||(m=c(g[i]),m!==y&&(v=l(m,r,o),null===_&&x()&&(_=0===s(m,r)?w:D),null!==_&&b()&&(f.push(Sr({start:_,end:w,loop:d,count:a,style:p})),_=null),D=w,y=m));return null!==_&&f.push(Sr({start:_,end:h,loop:d,count:a,style:p})),f}function Fr(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const o=Tr(i[r],e.points,t);o.length&&n.push(...o)}return n}function kr(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),o=Pr(e.options),{_datasetIndex:a,options:{spanGaps:s}}=e,l=n.length,c=[];let u=o,h=t[0].start,d=h;function p(e,t,i,r){const o=s?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=o;for(;n[t%l].skip;)t+=o;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,h=t%l)}}for(const f of t){h=s?h:f.start;let e,t=n[h%l];for(d=h+1;d<=f.end;d++){const o=n[d%l];e=Pr(i.setContext(Ri(r,{type:"segment",p0:t,p1:o,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),Mr(e,u)&&p(h,d-1,f.loop,u),t=o,u=e}h<d-1&&p(h,d-1,f.loop,u)}return c}(e,t,n,i):t}function Pr(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Mr(e,t){if(!t)return!1;const n=[],i=function(e,t){return ei(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Ir(e,t,n){return e.options.clip?e[n]:t[n]}function jr(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Ir(n,t,"left"),right:Ir(n,t,"right"),top:Ir(i,t,"top"),bottom:Ir(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class Nr{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],o=t.duration;r.forEach(i=>i({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Zn.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,a=r.length-1,s=!1;for(;a>=0;--a)o=r[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),s=!0):(r[a]=r[r.length-1],r.pop());s&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Or=new Nr;const Br="transparent",Lr={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=ti(e||Br),r=i.valid&&ti(t||Br);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class zr{constructor(e,t,n,i){const r=t[n];i=zi([e.to,i,r,e.from]);const o=zi([e.from,r,i]);this._active=!0,this._fn=e.fn||Lr[e.type||typeof o],this._easing=Jn[e.easing]||Jn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=zi([e.to,t,i,e.from]),this._from=zi([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let s;if(this._active=r!==a&&(o||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=r:(s=t/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(r,a,s))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class Rr{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Wt(e))return;const t=Object.keys(fi.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Wt(r))return;const o={};for(const e of t)o[e]=r[e];(Gt(r.properties)&&r.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,o)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const l=o[s];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new zr(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Or.add(this._chart,n),!0):void 0}}function Vr(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:i?o:r,end:i?r:o}}function Ur(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function qr(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,o="single"===i.mode;let a,s,l,c;if(null===t)return;let u=!1;for(a=0,s=r.length;a<s;++a){if(l=+r[a],l===n){if(u=!0,i.all)continue;break}c=e.values[l],Yt(c)&&(o||0===t||Dn(t)===Dn(c))&&(t+=c)}return u||i.all?t:0}function Zr(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Hr(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function Gr(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function Wr(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=i,l=o.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,a,i),h=t.length;let d;for(let p=0;p<h;++p){const e=t[p],{[l]:n,[c]:o}=e;d=(e._stacks||(e._stacks={}))[c]=Hr(r,u,n),d[s]=o,d._top=Gr(d,a,!0,i.type),d._bottom=Gr(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[s]=o}}function Yr(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function Xr(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const Kr=e=>"reset"===e||"none"===e,$r=(e,t)=>t?e:Object.assign({},e);class Qr{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zr(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Xr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=Kt(n.xAxisID,Yr(e,"x")),o=t.yAxisID=Kt(n.yAxisID,Yr(e,"y")),a=t.rAxisID=Kt(n.rAxisID,Yr(e,"r")),s=t.indexAxis,l=t.iAxisID=i(s,r,o,a),c=t.vAxisID=i(s,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Un(this._data,this),e._stacked&&Xr(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Wt(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",o="x"===i.axis?"x":"y",a=Object.keys(e),s=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],s[l]={[r]:u,[o]:e[u]};return s}(t,e)}else if(n!==t){if(n){Un(n,this);const e=this._cachedMeta;Xr(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Vn.forEach(t=>{const n="_onData"+un(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];const a=i.apply(this,r);return e._chartjs.listeners.forEach(e=>{"function"===typeof e[n]&&e[n](...r)}),a}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=Zr(t.vScale,t),t.stack!==n.stack&&(i=!0,Xr(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(Wr(this,t._parsed),t._stacked=Zr(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let s,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Gt(i[e])?this.parseArrayData(n,i,e,t):Wt(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[a]||h&&l[a]<h[a];for(s=0;s<t;++s)n._parsed[s+e]=l=c[s],u&&(r()&&(u=!1),h=l);n._sorted=u}o&&Wr(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:o}=e,a=r.axis,s=o.axis,l=r.getLabels(),c=r===o,u=new Array(i);let h,d,p;for(h=0,d=i;h<d;++h)p=h+n,u[h]={[a]:c||r.parse(l[p],p),[s]:o.parse(t[p],p)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:o}=e,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=t[c],a[s]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(e,t,n,i){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(cn(d,a),h),y:o.parse(cn(d,s),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,o=t[e.axis];return qr({keys:Ur(i,!0),values:t._stacks[e.axis]._visualValues},o,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let o=null===r?NaN:r;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,o=qr(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,o=i.length,a=this._getOtherScale(e),s=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Ur(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function p(){d=i[h];const t=d[a.axis];return!Yt(d[e.axis])||c>t||u<t}for(h=0;h<o&&(p()||(this.updateRangeFromParsed(l,e,d,s),!r));++h);if(r)for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(l,e,d,s);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=t.length;i<r;++i)o=t[i][e.axis],Yt(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Wt(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(Kt(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=Vr(e,n),r=Vr(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,s),c=a;c<a+s;++c){const t=i[c];t.hidden||(t.active&&l?o.push(t):t.draw(e,r))}for(c=0;c<o.length;++c)o[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return Ri(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Ri(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,o=e+"-"+t,a=r[o],s=this.enableOptionSharing&&hn(n);if(a)return $r(a,s);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(fi.elements[e]),p=l.resolveNamedOptions(h,d,()=>this.getContext(n,i,t),u);return p.$shared&&(p.$shared=s,r[o]=Object.freeze($r(p,s))),p}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,o="animation-".concat(t),a=r[o];if(a)return a;let s;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),o=i.getOptionScopes(this.getDataset(),r);s=i.createResolver(o,this.getContext(e,n,t))}const l=new Rr(i,s&&s.animations);return s&&s._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Kr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:o}}updateElement(e,t,n,i){Kr(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!Kr(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,s,l]of this._syncList)this[a](s,l);this._syncList=[];const i=n.length,r=t.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,o=e+t;let a;const s=e=>{for(e.length+=t,a=e.length-1;a>=o;a--)e[a]=e[a-t]};for(s(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&Xr(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Jr(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=qn(i.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let i,r,o,a,s=t._length;const l=()=>{32767!==o&&-32768!==o&&(hn(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return s}function eo(e,t,n,i){return Gt(e)?function(e,t,n,i){const r=n.parse(e[0],i),o=n.parse(e[1],i),a=Math.min(r,o),s=Math.max(r,o);let l=a,c=s;Math.abs(a)>Math.abs(s)&&(l=s,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:o,min:a,max:s}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function to(e,t,n,i){const r=e.iScale,o=e.vScale,a=r.getLabels(),s=r===o,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=s||r.parse(a[c],c),l.push(eo(d,h,o,c));return l}function no(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function io(e,t,n,i){let r=t.borderSkipped;const o={};if(!r)return void(e.borderSkipped=o);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:s,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,o;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:t,top:r,bottom:o}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(o[ro(u,a,s,l)]=!0,r=c)),o[ro(r,a,s,l)]=!0,e.borderSkipped=o}function ro(e,t,n,i){var r,o,a;return i?(a=n,e=oo(e=(r=e)===(o=t)?a:r===a?o:r,n,t)):e=oo(e,t,n),e}function oo(e,t,n){return"start"===e?t:"end"===e?n:e}function ao(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}Se(Qr,"defaults",{}),Se(Qr,"datasetElementType",null),Se(Qr,"dataElementType",null);class so extends Qr{parsePrimitiveData(e,t,n,i){return to(e,t,n,i)}parseArrayData(e,t,n,i){return to(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===r.axis?a:s,c="x"===o.axis?a:s,u=[];let h,d,p,f;for(h=n,d=n+i;h<d;++h)f=t[h],p={},p[r.axis]=r.parse(cn(f,l),h),u.push(eo(cn(f,c),p,o,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),o=r._custom,a=no(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:o,_cachedMeta:{vScale:a}}=this,s=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=r||Ht(t[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),p=this._calculateBarIndexPixels(d,c),f=(t._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!f||no(t._custom)||o===f._top||o===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};h&&(m.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const g=m.options||e[d].options;io(m,g,f,o),ao(m,g,c.ratio),this.updateElement(e[d],d,m,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),s=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===s),i=t&&t[e.vScale.axis];if(Ht(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===o.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&o.push(c.stack),c.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Kt("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,o;for(r=0,o=t.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||Jr(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,s=this.getParsed(e),l=s._custom,c=no(l);let u,h,d=s[t.axis],p=0,f=n?this.applyStack(t,s,n):d;f!==d&&(p=f-d,f=d),c&&(d=l.barStart,f=l.barEnd-l.barStart,0!==d&&Dn(d)!==Dn(l.barEnd)&&(p=0),p+=d);const m=Ht(r)||c?p:r;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):g,h=u-g,Math.abs(h)<o){h=function(e,t,n){return 0!==e?Dn(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,a)*o,d===a&&(g-=h/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),p=Math.max(e,r);g=Math.max(Math.min(g,p),l),u=g+h,n&&!c&&(s._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=Dn(h)*t.getLineWidthForValue(a)/2;g+=e,h-=e}return{size:h,base:g,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,o=Kt(i.maxBarThickness,1/0);let a,s;const l=this._getAxisCount();if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,o=r[e];let a=e>0?r[e-1]:null,s=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===a&&(a=o-(null===s?t.end-t.start:s-o)),null===s&&(s=o+o-a);const c=o-(o-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n*l):function(e,t,n,i){const r=n.barThickness;let o,a;return Ht(r)?(o=t.min*n.categoryPercentage,a=n.barPercentage):(o=r*i,a=1),{chunk:o/i,ratio:a,start:t.pixels[e]-o/2}}(e,t,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(Kt(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+h;a=c.start+c.chunk*d+c.chunk/2,s=Math.min(o,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),s=Math.min(o,t.min*t.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}Se(so,"id","bar"),Se(so,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Se(so,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class lo extends Qr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let o=0;o<r.length;o++){const e=t[n+o];r[o]._custom=Kt(e[2],this.resolveDataElementOptions(o+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let o=0;o<r.length;o++){const e=t[n+o];r[o]._custom=Kt(e&&e.r&&+e.r,this.resolveDataElementOptions(o+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),s=r.getLabelForValue(o.y),l=o._custom;return{label:n[e]||"",value:"("+a+", "+s+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(t,i),c=o.axis,u=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!r&&this.getParsed(h),d={},p=d[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),f=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(p)||isNaN(f),l&&(d.options=s||this.resolveDataElementOptions(h,t.active?"active":i),r&&(d.options.radius=0)),this.updateElement(t,h,d,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Kt(n&&n._custom,r),i}}Se(lo,"id","bubble"),Se(lo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Se(lo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class co extends Qr{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,o,a=e=>+n[e];if(Wt(n[e])){const{key:e="value"}=this._parsing;a=t=>+cn(n[t],e)}for(r=e,o=e+t;r<o;++r)i._parsed[r]=a(r)}}_getRotation(){return Tn(this.options.rotation-90)}_getCircumference(){return Tn(this.options.circumference)}_getRotationExtents(){let e=mn,t=-mn;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:p,offsetY:f}=function(e,t,n){let i=1,r=1,o=0,a=0;if(t<mn){const s=e,l=s+t,c=Math.cos(s),u=Math.sin(s),h=Math.cos(l),d=Math.sin(l),p=(e,t,i)=>Nn(e,s,l,!0)?1:Math.max(t,t*n,i,i*n),f=(e,t,i)=>Nn(e,s,l,!0)?-1:Math.min(t,t*n,i,i*n),m=p(0,c,h),g=p(_n,u,d),y=f(fn,c,h),v=f(fn+_n,u,d);i=(m-y)/2,r=(g-v)/2,o=-(m+y)/2,a=-(g+v)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:a}}(u,c,s),m=(n.width-o)/h,g=(n.height-o)/d,y=Math.max(Math.min(m,g)/2,0),v=$t(this.options.radius,y),_=(v-Math.max(v*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=f*v,i.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*l,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/mn)}updateElements(e,t,n,i){const r="reset"===i,o=this.chart,a=o.chartArea,s=o.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&s.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,r);for(m=t;m<t+n;++m){const t=this._circumference(m,r),n=e[m],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:d,innerRadius:h};f&&(o.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,o,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?mn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ai(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,o,a,s;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),e=o.data,a=o.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)s=a.resolveDataElementOptions(i),"inner"!==s.borderAlign&&(t=Math.max(t,s.borderWidth||0,s.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Kt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Se(co,"id","doughnut"),Se(co,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Se(co,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Se(co,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:l.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(s),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:i,pointStyle:n,borderRadius:o&&(a||l.borderRadius),index:s}}):[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class uo extends Qr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:s}=Yn(t,i,o);this._drawStart=a,this._drawCount=s,Xn(t)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(i,a,s,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=o.axis,d=a.axis,{spanGaps:p,segment:f}=this.options,m=An(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i,y=t+n,v=e.length;let _=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],p=g?n:{};if(x<t||x>=y){p.skip=!0;continue}const v=this.getParsed(x),b=Ht(v[d]),w=p[h]=o.getPixelForValue(v[h],x),D=p[d]=r||b?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,v,s):v[d],x);p.skip=isNaN(w)||isNaN(D)||b,p.stop=x>0&&Math.abs(v[h]-_[h])>m,f&&(p.parsed=v,p.raw=l.data[x]),u&&(p.options=c||this.resolveDataElementOptions(x,n.active?"active":i)),g||this.updateElement(n,x,p,i),_=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Se(uo,"id","line"),Se(uo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Se(uo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ho extends Qr{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ai(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return er.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,i){const r="reset"===i,o=this.chart,a=o.options.animation,s=this._cachedMeta.rScale,l=s.xCenter,c=s.yCenter,u=s.getIndexAngle(0)-.5*fn;let h,d=u;const p=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,i,p);for(h=t;h<t+n;h++){const t=e[h];let n=d,f=d+this._computeAngle(h,i,p),m=o.getDataVisibility(h)?s.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=f,r&&(a.animateScale&&(m=0),a.animateRotate&&(n=f=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(h,t.active?"active":i)};this.updateElement(t,h,g,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Tn(this.resolveDataElementOptions(e,t).angle||n):0}}Se(ho,"id","polarArea"),Se(ho,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Se(ho,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const o=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class po extends co{}Se(po,"id","pie"),Se(po,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class fo extends Qr{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return er.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,o,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,o="reset"===i;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":i),s=r.getPointPositionForValue(a,this.getParsed(a).r),l=o?r.xCenter:s.x,c=o?r.yCenter:s.y,u={x:l,y:c,angle:s.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,i)}}}Se(fo,"id","radar"),Se(fo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Se(fo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class mo extends Qr{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),s=r.getLabelForValue(o.y);return{label:n[e]||"",value:"("+a+", "+s+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:o}=Yn(t,n,i);if(this._drawStart=r,this._drawCount=o,Xn(t)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:o}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=o.axis,p=a.axis,{spanGaps:f,segment:m}=this.options,g=An(f)?f:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let v=t>0&&this.getParsed(t-1);for(let _=t;_<t+n;++_){const t=e[_],n=this.getParsed(_),c=y?t:{},f=Ht(n[p]),x=c[d]=o.getPixelForValue(n[d],_),b=c[p]=r||f?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,n,s):n[p],_);c.skip=isNaN(x)||isNaN(b)||f,c.stop=_>0&&Math.abs(n[d]-v[d])>g,m&&(c.parsed=n,c.raw=l.data[_]),h&&(c.options=u||this.resolveDataElementOptions(_,t.active?"active":i)),y||this.updateElement(t,_,c,i),v=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,o)/2}}Se(mo,"id","scatter"),Se(mo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Se(mo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function go(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class yo{static override(e){Object.assign(yo.prototype,e)}constructor(e){Se(this,"options",void 0),this.options=e||{}}init(){}formats(){return go()}parse(){return go()}format(){return go()}add(){return go()}diff(){return go()}startOf(){return go()}endOf(){return go()}}var vo=yo;function _o(e,t,n,i){const{controller:r,data:o,_sorted:a}=e,s=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(s&&t===s.axis&&"r"!==t&&a&&o.length){const a=s._reversePixels?Rn:zn;if(!i){const i=a(o,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,o=n.slice(0,i.lo+1).reverse().findIndex(e=>!Ht(e[t.axis]));i.lo-=Math.max(0,o);const a=n.slice(i.hi).findIndex(e=>!Ht(e[t.axis]));i.hi+=Math.max(0,a)}return i}if(r._sharedOptions){const e=o[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=a(o,t,n-i),r=a(o,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:o.length-1}}function xo(e,t,n,i,r){const o=e.getSortedVisibleDatasetMetas(),a=n[t];for(let s=0,l=o.length;s<l;++s){const{index:e,data:n}=o[s],{lo:l,hi:c}=_o(o[s],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function bo(e,t,n,i,r){const o=[];if(!r&&!e.isPointInArea(t))return o;return xo(e,n,t,function(n,a,s){(r||bi(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&o.push({element:n,datasetIndex:a,index:s})},!0),o}function wo(e,t,n,i,r,o){let a=[];const s=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,o=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return xo(e,n,t,function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!o||e.isPointInArea(d))&&!h)return;const p=s(t,d);p<l?(a=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function Do(e,t,n,i,r,o){return o||e.isPointInArea(t)?"r"!==n||i?wo(e,t,n,i,r,o):function(e,t,n,i){let r=[];return xo(e,n,t,function(e,n,o){const{startAngle:a,endAngle:s}=e.getProps(["startAngle","endAngle"],i),{angle:l}=Pn(e,{x:t.x,y:t.y});Nn(l,a,s)&&r.push({element:e,datasetIndex:n,index:o})}),r}(e,t,n,r):[]}function Eo(e,t,n,i,r){const o=[],a="x"===n?"inXRange":"inYRange";let s=!1;return xo(e,n,t,(e,i,l)=>{e[a]&&e[a](t[n],r)&&(o.push({element:e,datasetIndex:i,index:l}),s=s||e.inRange(t.x,t.y,r))}),i&&!s?[]:o}var Co={evaluateInteractionItems:xo,modes:{index(e,t,n,i){const r=fr(t,e),o=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?bo(e,r,o,i,a):Do(e,r,o,!1,i,a),l=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=s[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const r=fr(t,e),o=n.axis||"xy",a=n.includeInvisible||!1;let s=n.intersect?bo(e,r,o,i,a):Do(e,r,o,!1,i,a);if(s.length>0){const t=s[0].datasetIndex,n=e.getDatasetMeta(t).data;s=[];for(let e=0;e<n.length;++e)s.push({element:n[e],datasetIndex:t,index:e})}return s},point:(e,t,n,i)=>bo(e,fr(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=fr(t,e),o=n.axis||"xy",a=n.includeInvisible||!1;return Do(e,r,o,n.intersect,i,a)},x:(e,t,n,i)=>Eo(e,fr(t,e),"x",n.intersect,i),y:(e,t,n,i)=>Eo(e,fr(t,e),"y",n.intersect,i)}};const Ao=["left","top","right","bottom"];function So(e,t){return e.filter(e=>e.pos===t)}function To(e,t){return e.filter(e=>-1===Ao.indexOf(e.pos)&&e.box.axis===t)}function Fo(e,t){return e.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function ko(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!Ao.includes(i))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,a,s;for(o=0,a=e.length;o<a;++o){s=e[o];const{fullSize:a}=s.box,l=n[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*i:a&&t.availableWidth,s.height=r):(s.width=i,s.height=c?c*r:a&&t.availableHeight)}return n}function Po(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Mo(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Io(e,t,n,i){const{pos:r,box:o}=n,a=e.maxPadding;if(!Wt(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[r]+=n.size}o.getPadding&&Mo(a,o.getPadding());const s=Math.max(0,t.outerWidth-Po(a,e,"left","right")),l=Math.max(0,t.outerHeight-Po(a,e,"top","bottom")),c=s!==e.w,u=l!==e.h;return e.w=s,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function jo(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function No(e,t,n,i){const r=[];let o,a,s,l,c,u;for(o=0,a=e.length,c=0;o<a;++o){s=e[o],l=s.box,l.update(s.width||t.w,s.height||t.h,jo(s.horizontal,t));const{same:a,other:h}=Io(t,n,s,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(s)}return c&&No(r,t,n,i)||u}function Oo(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Bo(e,t,n,i){const r=n.padding;let{x:o,y:a}=t;for(const s of e){const e=s.box,l=i[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const i=t.w*c,o=l.size||e.height;hn(l.start)&&(a=l.start),e.fullSize?Oo(e,r.left,a,n.outerWidth-r.right-r.left,o):Oo(e,t.left+l.placed,a,i,o),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*c,a=l.size||e.width;hn(l.start)&&(o=l.start),e.fullSize?Oo(e,o,r.top,a,n.outerHeight-r.bottom-r.top):Oo(e,o,t.top+l.placed,a,i),l.start=o,l.placed+=i,o=e.right}}t.x=o,t.y=a}var Lo={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Bi(e.options.layout.padding),o=Math.max(t-r.width,0),a=Math.max(n-r.height,0),s=function(e){const t=function(e){const t=[];let n,i,r,o,a,s;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:o,options:{stack:a,stackWeight:s=1}}=r),t.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&o+a,stackWeight:s});return t}(e),n=Fo(t.filter(e=>e.box.fullSize),!0),i=Fo(So(t,"left"),!0),r=Fo(So(t,"right")),o=Fo(So(t,"top"),!0),a=Fo(So(t,"bottom")),s=To(t,"x"),l=To(t,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(a).concat(s),chartArea:So(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(a).concat(s)}}(e.boxes),l=s.vertical,c=s.horizontal;Jt(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},r);Mo(d,Bi(i));const p=Object.assign({maxPadding:d,w:o,h:a,x:r.left,y:r.top},r),f=ko(l.concat(c),h);No(s.fullSize,p,h,f),No(l,p,h,f),No(c,p,h,f)&&No(l,p,h,f),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),Bo(s.leftAndTop,p,h,f),p.x+=p.w,p.y+=p.h,Bo(s.rightAndBottom,p,h,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Jt(s.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class zo{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Ro extends zo{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Vo="$chartjs",Uo={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qo=e=>null===e||""===e;const Zo=!!vr&&{passive:!0};function Ho(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Zo)}function Go(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Wo(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Go(n.addedNodes,i),t=t&&!Go(n.removedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Yo(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Go(n.removedNodes,i),t=t&&!Go(n.addedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Xo=new Map;let Ko=0;function $o(){const e=window.devicePixelRatio;e!==Ko&&(Ko=e,Xo.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Qo(e,t,n){const i=e.canvas,r=i&&cr(i);if(!r)return;const o=Hn((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||o(n,i)});return a.observe(r),function(e,t){Xo.size||window.addEventListener("resize",$o),Xo.set(e,t)}(e,o),a}function Jo(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Xo.delete(e),Xo.size||window.removeEventListener("resize",$o)}(e)}function ea(e,t,n){const i=e.canvas,r=Hn(t=>{null!==e.ctx&&n(function(e,t){const n=Uo[e.type]||e.type,{x:i,y:r}=fr(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,Zo)}(i,t,r),r}class ta extends zo{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Vo]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",qo(r)){const t=_r(e,"width");void 0!==t&&(e.width=t)}if(qo(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=_r(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Vo])return!1;const n=t[Vo].initial;["height","width"].forEach(e=>{const i=n[e];Ht(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[Vo],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:Wo,detach:Yo,resize:Qo}[t]||ea;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Jo,detach:Jo,resize:Jo}[t]||Ho)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return gr(e,t,n,i)}isAttached(e){const t=e&&cr(e);return!(!t||!t.isConnected)}}class na{constructor(){Se(this,"x",void 0),Se(this,"y",void 0),Se(this,"active",!1),Se(this,"options",void 0),Se(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return An(this.x)&&An(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function ia(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],a=o.length,s=o[0],l=o[a-1],c=[];if(a>r)return function(e,t,n,i){let r,o=0,a=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===a&&(t.push(e[r]),o++,a=n[o*i])}(t,c,o,a/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const o=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let a=0,s=o.length-1;a<s;a++){const e=o[a];if(e>r)return e}return Math.max(r,1)}(o,t,r);if(a>0){let e,n;const i=a>1?Math.round((l-s)/(a-1)):null;for(ra(t,c,u,Ht(i)?0:s-i,s),e=0,n=a-1;e<n;e++)ra(t,c,u,o[e],o[e+1]);return ra(t,c,u,l,Ht(i)?t.length:l+i),c}return ra(t,c,u),c}function ra(e,t,n,i,r){const o=Kt(i,0),a=Math.min(Kt(r,e.length),e.length);let s,l,c,u=0;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),c=o;c<0;)u++,c=Math.round(o+u*n);for(l=Math.max(o,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(o+u*n))}Se(na,"defaults",{}),Se(na,"defaultRoutes",void 0);const oa=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,aa=(e,t)=>Math.min(t||e,e);function sa(e,t){const n=[],i=e.length/t,r=e.length;let o=0;for(;o<r;o+=i)n.push(e[Math.floor(o)]);return n}function la(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),o=e._startPixel,a=e._endPixel,s=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-o,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<o-s||c>a+s)))return c}function ca(e){return e.drawTicks?e.tickLength:0}function ua(e,t){if(!e.display)return 0;const n=Li(e.font,t),i=Bi(e.padding);return(Gt(e.text)?e.text.length:1)*n.lineHeight+i.height}function ha(e,t,n){let i=Gn(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class da extends na{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Xt(e,Number.POSITIVE_INFINITY),t=Xt(t,Number.NEGATIVE_INFINITY),n=Xt(n,Number.POSITIVE_INFINITY),i=Xt(i,Number.NEGATIVE_INFINITY),{min:Xt(e,n),max:Xt(t,i),minDefined:Yt(e),maxDefined:Yt(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let s=0,l=a.length;s<l;++s)t=a[s].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),o||(i=Math.max(i,t.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:Xt(n,Xt(i,n)),max:Xt(i,Xt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qt(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,o=$t(t,(r-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(o)),max:a(r,o)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?sa(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=ia(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qt(this.options.afterUpdate,[this])}beforeSetDimensions(){Qt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Qt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Qt(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Qt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=aa(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let o,a,s,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=On(this.chart.width-u,0,this.maxWidth);o=e.offset?this.maxWidth/n:d/(n-1),u+6>o&&(o=d/(n-(e.offset?.5:1)),a=this.maxHeight-ca(e.grid)-t.padding-ua(e.title,this.chart.options.font),s=Math.sqrt(u*u+h*h),l=Fn(Math.min(Math.asin(On((c.highest.height+6)/o,-1,1)),Math.asin(On(a/s,-1,1))-Math.asin(On(h/s,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Qt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=ua(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=ca(r)+o):(e.height=this.maxHeight,e.width=ca(r)+o),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:o}=this._getLabelSizes(),s=2*n.padding,l=Tn(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*o.height;e.height=Math.min(this.maxHeight,e.height+t+s)}else{const t=n.mirror?0:c*r.width+u*o.height;e.width=Math.min(this.maxWidth,e.width+t+s)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;s?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+o)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Ht(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=sa(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],s=Math.floor(t/aa(t,n));let l,c,u,h,d,p,f,m,g,y,v,_=0,x=0;for(l=0;l<t;l+=s){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=p=d.string,f=r[p]=r[p]||{data:{},gc:[]},m=d.lineHeight,g=y=0,Ht(h)||Gt(h)){if(Gt(h))for(c=0,u=h.length;c<u;++c)v=h[c],Ht(v)||Gt(v)||(g=mi(i,f.data,f.gc,g,v),y+=m)}else g=mi(i,f.data,f.gc,g,h),y=m;o.push(g),a.push(y),_=Math.max(g,_),x=Math.max(y,x)}!function(e,t){Jt(e,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}(r,t);const b=o.indexOf(_),w=a.indexOf(x),D=e=>({width:o[e]||0,height:a[e]||0});return{first:D(0),last:D(t-1),widest:D(b),highest:D(w),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return On(e,-32768,32767)}(this._alignToPixels?yi(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Ri(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Ri(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Tn(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,s=r?r.highest.height+o:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:a}=i,s=r.offset,l=this.isHorizontal(),c=this.ticks.length+(s?1:0),u=ca(r),h=[],d=a.setContext(this.getContext()),p=d.display?d.width:0,f=p/2,m=function(e){return yi(n,e,p)};let g,y,v,_,x,b,w,D,E,C,A,S;if("top"===o)g=m(this.bottom),b=this.bottom-u,D=g-f,C=m(e.top)+f,S=e.bottom;else if("bottom"===o)g=m(this.top),C=e.top,S=m(e.bottom)-f,b=g+f,D=this.top+u;else if("left"===o)g=m(this.right),x=this.right-u,w=g-f,E=m(e.left)+f,A=e.right;else if("right"===o)g=m(this.left),E=e.left,A=m(e.right)-f,x=g+f,w=this.left+u;else if("x"===t){if("center"===o)g=m((e.top+e.bottom)/2+.5);else if(Wt(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}C=e.top,S=e.bottom,b=g+f,D=b+u}else if("y"===t){if("center"===o)g=m((e.left+e.right)/2);else if(Wt(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}x=g-f,w=x-u,E=e.left,A=e.right}const T=Kt(i.ticks.maxTicksLimit,c),F=Math.max(1,Math.ceil(c/T));for(y=0;y<c;y+=F){const e=this.getContext(y),t=r.setContext(e),i=a.setContext(e),o=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,p=t.tickWidth,f=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=la(this,y,s),void 0!==v&&(_=yi(n,v,o),l?x=w=E=A=_:b=D=C=S=_,h.push({tx1:x,ty1:b,tx2:w,ty2:D,x1:E,y1:C,x2:A,y2:S,width:o,color:c,borderDash:u,borderDashOffset:d,tickWidth:p,tickColor:f,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:l,padding:c,mirror:u}=r,h=ca(n.grid),d=h+c,p=u?-c:d,f=-Tn(this.labelRotation),m=[];let g,y,v,_,x,b,w,D,E,C,A,S,T="middle";if("top"===i)b=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===i)b=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);w=e.textAlign,x=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);w=e.textAlign,x=e.x}else if("x"===t){if("center"===i)b=(e.top+e.bottom)/2+d;else if(Wt(i)){const e=Object.keys(i)[0],t=i[e];b=this.chart.scales[e].getPixelForValue(t)+d}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)x=(e.left+e.right)/2-d;else if(Wt(i)){const e=Object.keys(i)[0],t=i[e];x=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===s?T="top":"end"===s&&(T="bottom"));const F=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){v=a[g],_=v.label;const e=r.setContext(this.getContext(g));D=this.getPixelForTick(g)+r.labelOffset,E=this._resolveTickFontOptions(g),C=E.lineHeight,A=Gt(_)?_.length:1;const t=A/2,n=e.color,s=e.textStrokeColor,c=e.textStrokeWidth;let h,d=w;if(o?(x=D,"inner"===w&&(d=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),S="top"===i?"near"===l||0!==f?-A*C+C/2:"center"===l?-F.highest.height/2-t*C+C:-F.highest.height+C/2:"near"===l||0!==f?C/2:"center"===l?F.highest.height/2-t*C:F.highest.height-A*C,u&&(S*=-1),0===f||e.showLabelBackdrop||(x+=C/2*Math.sin(f))):(b=D,S=(1-A)*C/2),e.showLabelBackdrop){const t=Bi(e.backdropPadding),n=F.heights[g],i=F.widths[g];let r=S-t.top,o=0-t.left;switch(T){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":o-=i/2;break;case"right":o-=i;break;case"inner":g===y-1?o-=i:g>0&&(o-=i/2)}h={left:o,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:_,font:E,textOffset:S,options:{rotation:f,color:n,strokeColor:s,strokeWidth:c,textAlign:d,textBaseline:T,translation:[x,b],backdrop:h}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Tn(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=e+r,a=this._getLabelSizes().widest.width;let s,l;return"left"===t?i?(l=this.right+r,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l+=a)):(l=this.right-o,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l-=a)):(l=this.left+o,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,o=i.length;r<o;++r){const e=i[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=yi(e,this.left,o)-o/2,c=yi(e,this.right,a)+a/2,u=h=s):(u=yi(e,this.top,o)-o/2,h=yi(e,this.bottom,a)+a/2,l=c=s),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&wi(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;Ti(t,r.label,0,r.textOffset,n,e)}n&&Di(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=Li(n.font),o=Bi(n.padding),a=n.align;let s=r.lineHeight/2;"bottom"===t||"center"===t||Wt(t)?(s+=o.bottom,Gt(n.text)&&(s+=r.lineHeight*(n.text.length-1))):s+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:o,bottom:a,right:s,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,p,f=0;const m=a-r,g=s-o;if(e.isHorizontal()){if(d=Wn(i,o,s),Wt(n)){const e=Object.keys(n)[0],i=n[e];p=u[e].getPixelForValue(i)+m-t}else p="center"===n?(c.bottom+c.top)/2+m-t:oa(e,n,t);h=s-o}else{if(Wt(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-g+t}else d="center"===n?(c.left+c.right)/2-g+t:oa(e,n,t);p=Wn(i,a,r),f="left"===n?-_n:_n}return{titleX:d,titleY:p,maxWidth:h,rotation:f}}(this,s,t,a);Ti(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:ha(a,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Kt(e.grid&&e.grid.z,-1),i=Kt(e.border&&e.border.z,0);return this._isVisible()&&this.draw===da.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=t.length;r<o;++r){const o=t[r];o[n]!==this.id||e&&o.type!==e||i.push(o)}return i}_resolveTickFontOptions(e){return Li(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class pa{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=on(Object.create(null),[n?fi.get(n):{},fi.get(t),e.defaults]);fi.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),o=[e].concat(i).join("."),a=t[n].split("."),s=a.pop(),l=a.join(".");fi.route(o,r,l,s)})}(t,e.defaultRoutes);e.descriptors&&fi.describe(t,e.descriptors)}(e,o,n),this.override&&fi.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in fi[i]&&(delete fi[i][n],this.override&&delete ci[n])}}class fa{constructor(){this.controllers=new pa(Qr,"datasets",!0),this.elements=new pa(na,"elements"),this.plugins=new pa(Object,"plugins"),this.scales=new pa(da,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Jt(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=un(e);Qt(n["before"+i],[],n),t[e](n),Qt(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var ma=new fa;class ga{constructor(){this._init=void 0}notify(e,t,n,i){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Qt(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){Ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Kt(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(ma.plugins.items);for(let o=0;o<i.length;o++)n.push(ma.getPlugin(i[o]));const r=e.plugins||[];for(let o=0;o<r.length;o++){const e=r[o];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:o}=t;const a=[],s=e.getContext();for(const l of r){const t=l.id,r=ya(n[t],i);null!==r&&a.push({plugin:l,options:va(e.config,{plugin:l,local:o[t]},r,s)})}return a}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function ya(e,t){return t||!1!==e?!0===e?{}:e:null}function va(e,t,n,i){let{plugin:r,local:o}=t;const a=e.pluginScopeKeys(r),s=e.getOptionScopes(n,a);return o&&r.defaults&&s.push(r.defaults),e.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _a(e,t){const n=fi.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function xa(e){if("x"===e||"y"===e||"r"===e)return e}function ba(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function wa(e){if(xa(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n){const t=r.axis||ba(r.position)||e.length>1&&xa(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Da(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Ea(e,t){const n=ci[e.type]||{scales:{}},i=t.scales||{},r=_a(e.type,t),o=Object.create(null);return Object.keys(i).forEach(t=>{const a=i[t];if(!Wt(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const s=wa(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Da(e,"x",n[0])||Da(e,"y",n[0])}return{}}(t,e),fi.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(s,r),c=n.scales||{};o[t]=an(Object.create(null),[{axis:s},a,c[s],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,a=n.indexAxis||_a(r,t),s=(ci[r]||{}).scales||{};Object.keys(s).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||t;o[r]=o[r]||Object.create(null),an(o[r],[{axis:t},i[r],s[e]])})}),Object.keys(o).forEach(e=>{const t=o[e];an(t,[fi.scales[t.type],fi.scale])}),o}function Ca(e){const t=e.options||(e.options={});t.plugins=Kt(t.plugins,{}),t.scales=Ea(e,t)}function Aa(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Sa=new Map,Ta=new Set;function Fa(e,t){let n=Sa.get(e);return n||(n=t(),Sa.set(e,n),Ta.add(n)),n}const ka=(e,t,n)=>{const i=cn(t,n);void 0!==i&&e.add(i)};class Pa{constructor(e){this._config=function(e){return(e=e||{}).data=Aa(e.data),Ca(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Aa(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ca(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Fa(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return Fa("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return Fa("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return Fa("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,o=this._cachedScopes(e,n),a=o.get(t);if(a)return a;const s=new Set;t.forEach(t=>{e&&(s.add(e),t.forEach(t=>ka(s,e,t))),t.forEach(e=>ka(s,i,e)),t.forEach(e=>ka(s,ci[r]||{},e)),t.forEach(e=>ka(s,fi,e)),t.forEach(e=>ka(s,ui,e))});const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),Ta.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,ci[t]||{},fi.datasets[t]||{},{type:t},fi,ui]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:o,subPrefixes:a}=Ma(this._resolverCache,e,i);let s=o;if(function(e,t){const{isScriptable:n,isIndexable:i}=qi(e);for(const r of t){const t=n(r),o=i(r),a=(o||t)&&e[r];if(t&&(dn(a)||Ia(a))||o&&Gt(a))return!0}return!1}(o,t)){r.$shared=!1;s=Ui(o,n=dn(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=s[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=Ma(this._resolverCache,e,n);return Wt(t)?Ui(r,t,void 0,i):r}}function Ma(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let o=i.get(r);if(!o){o={resolver:Vi(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(r,o)}return o}const Ia=e=>Wt(e)&&Object.getOwnPropertyNames(e).some(t=>dn(e[t]));const ja=["top","bottom","left","right","chartArea"];function Na(e,t){return"top"===e||"bottom"===e||-1===ja.indexOf(e)&&"x"===t}function Oa(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Ba(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Qt(n&&n.onComplete,[e],t)}function La(e){const t=e.chart,n=t.options.animation;Qt(n&&n.onProgress,[e],t)}function za(e){return lr()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ra={},Va=e=>{const t=za(e);return Object.values(Ra).filter(e=>e.canvas===t).pop()};function Ua(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const o=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=o)}}}class qa{static register(){ma.add(...arguments),Za()}static unregister(){ma.remove(...arguments),Za()}constructor(e,t){const n=this.config=new Pa(t),i=za(e),r=Va(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!lr()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Ro:ta}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),s=a&&a.canvas,l=s&&s.height,c=s&&s.width;this.id=Zt(),this.ctx=a,this.canvas=s,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ga,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),o.resizeDelay||0),this._dataChanges=[],Ra[this.id]=this,a&&s?(Or.listen(this,"complete",Ba),Or.listen(this,"progress",La),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return Ht(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ma}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vi(this.canvas,this.ctx),this}stop(){return Or.stop(this),this}resize(e,t){Or.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,yr(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Qt(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){Jt(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],i=wa(e,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}}))),Jt(r,t=>{const r=t.options,o=r.id,a=wa(o,r),s=Kt(r.type,t.dtype);void 0!==r.position&&Na(r.position,a)===Na(t.dposition)||(r.position=t.dposition),i[o]=!0;let l=null;if(o in n&&n[o].type===s)l=n[o];else{l=new(ma.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),Jt(i,(e,t)=>{e||delete n[t]}),Jt(n,e=>{Lo.configure(this,e,e.options),Lo.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Oa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||_a(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=ma.getController(o),{datasetElementType:i,dataElementType:a}=fi.datasets[o];Object.assign(t,{dataElementType:ma.getElement(a),datasetElementType:i&&ma.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Jt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||Jt(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Oa("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Jt(this.scales,e=>{Lo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);pn(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){Ua(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!pn(i,n(r)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Lo.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Jt(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,dn(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Or.has(this)?this.attached&&!Or.running(this)&&Or.start(this):(this.draw(),Ba({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=jr(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&wi(t,i),e.controller.draw(),i&&Di(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return bi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=Co.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ri(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);hn(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Or.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),vi(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ra[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Jt(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Jt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Jt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,o,a,s;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=e.length;a<s;++a){o=e[a];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!en(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),o=r(t,e),a=n?e:r(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,o=t,a=this._getActiveElements(e,i,n,o),s=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,s);n&&(this._lastEvent=null,Qt(r.onHover,[e,a,this],this),s&&Qt(r.onClick,[e,a,this],this));const c=!en(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function Za(){return Jt(qa.instances,e=>e._plugins.invalidate())}function Ha(e,t,n,i){const r=function(e){return ji(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),o=(n-t)/2,a=Math.min(o,i*t/2),s=e=>{const t=(n-Math.min(o,e))*i/2;return On(e,0,Math.min(o,t))};return{outerStart:s(r.outerStart),outerEnd:s(r.outerEnd),innerStart:On(r.innerStart,0,a),innerEnd:On(r.innerEnd,0,a)}}function Ga(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Wa(e,t,n,i,r,o){const{x:a,y:s,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let p=0;const f=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;p=(f-(0!==e?f*e/(e+i):f))/2}const m=(f-Math.max(.001,f*h-n/fn)/h)/2,g=l+m+p,y=r-m-p,{outerStart:v,outerEnd:_,innerStart:x,innerEnd:b}=Ha(t,d,h,y-g),w=h-v,D=h-_,E=g+v/w,C=y-_/D,A=d+x,S=d+b,T=g+x/A,F=y-b/S;if(e.beginPath(),o){const t=(E+C)/2;if(e.arc(a,s,h,E,t),e.arc(a,s,h,t,C),_>0){const t=Ga(D,C,a,s);e.arc(t.x,t.y,_,C,y+_n)}const n=Ga(S,y,a,s);if(e.lineTo(n.x,n.y),b>0){const t=Ga(S,F,a,s);e.arc(t.x,t.y,b,y+_n,F+Math.PI)}const i=(y-b/d+(g+x/d))/2;if(e.arc(a,s,d,y-b/d,i,!0),e.arc(a,s,d,i,g+x/d,!0),x>0){const t=Ga(A,T,a,s);e.arc(t.x,t.y,x,T+Math.PI,g-_n)}const r=Ga(w,g,a,s);if(e.lineTo(r.x,r.y),v>0){const t=Ga(w,E,a,s);e.arc(t.x,t.y,v,g-_n,E)}}else{e.moveTo(a,s);const t=Math.cos(E)*h+a,n=Math.sin(E)*h+s;e.lineTo(t,n);const i=Math.cos(C)*h+a,r=Math.sin(C)*h+s;e.lineTo(i,r)}e.closePath()}function Ya(e,t,n,i,r){const{fullCircles:o,startAngle:a,circumference:s,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:p}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(o){Wa(e,t,n,i,m,r);for(let t=0;t<o;++t)e.stroke();isNaN(s)||(m=a+(s%mn||mn))}f&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:o,y:a,outerRadius:s,innerRadius:l}=t;let c=r/s;e.beginPath(),e.arc(o,a,s,i-c,n+c),l>r?(c=r/l,e.arc(o,a,l,n+c,i-c,!0)):e.arc(o,a,r,n+_n,i-_n),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-a>=fn&&0===p&&"miter"!==u&&function(e,t,n){const{startAngle:i,x:r,y:o,outerRadius:a,innerRadius:s,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/a,jn(i-n));if(e.beginPath(),e.arc(r,o,a-c/2,i+h/2,n-h/2),s>0){const t=Math.min(c/s,jn(i-n));e.arc(r,o,s+c/2,n-t/2,i+t/2,!0)}else{const t=Math.min(c/2,a*jn(i-n));if("round"===u)e.arc(r,o,t,n-fn/2,i+fn/2,!0);else if("bevel"===u){const a=2*t*t,s=-a*Math.cos(n+fn/2)+r,l=-a*Math.sin(n+fn/2)+o,c=a*Math.cos(i+fn/2)+r,u=a*Math.sin(i+fn/2)+o;e.lineTo(s,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),o||(Wa(e,t,n,i,m,r),e.stroke())}Se(qa,"defaults",fi),Se(qa,"instances",Ra),Se(qa,"overrides",ci),Se(qa,"registry",ma),Se(qa,"version","4.5.1"),Se(qa,"getChart",Va);class Xa extends na{constructor(e){super(),Se(this,"circumference",void 0),Se(this,"endAngle",void 0),Se(this,"fullCircles",void 0),Se(this,"innerRadius",void 0),Se(this,"outerRadius",void 0),Se(this,"pixelMargin",void 0),Se(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=Pn(i,{x:e,y:t}),{startAngle:a,endAngle:s,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=Kt(u,s-a),p=Nn(r,a,s)&&a!==s,f=d>=mn||p,m=Bn(o,l+h,c+h);return f&&m}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:s,spacing:l}=this.options,c=(i+r)/2,u=(o+a+l+s)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>mn?Math.floor(n/mn):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const s=i*(1-Math.sin(Math.min(fn,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:o,startAngle:a,circumference:s}=t;let l=t.endAngle;if(o){Wa(e,t,n,i,l,r);for(let t=0;t<o;++t)e.fill();isNaN(s)||(l=a+(s%mn||mn))}Wa(e,t,n,i,l,r),e.fill()}(e,this,s,r,o),Ya(e,this,s,r,o),e.restore()}}function Ka(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Kt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Kt(n.borderDash,t.borderDash)),e.lineDashOffset=Kt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Kt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Kt(n.borderWidth,t.borderWidth),e.strokeStyle=Kt(n.borderColor,t.borderColor)}function $a(e,t,n){e.lineTo(n.x,n.y)}function Qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:o=i-1}=n,{start:a,end:s}=t,l=Math.max(r,a),c=Math.min(o,s),u=r<a&&o<a||r>s&&o>s;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function Ja(e,t,n,i){const{points:r,options:o}=t,{count:a,start:s,loop:l,ilen:c}=Qa(r,n,i),u=function(e){return e.stepped?Ei:e.tension||"monotone"===e.cubicInterpolationMode?Ci:$a}(o);let h,d,p,{move:f=!0,reverse:m}=i||{};for(h=0;h<=c;++h)d=r[(s+(m?c-h:h))%a],d.skip||(f?(e.moveTo(d.x,d.y),f=!1):u(e,p,d,m,o.stepped),p=d);return l&&(d=r[(s+(m?c:0))%a],u(e,p,d,m,o.stepped)),!!l}function es(e,t,n,i){const r=t.points,{count:o,start:a,ilen:s}=Qa(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,p,f,m,g=0,y=0;const v=e=>(a+(c?s-e:e))%o,_=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(h=r[v(0)],e.moveTo(h.x,h.y)),u=0;u<=s;++u){if(h=r[v(u)],h.skip)continue;const t=h.x,n=h.y,i=0|t;i===d?(n<p?p=n:n>f&&(f=n),g=(y*g+t)/++y):(_(),e.lineTo(t,n),d=i,y=0,p=f=n),m=n}_()}function ts(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?es:Ja}Se(Xa,"id","arc"),Se(Xa,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Se(Xa,"defaultRoutes",{backgroundColor:"backgroundColor"}),Se(Xa,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const ns="function"===typeof Path2D;function is(e,t,n,i){ns&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),Ka(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:o}=t,a=ts(t);for(const s of r)Ka(e,o,s.style),e.beginPath(),a(e,t,s,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class rs extends na{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;sr(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const o=!!e._loop,{start:a,end:s}=function(e,t,n,i){let r=0,o=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(o+=r);o>r&&e[o%t].skip;)o--;return o%=t,{start:r,end:o}}(n,r,o,i);return kr(e,!0===i?[{start:a,end:s,loop:o}]:function(e,t,n,i){const r=e.length,o=[];let a,s=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(i=!1,o.push({start:t%r,end:(a-1)%r,loop:i}),t=s=n.stop?a:null):(s=a,l.skip&&(t=a)),l=n}return null!==s&&o.push({start:t%r,end:s%r,loop:i}),o}(n,a,s<a?s+r:s,!!e._fullLoop&&0===a&&s===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,o=Fr(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],s=function(e){return e.stepped?br:e.tension||"monotone"===e.cubicInterpolationMode?wr:xr}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const p=s(h,d,Math.abs((i-h[t])/(d[t]-h[t])),n.stepped);p[t]=e[t],a.push(p)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return ts(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=ts(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)o&=r(e,this,a,{start:t,end:t+n-1});return!!o}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),is(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function os(e,t,n,i){const r=e.options,{[n]:o}=e.getProps([n],i);return Math.abs(t-o)<r.radius+r.hitRadius}Se(rs,"id","line"),Se(rs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Se(rs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Se(rs,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class as extends na{constructor(e){super(),Se(this,"parsed",void 0),Se(this,"skip",void 0),Se(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return os(this,e,"x",t)}inYRange(e,t){return os(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!bi(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,_i(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ss(e,t){const{x:n,y:i,base:r,width:o,height:a}=e.getProps(["x","y","base","width","height"],t);let s,l,c,u,h;return e.horizontal?(h=a/2,s=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=o/2,s=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:s,top:c,right:l,bottom:u}}function ls(e,t,n,i){return e?0:On(t,n,i)}function cs(e){const t=ss(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,o=Ni(i);return{t:ls(r.top,o.top,0,n),r:ls(r.right,o.right,0,t),b:ls(r.bottom,o.bottom,0,n),l:ls(r.left,o.left,0,t)}}(e,n/2,i/2),o=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,o=Oi(r),a=Math.min(t,n),s=e.borderSkipped,l=i||Wt(r);return{topLeft:ls(!l||s.top||s.left,o.topLeft,0,a),topRight:ls(!l||s.top||s.right,o.topRight,0,a),bottomLeft:ls(!l||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:ls(!l||s.bottom||s.right,o.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function us(e,t,n,i){const r=null===t,o=null===n,a=e&&!(r&&o)&&ss(e,i);return a&&(r||Bn(t,a.left,a.right))&&(o||Bn(n,a.top,a.bottom))}function hs(e,t){e.rect(t.x,t.y,t.w,t.h)}function ds(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+o,h:e.h+a,radius:e.radius}}Se(as,"id","point"),Se(as,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Se(as,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class ps extends na{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=cs(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Fi:hs;var s;e.save(),o.w===r.w&&o.h===r.h||(e.beginPath(),a(e,ds(o,t,r)),e.clip(),a(e,ds(r,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,ds(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return us(this,e,t,n)}inXRange(e,t){return us(this,e,null,t)}inYRange(e,t){return us(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Se(ps,"id","bar"),Se(ps,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Se(ps,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function fs(e,t,n,i){if(i)return;let r=t[e],o=n[e];return"angle"===e&&(r=jn(r),o=jn(o)),{property:e,start:r,end:o}}function ms(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function gs(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function ys(e,t){let n=[],i=!1;return Gt(e)?(i=!0,n=e):n=function(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,o=[];return t.segments.forEach(e=>{let{start:t,end:a}=e;a=ms(t,a,r);const s=r[t],l=r[a];null!==i?(o.push({x:s.x,y:i}),o.push({x:l.x,y:i})):null!==n&&(o.push({x:n,y:s.y}),o.push({x:n,y:l.y}))}),o}(e,t),n.length?new rs({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function vs(e){return e&&!1!==e.fill}function _s(e,t,n){let i=e[t].fill;const r=[t];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Yt(i))return i;if(o=e[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function xs(e,t,n){const i=function(e){const t=e.options,n=t.fill;let i=Kt(n&&n.target,n);void 0===i&&(i=!!t.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(e);if(Wt(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Yt(r)&&Math.floor(r)===r?function(e,t,n,i){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=i)return!1;return n}(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function bs(e,t,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:a,last:s,point:l}=ws(o,t,"x");if(!(!l||a&&s))if(a)i.unshift(l);else if(e.push(l),!s)break}e.push(...i)}function ws(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],o=e.segments,a=e.points;let s=!1,l=!1;for(let c=0;c<o.length;c++){const e=o[c],t=a[e.start][n],i=a[e.end][n];if(Bn(r,t,i)){s=r===t,l=r===i;break}}return{first:s,last:l,point:i}}class Ds{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:r,radius:o}=this;return t=t||{start:0,end:mn},e.arc(i,r,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function Es(e){const{chart:t,fill:n,line:i}=e;if(Yt(n))return function(e,t){const n=e.getDatasetMeta(t),i=n&&e.isDatasetVisible(t);return i?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:i}=e,r=[],o=i.segments,a=i.points,s=function(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const e=i[r];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);s.push(ys({x:null,y:t.bottom},i));for(let l=0;l<o.length;l++){const e=o[l];for(let t=e.start;t<=e.end;t++)bs(r,a[t],s)}return new rs({points:r,options:{}})}(e);if("shape"===n)return!0;const r=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,o=i.reverse?t.max:t.min,a=function(e,t,n){let i;return i="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:Wt(e)?e.value:t.getBaseValue(),i}(n,t,o),s=[];if(i.grid.circular){const e=t.getPointPositionForValue(0,o);return new Ds({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<r;++l)s.push(t.getPointPositionForValue(l,a));return s}(e);return function(e){const{scale:t={},fill:n}=e,i=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:Wt(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Yt(i)){const e=t.isHorizontal();return{x:e?i:null,y:e?null:i}}return null}(e)}(e);return r instanceof Ds?r:ys(r,i)}function Cs(e,t,n){const i=Es(t),{chart:r,index:o,line:a,scale:s,axis:l}=t,c=a.options,u=c.fill,h=c.backgroundColor,{above:d=h,below:p=h}=u||{},f=r.getDatasetMeta(o),m=jr(r,f);i&&a.points.length&&(wi(e,n),function(e,t){const{line:n,target:i,above:r,below:o,area:a,scale:s,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let u=o;o!==r&&("x"===c?(As(e,i,a.top),Ts(e,{line:n,target:i,color:r,scale:s,property:c,clip:l}),e.restore(),e.save(),As(e,i,a.bottom)):"y"===c&&(Ss(e,i,a.left),Ts(e,{line:n,target:i,color:o,scale:s,property:c,clip:l}),e.restore(),e.save(),Ss(e,i,a.right),u=r));Ts(e,{line:n,target:i,color:u,scale:s,property:c,clip:l}),e.restore()}(e,{line:a,target:i,above:d,below:p,area:n,scale:s,axis:l,clip:m}),Di(e))}function As(e,t,n){const{segments:i,points:r}=t;let o=!0,a=!1;e.beginPath();for(const s of i){const{start:i,end:l}=s,c=r[i],u=r[ms(i,l,r)];o?(e.moveTo(c.x,c.y),o=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,s,{move:a}),a?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Ss(e,t,n){const{segments:i,points:r}=t;let o=!0,a=!1;e.beginPath();for(const s of i){const{start:i,end:l}=s,c=r[i],u=r[ms(i,l,r)];o?(e.moveTo(c.x,c.y),o=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,s,{move:a}),a?e.closePath():e.lineTo(n,u.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function Ts(e,t){const{line:n,target:i,property:r,color:o,scale:a,clip:s}=t,l=function(e,t,n){const i=e.segments,r=e.points,o=t.points,a=[];for(const s of i){let{start:e,end:i}=s;i=ms(e,i,r);const l=fs(n,r[e],r[i],s.loop);if(!t.segments){a.push({source:s,target:l,start:r[e],end:r[i]});continue}const c=Fr(t,l);for(const t of c){const e=fs(n,o[t.start],o[t.end],t.loop),i=Tr(s,r,e);for(const r of i)a.push({source:r,target:t,start:{[n]:gs(l,e,"start",Math.max)},end:{[n]:gs(l,e,"end",Math.min)}})}}return a}(n,i,r);for(const{source:c,target:u,start:h,end:d}of l){const{style:{backgroundColor:t=o}={}}=c,l=!0!==i;e.save(),e.fillStyle=t,Fs(e,a,s,l&&fs(r,h,d)),e.beginPath();const p=!!n.pathSegment(e,c);let f;if(l){p?e.closePath():ks(e,i,d,r);const t=!!i.pathSegment(e,u,{move:p,reverse:!0});f=p&&t,f||ks(e,i,h,r)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function Fs(e,t,n,i){const r=t.chart.chartArea,{property:o,start:a,end:s}=i||{};if("x"===o||"y"===o){let t,i,l,c;"x"===o?(t=a,i=r.top,l=s,c=r.bottom):(t=r.left,i=a,l=r.right,c=s),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),i=Math.max(i,n.top),c=Math.min(c,n.bottom)),e.rect(t,i,l-t,c-i),e.clip()}}function ks(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var Ps={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let o,a,s,l;for(a=0;a<i;++a)o=e.getDatasetMeta(a),s=o.dataset,l=null,s&&s.options&&s instanceof rs&&(l={visible:e.isDatasetVisible(a),index:a,fill:xs(s,a,i),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],l&&!1!==l.fill&&(l.fill=_s(r,a,n.propagate))},beforeDraw(e,t,n){const i="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let a=r.length-1;a>=0;--a){const t=r[a].$filler;t&&(t.line.updateControlPoints(o,t.axis),i&&t.fill&&Cs(e.ctx,t,o))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const t=i[r].$filler;vs(t)&&Cs(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;vs(i)&&"beforeDatasetDraw"===n.drawTime&&Cs(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ms=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class Is extends na{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Qt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=Li(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=Ms(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,r,a,s)+10):(c=this.maxHeight,l=this._fitCols(o,i,a,s)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((e,p)=>{const f=n+t/2+r.measureText(e.text).width;(0===p||l[l.length-1]+f+2*a>o)&&(u+=c,l[l.length-(p>0?0:1)]=0,d+=c,h++),s[p]={left:0,top:d,row:h,width:f,height:i},l[l.length-1]+=f+a}),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-e;let u=a,h=0,d=0,p=0,f=0;return this.legendItems.forEach((e,o)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,i,r){const o=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+i.measureText(r).width}(i,e,t,n),a=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=js(t,n));return i}(r,i,t.lineHeight);return{itemWidth:o,itemHeight:a}}(n,t,r,e,i);o>0&&d+g+2*a>c&&(u+=h+a,l.push({width:h,height:d}),p+=h+a,f++,h=d=0),s[o]={left:p,top:d,col:f,width:m,height:g},h=Math.max(h,m),d+=g+a}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,o=Dr(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=Wn(n,this.left+i,this.right-this.lineWidths[r]);for(const s of t)r!==s.row&&(r=s.row,a=Wn(n,this.left+i,this.right-this.lineWidths[r])),s.top+=this.top+e+i,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+i}else{let r=0,a=Wn(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const s of t)s.col!==r&&(r=s.col,a=Wn(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),s.top=a,s.left+=this.left+i,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;wi(e,this),this._draw(),Di(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:o}=e,a=fi.color,s=Dr(e.rtl,this.left,this.width),l=Li(o.font),{padding:c}=o,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=s.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:m}=Ms(o,u),g=this.isHorizontal(),y=this._computeTitleHeight();d=g?{x:Wn(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Wn(r,this.top+y+c,this.bottom-t[0].height),line:0},Er(this.ctx,e.textDirection);const v=m+c;this.legendItems.forEach((_,x)=>{i.strokeStyle=_.fontColor,i.fillStyle=_.fontColor;const b=i.measureText(_.text).width,w=s.textAlign(_.textAlign||(_.textAlign=o.textAlign)),D=p+h+b;let E=d.x,C=d.y;s.setWidth(this.width),g?x>0&&E+D+c>this.right&&(C=d.y+=v,d.line++,E=d.x=Wn(r,this.left+c,this.right-n[d.line])):x>0&&C+v>this.bottom&&(E=d.x=E+t[d.line].width+c,d.line++,C=d.y=Wn(r,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;i.save();const r=Kt(n.lineWidth,1);if(i.fillStyle=Kt(n.fillStyle,a),i.lineCap=Kt(n.lineCap,"butt"),i.lineDashOffset=Kt(n.lineDashOffset,0),i.lineJoin=Kt(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Kt(n.strokeStyle,a),i.setLineDash(Kt(n.lineDash,[])),o.usePointStyle){const a={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=s.xPlus(e,p/2);xi(i,a,l,t+h,o.pointStyleWidth&&p)}else{const o=t+Math.max((u-f)/2,0),a=s.leftForLtr(e,p),l=Oi(n.borderRadius);i.beginPath(),Object.values(l).some(e=>0!==e)?Fi(i,{x:a,y:o,w:p,h:f,radius:l}):i.rect(a,o,p,f),i.fill(),0!==r&&i.stroke()}i.restore()}(s.x(E),C,_),E=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(w,E+p+h,g?E+D:this.right,e.rtl),function(e,t,n){Ti(i,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(E),C,_),g)d.x+=D+c;else if("string"!==typeof _.text){const e=l.lineHeight;d.y+=js(_,e)+c}else d.y+=v}),Cr(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Li(t.font),i=Bi(t.padding);if(!t.display)return;const r=Dr(e.rtl,this.left,this.width),o=this.ctx,a=t.position,s=n.size/2,l=i.top+s;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=Wn(e.align,u,this.right-h);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+Wn(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=Wn(a,u,u+h);o.textAlign=r.textAlign(Gn(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,Ti(o,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=Li(e.font),n=Bi(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Bn(e,this.left,this.right)&&Bn(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Bn(e,i.left,i.left+i.width)&&Bn(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const o=this._hoveredItem,a=(r=n,null!==(i=o)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);o&&!a&&Qt(t.onLeave,[e,o,this],this),this._hoveredItem=n,n&&!a&&Qt(t.onHover,[e,n,this],this)}else n&&Qt(t.onClick,[e,n,this],this);var i,r}}function js(e,t){return t*(e.text?e.text.length:0)}var Ns={id:"legend",_element:Is,start(e,t,n){const i=e.legend=new Is({ctx:e.ctx,options:n,chart:e});Lo.configure(e,i,n),Lo.addBox(e,i)},stop(e){Lo.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Lo.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o,useBorderRadius:a,borderRadius:s}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=Bi(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(s||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};new WeakMap;const Os={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++o}}if(0===o||0===i.size)return!1;return{x:[...i].reduce((e,t)=>e+t)/i.size,y:r/o}},nearest(e,t){if(!e.length)return!1;let n,i,r,o=t.x,a=t.y,s=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=Mn(t,i.getCenterPoint());e<s&&(s=e,r=i)}}if(r){const e=r.tooltipPosition();o=e.x,a=e.y}return{x:o,y:a}}};function Bs(e,t){return t&&(Gt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ls(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function zs(e,t){const{element:n,datasetIndex:i,index:r}=t,o=e.getDatasetMeta(i).controller,{label:a,value:s}=o.getLabelAndValue(r);return{chart:e,label:a,parsed:o.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:s,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Rs(e,t){const n=e.chart.ctx,{body:i,footer:r,title:o}=e,{boxWidth:a,boxHeight:s}=t,l=Li(t.bodyFont),c=Li(t.titleFont),u=Li(t.footerFont),h=o.length,d=r.length,p=i.length,f=Bi(t.padding);let m=f.height,g=0,y=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){m+=p*(t.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const _=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,Jt(e.title,_),n.font=l.string,Jt(e.beforeBody.concat(e.afterBody),_),v=t.displayColors?a+2+t.boxPadding:0,Jt(i,e=>{Jt(e.before,_),Jt(e.lines,_),Jt(e.after,_)}),v=0,n.font=u.string,Jt(e.footer,_),n.restore(),g+=f.width,{width:g,height:m}}function Vs(e,t,n,i){const{x:r,width:o}=n,{width:a,chartArea:{left:s,right:l}}=e;let c="center";return"center"===i?c=r<=(s+l)/2?"left":"right":r<=o/2?c="left":r>=a-o/2&&(c="right"),function(e,t,n,i){const{x:r,width:o}=i,a=n.caretSize+n.caretPadding;return"left"===e&&r+o+a>t.width||"right"===e&&r-o-a<0||void 0}(c,e,t,n)&&(c="center"),c}function Us(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Vs(e,t,n,i),yAlign:i}}function qs(e,t,n,i){const{caretSize:r,caretPadding:o,cornerRadius:a}=e,{xAlign:s,yAlign:l}=n,c=r+o,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=Oi(a);let f=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,s);const m=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===s?f+=c:"right"===s&&(f-=c):"left"===s?f-=Math.max(u,d)+r:"right"===s&&(f+=Math.max(h,p)+r),{x:On(f,0,i.width-t.width),y:On(m,0,i.height-t.height)}}function Zs(e,t,n){const i=Bi(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function Hs(e){return Bs([],Ls(e))}function Gs(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Ws={beforeTitle:qt,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:qt,beforeBody:qt,beforeLabel:qt,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ht(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:qt,afterBody:qt,beforeFooter:qt,footer:qt,afterFooter:qt};function Ys(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?Ws[t].call(n,i):r}class Xs extends na{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new Rr(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Ri(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=Ys(n,"beforeTitle",this,e),r=Ys(n,"title",this,e),o=Ys(n,"afterTitle",this,e);let a=[];return a=Bs(a,Ls(i)),a=Bs(a,Ls(r)),a=Bs(a,Ls(o)),a}getBeforeBody(e,t){return Hs(Ys(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Jt(e,e=>{const t={before:[],lines:[],after:[]},r=Gs(n,e);Bs(t.before,Ls(Ys(r,"beforeLabel",this,e))),Bs(t.lines,Ys(r,"label",this,e)),Bs(t.after,Ls(Ys(r,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return Hs(Ys(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=Ys(n,"beforeFooter",this,e),r=Ys(n,"footer",this,e),o=Ys(n,"afterFooter",this,e);let a=[];return a=Bs(a,Ls(i)),a=Bs(a,Ls(r)),a=Bs(a,Ls(o)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],o=[];let a,s,l=[];for(a=0,s=t.length;a<s;++a)l.push(zs(this.chart,t[a]));return e.filter&&(l=l.filter((t,i,r)=>e.filter(t,i,r,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),Jt(l,t=>{const n=Gs(e.callbacks,t);i.push(Ys(n,"labelColor",this,t)),r.push(Ys(n,"labelPointStyle",this,t)),o.push(Ys(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const e=Os[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=Rs(this,n),a=Object.assign({},e,t),s=Us(this.chart,n,a),l=qs(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:l,bottomLeft:c,bottomRight:u}=Oi(a),{x:h,y:d}=e,{width:p,height:f}=t;let m,g,y,v,_,x;return"center"===r?(_=d+f/2,"left"===i?(m=h,g=m-o,v=_+o,x=_-o):(m=h+p,g=m+o,v=_-o,x=_+o),y=m):(g="left"===i?h+Math.max(s,c)+o:"right"===i?h+p-Math.max(l,u)-o:this.caretX,"top"===r?(v=d,_=v-o,m=g-o,y=g+o):(v=d+f,_=v+o,m=g+o,y=g-o),x=v),{x1:m,x2:g,x3:y,y1:v,y2:_,y3:x}}drawTitle(e,t,n){const i=this.title,r=i.length;let o,a,s;if(r){const l=Dr(n.rtl,this.x,this.width);for(e.x=Zs(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",o=Li(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,s=0;s<r;++s)t.fillText(i[s],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,s+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:l}=r,c=Li(r.bodyFont),u=Zs(this,"left",r),h=i.x(u),d=s<c.lineHeight?(c.lineHeight-s)/2:0,p=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=p+s/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,_i(e,t,n,c),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,_i(e,t,n,c)}else{e.lineWidth=Wt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=Oi(o.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Fi(e,{x:t,y:p,w:l,h:s,radius:a}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Fi(e,{x:n,y:p+1,w:l-2,h:s-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,p,l,s),e.strokeRect(t,p,l,s),e.fillStyle=o.backgroundColor,e.fillRect(n,p+1,l-2,s-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:c}=n,u=Li(n.bodyFont);let h=u.lineHeight,d=0;const p=Dr(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+d),e.y+h/2),e.y+=h+r},m=p.textAlign(o);let g,y,v,_,x,b,w;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=Zs(this,m,n),t.fillStyle=n.bodyColor,Jt(this.beforeBody,f),d=a&&"right"!==m?"center"===o?l/2+c:l+2+c:0,_=0,b=i.length;_<b;++_){for(g=i[_],y=this.labelTextColors[_],t.fillStyle=y,Jt(g.before,f),v=g.lines,a&&v.length&&(this._drawColorBox(t,e,_,p,n),h=Math.max(u.lineHeight,s)),x=0,w=v.length;x<w;++x)f(v[x]),h=u.lineHeight;Jt(g.after,f)}d=0,h=u.lineHeight,Jt(this.afterBody,f),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let o,a;if(r){const s=Dr(n.rtl,this.x,this.width);for(e.x=Zs(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",o=Li(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(i[a],s.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:s}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=Oi(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+u,s),"top"===o&&this.drawCaret(e,t,n,i),t.lineTo(a+l-h,s),t.quadraticCurveTo(a+l,s,a+l,s+h),"center"===o&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l,s+c-p),t.quadraticCurveTo(a+l,s+c,a+l-p,s+c),"bottom"===o&&this.drawCaret(e,t,n,i),t.lineTo(a+d,s+c),t.quadraticCurveTo(a,s+c,a,s+c-d),"center"===o&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(a,s+u),t.quadraticCurveTo(a,s,a+u,s),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Os[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=Rs(this,e),a=Object.assign({},n,this._size),s=Us(t,e,a),l=qs(e,a,s,t);i._to===l.x&&r._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Bi(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),Er(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Cr(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),r=!en(n,i),o=this._positionChanged(i,t);(r||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,n),a=this._positionChanged(o,e),s=t||!en(o,r)||a;return s&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const o=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,o=Os[r.position].call(this,e,t);return!1!==o&&(n!==o.x||i!==o.y)}}Se(Xs,"positioners",Os);var Ks={id:"tooltip",_element:Xs,positioners:Os,afterInit(e,t,n){n&&(e.tooltip=new Xs({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Fe(Fe({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ws},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function $s(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function Qs(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Js extends da{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Ht(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:On(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:$s(n,e,Kt(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return Qs.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function el(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:s,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,p=c-1,{min:f,max:m}=t,g=!Ht(o),y=!Ht(a),v=!Ht(l),_=(m-f)/(u+1);let x,b,w,D,E=Cn((m-f)/p/d)*d;if(E<1e-14&&!g&&!y)return[{value:f},{value:m}];D=Math.ceil(m/E)-Math.floor(f/E),D>p&&(E=Cn(D*E/p/d)*d),Ht(s)||(x=Math.pow(10,s),E=Math.ceil(E*x)/x),"ticks"===i?(b=Math.floor(f/E)*E,w=Math.ceil(m/E)*E):(b=f,w=m),g&&y&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-o)/r,E/1e3)?(D=Math.round(Math.min((a-o)/E,c)),E=(a-o)/D,b=o,w=a):v?(b=g?o:b,w=y?a:w,D=l-1,E=(w-b)/D):(D=(w-b)/E,D=En(D,Math.round(D),E/1e3)?Math.round(D):Math.ceil(D));const C=Math.max(kn(E),kn(b));x=Math.pow(10,Ht(s)?C:s),b=Math.round(b*x)/x,w=Math.round(w*x)/x;let A=0;for(g&&(h&&b!==o?(n.push({value:o}),b<o&&A++,En(Math.round((b+A*E)*x)/x,o,tl(o,_,e))&&A++):b<o&&A++);A<D;++A){const e=Math.round((b+A*E)*x)/x;if(y&&e>a)break;n.push({value:e})}return y&&h&&w!==a?n.length&&En(n[n.length-1].value,a,tl(a,_,e))?n[n.length-1].value=a:n.push({value:a}):y&&w!==a||n.push({value:w}),n}function tl(e,t,n){let{horizontal:i,minRotation:r}=n;const o=Tn(r),a=(i?Math.sin(o):Math.cos(o))||.001,s=.75*t*(""+e).length;return Math.min(t/a,s)}Se(Js,"id","category"),Se(Js,"defaults",{ticks:{callback:Qs}});class nl extends da{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ht(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=e=>i=t?i:e,a=e=>r=n?r:e;if(e){const e=Dn(i),t=Dn(r);e<0&&t<0?a(0):e>0&&t>0&&o(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);a(r+t),e||o(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=el({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Sn(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return ai(e,this.chart.options.locale,this.options.ticks.format)}}class il extends nl{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Yt(e)?e:0,this.max=Yt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Tn(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Se(il,"id","linear"),Se(il,"defaults",{ticks:{callback:li.formatters.numeric}});const rl=e=>Math.floor(wn(e)),ol=(e,t)=>Math.pow(10,rl(e)+t);function al(e){return 1===e/Math.pow(10,rl(e))}function sl(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function ll(e,t){let{min:n,max:i}=t;n=Xt(e.min,n);const r=[],o=rl(n);let a=function(e,t){let n=rl(t-e);for(;sl(e,t,n)>10;)n++;for(;sl(e,t,n)<10;)n--;return Math.min(n,rl(e))}(n,i),s=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=o>a?Math.pow(10,o):0,u=Math.round((n-c)*s)/s,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),p=Xt(e.min,Math.round((c+h+d*Math.pow(10,a))*s)/s);for(;p<i;)r.push({value:p,major:al(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,s=a>=0?1:s),p=Math.round((c+h+d*Math.pow(10,a))*s)/s;const f=Xt(e.max,p);return r.push({value:f,major:al(f),significand:d}),r}class cl extends da{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=nl.prototype.parse.apply(this,[e,t]);if(0!==n)return Yt(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Yt(e)?Math.max(0,e):null,this.max=Yt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Yt(this._userMin)&&(this.min=e===ol(this.min,0)?ol(this.min,-1):ol(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,o=e=>i=t?i:e;n===i&&(n<=0?(r(1),o(10)):(r(ol(n,-1)),o(ol(i,1)))),n<=0&&r(ol(i,-1)),i<=0&&o(ol(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=ll({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Sn(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":ai(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=wn(e),this._valueRange=wn(this.max)-wn(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(wn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function ul(e){const t=e.ticks;if(t.display&&e.display){const e=Bi(t.backdropPadding);return Kt(t.font&&t.font.size,fi.font.size)+e.height}return 0}function hl(e,t,n){return n=Gt(n)?n:[n],{w:gi(e,t.string,n),h:n.length*t.lineHeight}}function dl(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function pl(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],o=e._pointLabels.length,a=e.options.pointLabels,s=a.centerPointLabels?fn/o:0;for(let l=0;l<o;l++){const o=a.setContext(e.getPointLabelContext(l));r[l]=o.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],s),u=Li(o.font),h=hl(e.ctx,u,e._pointLabels[l]);i[l]=h;const d=jn(e.getIndexAngle(l)+s),p=Math.round(Fn(d));fl(n,t,d,dl(p,c.x,h.w,0,180),dl(p,c.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,o=e.options,{centerPointLabels:a,display:s}=o.pointLabels,l={extra:ul(o)/2,additionalAngle:a?fn/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=ml(e,u,l);i.push(r),"auto"===s&&(r.visible=gl(r,c),r.visible&&(c=r))}return i}(e,i,r)}function fl(e,t,n,i,r){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,l=0;i.start<t.l?(s=(t.l-i.start)/o,e.l=Math.min(e.l,t.l-s)):i.end>t.r&&(s=(i.end-t.r)/o,e.r=Math.max(e.r,t.r+s)),r.start<t.t?(l=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function ml(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:o,padding:a,size:s}=n,l=e.getPointPosition(t,i+r+a,o),c=Math.round(Fn(jn(l.angle+_n))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,s.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,s.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+s.w,bottom:u+s.h}}function gl(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:o}=e;return!(bi({x:n,y:i},t)||bi({x:n,y:o},t)||bi({x:r,y:i},t)||bi({x:r,y:o},t))}function yl(e,t,n){const{left:i,top:r,right:o,bottom:a}=n,{backdropColor:s}=t;if(!Ht(s)){const n=Oi(t.borderRadius),l=Bi(t.backdropPadding);e.fillStyle=s;const c=i-l.left,u=r-l.top,h=o-i+l.width,d=a-r+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),Fi(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function vl(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,mn);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=e.getPointPosition(o,t),r.lineTo(n.x,n.y)}}Se(cl,"id","logarithmic"),Se(cl,"defaults",{ticks:{callback:li.formatters.logarithmic,major:{enabled:!0}}});class _l extends nl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Bi(ul(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Yt(e)&&!isNaN(e)?e:0,this.max=Yt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ul(this.options))}generateTickLabels(e){nl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=Qt(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?pl(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return jn(e*(mn/(this._pointLabels.length||1))+Tn(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Ht(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ht(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Ri(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-_n+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),vl(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,o=this._pointLabels.length;let a,s,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const o=i.setContext(e.getPointLabelContext(r));yl(n,o,t);const a=Li(o.font),{x:s,y:l,textAlign:c}=t;Ti(n,e._pointLabels[r],s,l+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){s=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const o=e.ctx,a=t.circular,{color:s,lineWidth:l}=t;!a&&!i||!s||!l||n<0||(o.save(),o.strokeStyle=s,o.lineWidth=l,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),vl(e,n,a,i),o.closePath(),o.stroke(),o.restore())}(this,a,s,o,l)}}),n.display){for(e.save(),a=o-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:o}=i;o&&r&&(e.lineWidth=o,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,s=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,s),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((i,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const s=n.setContext(this.getContext(a)),l=Li(s.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){e.font=l.string,o=e.measureText(i.label).width,e.fillStyle=s.backdropColor;const t=Bi(s.backdropPadding);e.fillRect(-o/2-t.left,-r-l.size/2-t.top,o+t.width,l.size+t.height)}Ti(e,i.label,0,-r,l,{color:s.color,strokeColor:s.textStrokeColor,strokeWidth:s.textStrokeWidth})}),e.restore()}drawTitle(){}}Se(_l,"id","radialLinear"),Se(_l,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:li.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Se(_l,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Se(_l,"descriptors",{angleLines:{_fallback:"grid"}});const xl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bl=Object.keys(xl);function wl(e,t){return e-t}function Dl(e,t){if(Ht(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:o}=e._parseOpts;let a=t;return"function"===typeof i&&(a=i(a)),Yt(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!An(o)&&!0!==o?n.startOf(a,r):n.startOf(a,"isoWeek",o)),+a)}function El(e,t,n,i){const r=bl.length;for(let o=bl.indexOf(e);o<r-1;++o){const e=xl[bl[o]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return bl[o]}return bl[r-1]}function Cl(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=Ln(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function Al(e,t,n){const i=[],r={},o=t.length;let a,s;for(a=0;a<o;++a)s=t[a],r[s]=a,i.push({value:s,major:!1});return 0!==o&&n?function(e,t,n,i){const r=e._adapter,o=+r.startOf(t[0].value,i),a=t[t.length-1].value;let s,l;for(s=o;s<=a;s=+r.add(s,1,i))l=n[s],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class Sl extends da{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new vo(e.adapters.date);i.init(t),an(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Dl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function s(e){o||isNaN(e.min)||(i=Math.min(i,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}o&&a||(s(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||s(this.getMinMax(!1))),i=Yt(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Yt(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?El(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let o=bl.length-1;o>=bl.indexOf(n);o--){const n=bl[o];if(xl[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return bl[n?bl.indexOf(n):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=bl.indexOf(e)+1,n=bl.length;t<n;++t)if(xl[bl[t]].common)return bl[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&o.reverse(),Al(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const o=n.length<3?.5:.25;i=On(i,0,o),r=On(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||El(r.minUnit,t,n,this._getLabelCapacity(t)),a=Kt(i.ticks.stepSize,1),s="week"===o&&r.isoWeekday,l=An(s)||!0===s,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",s)),d=+e.startOf(d,l?"day":o),e.diff(n,t,o)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+o);const p="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,a,o),h++)Cl(c,u,p);return u!==n&&"ticks"!==i.bounds&&1!==h||Cl(c,u,p),Object.keys(c).sort(wl).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,o=r.ticks.callback;if(o)return Qt(o,[e,t,n],this);const a=r.time.displayFormats,s=this._unit,l=this._majorUnit,c=s&&a[s],u=l&&a[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=Tn(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Al(this,[e],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(Dl(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return qn(e.sort(wl))}}function Tl(e,t,n){let i,r,o,a,s=0,l=e.length-1;n?(t>=e[s].pos&&t<=e[l].pos&&({lo:s,hi:l}=zn(e,"pos",t)),({pos:i,time:o}=e[s]),({pos:r,time:a}=e[l])):(t>=e[s].time&&t<=e[l].time&&({lo:s,hi:l}=zn(e,"time",t)),({time:i,pos:o}=e[s]),({time:r,pos:a}=e[l]));const c=r-i;return c?o+(a-o)*(t-i)/c:o}Se(Sl,"id","time"),Se(Sl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Fl extends Sl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Tl(t,this.min),this._tableRange=Tl(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let o,a,s,l,c;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)c=i[o+1],s=i[o-1],l=i[o],Math.round((c+s)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Tl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Tl(this._table,n*this._tableRange+this._minPos,!0)}}Se(Fl,"id","timeseries"),Se(Fl,"defaults",Sl.defaults);const kl=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Pl="label";function Ml(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Il(e,t){e.labels=t}function jl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pl;const i=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):Fe({},t)})}function Nl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pl;const n={labels:[],datasets:[]};return Il(n,e.labels),jl(n,e.datasets,t),n}function Ol(e,t){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:a,type:s,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d}=e,p=ke(e,kl),f=(0,o.useRef)(null),m=(0,o.useRef)(null),g=()=>{f.current&&(m.current=new qa(f.current,{type:s,data:Nl(l,a),options:c&&Fe({},c),plugins:u}),Ml(t,m.current))},y=()=>{Ml(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,o.useEffect)(()=>{!r&&m.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,c)},[r,c]),(0,o.useEffect)(()=>{!r&&m.current&&Il(m.current.config.data,l.labels)},[r,l.labels]),(0,o.useEffect)(()=>{!r&&m.current&&l.datasets&&jl(m.current.config.data,l.datasets,a)},[r,l.datasets]),(0,o.useEffect)(()=>{m.current&&(r?(y(),setTimeout(g)):m.current.update(d))},[r,c,l.labels,l.datasets,d]),(0,o.useEffect)(()=>{m.current&&(y(),setTimeout(g))},[s]),(0,o.useEffect)(()=>(g(),()=>y()),[]),(0,et.jsx)("canvas",Fe(Fe({ref:f,role:"img",height:n,width:i},p),{},{children:h}))}const Bl=(0,o.forwardRef)(Ol);function Ll(e,t){return qa.register(t),(0,o.forwardRef)((t,n)=>(0,et.jsx)(Bl,Fe(Fe({},t),{},{ref:n,type:e})))}const zl=Ll("radar",fo);qa.register(_l,as,rs,Ps,Ks,Ns);const Rl=["slope","elevation","vegetation","soil","pollution","flood","water","drainage","rainfall","thermal","intensity","landuse","infrastructure","population"],Vl={slope:"Slope",elevation:"Elevation",vegetation:"Vegetation",soil:"Soil",pollution:"Pollution",flood:"Flood",water:"Water",drainage:"Drainage",rainfall:"Rainfall",thermal:"Thermal",intensity:"Intensity",landuse:"Landuse",infrastructure:"Infra",population:"Population"},Ul={physical_terrain:"Physical",environmental:"Environmental",hydrology:"Hydrology",climatic:"Climatic",socio_econ:"Socio-Economic"};const ql=e=>{let{data:t,isDarkMode:n,categoryScores:i}=e;if(!t)return null;const r=Rl.map(e=>Vl[e]||e),o=Rl.map(e=>function(e,t){if(!e||!t)return 0;const n=e[t];if(null==n)return 0;let i=0;return i="object"===typeof n?null!=n.scaled_score?Number(n.scaled_score):null!=n.value?Number(n.value):0:Number(n)||0,Math.min(100,Math.max(0,i))}(t,e)),a={labels:r,datasets:[{label:"Suitability Profile",data:o,backgroundColor:"rgba(45, 138, 138, 0.25)",borderColor:"#2d8a8a",borderWidth:2,pointBackgroundColor:"#2d8a8a"}]},s={scales:{r:{angleLines:{color:n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},grid:{color:n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},pointLabels:{color:n?"#f8fafc":"#0f172a",font:{size:9,weight:"bold"}},ticks:{display:!1,max:100,min:0}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>{var t,n;return"".concat(e.label,": ").concat(null!==(t=null===(n=e.raw)||void 0===n?void 0:n.toFixed(1))&&void 0!==t?t:0,"/100")}}}},maintainAspectRatio:!1,responsive:!0};return(0,et.jsxs)("div",{className:"radar-chart-wrapper",children:[i&&"object"===typeof i&&Object.keys(i).length>0&&(0,et.jsx)("div",{className:"radar-five-categories",children:Object.entries(i).map(e=>{let[t,n]=e;return(0,et.jsxs)("span",{className:"radar-cat-badge",children:[Ul[t]||t,": ",(null!==n&&void 0!==n?n:0).toFixed(0),"%"]},t)})}),(0,et.jsx)("div",{className:"radar-chart-inner",style:{height:"280px",width:"100%",position:"relative"},children:(0,et.jsx)(zl,{data:a,options:s})})]})},Zl=o.memo(ql),Hl=e=>{var t,n,i,r,o;let{weather:a}=e;if(!a||!a.temp_c)return(0,et.jsxs)("div",{className:"card weather-card glass-morphic",children:[(0,et.jsx)("div",{className:"weather-header",children:(0,et.jsx)("h3",{children:"Live Atmospheric Intelligence"})}),(0,et.jsxs)("div",{className:"loading-weather",children:[(0,et.jsx)("span",{className:"weather-spinner"}),(0,et.jsx)("p",{children:"Awaiting Satellite Data..."})]})]});const s=a.local_time?new Date(a.local_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):(new Date).toLocaleTimeString(),l=(c=a.uv_index)?c<=2?{level:"Low",color:"#10b981"}:c<=5?{level:"Moderate",color:"#f59e0b"}:c<=7?{level:"High",color:"#ef4444"}:c<=10?{level:"Very High",color:"#dc2626"}:{level:"Extreme",color:"#991b1b"}:{level:"Low",color:"#10b981"};var c;const u=(h=null===(t=a.air_quality)||void 0===t?void 0:t.aqi)?h<=50?{level:"Good",color:"#10b981"}:h<=100?{level:"Moderate",color:"#f59e0b"}:h<=150?{level:"Unhealthy for Sensitive",color:"#ef4444"}:h<=200?{level:"Unhealthy",color:"#dc2626"}:h<=300?{level:"Very Unhealthy",color:"#991b1b"}:{level:"Hazardous",color:"#7f1d1d"}:{level:"N/A",color:"#6b7280"};var h;return(0,et.jsxs)("div",{className:"card weather-card glass-morphic compact",children:[(0,et.jsxs)("div",{className:"weather-header",children:[(0,et.jsxs)("div",{className:"title-stack",children:[(0,et.jsx)("h3",{children:"\ud83c\udf0d Atmospheric"}),(0,et.jsxs)("p",{className:"subtitle",children:[a.timezone||"Tracking"," \u2022 ",s]})]}),(0,et.jsx)("div",{className:"weather-icon-main",children:a.icon||"\ud83c\udf21\ufe0f"})]}),(0,et.jsxs)("div",{className:"weather-grid-compact",children:[(0,et.jsxs)("div",{className:"weather-item-primary",children:[(0,et.jsx)("span",{className:"w-label",children:"TEMP"}),(0,et.jsxs)("span",{className:"w-value-primary",children:[a.temp_c.toFixed(1),"\xb0C"]}),(0,et.jsxs)("span",{className:"w-subtitle",children:["Feels ",a.feels_like_c?"".concat(a.feels_like_c.toFixed(1),"\xb0C"):"N/A"]})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"CONDITIONS"}),(0,et.jsx)("span",{className:"w-value",children:a.description||"Localized"}),(0,et.jsx)("span",{className:"w-subtitle",children:a.weather_severity||"Mild"})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"HUMIDITY"}),(0,et.jsxs)("span",{className:"w-value",children:[a.humidity,"%"]})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"WIND"}),(0,et.jsxs)("span",{className:"w-value",children:[a.wind_speed_kmh," km/h"]}),(0,et.jsx)("span",{className:"w-subtitle",children:a.wind_direction_cardinal||"N/A"})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"PRESSURE"}),(0,et.jsxs)("span",{className:"w-value",children:[a.pressure_hpa," hPa"]})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"UV INDEX"}),(0,et.jsx)("span",{className:"w-value",style:{color:l.color},children:a.uv_index||0}),(0,et.jsx)("span",{className:"w-subtitle",children:l.level})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"AIR QUALITY"}),(0,et.jsx)("span",{className:"w-value",style:{color:u.color},children:(null===(n=a.air_quality)||void 0===n?void 0:n.aqi)||"N/A"}),(0,et.jsx)("span",{className:"w-subtitle",children:u.level})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"PM2.5"}),(0,et.jsx)("span",{className:"w-value",style:{color:u.color},children:(null===(i=a.air_quality)||void 0===i?void 0:i.pm25)||"N/A"}),(0,et.jsx)("span",{className:"w-subtitle",children:"\xb5g/m\xb3"})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"TOP POLLUTANT"}),(0,et.jsx)("span",{className:"w-value",children:(null===(r=a.air_quality)||void 0===r?void 0:r.dominant_pollutant)||"N/A"}),(0,et.jsx)("span",{className:"w-subtitle",children:(null===(o=a.air_quality)||void 0===o?void 0:o.pollutant_level)||"Moderate"})]}),(0,et.jsxs)("div",{className:"weather-item",children:[(0,et.jsx)("span",{className:"w-label",children:"VISIBILITY"}),(0,et.jsxs)("span",{className:"w-value",children:[a.visibility_km," km"]})]})]}),(0,et.jsxs)("div",{className:"weather-footer compact",children:[(0,et.jsx)("span",{className:"live-pulse"}),(0,et.jsxs)("span",{className:"live-text",children:["LIVE \u2022 ",a.is_day?"DAY":"NIGHT"," \u2022 ",(new Date).toLocaleTimeString()]})]})]})},Gl=e=>{var t,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x;let{data:b,loading:w}=e;if(w)return(0,et.jsxs)("div",{className:"card hazards-loading glass-morphic",children:[(0,et.jsx)("div",{className:"shimmer-line"}),(0,et.jsx)("p",{children:"Analyzing Hazards & Risks..."})]});if(!b)return null;const{seismic_risk:D,weather_hazards:E,geological_hazards:C,climate_hazards:A,hydrological_hazards:S,overall_risk_level:T}=b,F=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"low":return"#10b981";case"medium":return"#f59e0b";case"high":return"#ef4444";case"very high":return"#dc2626";default:return"#6b7280"}};return(0,et.jsx)("div",{className:"card hazards-card glass-morphic",children:(0,et.jsxs)("div",{className:"hazards-inner",children:[(0,et.jsx)("div",{className:"hazards-side-strip",children:(0,et.jsx)("span",{children:"\u26a1 RISKS & HAZARDS"})}),(0,et.jsxs)("div",{className:"hazards-content",children:[(0,et.jsxs)("div",{className:"hazards-header",children:[(0,et.jsx)("h3",{children:"Overall Risk Assessment"}),(0,et.jsxs)("div",{className:"overall-risk",style:{color:F(T)},children:[(0,et.jsx)("span",{className:"risk-icon",children:(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"low":return"\u2705";case"medium":return"\u26a0\ufe0f";case"high":return"\ud83d\udd34";case"very high":return"\ud83d\udea8";default:return"\u2753"}})(T)}),(0,et.jsx)("span",{className:"risk-level",children:T||"Unknown"})]})]}),D&&!D.error&&(0,et.jsxs)("div",{className:"hazard-section seismic-section",children:[(0,et.jsx)("h4",{children:"\ud83c\udf0b Tectonic & Seismic Risk"}),(0,et.jsxs)("div",{className:"hazard-grid",children:[(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Risk Level"}),(0,et.jsx)("span",{className:"risk-value",style:{color:F(D.risk_level)},children:D.risk_level||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Tectonic Plate"}),(0,et.jsxs)("span",{className:"plate-info",children:[(null===(t=D.tectonic_plates)||void 0===t?void 0:t[0])||"Unknown",D.plate_description&&(0,et.jsx)("span",{className:"plate-desc",children:D.plate_description})]})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Nearest Plate Boundary"}),(0,et.jsxs)("span",{className:"distance-info",children:[D.nearest_plate_distance_km?"".concat(D.nearest_plate_distance_km," km"):"N/A",D.nearest_plate_distance_km<200&&(0,et.jsx)("span",{className:"distance-warning",children:"\u26a0\ufe0f Close to boundary"})]})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Nearest Fault Line"}),(0,et.jsxs)("span",{className:"fault-info ".concat(D.near_fault_line?"fault-yes":"fault-no"),children:[(null===(n=D.nearest_fault)||void 0===n?void 0:n.name)||"None identified",D.distance_to_fault_km&&(0,et.jsxs)("span",{className:"fault-distance",children:[D.distance_to_fault_km," km away",D.fault_type&&" (".concat(D.fault_type,")")]})]})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Expected Magnitude"}),(0,et.jsxs)("span",{className:"magnitude-info",children:[D.expected_magnitude_range||"N/A","Very High"===D.risk_level&&(0,et.jsx)("span",{className:"magnitude-warning",children:"\ud83d\udd34 High magnitude possible"})]})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Building Standards"}),(0,et.jsx)("span",{className:"building-info",children:D.building_code_standards||"Local codes"})]}),(0,et.jsxs)("div",{className:"hazard-item full-width",children:[(0,et.jsx)("label",{children:"Seismic Assessment"}),(0,et.jsx)("div",{className:"seismic-summary",children:D.nearest_plate_distance_km>500?(0,et.jsxs)("span",{className:"seismic-safe",children:["\u2705 Located far from major tectonic plate boundaries (",D.nearest_plate_distance_km," km)",(0,et.jsx)("br",{}),(0,et.jsx)("span",{className:"safe-desc",children:"Low earthquake risk due to stable continental position"})]}):D.nearest_plate_distance_km>200?(0,et.jsxs)("span",{className:"seismic-moderate",children:["\u26a0\ufe0f Moderate distance from tectonic activity (",D.nearest_plate_distance_km," km)",(0,et.jsx)("br",{}),(0,et.jsx)("span",{className:"moderate-desc",children:"Some seismic risk, monitor regional activity"})]}):(0,et.jsxs)("span",{className:"seismic-high",children:["\ud83d\udea8 Close to tectonic plate boundary (",D.nearest_plate_distance_km," km)",(0,et.jsx)("br",{}),(0,et.jsx)("span",{className:"high-desc",children:"High seismic risk, requires strict building codes"})]})})]})]})]}),E&&!E.error&&(0,et.jsxs)("div",{className:"hazard-section weather-section",children:[(0,et.jsx)("h4",{children:"\ud83c\udf26\ufe0f Weather Hazards"}),(0,et.jsxs)("div",{className:"hazard-grid",children:[(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Primary Hazards"}),(0,et.jsx)("span",{children:(null===(i=E.primary_hazards)||void 0===i?void 0:i.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Seasonal Risks"}),(0,et.jsx)("span",{className:"seasonal-text",children:E.seasonal_risks||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Extreme Temperature"}),(0,et.jsx)("span",{children:E.extreme_temperature_risk||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Precipitation Extremes"}),(0,et.jsx)("span",{children:E.precipitation_extremes||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Wind Hazards"}),(0,et.jsx)("span",{children:(null===(r=E.wind_hazards)||void 0===r?void 0:r.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Warning Systems"}),(0,et.jsx)("span",{children:E.warning_systems||"N/A"})]})]})]}),C&&!C.error&&(0,et.jsxs)("div",{className:"hazard-section geological-section",children:[(0,et.jsx)("h4",{children:"\u26f0\ufe0f Geological Hazards"}),(0,et.jsxs)("div",{className:"hazard-grid",children:[(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Primary Risks"}),(0,et.jsx)("span",{children:(null===(o=C.primary_geological_risks)||void 0===o?void 0:o.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Volcanic Activity"}),(0,et.jsx)("span",{className:null!==(a=C.volcanic_activity)&&void 0!==a&&a.near_volcanic_region?"volcano-yes":"volcano-no",children:(null===(s=C.volcanic_activity)||void 0===s?void 0:s.risk_level)||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Landslide Risk"}),(0,et.jsx)("span",{children:(null===(l=C.landslide_risk)||void 0===l?void 0:l.risk_level)||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Soil Stability"}),(0,et.jsx)("span",{children:C.soil_stability||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Groundwater Risk"}),(0,et.jsx)("span",{children:C.groundwater_risk||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Mining Activity"}),(0,et.jsx)("span",{children:C.mining_activity||"N/A"})]})]})]}),A&&!A.error&&(0,et.jsxs)("div",{className:"hazard-section climate-section",children:[(0,et.jsx)("h4",{children:"\ud83c\udf0d Climate Hazards"}),(0,et.jsxs)("div",{className:"hazard-grid",children:[(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Climate Change Risks"}),(0,et.jsx)("span",{children:(null===(c=A.climate_change_risks)||void 0===c?void 0:c.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Sea Level Rise"}),(0,et.jsx)("span",{children:(null===(u=A.sea_level_rise_vulnerability)||void 0===u?void 0:u.vulnerability)||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Temperature Trends"}),(0,et.jsx)("span",{children:A.temperature_trends||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Precipitation Changes"}),(0,et.jsx)("span",{children:A.precipitation_changes||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Adaptation Measures"}),(0,et.jsx)("span",{children:A.adaptation_measures||"N/A"})]})]})]}),S&&!S.error&&(0,et.jsxs)("div",{className:"hazard-section hydrological-section",children:[(0,et.jsx)("h4",{children:"\ud83d\udca7 Hydrological Hazards"}),(0,et.jsxs)("div",{className:"hazard-grid",children:[(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Flood Risk"}),(0,et.jsx)("span",{className:"flood-".concat(null===(h=S.flood_risk)||void 0===h||null===(d=h.risk_level)||void 0===d?void 0:d.toLowerCase()),children:(null===(p=S.flood_risk)||void 0===p?void 0:p.risk_level)||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Flood Causes"}),(0,et.jsx)("span",{children:(null===(f=S.flood_risk)||void 0===f||null===(m=f.causes)||void 0===m?void 0:m.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Drought Risk"}),(0,et.jsx)("span",{className:"drought-".concat(null===(g=S.drought_risk)||void 0===g||null===(y=g.risk_level)||void 0===y?void 0:y.toLowerCase()),children:(null===(v=S.drought_risk)||void 0===v?void 0:v.risk_level)||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Drought Factors"}),(0,et.jsx)("span",{children:(null===(_=S.drought_risk)||void 0===_||null===(x=_.factors)||void 0===x?void 0:x.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Water Scarcity"}),(0,et.jsx)("span",{children:S.water_scarcity||"N/A"})]}),(0,et.jsxs)("div",{className:"hazard-item",children:[(0,et.jsx)("label",{children:"Groundwater Depletion"}),(0,et.jsx)("span",{children:S.groundwater_depletion||"N/A"})]})]})]}),(0,et.jsx)("div",{className:"hazards-footer",children:(0,et.jsxs)("div",{className:"recommendations",children:[(0,et.jsx)("h5",{children:"\ud83d\udee1\ufe0f Safety Recommendations"}),(0,et.jsxs)("ul",{children:[(null===D||void 0===D?void 0:D.recommendations)&&(0,et.jsx)("li",{children:D.recommendations}),"High"===T&&(0,et.jsx)("li",{children:"Comprehensive insurance coverage recommended"}),"High"===T&&(0,et.jsx)("li",{children:"Emergency preparedness plan essential"}),(null===E||void 0===E?void 0:E.monitoring_systems)&&(0,et.jsxs)("li",{children:["Monitor ",E.monitoring_systems," alerts"]})]})]})})]})]})})},Wl=e=>{var t,n,i,r,o,a,s,l,c,u;let{data:h,loading:d}=e;if(d)return(0,et.jsxs)("div",{className:"card snapshot-loading glass-morphic",children:[(0,et.jsx)("div",{className:"shimmer-line"}),(0,et.jsx)("p",{children:"Resolving Geospatial Identity..."})]});if(!h)return null;const{identity:p,coordinates:f,global_position:m,political_identity:g,administrative_nesting:y,border_analysis:v,nearby_features:_,urban_characteristics:x,environmental_context:b,infrastructure_context:w,population_analysis:D,air_quality_analysis:E,terrain_context:C}=h;return(0,et.jsx)("div",{className:"card snapshot-geo-card glass-morphic enhanced-geospatial",children:(0,et.jsxs)("div",{className:"snapshot-inner",children:[(0,et.jsx)("div",{className:"snapshot-side-strip",children:(0,et.jsx)("span",{children:"\ud83c\udf0d GEOSPATIAL PASSPORT"})}),(0,et.jsxs)("div",{className:"snapshot-content enhanced",children:[(0,et.jsxs)("div",{className:"snap-header",children:[(0,et.jsxs)("div",{className:"main-identity",children:[(0,et.jsx)("h3",{children:(null===p||void 0===p?void 0:p.name)||"Unknown Territory"}),(0,et.jsxs)("div",{className:"identity-meta",children:[(0,et.jsx)("span",{className:"iso-code",children:null===g||void 0===g?void 0:g.iso_code}),(null===g||void 0===g?void 0:g.is_capital)&&(0,et.jsx)("span",{className:"capital-badge",children:"\ud83c\udfdb\ufe0f CAPITAL"})]})]}),(0,et.jsxs)("div",{className:"coordinates-display",children:[(0,et.jsxs)("div",{className:"coord-item",children:[(0,et.jsx)("span",{className:"coord-label",children:"Lat:"}),(0,et.jsx)("span",{className:"coord-value",children:null===f||void 0===f?void 0:f.lat})]}),(0,et.jsxs)("div",{className:"coord-item",children:[(0,et.jsx)("span",{className:"coord-label",children:"Lng:"}),(0,et.jsx)("span",{className:"coord-value",children:null===f||void 0===f?void 0:f.lng})]}),(0,et.jsxs)("div",{className:"coord-item",children:[(0,et.jsx)("span",{className:"coord-label",children:"UTM:"}),(0,et.jsx)("span",{className:"coord-value",children:null===f||void 0===f?void 0:f.zone})]})]})]}),(0,et.jsxs)("div",{className:"section administrative-section",children:[(0,et.jsx)("h4",{children:"\ud83d\udccd Administrative Hierarchy"}),(0,et.jsxs)("div",{className:"admin-grid",children:[(0,et.jsxs)("div",{className:"admin-item",children:[(0,et.jsx)("label",{children:"Continent"}),(0,et.jsx)("span",{children:(null===m||void 0===m?void 0:m.continent)||"Global"})]}),(0,et.jsxs)("div",{className:"admin-item",children:[(0,et.jsx)("label",{children:"Country"}),(0,et.jsx)("span",{children:null===g||void 0===g?void 0:g.country})]}),(0,et.jsxs)("div",{className:"admin-item",children:[(0,et.jsx)("label",{children:"State/Province"}),(0,et.jsx)("span",{children:(null===y||void 0===y?void 0:y.state)||"N/A"})]}),(0,et.jsxs)("div",{className:"admin-item",children:[(0,et.jsx)("label",{children:"District/County"}),(0,et.jsx)("span",{children:(null===y||void 0===y?void 0:y.district)||"N/A"})]}),(0,et.jsxs)("div",{className:"admin-item",children:[(0,et.jsx)("label",{children:"City/Town"}),(0,et.jsx)("span",{children:null===p||void 0===p?void 0:p.name})]}),(0,et.jsxs)("div",{className:"admin-item",children:[(0,et.jsx)("label",{children:"Postal Code"}),(0,et.jsx)("span",{children:(null===p||void 0===p?void 0:p.postal_code)||"N/A"})]})]})]}),(0,et.jsxs)("div",{className:"section global-section",children:[(0,et.jsx)("h4",{children:"\ud83c\udf10 Global Position"}),(0,et.jsxs)("div",{className:"global-grid",children:[(0,et.jsxs)("div",{className:"global-item",children:[(0,et.jsx)("label",{children:"Hemisphere"}),(0,et.jsx)("span",{children:(null===m||void 0===m?void 0:m.hemisphere)||"N/A"})]}),(0,et.jsxs)("div",{className:"global-item",children:[(0,et.jsx)("label",{children:"Distance to Equator"}),(0,et.jsxs)("span",{children:[(null===m||void 0===m?void 0:m.distance_to_equator_km)||"N/A"," km"]})]}),(0,et.jsxs)("div",{className:"global-item",children:[(0,et.jsx)("label",{children:"Distance to Pole"}),(0,et.jsxs)("span",{children:[(null===m||void 0===m?void 0:m.distance_to_pole_km)||"N/A"," km"]})]}),(0,et.jsxs)("div",{className:"global-item",children:[(0,et.jsx)("label",{children:"Distance to Greenwich"}),(0,et.jsxs)("span",{children:[(null===m||void 0===m?void 0:m.distance_to_greenwich_km)||"N/A"," km"]})]}),(0,et.jsxs)("div",{className:"global-item",children:[(0,et.jsx)("label",{children:"Timezone"}),(0,et.jsx)("span",{children:(null===f||void 0===f?void 0:f.timezone)||"N/A"})]}),(0,et.jsxs)("div",{className:"global-item",children:[(0,et.jsx)("label",{children:"UTC Offset"}),(0,et.jsx)("span",{children:(null===f||void 0===f?void 0:f.utc_offset)||"N/A"})]})]})]}),v&&!v.error&&(0,et.jsxs)("div",{className:"section border-section",children:[(0,et.jsx)("h4",{children:"\ud83d\uddfa\ufe0f Border Analysis"}),(0,et.jsxs)("div",{className:"border-grid",children:[(0,et.jsxs)("div",{className:"border-item",children:[(0,et.jsx)("label",{children:"Border Region"}),(0,et.jsx)("span",{className:null!==v&&void 0!==v&&v.is_border_region?"border-yes":"border-no",children:null!==v&&void 0!==v&&v.is_border_region?"Yes":"No"})]}),(0,et.jsxs)("div",{className:"border-item",children:[(0,et.jsx)("label",{children:"Nearest Border"}),(0,et.jsxs)("span",{children:[(null===v||void 0===v?void 0:v.distance_to_nearest_border_km)||"N/A"," km ",(null===v||void 0===v?void 0:v.border_direction)||""]})]}),(0,et.jsxs)("div",{className:"border-item",children:[(0,et.jsx)("label",{children:"Neighboring Countries"}),(0,et.jsx)("span",{children:(null===v||void 0===v||null===(t=v.estimated_neighbors)||void 0===t?void 0:t.join(", "))||"N/A"})]})]})]}),_&&!_.error&&(0,et.jsxs)("div",{className:"section nearby-section enhanced-nearby",children:[(0,et.jsxs)("div",{className:"section-header",children:[(0,et.jsx)("h4",{className:"section-title",children:"\ud83c\udfd9\ufe0f Nearby Features"}),(0,et.jsx)("div",{className:"section-indicator"})]}),(null===_||void 0===_?void 0:_.nearby_cities)&&_.nearby_cities.length>0&&(0,et.jsxs)("div",{className:"nearby-subsection enhanced-subsection",children:[(0,et.jsxs)("div",{className:"subsection-header",children:[(0,et.jsx)("label",{className:"subsection-title",children:"\ud83c\udfd9\ufe0f Nearby Cities"}),(0,et.jsx)("span",{className:"count-badge",children:_.nearby_cities.length})]}),(0,et.jsx)("div",{className:"nearby-list enhanced-list",children:_.nearby_cities.slice(0,3).map((e,t)=>(0,et.jsxs)("div",{className:"nearby-item enhanced-item",children:[(0,et.jsxs)("div",{className:"place-info",children:[(0,et.jsx)("span",{className:"place-name",children:e.name}),(0,et.jsxs)("span",{className:"place-detail",children:[e.distance_km," km ",e.direction]})]}),(0,et.jsx)("div",{className:"place-icon",children:"\ud83c\udfd9\ufe0f"})]},t))})]}),(null===_||void 0===_?void 0:_.nearby_landmarks)&&_.nearby_landmarks.length>0&&(0,et.jsxs)("div",{className:"nearby-subsection enhanced-subsection",children:[(0,et.jsxs)("div",{className:"subsection-header",children:[(0,et.jsx)("label",{className:"subsection-title",children:"\ud83c\udfdb\ufe0f Nearby Landmarks"}),(0,et.jsx)("span",{className:"count-badge",children:_.nearby_landmarks.length})]}),(0,et.jsx)("div",{className:"nearby-list enhanced-list",children:_.nearby_landmarks.slice(0,2).map((e,t)=>(0,et.jsxs)("div",{className:"nearby-item enhanced-item",children:[(0,et.jsxs)("div",{className:"place-info",children:[(0,et.jsx)("span",{className:"place-name",children:e.name}),(0,et.jsxs)("span",{className:"place-detail",children:[e.distance_km," km ",e.direction]})]}),(0,et.jsx)("div",{className:"place-icon",children:"\ud83c\udfdb\ufe0f"})]},t))})]})]}),x&&!x.error&&(0,et.jsxs)("div",{className:"section urban-section",children:[(0,et.jsx)("h4",{children:"\ud83c\udfd8\ufe0f Urban Characteristics"}),(0,et.jsxs)("div",{className:"urban-grid",children:[(0,et.jsxs)("div",{className:"urban-item",children:[(0,et.jsx)("label",{children:"Urban Type"}),(0,et.jsx)("span",{children:(null===x||void 0===x?void 0:x.urban_type)||"N/A"})]}),(0,et.jsxs)("div",{className:"urban-item",children:[(0,et.jsx)("label",{children:"Population Density"}),(0,et.jsx)("span",{children:(null===x||void 0===x?void 0:x.population_density)||"N/A"})]}),(0,et.jsxs)("div",{className:"urban-item",children:[(0,et.jsx)("label",{children:"Development Level"}),(0,et.jsx)("span",{children:(null===x||void 0===x?void 0:x.development_level)||"N/A"})]}),(0,et.jsxs)("div",{className:"urban-item",children:[(0,et.jsx)("label",{children:"Land Use Type"}),(0,et.jsx)("span",{children:(null===x||void 0===x?void 0:x.land_use_type)||"N/A"})]})]})]}),b&&!b.error&&(0,et.jsxs)("div",{className:"section environmental-section",children:[(0,et.jsx)("h4",{children:"\ud83c\udf3f Environmental Context"}),(0,et.jsxs)("div",{className:"env-grid",children:[(0,et.jsxs)("div",{className:"env-item",children:[(0,et.jsx)("label",{children:"Climate Zone"}),(0,et.jsx)("span",{children:(null===b||void 0===b?void 0:b.climate_zone)||"N/A"})]}),(0,et.jsxs)("div",{className:"env-item",children:[(0,et.jsx)("label",{children:"Elevation Context"}),(0,et.jsx)("span",{children:(null===b||void 0===b?void 0:b.elevation_context)||"N/A"})]}),(0,et.jsxs)("div",{className:"env-item",children:[(0,et.jsx)("label",{children:"Environmental Challenges"}),(0,et.jsx)("span",{children:(null===b||void 0===b||null===(n=b.environmental_challenges)||void 0===n?void 0:n.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"env-item",children:[(0,et.jsx)("label",{children:"Natural Hazards"}),(0,et.jsx)("span",{children:(null===b||void 0===b||null===(i=b.natural_hazards)||void 0===i?void 0:i.join(", "))||"N/A"})]})]})]}),D&&!D.error&&(0,et.jsxs)("div",{className:"section population-section",children:[(0,et.jsx)("h4",{children:"\ud83d\udc65 Population Analysis"}),(0,et.jsxs)("div",{className:"population-grid",children:[(0,et.jsxs)("div",{className:"population-item",children:[(0,et.jsx)("label",{children:"Population Density"}),(0,et.jsxs)("span",{children:[(null===D||void 0===D||null===(r=D.population_density_per_km2)||void 0===r?void 0:r.toLocaleString())||"N/A"," people/km\xb2"]})]}),(0,et.jsxs)("div",{className:"population-item",children:[(0,et.jsx)("label",{children:"Density Category"}),(0,et.jsx)("span",{className:"density-".concat(null===D||void 0===D||null===(o=D.density_category)||void 0===o?void 0:o.toLowerCase()),children:(null===D||void 0===D?void 0:D.density_category)||"N/A"})]}),(0,et.jsxs)("div",{className:"population-item",children:[(0,et.jsx)("label",{children:"Data Source"}),(0,et.jsx)("span",{children:(null===D||void 0===D?void 0:D.source)||"N/A"})]}),(0,et.jsxs)("div",{className:"population-item",children:[(0,et.jsx)("label",{children:"Confidence"}),(0,et.jsx)("span",{children:(null===D||void 0===D?void 0:D.confidence)||"N/A"})]})]})]}),E&&!E.error&&(0,et.jsxs)("div",{className:"section air-quality-section",children:[(0,et.jsx)("h4",{children:"\ud83c\udf2c\ufe0f Air Quality Analysis"}),(0,et.jsxs)("div",{className:"air-quality-grid",children:[(0,et.jsxs)("div",{className:"air-quality-item",children:[(0,et.jsx)("label",{children:"AQI Value"}),(0,et.jsx)("span",{className:"aqi-".concat(null===E||void 0===E||null===(a=E.aqi_category)||void 0===a?void 0:a.toLowerCase().replace(/\s+/g,"-")),children:(null===E||void 0===E?void 0:E.aqi_value)||"N/A"})]}),(0,et.jsxs)("div",{className:"air-quality-item",children:[(0,et.jsx)("label",{children:"AQI Category"}),(0,et.jsx)("span",{className:"aqi-".concat(null===E||void 0===E||null===(s=E.aqi_category)||void 0===s?void 0:s.toLowerCase().replace(/\s+/g,"-")),children:(null===E||void 0===E?void 0:E.aqi_category)||"N/A"})]}),(0,et.jsxs)("div",{className:"air-quality-item",children:[(0,et.jsx)("label",{children:"Primary Pollutants"}),(0,et.jsx)("span",{children:(null===E||void 0===E||null===(l=E.primary_pollutants)||void 0===l?void 0:l.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"air-quality-item",children:[(0,et.jsx)("label",{children:"Health Implications"}),(0,et.jsx)("span",{className:"health-text",children:(null===E||void 0===E?void 0:E.health_implications)||"N/A"})]})]})]}),w&&!w.error&&(0,et.jsxs)("div",{className:"section infrastructure-section",children:[(0,et.jsx)("h4",{children:"\ud83d\udee3\ufe0f Infrastructure"}),(0,et.jsxs)("div",{className:"infra-grid",children:[(0,et.jsxs)("div",{className:"infra-item",children:[(0,et.jsx)("label",{children:"Connectivity Level"}),(0,et.jsx)("span",{children:(null===w||void 0===w?void 0:w.connectivity_level)||"N/A"})]}),(0,et.jsxs)("div",{className:"infra-item",children:[(0,et.jsx)("label",{children:"Accessibility"}),(0,et.jsx)("span",{children:(null===w||void 0===w?void 0:w.accessibility_rating)||"N/A"})]}),(0,et.jsxs)("div",{className:"infra-item",children:[(0,et.jsx)("label",{children:"Transportation Modes"}),(0,et.jsx)("span",{children:(null===w||void 0===w||null===(c=w.transportation_modes)||void 0===c?void 0:c.join(", "))||"N/A"})]}),(0,et.jsxs)("div",{className:"infra-item",children:[(0,et.jsx)("label",{children:"Available Infrastructure"}),(0,et.jsx)("span",{children:(null===w||void 0===w||null===(u=w.available_infrastructure)||void 0===u?void 0:u.join(", "))||"N/A"})]})]})]}),(0,et.jsxs)("div",{className:"snap-footer",children:[(0,et.jsxs)("div",{className:"terrain-tag",children:[(0,et.jsx)("span",{className:"dot"})," ",C]}),(0,et.jsxs)("div",{className:"political-info",children:[(0,et.jsx)("span",{className:"admin-level",children:(null===g||void 0===g?void 0:g.administrative_level)||"Local"}),(0,et.jsx)("span",{className:"sovereignty",children:(null===g||void 0===g?void 0:g.sovereignty_status)||"Territory"})]})]})]})]})})},Yl=e=>{let{location:t,onImpactUpdate:n}=e;const[i,r]=(0,o.useState)(null),[a,s]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(null),[d,p]=(0,o.useState)("development"),[f,m]=(0,o.useState)(null),g=(0,o.useCallback)(e=>{const t={carbonFootprint:v(e),biodiversityImpact:_(e),waterUsage:x(e),energyEfficiency:b(e),sustainabilityScore:w(e)};m(t)},[]),y=(0,o.useCallback)(()=>{var e,n,i,r,o,a,s,l,c,u,d,p,f,m,y,v,_,x;const b=t.factors,w={terrain:{slope:(null===(e=b.physical)||void 0===e||null===(n=e.slope)||void 0===n?void 0:n.value)||0,elevation:(null===(i=b.physical)||void 0===i||null===(r=i.elevation)||void 0===r?void 0:r.value)||0,stability:(null===(o=b.physical)||void 0===o||null===(a=o.slope)||void 0===a?void 0:a.value)<8?"stable":"challenging"},environment:{vegetation:(null===(s=b.environmental)||void 0===s||null===(l=s.vegetation)||void 0===l?void 0:l.value)||50,airQuality:(null===(c=b.environmental)||void 0===c||null===(u=c.pollution)||void 0===u?void 0:u.value)||50,waterProximity:(null===(d=b.hydrology)||void 0===d||null===(p=d.water)||void 0===p?void 0:p.value)||50},infrastructure:{connectivity:(null===(f=b.socio_econ)||void 0===f||null===(m=f.infrastructure)||void 0===m?void 0:m.value)||50,population:(null===(y=b.socio_econ)||void 0===y||null===(v=y.population)||void 0===v?void 0:v.value)||50,landUse:(null===(_=b.socio_econ)||void 0===_||null===(x=_.landuse)||void 0===x?void 0:x.value)||50}};h(w),g(w)},[t,g]);(0,o.useEffect)(()=>{t&&t.factors&&y()},[t,y]);const v=e=>{const t=e.terrain.slope>15?1.3:1,n=e.environment.vegetation>70?.7:1;return Math.round(100*t*n)},_=e=>{const t=e.environment.vegetation;return t>80?"high":t>50?"medium":"low"},x=e=>{const t=e.environment.vegetation>60?.8:1.2;return Math.round(150*t)},b=e=>{const t=e.terrain.slope<5?90:e.terrain.slope<15?70:50,n=e.environment.vegetation>60?85:70,i=e.infrastructure.connectivity;return Math.round((t+n+i)/3)},w=e=>{const t=[e.environment.vegetation,100-e.environment.airQuality,e.infrastructure.connectivity,100-e.terrain.slope];return Math.round(t.reduce((e,t)=>e+t,0)/t.length)},D=(e,t)=>{const n=e.impacts,i={terrain:t.terrain.slope>10?1.2:1,vegetation:t.environment.vegetation>70?.8:1.1,infrastructure:t.infrastructure.connectivity/50,population:t.infrastructure.population/50};return Object.keys(n).reduce((e,t)=>(e[t]=Math.round(n[t]*(i[t]||1)),e),{})},E=(e,t)=>{const n=[];return t.terrain.slope>10&&n.push("Consider terracing for steep terrain development"),t.environment.vegetation>80&&n.push("Preserve mature trees and integrate into landscape design"),t.infrastructure.connectivity<60&&n.push("Invest in transportation infrastructure improvements"),e.pollution>10&&n.push("Implement advanced air filtration and green building materials"),n},C=(e,t)=>{let n=100;return t.terrain.slope>15?n-=20:t.terrain.slope>10&&(n-=10),t.infrastructure.connectivity<40?n-=15:t.infrastructure.connectivity<60&&(n-=5),t.environment.vegetation>90&&(n-=10),t.environment.airQuality<30&&(n-=10),"industrial"===e.id&&t.infrastructure.population>70&&(n-=15),"hospital"===e.id&&t.infrastructure.connectivity<50&&(n-=10),n>80?"excellent":n>60?"good":n>40?"moderate":"challenging"},A=(e,t)=>{let n={residential:24,commercial:30,industrial:36,hospital:48,school:18,mixed:42}[e.id]||24;return t.terrain.slope>10&&(n*=1.3),t.infrastructure.connectivity<50&&(n*=1.2),t.environment.vegetation>80&&(n*=1.1),Math.round(n)},S=(e,t)=>{let n={residential:8.5,commercial:12,industrial:10.5,hospital:6.5,school:7,mixed:11}[e.id]||8;return t.infrastructure.connectivity>70&&(n*=1.2),t.infrastructure.population>70&&(n*=1.1),t.terrain.slope>10&&(n*=.9),n.toFixed(1)};return(0,et.jsxs)("div",{className:"digital-twin-enhanced",children:[(0,et.jsxs)("div",{className:"twin-header",children:[(0,et.jsxs)("div",{className:"twin-title",children:[(0,et.jsx)("h3",{children:"\ud83c\udf0d Location Intelligence Digital Twin"}),(0,et.jsx)("p",{className:"twin-subtitle",children:"Advanced Development Impact Simulation"})]}),u&&(0,et.jsxs)("div",{className:"location-summary",children:[(0,et.jsxs)("div",{className:"location-metric",children:[(0,et.jsx)("span",{className:"metric-label",children:"Terrain"}),(0,et.jsx)("span",{className:"metric-value ".concat(u.terrain.stability),children:u.terrain.stability})]}),(0,et.jsxs)("div",{className:"location-metric",children:[(0,et.jsx)("span",{className:"metric-label",children:"Environment"}),(0,et.jsxs)("span",{className:"metric-value",children:[(null===f||void 0===f?void 0:f.sustainabilityScore)||0,"%"]})]}),(0,et.jsxs)("div",{className:"location-metric",children:[(0,et.jsx)("span",{className:"metric-label",children:"Infrastructure"}),(0,et.jsxs)("span",{className:"metric-value",children:[u.infrastructure.connectivity,"%"]})]})]})]}),(0,et.jsxs)("div",{className:"twin-tabs",children:[(0,et.jsx)("button",{className:"tab-btn ".concat("development"===d?"active":""),onClick:()=>p("development"),children:"\ud83c\udfd7\ufe0f Development Types"}),(0,et.jsx)("button",{className:"tab-btn ".concat("environment"===d?"active":""),onClick:()=>p("environment"),children:"\ud83c\udf3f Environmental Analysis"}),(0,et.jsx)("button",{className:"tab-btn ".concat("simulation"===d?"active":""),onClick:()=>p("simulation"),children:"\ud83d\udcca Impact Simulation"})]}),(0,et.jsxs)("div",{className:"twin-content",children:["development"===d&&(0,et.jsx)("div",{className:"development-selection",children:(0,et.jsx)("div",{className:"dev-grid",children:[{id:"residential",name:"Smart Residential Complex",icon:"\ud83c\udfd8\ufe0f",description:"Sustainable multi-family housing with green infrastructure",impacts:{pollution:2,traffic:6,infrastructure:10,population:15,sustainability:8},color:"#3b82f6",features:["Solar Panels","Rainwater Harvesting","Green Roofs","EV Charging"],suitability:["urban","suburban","near-transit"]},{id:"commercial",name:"Tech Innovation Hub",icon:"\ud83c\udfe2",description:"Modern office complex with smart building systems",impacts:{pollution:3,traffic:8,infrastructure:7,population:10,sustainability:9},color:"#8b5cf6",features:["Smart HVAC","Energy Storage","Green Certification","IoT Systems"],suitability:["urban","business-district","near-airport"]},{id:"industrial",name:"Green Manufacturing Plant",icon:"\ud83c\udfed",description:"Eco-friendly industrial facility with circular economy principles",impacts:{pollution:8,traffic:4,infrastructure:6,population:5,sustainability:7},color:"#ef4444",features:["Waste Recycling","Clean Energy","Water Treatment","Automation"],suitability:["industrial-zone","near-highway","away-residential"]},{id:"hospital",name:"Advanced Medical Center",icon:"\ud83c\udfe5",description:"State-of-the-art healthcare facility with emergency services",impacts:{pollution:2,traffic:10,infrastructure:12,population:8,sustainability:8},color:"#10b981",features:["Helipad","Solar Backup","Smart Beds","Telemedicine"],suitability:["near-residential","major-road","accessible"]},{id:"school",name:"Sustainable Educational Campus",icon:"\ud83c\udf93",description:"Modern educational facility with environmental focus",impacts:{pollution:1,traffic:6,infrastructure:8,population:12,sustainability:9},color:"#f59e0b",features:["Solar Power","Garden Classrooms","Water Recycling","Digital Learning"],suitability:["residential","quiet-area","near-parks"]},{id:"mixed",name:"Live-Work-Play Complex",icon:"\ud83c\udf06",description:"Integrated development with residential, commercial, and recreational spaces",impacts:{pollution:4,traffic:7,infrastructure:9,population:18,sustainability:8},color:"#06b6d4",features:["Mixed-Use Zoning","Public Spaces","Transit Hub","Community Services"],suitability:["urban-center","transit-oriented","high-density"]}].map(e=>(0,et.jsxs)("div",{className:"dev-card ".concat((null===i||void 0===i?void 0:i.id)===e.id?"selected":""),onClick:()=>r(e),style:{borderColor:e.color},children:[(0,et.jsx)("div",{className:"dev-icon",children:e.icon}),(0,et.jsxs)("div",{className:"dev-info",children:[(0,et.jsx)("h4",{children:e.name}),(0,et.jsx)("p",{children:e.description}),(0,et.jsx)("div",{className:"dev-features",children:e.features.map((e,t)=>(0,et.jsx)("span",{className:"feature-tag",children:e},t))}),(0,et.jsxs)("div",{className:"dev-suitability",children:[(0,et.jsx)("span",{className:"suitability-label",children:"Best for:"}),(0,et.jsx)("div",{className:"suitability-tags",children:e.suitability.map((e,t)=>(0,et.jsx)("span",{className:"suitability-tag",children:e},t))})]})]})]},e.id))})}),"environment"===d&&f&&(0,et.jsx)("div",{className:"environmental-dashboard",children:(0,et.jsxs)("div",{className:"env-grid",children:[(0,et.jsxs)("div",{className:"env-card",children:[(0,et.jsxs)("div",{className:"env-header",children:[(0,et.jsx)("span",{className:"env-icon",children:"\ud83c\udf21\ufe0f"}),(0,et.jsx)("h4",{children:"Carbon Footprint"})]}),(0,et.jsxs)("div",{className:"env-value",children:[f.carbonFootprint," kg CO\u2082/m\xb2/year"]}),(0,et.jsx)("div",{className:"env-bar",children:(0,et.jsx)("div",{className:"env-fill",style:{width:"".concat(Math.min(f.carbonFootprint/2,100),"%")}})})]}),(0,et.jsxs)("div",{className:"env-card",children:[(0,et.jsxs)("div",{className:"env-header",children:[(0,et.jsx)("span",{className:"env-icon",children:"\ud83e\udd8b"}),(0,et.jsx)("h4",{children:"Biodiversity Impact"})]}),(0,et.jsx)("div",{className:"env-value",children:f.biodiversityImpact}),(0,et.jsx)("div",{className:"env-indicator ".concat(f.biodiversityImpact),children:(0,et.jsx)("div",{className:"indicator-dot"})})]}),(0,et.jsxs)("div",{className:"env-card",children:[(0,et.jsxs)("div",{className:"env-header",children:[(0,et.jsx)("span",{className:"env-icon",children:"\ud83d\udca7"}),(0,et.jsx)("h4",{children:"Water Usage"})]}),(0,et.jsxs)("div",{className:"env-value",children:[f.waterUsage," L/m\xb2/year"]}),(0,et.jsx)("div",{className:"env-bar",children:(0,et.jsx)("div",{className:"env-fill water",style:{width:"".concat(Math.min(f.waterUsage/3,100),"%")}})})]}),(0,et.jsxs)("div",{className:"env-card",children:[(0,et.jsxs)("div",{className:"env-header",children:[(0,et.jsx)("span",{className:"env-icon",children:"\u26a1"}),(0,et.jsx)("h4",{children:"Energy Efficiency"})]}),(0,et.jsxs)("div",{className:"env-value",children:[f.energyEfficiency,"%"]}),(0,et.jsx)("div",{className:"env-bar",children:(0,et.jsx)("div",{className:"env-fill energy",style:{width:"".concat(f.energyEfficiency,"%")}})})]}),(0,et.jsxs)("div",{className:"env-card",children:[(0,et.jsxs)("div",{className:"env-header",children:[(0,et.jsx)("span",{className:"env-icon",children:"\ud83c\udf31"}),(0,et.jsx)("h4",{children:"Sustainability Score"})]}),(0,et.jsxs)("div",{className:"env-value",children:[f.sustainabilityScore,"%"]}),(0,et.jsx)("div",{className:"env-bar",children:(0,et.jsx)("div",{className:"env-fill sustainability",style:{width:"".concat(f.sustainabilityScore,"%")}})})]})]})}),"simulation"===d&&(0,et.jsx)("div",{className:"simulation-panel",children:i?(0,et.jsxs)("div",{className:"simulation-active",children:[(0,et.jsxs)("div",{className:"selected-dev-summary",children:[(0,et.jsx)("div",{className:"selected-dev-icon",style:{backgroundColor:i.color},children:i.icon}),(0,et.jsxs)("div",{className:"selected-dev-info",children:[(0,et.jsx)("h4",{children:i.name}),(0,et.jsx)("p",{children:i.description})]})]}),(0,et.jsx)("button",{className:"simulate-btn ".concat(l?"calculating":""),onClick:async()=>{if(!i||!u)return;c(!0),await new Promise(e=>setTimeout(e,2e3));const e=D(i,u);s({development:i,impacts:e,location:u,environmental:f,recommendations:E(e,u),feasibility:C(i,u),timeline:A(i,u),roi:S(i,u)}),c(!1),n(e)},disabled:l,children:l?(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)("div",{className:"loading-spinner"}),"Analyzing Location Impact..."]}):(0,et.jsx)(et.Fragment,{children:"\ud83d\ude80 Run Advanced Simulation"})}),a&&(0,et.jsxs)("div",{className:"simulation-results",children:[(0,et.jsxs)("div",{className:"results-header",children:[(0,et.jsx)("h4",{children:"\ud83d\udcca Impact Analysis Results"}),(0,et.jsxs)("div",{className:"feasibility-badge",children:["Feasibility: ",(0,et.jsx)("span",{className:"feasibility-".concat(a.feasibility),children:a.feasibility})]})]}),(0,et.jsxs)("div",{className:"results-grid",children:[(0,et.jsxs)("div",{className:"result-card",children:[(0,et.jsx)("h5",{children:"Environmental Impact"}),(0,et.jsxs)("div",{className:"impact-metrics",children:[(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{children:"Pollution"}),(0,et.jsx)("div",{className:"metric-bar",children:(0,et.jsx)("div",{className:"metric-fill",style:{width:"".concat(4*a.impacts.pollution,"%")}})}),(0,et.jsx)("span",{children:a.impacts.pollution})]}),(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{children:"Traffic"}),(0,et.jsx)("div",{className:"metric-bar",children:(0,et.jsx)("div",{className:"metric-fill",style:{width:"".concat(4*a.impacts.traffic,"%")}})}),(0,et.jsx)("span",{children:a.impacts.traffic})]}),(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{children:"Infrastructure"}),(0,et.jsx)("div",{className:"metric-bar",children:(0,et.jsx)("div",{className:"metric-fill",style:{width:"".concat(4*a.impacts.infrastructure,"%")}})}),(0,et.jsx)("span",{children:a.impacts.infrastructure})]})]})]}),(0,et.jsxs)("div",{className:"result-card",children:[(0,et.jsx)("h5",{children:"Economic Analysis"}),(0,et.jsxs)("div",{className:"economic-metrics",children:[(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{children:"ROI"}),(0,et.jsxs)("span",{className:"roi-value",children:[a.roi,"%"]})]}),(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{children:"Timeline"}),(0,et.jsxs)("span",{children:[a.timeline," months"]})]}),(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{children:"Population Impact"}),(0,et.jsx)("span",{children:a.impacts.population})]})]})]}),(0,et.jsxs)("div",{className:"result-card full-width",children:[(0,et.jsx)("h5",{children:"\ud83c\udfaf Location-Specific Recommendations"}),(0,et.jsx)("ul",{className:"recommendations",children:a.recommendations.map((e,t)=>(0,et.jsx)("li",{children:e},t))})]})]})]})]}):(0,et.jsxs)("div",{className:"select-dev-prompt",children:[(0,et.jsx)("div",{className:"prompt-icon",children:"\ud83c\udfd7\ufe0f"}),(0,et.jsx)("h3",{children:"Select a Development Type"}),(0,et.jsx)("p",{children:"Choose from the Development Types tab to begin simulation"})]})})]})]})};function Xl(){}function Kl(){}const $l=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088F\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5C\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDC-\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ADD\u1AE0-\u1AEB\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC7\uDEFA-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDF60-\uDF67\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDDB0-\uDDDB\uDDE0-\uDDE9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDEC0-\uDEDE\uDEE0-\uDEF5\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]|\uDB40[\uDD00-\uDDEF])*$/,Ql=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])(?:[\$\x2D0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088F\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5C\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDC-\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ADD\u1AE0-\u1AEB\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC7\uDEFA-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDF60-\uDF67\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDDB0-\uDDDB\uDDE0-\uDDE9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0-\uDFF6]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDEC0-\uDEDE\uDEE0-\uDEF5\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]|\uDB40[\uDD00-\uDDEF])*$/,Jl={};function ec(e,t){return((t||Jl).jsx?Ql:$l).test(e)}const tc=/[ \t\n\f\r]/g;function nc(e){return""===e.replace(tc,"")}class ic{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function rc(e,t){const n={},i={};for(const r of e)Object.assign(n,r.property),Object.assign(i,r.normal);return new ic(n,i,t)}function oc(e){return e.toLowerCase()}ic.prototype.normal={},ic.prototype.property={},ic.prototype.space=void 0;class ac{constructor(e,t){this.attribute=t,this.property=e}}ac.prototype.attribute="",ac.prototype.booleanish=!1,ac.prototype.boolean=!1,ac.prototype.commaOrSpaceSeparated=!1,ac.prototype.commaSeparated=!1,ac.prototype.defined=!1,ac.prototype.mustUseProperty=!1,ac.prototype.number=!1,ac.prototype.overloadedBoolean=!1,ac.prototype.property="",ac.prototype.spaceSeparated=!1,ac.prototype.space=void 0;let sc=0;const lc=mc(),cc=mc(),uc=mc(),hc=mc(),dc=mc(),pc=mc(),fc=mc();function mc(){return 2**++sc}const gc=Object.keys(e);class yc extends ac{constructor(t,n,i,r){let o=-1;if(super(t,n),vc(this,"space",r),"number"===typeof i)for(;++o<gc.length;){const t=gc[o];vc(this,gc[o],(i&e[t])===e[t])}}}function vc(e,t,n){n&&(e[t]=n)}function _c(e){const t={},n={};for(const[i,r]of Object.entries(e.properties)){const o=new yc(i,e.transform(e.attributes||{},i),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),t[i]=o,n[oc(i)]=i,n[oc(o.attribute)]=i}return new ic(t,n,e.space)}yc.prototype.defined=!0;const xc=_c({properties:{ariaActiveDescendant:null,ariaAtomic:cc,ariaAutoComplete:null,ariaBusy:cc,ariaChecked:cc,ariaColCount:hc,ariaColIndex:hc,ariaColSpan:hc,ariaControls:dc,ariaCurrent:null,ariaDescribedBy:dc,ariaDetails:null,ariaDisabled:cc,ariaDropEffect:dc,ariaErrorMessage:null,ariaExpanded:cc,ariaFlowTo:dc,ariaGrabbed:cc,ariaHasPopup:null,ariaHidden:cc,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:dc,ariaLevel:hc,ariaLive:null,ariaModal:cc,ariaMultiLine:cc,ariaMultiSelectable:cc,ariaOrientation:null,ariaOwns:dc,ariaPlaceholder:null,ariaPosInSet:hc,ariaPressed:cc,ariaReadOnly:cc,ariaRelevant:null,ariaRequired:cc,ariaRoleDescription:dc,ariaRowCount:hc,ariaRowIndex:hc,ariaRowSpan:hc,ariaSelected:cc,ariaSetSize:hc,ariaSort:null,ariaValueMax:hc,ariaValueMin:hc,ariaValueNow:hc,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function bc(e,t){return t in e?e[t]:t}function wc(e,t){return bc(e,t.toLowerCase())}const Dc=_c({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:pc,acceptCharset:dc,accessKey:dc,action:null,allow:null,allowFullScreen:lc,allowPaymentRequest:lc,allowUserMedia:lc,alt:null,as:null,async:lc,autoCapitalize:null,autoComplete:dc,autoFocus:lc,autoPlay:lc,blocking:dc,capture:null,charSet:null,checked:lc,cite:null,className:dc,cols:hc,colSpan:null,content:null,contentEditable:cc,controls:lc,controlsList:dc,coords:hc|pc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:lc,defer:lc,dir:null,dirName:null,disabled:lc,download:uc,draggable:cc,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:lc,formTarget:null,headers:dc,height:hc,hidden:uc,high:hc,href:null,hrefLang:null,htmlFor:dc,httpEquiv:dc,id:null,imageSizes:null,imageSrcSet:null,inert:lc,inputMode:null,integrity:null,is:null,isMap:lc,itemId:null,itemProp:dc,itemRef:dc,itemScope:lc,itemType:dc,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:lc,low:hc,manifest:null,max:null,maxLength:hc,media:null,method:null,min:null,minLength:hc,multiple:lc,muted:lc,name:null,nonce:null,noModule:lc,noValidate:lc,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:lc,optimum:hc,pattern:null,ping:dc,placeholder:null,playsInline:lc,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:lc,referrerPolicy:null,rel:dc,required:lc,reversed:lc,rows:hc,rowSpan:hc,sandbox:dc,scope:null,scoped:lc,seamless:lc,selected:lc,shadowRootClonable:lc,shadowRootDelegatesFocus:lc,shadowRootMode:null,shape:null,size:hc,sizes:null,slot:null,span:hc,spellCheck:cc,src:null,srcDoc:null,srcLang:null,srcSet:null,start:hc,step:null,style:null,tabIndex:hc,target:null,title:null,translate:null,type:null,typeMustMatch:lc,useMap:null,value:cc,width:hc,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:dc,axis:null,background:null,bgColor:null,border:hc,borderColor:null,bottomMargin:hc,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:lc,declare:lc,event:null,face:null,frame:null,frameBorder:null,hSpace:hc,leftMargin:hc,link:null,longDesc:null,lowSrc:null,marginHeight:hc,marginWidth:hc,noResize:lc,noHref:lc,noShade:lc,noWrap:lc,object:null,profile:null,prompt:null,rev:null,rightMargin:hc,rules:null,scheme:null,scrolling:cc,standby:null,summary:null,text:null,topMargin:hc,valueType:null,version:null,vAlign:null,vLink:null,vSpace:hc,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:lc,disableRemotePlayback:lc,prefix:null,property:null,results:hc,security:null,unselectable:null},space:"html",transform:wc}),Ec=_c({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fc,accentHeight:hc,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:hc,amplitude:hc,arabicForm:null,ascent:hc,attributeName:null,attributeType:null,azimuth:hc,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:hc,by:null,calcMode:null,capHeight:hc,className:dc,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:hc,diffuseConstant:hc,direction:null,display:null,dur:null,divisor:hc,dominantBaseline:null,download:lc,dx:null,dy:null,edgeMode:null,editable:null,elevation:hc,enableBackground:null,end:null,event:null,exponent:hc,externalResourcesRequired:null,fill:null,fillOpacity:hc,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:pc,g2:pc,glyphName:pc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:hc,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:hc,horizOriginX:hc,horizOriginY:hc,id:null,ideographic:hc,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:hc,k:hc,k1:hc,k2:hc,k3:hc,k4:hc,kernelMatrix:fc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:hc,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:hc,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:hc,overlineThickness:hc,paintOrder:null,panose1:null,path:null,pathLength:hc,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:dc,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:hc,pointsAtY:hc,pointsAtZ:hc,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fc,rev:fc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fc,requiredFeatures:fc,requiredFonts:fc,requiredFormats:fc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:hc,specularExponent:hc,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:hc,strikethroughThickness:hc,string:null,stroke:null,strokeDashArray:fc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:hc,strokeOpacity:hc,strokeWidth:null,style:null,surfaceScale:hc,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fc,tabIndex:hc,tableValues:null,target:null,targetX:hc,targetY:hc,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:hc,underlineThickness:hc,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:hc,values:null,vAlphabetic:hc,vMathematical:hc,vectorEffect:null,vHanging:hc,vIdeographic:hc,version:null,vertAdvY:hc,vertOriginX:hc,vertOriginY:hc,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:hc,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:bc}),Cc=_c({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),Ac=_c({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:wc}),Sc=_c({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),Tc=rc([xc,Dc,Cc,Ac,Sc],"html"),Fc=rc([xc,Ec,Cc,Ac,Sc],"svg"),kc=/[A-Z]/g,Pc=/-[a-z]/g,Mc=/^data[-\w.:]+$/i;function Ic(e){return"-"+e.toLowerCase()}function jc(e){return e.charAt(1).toUpperCase()}const Nc={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Oc=n(7294);const Bc=zc("end"),Lc=zc("start");function zc(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Rc(e){return e&&"object"===typeof e?"position"in e||"type"in e?Uc(e.position):"start"in e||"end"in e?Uc(e):"line"in e||"column"in e?Vc(e):"":""}function Vc(e){return qc(e&&e.line)+":"+qc(e&&e.column)}function Uc(e){return Vc(e&&e.start)+"-"+Vc(e&&e.end)}function qc(e){return e&&"number"===typeof e?e:1}class Zc extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let i="",r={},o=!1;if(t&&(r="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:Fe({},t)),"string"===typeof e?i=e:!r.cause&&e&&(o=!0,i=e.message,r.cause=e),!r.ruleId&&!r.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?r.ruleId=n:(r.source=n.slice(0,e),r.ruleId=n.slice(e+1))}if(!r.place&&r.ancestors&&r.ancestors){const e=r.ancestors[r.ancestors.length-1];e&&(r.place=e.position)}const a=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Rc(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=o&&r.cause&&"string"===typeof r.cause.stack?r.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Zc.prototype.file="",Zc.prototype.name="",Zc.prototype.reason="",Zc.prototype.message="",Zc.prototype.stack="",Zc.prototype.column=void 0,Zc.prototype.line=void 0,Zc.prototype.ancestors=void 0,Zc.prototype.cause=void 0,Zc.prototype.fatal=void 0,Zc.prototype.place=void 0,Zc.prototype.ruleId=void 0,Zc.prototype.source=void 0;const Hc={}.hasOwnProperty,Gc=new Map,Wc=/[A-Z]/g,Yc=new Set(["table","tbody","thead","tfoot","tr"]),Xc=new Set(["td","th"]),Kc="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function $c(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=function(e,t){return n;function n(n,i,r,o){const a=Array.isArray(r.children),s=Lc(n);return t(i,r,o,a,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");i=function(e,t,n){return i;function i(e,i,r,o){const a=Array.isArray(r.children)?n:t;return o?a(i,r,o):a(i,r)}}(0,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Fc:Tc,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=Qc(r,e,void 0);return o&&"string"!==typeof o?o:r.create(e,r.Fragment,{children:o||void 0},void 0)}function Qc(e,t,n){return"element"===t.type?function(e,t,n){const i=e.schema;let r=i;"svg"===t.tagName.toLowerCase()&&"html"===i.space&&(r=Fc,e.schema=r);e.ancestors.push(t);const o=iu(e,t.tagName,!1),a=function(e,t){const n={};let i,r;for(r in t.properties)if("children"!==r&&Hc.call(t.properties,r)){const o=nu(e,r,t.properties[r]);if(o){const[r,a]=o;e.tableCellAlignToStyle&&"align"===r&&"string"===typeof a&&Xc.has(t.tagName)?i=a:n[r]=a}}if(i){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=i}return n}(e,t);let s=tu(e,t);Yc.has(t.tagName)&&(s=s.filter(function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&nc(t.value):nc(t));var t}));return Jc(e,a,o,t),eu(a,s),e.ancestors.pop(),e.schema=i,e.create(t,o,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}ru(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const i=e.schema;let r=i;"svg"===t.name&&"html"===i.space&&(r=Fc,e.schema=r);e.ancestors.push(t);const o=null===t.name?e.Fragment:iu(e,t.name,!0),a=function(e,t){const n={};for(const i of t.attributes)if("mdxJsxExpressionAttribute"===i.type)if(i.data&&i.data.estree&&e.evaluater){const t=i.data.estree.body[0];Xl(t.type);const r=t.expression;Xl(r.type);const o=r.properties[0];Xl(o.type),Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else ru(e,t.position);else{const r=i.name;let o;if(i.value&&"object"===typeof i.value)if(i.value.data&&i.value.data.estree&&e.evaluater){const t=i.value.data.estree.body[0];Xl(t.type),o=e.evaluater.evaluateExpression(t.expression)}else ru(e,t.position);else o=null===i.value||i.value;n[r]=o}return n}(e,t),s=tu(e,t);return Jc(e,a,o,t),eu(a,s),e.ancestors.pop(),e.schema=i,e.create(t,o,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ru(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const i={};return eu(i,tu(e,t)),e.create(t,e.Fragment,i,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function Jc(e,t,n,i){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=i)}function eu(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function tu(e,t){const n=[];let i=-1;const r=e.passKeys?new Map:Gc;for(;++i<t.children.length;){const o=t.children[i];let a;if(e.passKeys){const e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){const t=r.get(e)||0;a=e+"-"+t,r.set(e,t+1)}}const s=Qc(e,o,a);void 0!==s&&n.push(s)}return n}function nu(e,t,n){const i=function(e,t){const n=oc(t);let i=t,r=ac;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Mc.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Pc,jc);i="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Pc.test(e)){let n=e.replace(kc,Ic);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}r=yc}return new r(i,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===i.property){let t="object"===typeof n?n:function(e,t){try{return Oc(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,i=new Zc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Kc+"#cannot-parse-style-attribute",i}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Hc.call(e,n)&&(t[ou(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&i.space?Nc[i.property]||i.property:i.attribute,n]}}function iu(e,t,n){let i;if(n)if(t.includes(".")){const e=t.split(".");let n,r=-1;for(;++r<e.length;){const t=ec(e[r])?{type:"Identifier",name:e[r]}:{type:"Literal",value:e[r]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(r&&"Literal"===t.type),optional:!1}:t}i=n}else i=ec(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else i={type:"Literal",value:t};if("Literal"===i.type){const t=i.value;return Hc.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(i);ru(e)}function ru(e,t){const n=new Zc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Kc+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ou(e){let t=e.replace(Wc,au);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function au(e){return"-"+e.toLowerCase()}const su={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},lu={};function cu(e,t){const n=t||lu;return uu(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}function uu(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return hu(e.children,t,n)}return Array.isArray(e)?hu(e,t,n):""}function hu(e,t,n){const i=[];let r=-1;for(;++r<e.length;)i[r]=uu(e[r],t,n);return i.join("")}function du(e,t,n,i){const r=e.length;let o,a=0;if(t=t<0?-t>r?0:r+t:t>r?r:t,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<i.length;)o=i.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function pu(e,t){return e.length>0?(du(e,e.length,0,t),e):t}class fu{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const i=t||0;this.setCursor(Math.trunc(e));const r=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&mu(this.left,n),r.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),mu(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),mu(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);mu(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);mu(this.left,t.reverse())}}}function mu(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function gu(e){const t={};let n,i,r,o,a,s,l,c=-1;const u=new fu(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(s=n[1]._tokenizer.events,r=0,r<s.length&&"lineEndingBlank"===s[r][1].type&&(r+=2),r<s.length&&"content"===s[r][1].type))for(;++r<s.length&&"content"!==s[r][1].type;)"chunkText"===s[r][1].type&&(s[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,yu(u,c)),c=t[c],l=!0);else if(n[1]._container){for(r=c,i=void 0;r--;)if(o=u.get(r),"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type)"enter"===o[0]&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=r);else if("linePrefix"!==o[1].type&&"listItemIndent"!==o[1].type)break;i&&(n[1].end=Fe({},u.get(i)[1].start),a=u.slice(i,c),a.unshift(n),u.splice(i,c-i+1,a))}}return du(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function yu(e,t){const n=e.get(t)[1],i=e.get(t)[2];let r=t-1;const o=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],c={};let u,h,d=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e.get(++r)[1]!==p;);o.push(r),p._tokenizer||(u=i.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++d<s.length;)"exit"===s[d][0]&&"enter"===s[d-1][0]&&s[d][1].type===s[d-1][1].type&&s[d][1].start.line!==s[d][1].end.line&&(m=d+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),d=g.length;d--;){const t=s.slice(g[d],g[d+1]),n=o.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),d=-1;++d<l.length;)c[f+l[d][0]]=f+l[d][1],f+=l[d][1]-l[d][0]-1;return c}const vu={}.hasOwnProperty;function _u(e){const t={};let n=-1;for(;++n<e.length;)xu(t,e[n]);return t}function xu(e,t){let n;for(n in t){const i=(vu.call(e,n)?e[n]:void 0)||(e[n]={}),r=t[n];let o;if(r)for(o in r){vu.call(i,o)||(i[o]=[]);const e=r[o];bu(i[o],Array.isArray(e)?e:e?[e]:[])}}}function bu(e,t){let n=-1;const i=[];for(;++n<t.length;)("after"===t[n].add?e:i).push(t[n]);du(e,0,0,i)}const wu=ju(/[A-Za-z]/),Du=ju(/[\dA-Za-z]/),Eu=ju(/[#-'*+\--9=?A-Z^-~]/);function Cu(e){return null!==e&&(e<32||127===e)}const Au=ju(/\d/),Su=ju(/[\dA-Fa-f]/),Tu=ju(/[!-/:-@[-`{-~]/);function Fu(e){return null!==e&&e<-2}function ku(e){return null!==e&&(e<0||32===e)}function Pu(e){return-2===e||-1===e||32===e}const Mu=ju(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDED0\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C1\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F\uDED1-\uDED8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDCFA-\uDCFC\uDD00-\uDEB3\uDEBA-\uDED0\uDEE0-\uDEF0\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED8\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDCD0-\uDCD8\uDD00-\uDE57\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF\uDFFA])/),Iu=ju(/\s/);function ju(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Nu(e,t,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return function(i){if(Pu(i))return e.enter(n),a(i);return t(i)};function a(i){return Pu(i)&&o++<r?(e.consume(i),a):(e.exit(n),t(i))}}const Ou={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Nu(e,t,"linePrefix")},function(t){return e.enter("paragraph"),i(t)});let n;return t;function i(t){const i=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=i),n=i,r(t)}function r(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Fu(t)?(e.consume(t),e.exit("chunkText"),i):(e.consume(t),r)}}};const Bu={tokenize:function(e){const t=this,n=[];let i,r,o,a=0;return s;function s(i){if(a<n.length){const r=n[a];return t.containerState=r[1],e.attempt(r[0].continuation,l,c)(i)}return c(i)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const n=t.events.length;let r,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){r=t.events[o][1].end;break}y(a);let s=n;for(;s<t.events.length;)t.events[s][1].end=Fe({},r),s++;return du(t.events,o+1,0,t.events.slice(n)),t.events.length=s,c(e)}return s(e)}function c(r){if(a===n.length){if(!i)return d(r);if(i.currentConstruct&&i.currentConstruct.concrete)return f(r);t.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Lu,u,h)(r)}function u(e){return i&&v(),y(a),d(e)}function h(e){return t.parser.lazy[t.now().line]=a!==n.length,o=t.now().offset,f(e)}function d(n){return t.containerState={},e.attempt(Lu,p,f)(n)}function p(e){return a++,n.push([t.currentConstruct,t.containerState]),d(e)}function f(n){return null===n?(i&&v(),y(0),void e.consume(n)):(i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:r}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):Fu(n)?(e.consume(n),g(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),m)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=r,r&&(r.next=e),r=e,i.defineSkip(e.start),i.write(s),t.parser.lazy[e.start.line]){let e=i.events.length;for(;e--;)if(i.events[e][1].start.offset<o&&(!i.events[e][1].end||i.events[e][1].end.offset>o))return;const n=t.events.length;let r,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(r){s=t.events[l][1].end;break}r=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end=Fe({},s),e++;du(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(i){let r=n.length;for(;r-- >i;){const i=n[r];t.containerState=i[1],i[0].exit.call(t,e)}n.length=i}function v(){i.write([null]),r=void 0,i=void 0,t.containerState._closeFlow=void 0}}},Lu={tokenize:function(e,t,n){return Nu(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const zu={partial:!0,tokenize:function(e,t,n){return function(t){return Pu(t)?Nu(e,i,"linePrefix")(t):i(t)};function i(e){return null===e||Fu(e)?t(e):n(e)}}};const Ru={resolve:function(e){return gu(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(t)};function i(t){return null===t?r(t):Fu(t)?e.check(Vu,o,r)(t):(e.consume(t),i)}function r(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}},Vu={partial:!0,tokenize:function(e,t,n){const i=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Nu(e,r,"linePrefix")};function r(r){if(null===r||Fu(r))return n(r);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(r):e.interrupt(i.parser.constructs.flow,n,t)(r)}}};const Uu={tokenize:function(e){const t=this,n=e.attempt(zu,function(i){if(null===i)return void e.consume(i);return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,i,Nu(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ru,i)),"linePrefix")));return n;function i(i){if(null!==i)return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(i)}}};const qu={resolveAll:Wu()},Zu=Gu("string"),Hu=Gu("text");function Gu(e){return{resolveAll:Wu("text"===e?Yu:void 0),tokenize:function(t){const n=this,i=this.parser.constructs[e],r=t.attempt(i,o,a);return o;function o(e){return l(e)?r(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),r(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=i[e];let r=-1;if(t)for(;++r<t.length;){const e=t[r];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Wu(e){return function(t,n){let i,r=-1;for(;++r<=t.length;)void 0===i?t[r]&&"data"===t[r][1].type&&(i=r,r++):t[r]&&"data"===t[r][1].type||(r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),r=i+2),i=void 0);return e?e(t,n):t}}function Yu(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const i=e[n-1][1],r=t.sliceStream(i);let o,a=r.length,s=-1,l=0;for(;a--;){const e=r[a];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)o=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const r={type:n===e.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:i.start._bufferIndex+s,_index:i.start._index+a,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:Fe({},i.end)};i.end=Fe({},r.start),i.start.offset===i.end.offset?Object.assign(i,r):(e.splice(n,0,["enter",r,t],["exit",r,t]),n+=2)}n++}return e}const Xu={name:"thematicBreak",tokenize:function(e,t,n){let i,r=0;return function(t){return e.enter("thematicBreak"),function(e){return i=e,o(e)}(t)};function o(o){return o===i?(e.enter("thematicBreakSequence"),a(o)):r>=3&&(null===o||Fu(o))?(e.exit("thematicBreak"),t(o)):n(o)}function a(t){return t===i?(e.consume(t),r++,a):(e.exit("thematicBreakSequence"),Pu(t)?Nu(e,o,"whitespace")(t):o(t))}}};const Ku={continuation:{tokenize:function(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(zu,r,o);function r(n){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Nu(e,t,"listItemIndent",i.containerState.size+1)(n)}function o(n){return i.containerState.furtherBlankLines||!Pu(n)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(n)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(Qu,t,a)(n))}function a(r){return i.containerState._closeFlow=!0,i.interrupt=void 0,Nu(e,e.attempt(Ku,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const i=this,r=i.events[i.events.length-1];let o=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,a=0;return function(t){const r=i.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!i.containerState.marker||t===i.containerState.marker:Au(t)){if(i.containerState.type||(i.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(Xu,n,l)(t):l(t);if(!i.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Au(t)&&++a<10?(e.consume(t),s):(!i.interrupt||a<2)&&(i.containerState.marker?t===i.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||t,e.check(zu,i.interrupt?n:c,e.attempt($u,h,u))}function c(e){return i.containerState.initialBlankLine=!0,o++,h(e)}function u(t){return Pu(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return i.containerState.size=o+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},$u={partial:!0,tokenize:function(e,t,n){const i=this;return Nu(e,function(e){const r=i.events[i.events.length-1];return!Pu(e)&&r&&"listItemPrefixWhitespace"===r[1].type?t(e):n(e)},"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Qu={partial:!0,tokenize:function(e,t,n){const i=this;return Nu(e,function(e){const r=i.events[i.events.length-1];return r&&"listItemIndent"===r[1].type&&r[2].sliceSerialize(r[1],!0).length===i.containerState.size?t(e):n(e)},"listItemIndent",i.containerState.size+1)}};const Ju={continuation:{tokenize:function(e,t,n){const i=this;return function(t){if(Pu(t))return Nu(e,r,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return r(t)};function r(i){return e.attempt(Ju,t,n)(i)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const i=this;return function(t){if(62===t){const n=i.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),r}return n(t)};function r(n){return Pu(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function eh(e,t,n,i,r,o,a,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(i),e.enter(r),e.enter(o),e.consume(t),e.exit(o),h;if(null===t||32===t||41===t||Cu(t))return n(t);return e.enter(i),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),f(t)};function h(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(r),e.exit(i),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(s),h(t)):null===t||60===t||Fu(t)?n(t):(e.consume(t),92===t?p:d)}function p(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function f(r){return u||null!==r&&41!==r&&!ku(r)?u<c&&40===r?(e.consume(r),u++,f):41===r?(e.consume(r),u--,f):null===r||32===r||40===r||Cu(r)?n(r):(e.consume(r),92===r?m:f):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(i),t(r))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function th(e,t,n,i,r,o){const a=this;let s,l=0;return function(t){return e.enter(i),e.enter(r),e.consume(t),e.exit(r),e.enter(o),c};function c(h){return l>999||null===h||91===h||93===h&&!s||94===h&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(h):93===h?(e.exit(o),e.enter(r),e.consume(h),e.exit(r),e.exit(i),t):Fu(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||Fu(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s||(s=!Pu(t)),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function nh(e,t,n,i,r,o){let a;return function(t){if(34===t||39===t||40===t)return e.enter(i),e.enter(r),e.consume(t),e.exit(r),a=40===t?41:t,s;return n(t)};function s(n){return n===a?(e.enter(r),e.consume(n),e.exit(r),e.exit(i),t):(e.enter(o),l(n))}function l(t){return t===a?(e.exit(o),s(a)):null===t?n(t):Fu(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Nu(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||Fu(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function ih(e,t){let n;return function i(r){if(Fu(r))return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),n=!0,i;if(Pu(r))return Nu(e,i,n?"linePrefix":"lineSuffix")(r);return t(r)}}function rh(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const oh={name:"definition",tokenize:function(e,t,n){const i=this;let r;return function(t){return e.enter("definition"),function(t){return th.call(i,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return r=rh(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return ku(t)?ih(e,s)(t):s(t)}function s(t){return eh(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(ah,c,c)(t)}function c(t){return Pu(t)?Nu(e,u,"whitespace")(t):u(t)}function u(o){return null===o||Fu(o)?(e.exit("definition"),i.parser.defined.push(r),t(o)):n(o)}}},ah={partial:!0,tokenize:function(e,t,n){return function(t){return ku(t)?ih(e,i)(t):n(t)};function i(t){return nh(e,r,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function r(t){return Pu(t)?Nu(e,o,"whitespace")(t):o(t)}function o(e){return null===e||Fu(e)?t(e):n(e)}}};const sh={name:"codeIndented",tokenize:function(e,t,n){const i=this;return function(t){return e.enter("codeIndented"),Nu(e,r,"linePrefix",5)(t)};function r(e){const t=i.events[i.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?s(t):Fu(t)?e.attempt(lh,o,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Fu(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},lh={partial:!0,tokenize:function(e,t,n){const i=this;return r;function r(t){return i.parser.lazy[i.now().line]?n(t):Fu(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):Nu(e,o,"linePrefix",5)(t)}function o(e){const o=i.events[i.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):Fu(e)?r(e):n(e)}}};const ch={name:"headingAtx",resolve:function(e,t){let n,i,r=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);r-2>o&&"whitespace"===e[r][1].type&&(r-=2);"atxHeadingSequence"===e[r][1].type&&(o===r-1||r-4>o&&"whitespace"===e[r-2][1].type)&&(r-=o+1===r?2:4);r>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[r][1].end},i={type:"chunkText",start:e[o][1].start,end:e[r][1].end,contentType:"text"},du(e,o,r-o+1,[["enter",n,t],["enter",i,t],["exit",i,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let i=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),r(t)}(t)};function r(t){return 35===t&&i++<6?(e.consume(t),r):null===t||ku(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Fu(n)?(e.exit("atxHeading"),t(n)):Pu(n)?Nu(e,o,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),o(t))}function s(t){return null===t||35===t||ku(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),s)}}};const uh={name:"setextUnderline",resolveTo:function(e,t){let n,i,r,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(i=o)}else"content"===e[o][1].type&&e.splice(o,1),r||"definition"!==e[o][1].type||(r=o);const a={type:"setextHeading",start:Fe({},e[n][1].start),end:Fe({},e[e.length-1][1].end)};e[i][1].type="setextHeadingText",r?(e.splice(i,0,["enter",a,t]),e.splice(r+1,0,["exit",e[n][1],t]),e[n][1].end=Fe({},e[r][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const i=this;let r;return function(t){let a,s=i.events.length;for(;s--;)if("lineEnding"!==i.events[s][1].type&&"linePrefix"!==i.events[s][1].type&&"content"!==i.events[s][1].type){a="paragraph"===i.events[s][1].type;break}if(!i.parser.lazy[i.now().line]&&(i.interrupt||a))return e.enter("setextHeadingLine"),r=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===r?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),Pu(t)?Nu(e,a,"lineSuffix")(t):a(t))}function a(i){return null===i||Fu(i)?(e.exit("setextHeadingLine"),t(i)):n(i)}}};const hh=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dh=["pre","script","style","textarea"],ph={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const i=this;let r,o,a,s,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),o=!0,p):63===s?(e.consume(s),r=3,i.interrupt?t:j):wu(s)?(e.consume(s),a=String.fromCharCode(s),f):n(s)}function u(o){return 45===o?(e.consume(o),r=2,h):91===o?(e.consume(o),r=5,s=0,d):wu(o)?(e.consume(o),r=4,i.interrupt?t:j):n(o)}function h(r){return 45===r?(e.consume(r),i.interrupt?t:j):n(r)}function d(r){const o="CDATA[";return r===o.charCodeAt(s++)?(e.consume(r),6===s?i.interrupt?t:A:d):n(r)}function p(t){return wu(t)?(e.consume(t),a=String.fromCharCode(t),f):n(t)}function f(s){if(null===s||47===s||62===s||ku(s)){const l=47===s,c=a.toLowerCase();return l||o||!dh.includes(c)?hh.includes(a.toLowerCase())?(r=6,l?(e.consume(s),m):i.interrupt?t(s):A(s)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(s):o?g(s):y(s)):(r=1,i.interrupt?t(s):A(s))}return 45===s||Du(s)?(e.consume(s),a+=String.fromCharCode(s),f):n(s)}function m(r){return 62===r?(e.consume(r),i.interrupt?t:A):n(r)}function g(t){return Pu(t)?(e.consume(t),g):E(t)}function y(t){return 47===t?(e.consume(t),E):58===t||95===t||wu(t)?(e.consume(t),v):Pu(t)?(e.consume(t),y):E(t)}function v(t){return 45===t||46===t||58===t||95===t||Du(t)?(e.consume(t),v):_(t)}function _(t){return 61===t?(e.consume(t),x):Pu(t)?(e.consume(t),_):y(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,b):Pu(t)?(e.consume(t),x):w(t)}function b(t){return t===l?(e.consume(t),l=null,D):null===t||Fu(t)?n(t):(e.consume(t),b)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||ku(t)?_(t):(e.consume(t),w)}function D(e){return 47===e||62===e||Pu(e)?y(e):n(e)}function E(t){return 62===t?(e.consume(t),C):n(t)}function C(t){return null===t||Fu(t)?A(t):Pu(t)?(e.consume(t),C):n(t)}function A(t){return 45===t&&2===r?(e.consume(t),k):60===t&&1===r?(e.consume(t),P):62===t&&4===r?(e.consume(t),N):63===t&&3===r?(e.consume(t),j):93===t&&5===r?(e.consume(t),I):!Fu(t)||6!==r&&7!==r?null===t||Fu(t)?(e.exit("htmlFlowData"),S(t)):(e.consume(t),A):(e.exit("htmlFlowData"),e.check(fh,O,S)(t))}function S(t){return e.check(mh,T,O)(t)}function T(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),F}function F(t){return null===t||Fu(t)?S(t):(e.enter("htmlFlowData"),A(t))}function k(t){return 45===t?(e.consume(t),j):A(t)}function P(t){return 47===t?(e.consume(t),a="",M):A(t)}function M(t){if(62===t){const n=a.toLowerCase();return dh.includes(n)?(e.consume(t),N):A(t)}return wu(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),M):A(t)}function I(t){return 93===t?(e.consume(t),j):A(t)}function j(t){return 62===t?(e.consume(t),N):45===t&&2===r?(e.consume(t),j):A(t)}function N(t){return null===t||Fu(t)?(e.exit("htmlFlowData"),O(t)):(e.consume(t),N)}function O(n){return e.exit("htmlFlow"),t(n)}}},fh={partial:!0,tokenize:function(e,t,n){return function(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(zu,t,n)}}},mh={partial:!0,tokenize:function(e,t,n){const i=this;return function(t){if(Fu(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r;return n(t)};function r(e){return i.parser.lazy[i.now().line]?n(e):t(e)}}};const gh={partial:!0,tokenize:function(e,t,n){const i=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r};function r(e){return i.parser.lazy[i.now().line]?n(e):t(e)}}},yh={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const i=this,r={partial:!0,tokenize:function(e,t,n){let r=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Pu(t)?Nu(e,c,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===o?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===o?(r++,e.consume(t),u):r>=s?(e.exit("codeFencedFenceSequence"),Pu(t)?Nu(e,h,"whitespace")(t):h(t)):n(t)}function h(i){return null===i||Fu(i)?(e.exit("codeFencedFence"),t(i)):n(i)}}};let o,a=0,s=0;return function(t){return function(t){const n=i.events[i.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===o?(s++,e.consume(t),l):s<3?n(t):(e.exit("codeFencedFenceSequence"),Pu(t)?Nu(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Fu(n)?(e.exit("codeFencedFence"),i.interrupt?t(n):e.check(gh,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Fu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Pu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nu(e,h,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),u)}function h(t){return null===t||Fu(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return null===t||Fu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===o?n(t):(e.consume(t),d)}function p(t){return e.attempt(r,v,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return a>0&&Pu(t)?Nu(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||Fu(t)?e.check(gh,p,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Fu(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}};const vh=document.createElement("i");function _h(e){const t="&"+e+";";vh.innerHTML=t;const n=vh.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const xh={name:"characterReference",tokenize:function(e,t,n){const i=this;let r,o,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),r=31,o=Du,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,o=Su,c):(e.enter("characterReferenceValue"),r=7,o=Au,c(t))}function c(s){if(59===s&&a){const r=e.exit("characterReferenceValue");return o!==Du||_h(i.sliceSerialize(r))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return o(s)&&a++<r?(e.consume(s),c):n(s)}}};const bh={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),i};function i(i){return Tu(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}};const wh={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Nu(e,t,"linePrefix")}}};function Dh(e,t,n){const i=[];let r=-1;for(;++r<e.length;){const o=e[r].resolveAll;o&&!i.includes(o)&&(t=o(t,n),i.push(o))}return t}const Eh={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),"labelImage"===i.type||"labelLink"===i.type||"labelEnd"===i.type){const e="labelImage"===i.type?4:2;i.type="data",t+=e}}e.length!==n.length&&du(e,0,e.length,n);return e},resolveTo:function(e,t){let n,i,r,o,a=e.length,s=0;for(;a--;)if(n=e[a][1],i){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(r){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(i=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(r=a);const l={type:"labelLink"===e[i][1].type?"link":"image",start:Fe({},e[i][1].start),end:Fe({},e[e.length-1][1].end)},c={type:"label",start:Fe({},e[i][1].start),end:Fe({},e[r][1].end)},u={type:"labelText",start:Fe({},e[i+s+2][1].end),end:Fe({},e[r-2][1].start)};return o=[["enter",l,t],["enter",c,t]],o=pu(o,e.slice(i+1,i+s+3)),o=pu(o,[["enter",u,t]]),o=pu(o,Dh(t.parser.constructs.insideSpan.null,e.slice(i+s+4,r-3),t)),o=pu(o,[["exit",u,t],e[r-2],e[r-1],["exit",c,t]]),o=pu(o,e.slice(r+1)),o=pu(o,[["exit",l,t]]),du(e,i,e.length,o),e},tokenize:function(e,t,n){const i=this;let r,o,a=i.events.length;for(;a--;)if(("labelImage"===i.events[a][1].type||"labelLink"===i.events[a][1].type)&&!i.events[a][1]._balanced){r=i.events[a][1];break}return function(t){if(!r)return n(t);if(r._inactive)return u(t);return o=i.parser.defined.includes(rh(i.sliceSerialize({start:r.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(Ch,c,o?c:u)(t):91===t?e.attempt(Ah,c,o?l:u)(t):o?c(t):u(t)}function l(t){return e.attempt(Sh,c,u)(t)}function c(e){return t(e)}function u(e){return r._balanced=!0,n(e)}}},Ch={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),i};function i(t){return ku(t)?ih(e,r)(t):r(t)}function r(t){return 41===t?c(t):eh(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return ku(t)?ih(e,s)(t):c(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?nh(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return ku(t)?ih(e,c)(t):c(t)}function c(i){return 41===i?(e.enter("resourceMarker"),e.consume(i),e.exit("resourceMarker"),e.exit("resource"),t):n(i)}}},Ah={tokenize:function(e,t,n){const i=this;return function(t){return th.call(i,e,r,o,"reference","referenceMarker","referenceString")(t)};function r(e){return i.parser.defined.includes(rh(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},Sh={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),i};function i(i){return 93===i?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}};const Th={name:"labelStartImage",resolveAll:Eh.resolveAll,tokenize:function(e,t,n){const i=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}}};function Fh(e){return null===e||ku(e)||Iu(e)?1:Mu(e)?2:void 0}const kh={name:"attention",resolveAll:function(e,t){let n,i,r,o,a,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h=Fe({},e[n][1].end),d=Fe({},e[u][1].start);Ph(h,-s),Ph(d,s),o={type:s>1?"strongSequence":"emphasisSequence",start:h,end:Fe({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Fe({},e[u][1].start),end:d},r={type:s>1?"strongText":"emphasisText",start:Fe({},e[n][1].end),end:Fe({},e[u][1].start)},i={type:s>1?"strong":"emphasis",start:Fe({},o.start),end:Fe({},a.end)},e[n][1].end=Fe({},o.start),e[u][1].start=Fe({},a.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=pu(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=pu(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",r,t]]),l=pu(l,Dh(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=pu(l,[["exit",r,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=pu(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,du(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Fh(i);let o;return function(t){return o=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===o)return e.consume(s),a;const l=e.exit("attentionSequence"),c=Fh(s),u=!c||2===c&&r||n.includes(s),h=!r||2===r&&c||n.includes(i);return l._open=Boolean(42===o?u:u&&(r||!h)),l._close=Boolean(42===o?h:h&&(c||!u)),t(s)}}};function Ph(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Mh={name:"autolink",tokenize:function(e,t,n){let i=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),r};function r(t){return wu(t)?(e.consume(t),o):64===t?n(t):l(t)}function o(e){return 43===e||45===e||46===e||Du(e)?(i=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),i=0,s):(43===t||45===t||46===t||Du(t))&&i++<32?(e.consume(t),a):(i=0,l(t))}function s(i){return 62===i?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(i),e.exit("autolinkMarker"),e.exit("autolink"),t):null===i||32===i||60===i||Cu(i)?n(i):(e.consume(i),s)}function l(t){return 64===t?(e.consume(t),c):Eu(t)?(e.consume(t),l):n(t)}function c(e){return Du(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),i=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):h(n)}function h(t){if((45===t||Du(t))&&i++<63){const n=45===t?h:u;return e.consume(t),n}return n(t)}}};const Ih={name:"htmlText",tokenize:function(e,t,n){const i=this;let r,o,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),x):63===t?(e.consume(t),v):wu(t)?(e.consume(t),D):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),o=0,p):wu(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),d):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),h):Fu(t)?(a=u,M(t)):(e.consume(t),u)}function h(t){return 45===t?(e.consume(t),d):u(t)}function d(e){return 62===e?P(e):45===e?h(e):u(e)}function p(t){const i="CDATA[";return t===i.charCodeAt(o++)?(e.consume(t),6===o?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):Fu(t)?(a=f,M(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?P(t):93===t?(e.consume(t),g):f(t)}function y(t){return null===t||62===t?P(t):Fu(t)?(a=y,M(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),_):Fu(t)?(a=v,M(t)):(e.consume(t),v)}function _(e){return 62===e?P(e):v(e)}function x(t){return wu(t)?(e.consume(t),b):n(t)}function b(t){return 45===t||Du(t)?(e.consume(t),b):w(t)}function w(t){return Fu(t)?(a=w,M(t)):Pu(t)?(e.consume(t),w):P(t)}function D(t){return 45===t||Du(t)?(e.consume(t),D):47===t||62===t||ku(t)?E(t):n(t)}function E(t){return 47===t?(e.consume(t),P):58===t||95===t||wu(t)?(e.consume(t),C):Fu(t)?(a=E,M(t)):Pu(t)?(e.consume(t),E):P(t)}function C(t){return 45===t||46===t||58===t||95===t||Du(t)?(e.consume(t),C):A(t)}function A(t){return 61===t?(e.consume(t),S):Fu(t)?(a=A,M(t)):Pu(t)?(e.consume(t),A):E(t)}function S(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,T):Fu(t)?(a=S,M(t)):Pu(t)?(e.consume(t),S):(e.consume(t),F)}function T(t){return t===r?(e.consume(t),r=void 0,k):null===t?n(t):Fu(t)?(a=T,M(t)):(e.consume(t),T)}function F(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||ku(t)?E(t):(e.consume(t),F)}function k(e){return 47===e||62===e||ku(e)?E(e):n(e)}function P(i){return 62===i?(e.consume(i),e.exit("htmlTextData"),e.exit("htmlText"),t):n(i)}function M(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return Pu(t)?Nu(e,j,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):j(t)}function j(t){return e.enter("htmlTextData"),a(t)}}};const jh={name:"labelStartLink",resolveAll:Eh.resolveAll,tokenize:function(e,t,n){const i=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}}};const Nh={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),i};function i(i){return Fu(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}};const Oh={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,i=e.length-4,r=3;if(("lineEnding"===e[r][1].type||"space"===e[r][1].type)&&("lineEnding"===e[i][1].type||"space"===e[i][1].type))for(t=r;++t<i;)if("codeTextData"===e[t][1].type){e[r][1].type="codeTextPadding",e[i][1].type="codeTextPadding",r+=2,i-=2;break}t=r-1,i++;for(;++t<=i;)void 0===n?t!==i&&"lineEnding"!==e[t][1].type&&(n=t):t!==i&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),i-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let i,r,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),o++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(r=e.enter("codeTextSequence"),i=0,c(t)):Fu(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Fu(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),i++,c):i===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(r.type="codeTextData",l(n))}}};const Bh={42:Ku,43:Ku,45:Ku,48:Ku,49:Ku,50:Ku,51:Ku,52:Ku,53:Ku,54:Ku,55:Ku,56:Ku,57:Ku,62:Ju},Lh={91:oh},zh={[-2]:sh,[-1]:sh,32:sh},Rh={35:ch,42:Xu,45:[uh,Xu],60:ph,61:uh,95:Xu,96:yh,126:yh},Vh={38:xh,92:bh},Uh={[-5]:wh,[-4]:wh,[-3]:wh,33:Th,38:xh,42:kh,60:[Mh,Ih],91:jh,92:[Nh,bh],93:Eh,95:kh,96:Oh},qh={null:[kh,qu]},Zh={null:[42,95]},Hh={null:[]};function Gh(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},o=[];let a=[],s=[],l=!0;const c={attempt:v(function(e,t){_(e,t.from)}),check:v(y),consume:function(e){Fu(e)?(i.line++,i.column=1,i.offset+=-3===e?2:1,x()):-1!==e&&(i.column++,i.offset++);i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=f(),u.events.push(["exit",t,u]),t},interrupt:v(y,{interrupt:!0})},u={code:null,containerState:{},defineSkip:function(e){r[e.line]=e.column,x()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const i=[];let r;for(;++n<e.length;){const o=e[n];let a;if("string"===typeof o)a=o;else switch(o){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&r)continue;a=" ";break;default:a=String.fromCharCode(o)}r=-2===o,i.push(a)}return i.join("")}(p(e),t)},sliceStream:p,write:function(e){if(a=pu(a,e),m(),null!==a[a.length-1])return[];return _(t,0),u.events=Dh(o,u.events,u),u.events}};let h,d=t.tokenize.call(u,c);return t.resolveAll&&o.push(t),u;function p(e){return function(e,t){const n=t.start._index,i=t.start._bufferIndex,r=t.end._index,o=t.end._bufferIndex;let a;if(n===r)a=[e[n].slice(i,o)];else{if(a=e.slice(n,r),i>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(i):a.shift()}o>0&&a.push(e[r].slice(0,o))}return a}(a,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:r,offset:o}=i;return{_bufferIndex:e,_index:t,line:n,column:r,offset:o}}function m(){let e;for(;i._index<a.length;){const t=a[i._index];if("string"===typeof t)for(e=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===e&&i._bufferIndex<t.length;)g(t.charCodeAt(i._bufferIndex));else g(t)}}function g(e){l=void 0,h=e,d=d(e)}function y(e,t){t.restore()}function v(e,t){return function(n,r,o){let a,h,d,p;return Array.isArray(n)?m(n):"tokenize"in n?m([n]):function(e){return t;function t(t){const n=null!==t&&e[t],i=null!==t&&e.null;return m([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(i)?i:i?[i]:[]])(t)}}(n);function m(e){return a=e,h=0,0===e.length?o:g(e[h])}function g(e){return function(n){p=function(){const e=f(),t=u.previous,n=u.currentConstruct,r=u.events.length,o=Array.from(s);return{from:r,restore:a};function a(){i=e,u.previous=t,u.currentConstruct=n,u.events.length=r,s=o,x()}}(),d=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return v(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,y,v)(n)}}function y(t){return l=!0,e(d,p),r}function v(e){return l=!0,p.restore(),++h<a.length?g(a[h]):o}}}function _(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&du(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function x(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}const Wh=/[\0\t\n\r]/g;function Yh(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const Xh=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Kh(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Yh(n.slice(t?2:1),t?16:10)}return _h(n)||e}const $h={}.hasOwnProperty;function Qh(e,n,i){return"string"!==typeof n&&(i=n,n=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(te),autolinkProtocol:C,autolinkEmail:C,atxHeading:o($),blockQuote:o(G),characterEscape:C,characterReference:C,codeFenced:o(W),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(W,a),codeText:o(Y,a),codeTextData:C,data:C,codeFlowValue:C,definition:o(X),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(K),hardBreakEscape:o(Q),hardBreakTrailing:o(Q),htmlFlow:o(J,a),htmlFlowData:C,htmlText:o(J,a),htmlTextData:C,image:o(ee),label:a,link:o(te),listItem:o(ie),listItemValue:d,listOrdered:o(ne,h),listUnordered:o(ne),paragraph:o(re),reference:z,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o($),strong:o(oe),thematicBreak:o(se)},exit:{atxHeading:l(),atxHeadingSequence:b,autolink:l(),autolinkEmail:H,autolinkProtocol:Z,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:U,characterReference:q,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:A,codeIndented:l(y),codeText:l(P),codeTextData:A,data:A,definition:l(),definitionDestinationString:x,definitionLabelString:v,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(T),hardBreakTrailing:l(T),htmlFlow:l(F),htmlFlowData:A,htmlText:l(k),htmlTextData:A,image:l(I),label:N,labelText:j,lineEnding:S,link:l(M),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:R,resourceDestinationString:O,resourceTitleString:B,resource:L,setextHeading:l(E),setextHeadingLineSequence:D,setextHeadingText:w,strong:l(),thematicBreak:l()}};ed(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(e){let i={type:"root",children:[]};const o={stack:[i],tokenStack:[],config:t,enter:s,exit:c,buffer:a,resume:u,data:n},l=[];let h=-1;for(;++h<e.length;)if("listOrdered"===e[h][1].type||"listUnordered"===e[h][1].type)if("enter"===e[h][0])l.push(h);else{h=r(e,l.pop(),h)}for(h=-1;++h<e.length;){const n=t[e[h][0]];$h.call(n,e[h][1].type)&&n[e[h][1].type].call(Object.assign({sliceSerialize:e[h][2].sliceSerialize},o),e[h][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||nd).call(o,void 0,e[0])}for(i.position={start:Jh(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:Jh(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},h=-1;++h<t.transforms.length;)i=t.transforms[h](i)||i;return i}function r(e,t,n){let i,r,o,a,s=t-1,l=-1,c=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!i||a||l||o||(o=s),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(i){let a=s;for(r=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;r&&(e[r][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",r=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}o&&(!r||o<r)&&(i._spread=!0),i.end=Object.assign({},r?e[r][1].start:t[1].end),e.splice(r||s,0,["exit",i,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};i=r,e.splice(s,0,["enter",r,t[2]]),s++,n++,o=void 0,a=!0}}}return e[t][1]._spread=c,n}function o(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:Jh(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),i=this.tokenStack.pop();if(!i)throw new Error("Cannot close `"+e.type+"` ("+Rc({start:e.start,end:e.end})+"): it\u2019s not open");if(i[0].type!==e.type)if(t)t.call(this,e,i[0]);else{(i[1]||nd).call(this,e,i[0])}n.position.end=Jh(e.end)}function u(){return cu(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=rh(this.sliceSerialize(e)).toLowerCase()}function _(){const e=this.resume();this.stack[this.stack.length-1].title=e}function x(){const e=this.resume();this.stack[this.stack.length-1].url=e}function b(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function D(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function C(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:Jh(e.start),end:void 0},t.push(n)),this.stack.push(n)}function A(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=Jh(e.end)}function S(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=Jh(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(C.call(this,e),A.call(this,e))}function T(){this.data.atHardBreak=!0}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function k(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.resume();this.stack[this.stack.length-1].value=e}function M(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function I(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function j(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Xh,Kh)}(t),n.identifier=rh(t).toLowerCase()}function N(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function O(){const e=this.resume();this.stack[this.stack.length-1].url=e}function B(){const e=this.resume();this.stack[this.stack.length-1].title=e}function L(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function R(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=rh(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function V(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let i;if(n)i=Yh(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{i=_h(t)}this.stack[this.stack.length-1].value+=i}function q(e){this.stack.pop().position.end=Jh(e.end)}function Z(e){A.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function H(e){A.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function G(){return{type:"blockquote",children:[]}}function W(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function X(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function K(){return{type:"emphasis",children:[]}}function $(){return{type:"heading",depth:0,children:[]}}function Q(){return{type:"break"}}function J(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ie(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function re(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function se(){return{type:"thematicBreak"}}}(i)(function(e){for(;!gu(e););return e}(function(e){const n={constructs:_u([t,...(e||{}).extensions||[]]),content:i(Ou),defined:[],document:i(Bu),flow:i(Uu),lazy:{},string:i(Zu),text:i(Hu)};return n;function i(e){return function(t){return Gh(n,e,t)}}}(i).document().write(function(){let e,t=1,n="",i=!0;return function(r,o,a){const s=[];let l,c,u,h,d;for(r=n+("string"===typeof r?r.toString():new TextDecoder(o||void 0).decode(r)),u=0,n="",i&&(65279===r.charCodeAt(0)&&u++,i=void 0);u<r.length;){if(Wh.lastIndex=u,l=Wh.exec(r),h=l&&void 0!==l.index?l.index:r.length,d=r.charCodeAt(h),!l){n=r.slice(u);break}if(10===d&&u===h&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<h&&(s.push(r.slice(u,h)),t+=h-u),d){case 0:s.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),s.push(-2);t++<c;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,n,!0))))}function Jh(e){return{line:e.line,column:e.column,offset:e.offset}}function ed(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?ed(e,i):td(e,i)}}function td(e,t){let n;for(n in t)if($h.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function nd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Rc({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Rc({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Rc({start:t.start,end:t.end})+") is still open")}function id(e){const t=this;t.parser=function(n){return Qh(n,Fe(Fe(Fe({},t.data("settings")),e),{},{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}const rd="object"===typeof self?self:globalThis,od=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),i=r=>{if(e.has(r))return e.get(r);const[o,a]=t[r];switch(o){case 0:case-1:return n(a,r);case 1:{const e=n([],r);for(const t of a)e.push(i(t));return e}case 2:{const e=n({},r);for(const[t,n]of a)e[i(t)]=i(n);return e}case 3:return n(new Date(a),r);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),r)}case 5:{const e=n(new Map,r);for(const[t,n]of a)e.set(i(t),i(n));return e}case 6:{const e=n(new Set,r);for(const t of a)e.add(i(t));return e}case 7:{const{name:e,message:t}=a;return n(new rd[e](t),r)}case 8:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new rd[o](a),r)};return i})(new Map,e)(0),ad="",{toString:sd}={},{keys:ld}=Object,cd=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=sd.call(e).slice(8,-1);switch(n){case"Array":return[1,ad];case"Object":return[2,ad];case"Date":return[3,ad];case"RegExp":return[4,ad];case"Map":return[5,ad];case"Set":return[6,ad];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},ud=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},hd=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[];return((e,t,n,i)=>{const r=(e,t)=>{const r=i.push(e)-1;return n.set(t,r),r},o=i=>{if(n.has(i))return n.get(i);let[a,s]=cd(i);switch(a){case 0:{let t=i;switch(s){case"bigint":a=8,t=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return r([-1],i)}return r([a,t],i)}case 1:{if(s){let e=i;return"DataView"===s?e=new Uint8Array(i.buffer):"ArrayBuffer"===s&&(e=new Uint8Array(i)),r([s,[...e]],i)}const e=[],t=r([a,e],i);for(const n of i)e.push(o(n));return t}case 2:{if(s)switch(s){case"BigInt":return r([s,i.toString()],i);case"Boolean":case"Number":case"String":return r([s,i.valueOf()],i)}if(t&&"toJSON"in i)return o(i.toJSON());const n=[],l=r([a,n],i);for(const t of ld(i))!e&&ud(cd(i[t]))||n.push([o(t),o(i[t])]);return l}case 3:return r([a,i.toISOString()],i);case 4:{const{source:e,flags:t}=i;return r([a,{source:e,flags:t}],i)}case 5:{const t=[],n=r([a,t],i);for(const[r,a]of i)(e||!ud(cd(r))&&!ud(cd(a)))&&t.push([o(r),o(a)]);return n}case 6:{const t=[],n=r([a,t],i);for(const r of i)!e&&ud(cd(r))||t.push(o(r));return n}}const{message:l}=i;return r([a,{name:s,message:l}],i)};return o})(!(t||n),!!t,new Map,i)(e),i},dd="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?od(hd(e,t)):structuredClone(e):(e,t)=>od(hd(e,t));function pd(e){const t=[];let n=-1,i=0,r=0;for(;++n<e.length;){const o=e.charCodeAt(n);let a="";if(37===o&&Du(e.charCodeAt(n+1))&&Du(e.charCodeAt(n+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(a=String.fromCharCode(o,t),r=1):a="\ufffd"}else a=String.fromCharCode(o);a&&(t.push(e.slice(i,n),encodeURIComponent(a)),i=n+r+1,a=""),r&&(n+=r,r=0)}return t.join("")+e.slice(i)}function fd(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function md(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const gd=function(e){if(null===e||void 0===e)return vd;if("function"===typeof e)return yd(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=gd(e[n]);return yd(i);function i(){let e=-1;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,i))return!0;return!1}}(e):function(e){const t=e;return yd(n);function n(n){const i=n;let r;for(r in e)if(i[r]!==t[r])return!1;return!0}}(e);if("string"===typeof e)return function(e){return yd(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function yd(e){return function(t,n,i){return Boolean(_d(t)&&e.call(this,t,"number"===typeof n?n:void 0,i||void 0))}}function vd(){return!0}function _d(e){return null!==e&&"object"===typeof e&&"type"in e}const xd=[],bd=!0,wd=!1;function Dd(e,t,n,i){let r;"function"===typeof t&&"function"!==typeof n?(i=n,n=t):r=t;const o=gd(r),a=i?-1:1;!function e(r,s,l){const c=r&&"object"===typeof r?r:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+r.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,h,d=xd;if((!t||o(r,s,l[l.length-1]||void 0))&&(d=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[bd,e];return null===e||void 0===e?xd:[e]}(n(r,l)),d[0]===wd))return d;if("children"in r&&r.children){const t=r;if(t.children&&"skip"!==d[0])for(u=(i?t.children.length:-1)+a,h=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,h)(),c[0]===wd)return c;u="number"===typeof c[1]?c[1]:u+a}}return d}}(e,void 0,[])()}function Ed(e,t,n,i){let r,o,a;"function"===typeof t&&"function"!==typeof n?(o=void 0,a=t,r=n):(o=t,a=n,r=i),Dd(e,o,function(e,t){const n=t[t.length-1],i=n?n.children.indexOf(e):void 0;return a(e,i,n)},r)}function Cd(e,t){const n=t.referenceType;let i="]";if("collapsed"===n?i+="[]":"full"===n&&(i+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+i}];const r=e.all(t),o=r[0];o&&"text"===o.type?o.value="["+o.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&"text"===a.type?a.value+=i:r.push({type:"text",value:i}),r}function Ad(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}function Sd(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),r=0;const o=[];for(;i;)o.push(Td(t.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(t);return o.push(Td(t.slice(r),r>0,!1)),o.join("")}function Td(e,t,n){let i=0,r=e.length;if(t){let t=e.codePointAt(i);for(;9===t||32===t;)i++,t=e.codePointAt(i)}if(n){let t=e.codePointAt(r-1);for(;9===t||32===t;)r--,t=e.codePointAt(r-1)}return r>i?e.slice(i,r):""}const Fd={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",i={},r=t.lang?t.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),r=pd(i.toLowerCase()),o=e.footnoteOrder.indexOf(i);let a,s=e.footnoteCounts.get(i);void 0===s?(s=0,e.footnoteOrder.push(i),a=e.footnoteOrder.length):a=o+1,s+=1,e.footnoteCounts.set(i,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Cd(e,t);const r={src:pd(i.url||""),alt:t.alt};null!==i.title&&void 0!==i.title&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:pd(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Cd(e,t);const r={href:pd(i.url||"")};null!==i.title&&void 0!==i.title&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:pd(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},listItem:function(e,t,n){const i=e.all(t),r=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=Ad(n[i])}return t}(n):Ad(t),o={},a=[];if("boolean"===typeof t.checked){const e=i[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},i.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<i.length;){const e=i[s];(r||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||r?a.push(e):a.push(...e.children)}const l=i[i.length-1];l&&(r||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},i=e.all(t);let r=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++r<i.length;){const e=i[r];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),i=n.shift(),r=[];if(i){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],n),r.push(n)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=Lc(t.children[1]),a=Bc(t.children[t.children.length-1]);o&&a&&(i.position={start:o,end:a}),r.push(i)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const i=n?n.children:void 0,r=0===(i?i.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,a=o?o.length:t.children.length;let s=-1;const l=[];for(;++s<a;){const n=t.children[s],i={},a=o?o[s]:void 0;a&&(i.align=a);let c={type:"element",tagName:r,properties:i,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Sd(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:kd,yaml:kd,definition:kd,footnoteDefinition:kd};function kd(){}const Pd=["children"],Md={}.hasOwnProperty,Id={};function jd(e,t){e.position&&(t.position=function(e){const t=Lc(e),n=Bc(e);if(t&&n)return{start:t,end:n}}(e))}function Nd(e,t){let n=t;if(e&&e.data){const t=e.data.hName,i=e.data.hChildren,r=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&r&&Object.assign(n.properties,dd(r)),"children"in n&&n.children&&null!==i&&void 0!==i&&(n.children=i)}return n}function Od(e,t){const n=t.data||{},i=!("value"in t)||Md.call(n,"hProperties")||Md.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,i),e.applyData(t,i)}function Bd(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:"\n"});++i<e.length;)i&&n.push({type:"text",value:"\n"}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Ld(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function zd(e,t){const n=function(e,t){const n=t||Id,i=new Map,r=new Map,o=new Map,a=Fe(Fe({},Fd),n.handlers),s={all:function(e){const t=[];if("children"in e){const n=e.children;let i=-1;for(;++i<n.length;){const r=s.one(n[i],e);if(r){if(i&&"break"===n[i-1].type&&(Array.isArray(r)||"text"!==r.type||(r.value=Ld(r.value)),!Array.isArray(r)&&"element"===r.type)){const e=r.children[0];e&&"text"===e.type&&(e.value=Ld(e.value))}Array.isArray(r)?t.push(...r):t.push(r)}}}return t},applyData:Nd,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,i=s.handlers[n];if(Md.call(s.handlers,n)&&i)return i(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t}=e,n=ke(e,Pd),i=dd(n);return i.children=s.all(e),i}return dd(e)}return(s.options.unknownHandler||Od)(s,e,t)},options:n,patch:jd,wrap:Bd};return Ed(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?i:r,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),s}(e,t),i=n.one(e,void 0),r=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||fd,i=e.options.footnoteBackLabel||md,r=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const r=e.footnoteById.get(e.footnoteOrder[l]);if(!r)continue;const o=e.all(r),a=String(r.identifier).toUpperCase(),c=pd(a.toLowerCase());let u=0;const h=[],d=e.footnoteCounts.get(a);for(;void 0!==d&&++u<=d;){h.length>0&&h.push({type:"text",value:" "});let e="string"===typeof n?n:n(l,u);"string"===typeof e&&(e={type:"text",value:e}),h.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof i?i:i(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=o[o.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...h)}else o.push(...h);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(o,!0)};e.patch(r,f),s.push(f)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:Fe(Fe({},dd(a)),{},{id:"footnote-label"}),children:[{type:"text",value:r}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:"\n"},r),o}function Rd(e,t){return e&&"run"in e?async function(n,i){const r=zd(n,Fe({file:i},t));await e.run(r,i)}:function(n,i){return zd(n,Fe({file:i},e||t))}}function Vd(e){if(e)throw e}var Ud=n(3240);function qd(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Zd(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];let r=-1;const o=n.pop();if("function"!==typeof o)throw new TypeError("Expected function as last argument, not "+o);!function t(i){const a=e[++r];let s=-1;if(i)o(i);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++s<n.length;)null!==c[s]&&void 0!==c[s]||(c[s]=n[s]);n=c,a?function(e,t){let n;return r;function r(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const l=e.length>r.length;let c;l&&r.push(o);try{c=e.apply(this,r)}catch(i){if(l&&n)throw i;return o(i)}l||(c&&c.then&&"function"===typeof c.then?c.then(a,o):c instanceof Error?o(c):a(c))}function o(e){if(!n){n=!0;for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t(e,...r)}}function a(e){o(null,e)}}(a,t)(...c):o(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Hd={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');Gd(e);let n,i=0,r=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){i=o+1;break}}else r<0&&(n=!0,r=o+1);return r<0?"":e.slice(i,r)}if(t===e)return"";let a=-1,s=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){i=o+1;break}}else a<0&&(n=!0,a=o+1),s>-1&&(e.codePointAt(o)===t.codePointAt(s--)?s<0&&(r=o):(s=-1,r=a));i===r?r=a:r<0&&(r=e.length);return e.slice(i,r)},dirname:function(e){if(Gd(e),0===e.length)return".";let t,n=-1,i=e.length;for(;--i;)if(47===e.codePointAt(i)){if(t){n=i;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){Gd(e);let t,n=e.length,i=-1,r=0,o=-1,a=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)i<0&&(t=!0,i=n+1),46===s?o<0?o=n:1!==a&&(a=1):o>-1&&(a=-1);else if(t){r=n+1;break}}if(o<0||i<0||0===a||1===a&&o===i-1&&o===r+1)return"";return e.slice(o,i)},join:function(){let e,t=-1;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(;++t<i.length;)Gd(i[t]),i[t]&&(e=void 0===e?i[t]:e+"/"+i[t]);return void 0===e?".":function(e){Gd(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,i,r="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(r.length<2||2!==o||46!==r.codePointAt(r.length-1)||46!==r.codePointAt(r.length-2))if(r.length>2){if(i=r.lastIndexOf("/"),i!==r.length-1){i<0?(r="",o=0):(r=r.slice(0,i),o=r.length-1-r.lastIndexOf("/")),a=l,s=0;continue}}else if(r.length>0){r="",o=0,a=l,s=0;continue}t&&(r=r.length>0?r+"/..":"..",o=2)}else r.length>0?r+="/"+e.slice(a+1,l):r=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return r}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function Gd(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Wd={cwd:function(){return"/"}};function Yd(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function Xd(e){if("string"===typeof e)e=new URL(e);else if(!Yd(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Kd=["history","path","basename","stem","extname","dirname"];class $d{constructor(e){let t;t=e?Yd(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":Wd.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,i=-1;for(;++i<Kd.length;){const e=Kd[i];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Kd.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?Hd.basename(this.path):void 0}set basename(e){Jd(e,"basename"),Qd(e,"basename"),this.path=Hd.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?Hd.dirname(this.path):void 0}set dirname(e){ep(this.basename,"dirname"),this.path=Hd.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?Hd.extname(this.path):void 0}set extname(e){if(Qd(e,"extname"),ep(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Hd.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Yd(e)&&(e=Xd(e)),Jd(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?Hd.basename(this.path,this.extname):void 0}set stem(e){Jd(e,"stem"),Qd(e,"stem"),this.path=Hd.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const i=this.message(e,t,n);throw i.fatal=!0,i}info(e,t,n){const i=this.message(e,t,n);return i.fatal=void 0,i}message(e,t,n){const i=new Zc(e,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function Qd(e,t){if(e&&e.includes(Hd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Hd.sep+"`")}function Jd(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ep(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const tp=function(e){const t=this.constructor.prototype,n=t[e],i=function(){return n.apply(i,arguments)};return Object.setPrototypeOf(i,t),i},np={}.hasOwnProperty;class ip extends tp{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Zd()}copy(){const e=new ip;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Ud(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(sp("data",this.frozen),this.namespace[e]=t,this):np.call(this.namespace,e)&&this.namespace[e]||void 0:e?(sp("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const i=t.call(e,...n);"function"===typeof i&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=up(e),n=this.parser||this.Parser;return op("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),op("process",this.parser||this.Parser),ap("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(i,r){const o=up(e),a=n.parse(o);function s(e,n){e||!n?r(e):i?i(n):t(void 0,n)}n.run(a,o,function(e,t,i){if(e||!t||!i)return s(e);const r=t,o=n.stringify(r,i);!function(e){return"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)}(o)?i.result=o:i.value=o,s(e,i)})}}processSync(e){let t,n=!1;return this.freeze(),op("processSync",this.parser||this.Parser),ap("processSync",this.compiler||this.Compiler),this.process(e,function(e,i){n=!0,Vd(e),t=i}),cp("processSync","process",n),t}run(e,t,n){lp(e),this.freeze();const i=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?r(void 0,n):new Promise(r);function r(r,o){const a=up(t);i.run(e,a,function(t,i,a){const s=i||e;t?o(t):r?r(s):n(void 0,s,a)})}}runSync(e,t){let n,i=!1;return this.run(e,t,function(e,t){Vd(e),n=t,i=!0}),cp("runSync","run",i),n}stringify(e,t){this.freeze();const n=up(t),i=this.compiler||this.Compiler;return ap("stringify",i),lp(e),i(e,n)}use(e){const t=this.attachers,n=this.namespace;if(sp("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];c(e,r)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):s(e)}return this;function a(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else s(e)}}function s(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=Ud(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function c(e,n){let i=-1,r=-1;for(;++i<t.length;)if(t[i][0]===e){r=i;break}if(-1===r)t.push([e,...n]);else if(n.length>0){let[i,...o]=n;const a=t[r][1];qd(a)&&qd(i)&&(i=Ud(!0,a,i)),t[r]=[e,i,...o]}}}}const rp=(new ip).freeze();function op(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function ap(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function sp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function lp(e){if(!qd(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function cp(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function up(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new $d(e)}const hp=[],dp={allowDangerousHtml:!0},pp=/^(https?|ircs?|mailto|xmpp)$/i,fp=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function mp(e){const t=gp(e),n=yp(e);return vp(t.runSync(t.parse(n),n),e)}function gp(e){const t=e.rehypePlugins||hp,n=e.remarkPlugins||hp,i=e.remarkRehypeOptions?Fe(Fe({},e.remarkRehypeOptions),dp):dp;return rp().use(id).use(n).use(Rd,i).use(t)}function yp(e){const t=e.children||"",n=new $d;return"string"===typeof t&&(n.value=t),n}function vp(e,t){const n=t.allowedElements,i=t.allowElement,r=t.components,o=t.disallowedElements,a=t.skipHtml,s=t.unwrapDisallowed,l=t.urlTransform||_p;for(const c of fp)Object.hasOwn(t,c.from)&&Kl((c.from,c.to&&c.to,c.id));return Ed(e,function(e,t,r){if("raw"===e.type&&r&&"number"===typeof t)return a?r.children.splice(t,1):r.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in su)if(Object.hasOwn(su,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],i=su[t];(null===i||i.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!o&&o.includes(e.tagName);if(!a&&i&&"number"===typeof t&&(a=!i(e,t,r)),a&&r&&"number"===typeof t)return s&&e.children?r.children.splice(t,1,...e.children):r.children.splice(t,1),t}}),$c(e,{Fragment:et.Fragment,components:r,ignoreInvalidStyle:!0,jsx:et.jsx,jsxs:et.jsxs,passKeys:!0,passNode:!0})}function _p(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),r=e.indexOf("/");return-1===t||-1!==r&&t>r||-1!==n&&t>n||-1!==i&&t>i||pp.test(e.slice(0,t))?e:""}function xp(e,t){const n=String(e);if("string"!==typeof t)throw new TypeError("Expected character");let i=0,r=n.indexOf(t);for(;-1!==r;)i++,r=n.indexOf(t,r+t.length);return i}function bp(e,t,n){const i=gd((n||{}).ignore||[]),r=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const e=n[i];t.push([wp(e[0]),Dp(e[1])])}return t}(t);let o=-1;for(;++o<r.length;)Dd(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){const e=t[a],r=n?n.children:void 0;if(i(e,r?r.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],i=r[o][0],a=r[o][1];let s=0;const l=n.children.indexOf(e);let c=!1,u=[];i.lastIndex=0;let h=i.exec(e.value);for(;h;){const n=h.index,r={index:h.index,input:h.input,stack:[...t,e]};let o=a(...h,r);if("string"===typeof o&&(o=o.length>0?{type:"text",value:o}:void 0),!1===o?i.lastIndex=n+1:(s!==n&&u.push({type:"text",value:e.value.slice(s,n)}),Array.isArray(o)?u.push(...o):o&&u.push(o),s=n+h[0].length,c=!0),!i.global)break;h=i.exec(e.value)}c?(s<e.value.length&&u.push({type:"text",value:e.value.slice(s)}),n.children.splice(l,1,...u)):u=[e];return l+u.length}(e,t)}}function wp(e){return"string"===typeof e?new RegExp(function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function Dp(e){return"function"===typeof e?e:function(){return e}}const Ep="phrasing",Cp=["autolink","link","image","label"];function Ap(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Sp(e){this.config.enter.autolinkProtocol.call(this,e)}function Tp(e){this.config.exit.autolinkProtocol.call(this,e)}function Fp(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function kp(e){this.config.exit.autolinkEmail.call(this,e)}function Pp(e){this.exit(e)}function Mp(e){bp(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ip],[/(?<=^|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDED0\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C1\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F\uDED1-\uDED8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDCFA-\uDCFC\uDD00-\uDEB3\uDEBA-\uDED0\uDEE0-\uDEF0\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED8\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDCD0-\uDCD8\uDD00-\uDE57\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF\uDFFA]))([\+\x2D\.0-9A-Z_a-z]+)@([\x2D0-9A-Z_a-z]+(?:\.[\x2D0-9A-Z_a-z]+)+)/g,jp]],{ignore:["link","linkReference"]})}function Ip(e,t,n,i,r){let o="";if(!Np(r))return!1;if(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const a=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const r=xp(e,"(");let o=xp(e,")");for(;-1!==i&&r>o;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),o++;return[e,n]}(n+i);if(!a[0])return!1;const s={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function jp(e,t,n,i){return!(!Np(i,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Np(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||Iu(n)||Mu(n))&&(!t||47!==n)}function Op(){this.buffer()}function Bp(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Lp(){this.buffer()}function zp(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Rp(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=rh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Vp(e){this.exit(e)}function Up(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=rh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function qp(e){this.exit(e)}function Zp(e,t,n,i){const r=n.createTracker(i);let o=r.move("[^");const a=n.enter("footnoteReference"),s=n.enter("reference");return o+=r.move(n.safe(n.associationId(e),{after:"]",before:o})),s(),a(),o+=r.move("]"),o}function Hp(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,i,r){const o=i.createTracker(r);let a=o.move("[^");const s=i.enter("footnoteDefinition"),l=i.enter("label");a+=o.move(i.safe(i.associationId(e),{before:a,after:"]"})),l(),a+=o.move("]:"),e.children&&e.children.length>0&&(o.shift(4),a+=o.move((t?"\n":" ")+i.indentLines(i.containerFlow(e,o.current()),t?Wp:Gp)));return s(),a},footnoteReference:Zp},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function Gp(e,t,n){return 0===t?e:Wp(e,t,n)}function Wp(e,t,n){return(n?"":"    ")+e}Zp.peek=function(){return"["};const Yp=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function Xp(e){this.enter({type:"delete",children:[]},e)}function Kp(e){this.exit(e)}function $p(e,t,n,i){const r=n.createTracker(i),o=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(e,Fe(Fe({},r.current()),{},{before:a,after:"~"})),a+=r.move("~~"),o(),a}function Qp(e){return e.length}function Jp(e){return null===e||void 0===e?"":String(e)}function ef(e){const t="string"===typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function tf(e,t,n){return">"+(n?"":" ")+e}function nf(e,t){return rf(e,t.inConstruct,!0)&&!rf(e,t.notInConstruct,!1)}function rf(e,t,n){if("string"===typeof t&&(t=[t]),!t||0===t.length)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function of(e,t,n,i){let r=-1;for(;++r<n.unsafe.length;)if("\n"===n.unsafe[r].character&&nf(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return"\\\n"}function af(e,t,n){return(n?"":"    ")+e}function sf(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function lf(e){return"&#x"+e.toString(16).toUpperCase()+";"}function cf(e,t,n){const i=Fh(e),r=Fh(t);return void 0===i?void 0===r?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===r?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===i?void 0===r?{inside:!1,outside:!1}:1===r?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===r?{inside:!1,outside:!1}:1===r?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function uf(e,t,n,i){const r=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),o=n.enter("emphasis"),a=n.createTracker(i),s=a.move(r);let l=a.move(n.containerPhrasing(e,Fe({after:r,before:s},a.current())));const c=l.charCodeAt(0),u=cf(i.before.charCodeAt(i.before.length-1),c,r);u.inside&&(l=lf(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=cf(i.after.charCodeAt(0),h,r);d.inside&&(l=l.slice(0,-1)+lf(h));const p=a.move(r);return o(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},s+l+p}function hf(e){return e.value||""}function df(e,t,n,i){const r=sf(n),o='"'===r?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const l=n.createTracker(i);let c=l.move("![");return c+=l.move(n.safe(e.alt,Fe({before:c,after:"]"},l.current()))),c+=l.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,Fe({before:c,after:">"},l.current()))),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,Fe({before:c,after:e.title?" ":")"},l.current())))),s(),e.title&&(s=n.enter("title".concat(o)),c+=l.move(" "+r),c+=l.move(n.safe(e.title,Fe({before:c,after:r},l.current()))),c+=l.move(r),s()),c+=l.move(")"),a(),c}function pf(e,t,n,i){const r=e.referenceType,o=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(i);let l=s.move("![");const c=n.safe(e.alt,Fe({before:l,after:"]"},s.current()));l+=s.move(c+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),Fe({before:l,after:"]"},s.current()));return a(),n.stack=u,o(),"full"!==r&&c&&c===h?"shortcut"===r?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(h+"]"),l}function ff(e,t,n){let i=e.value||"",r="`",o=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++o<n.unsafe.length;){const e=n.unsafe[o],t=n.compilePattern(e);let r;if(e.atBreak)for(;r=t.exec(i);){let e=r.index;10===i.charCodeAt(e)&&13===i.charCodeAt(e-1)&&e--,i=i.slice(0,e)+" "+i.slice(r.index+1)}}return r+i+r}function mf(e,t){const n=cu(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function gf(e,t,n,i){const r=sf(n),o='"'===r?"Quote":"Apostrophe",a=n.createTracker(i);let s,l;if(mf(e,n)){const t=n.stack;n.stack=[],s=n.enter("autolink");let i=a.move("<");return i+=a.move(n.containerPhrasing(e,Fe({before:i,after:">"},a.current()))),i+=a.move(">"),s(),n.stack=t,i}s=n.enter("link"),l=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,Fe({before:c,after:"]("},a.current()))),c+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,Fe({before:c,after:">"},a.current()))),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,Fe({before:c,after:e.title?" ":")"},a.current())))),l(),e.title&&(l=n.enter("title".concat(o)),c+=a.move(" "+r),c+=a.move(n.safe(e.title,Fe({before:c,after:r},a.current()))),c+=a.move(r),l()),c+=a.move(")"),s(),c}function yf(e,t,n,i){const r=e.referenceType,o=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(i);let l=s.move("[");const c=n.containerPhrasing(e,Fe({before:l,after:"]"},s.current()));l+=s.move(c+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),Fe({before:l,after:"]"},s.current()));return a(),n.stack=u,o(),"full"!==r&&c&&c===h?"shortcut"===r?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(h+"]"),l}function vf(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function _f(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}$p.peek=function(){return"~"},uf.peek=function(e,t,n){return n.options.emphasis||"*"},hf.peek=function(){return"<"},df.peek=function(){return"!"},pf.peek=function(){return"!"},ff.peek=function(){return"`"},gf.peek=function(e,t,n){return mf(e,n)?"<":"["},yf.peek=function(){return"["};const xf=gd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function bf(e,t,n,i){const r=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),o=n.enter("strong"),a=n.createTracker(i),s=a.move(r+r);let l=a.move(n.containerPhrasing(e,Fe({after:r,before:s},a.current())));const c=l.charCodeAt(0),u=cf(i.before.charCodeAt(i.before.length-1),c,r);u.inside&&(l=lf(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=cf(i.after.charCodeAt(0),h,r);d.inside&&(l=l.slice(0,-1)+lf(h));const p=a.move(r+r);return o(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},s+l+p}bf.peek=function(e,t,n){return n.options.strong||"*"};const wf={blockquote:function(e,t,n,i){const r=n.enter("blockquote"),o=n.createTracker(i);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(e,o.current()),tf);return r(),a},break:of,code:function(e,t,n,i){const r=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),o=e.value||"",a="`"===r?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(o,af);return e(),t}const s=n.createTracker(i),l=r.repeat(Math.max(function(e,t){const n=String(e);let i=n.indexOf(t),r=i,o=0,a=0;if("string"!==typeof t)throw new TypeError("Expected substring");for(;-1!==i;)i===r?++o>a&&(a=o):o=1,r=i+t.length,i=n.indexOf(t,r);return a}(o,r)+1,3)),c=n.enter("codeFenced");let u=s.move(l);if(e.lang){const t=n.enter("codeFencedLang".concat(a));u+=s.move(n.safe(e.lang,Fe({before:u,after:" ",encode:["`"]},s.current()))),t()}if(e.lang&&e.meta){const t=n.enter("codeFencedMeta".concat(a));u+=s.move(" "),u+=s.move(n.safe(e.meta,Fe({before:u,after:"\n",encode:["`"]},s.current()))),t()}return u+=s.move("\n"),o&&(u+=s.move(o+"\n")),u+=s.move(l),c(),u},definition:function(e,t,n,i){const r=sf(n),o='"'===r?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const l=n.createTracker(i);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),Fe({before:c,after:"]"},l.current()))),c+=l.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,Fe({before:c,after:">"},l.current()))),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,Fe({before:c,after:e.title?" ":"\n"},l.current())))),s(),e.title&&(s=n.enter("title".concat(o)),c+=l.move(" "+r),c+=l.move(n.safe(e.title,Fe({before:c,after:r},l.current()))),c+=l.move(r),s()),a(),c},emphasis:uf,hardBreak:of,heading:function(e,t,n,i){const r=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(i);if(function(e,t){let n=!1;return Ed(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,wd}),Boolean((!e.depth||e.depth<3)&&cu(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),i=n.enter("phrasing"),a=n.containerPhrasing(e,Fe(Fe({},o.current()),{},{before:"\n",after:"\n"}));return i(),t(),a+"\n"+(1===r?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}const a="#".repeat(r),s=n.enter("headingAtx"),l=n.enter("phrasing");o.move(a+" ");let c=n.containerPhrasing(e,Fe({before:"# ",after:"\n"},o.current()));return/^[\t ]/.test(c)&&(c=lf(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),l(),s(),c},html:hf,image:df,imageReference:pf,inlineCode:ff,link:gf,linkReference:yf,list:function(e,t,n,i){const r=n.enter("list"),o=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):vf(n);const s=e.ordered?"."===a?")":".":function(e){const t=vf(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),_f(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(a=s),n.bulletCurrent=a;const c=n.containerFlow(e,i);return n.bulletLastUsed=a,n.bulletCurrent=o,r(),c},listItem:function(e,t,n,i){const r=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let o=n.bulletCurrent||vf(n);t&&"list"===t.type&&t.ordered&&(o=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+o);let a=o.length+1;("tab"===r||"mixed"===r&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const s=n.createTracker(i);s.move(o+" ".repeat(a-o.length)),s.shift(a);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,s.current()),function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?o:o+" ".repeat(a-o.length))+e});return l(),c},paragraph:function(e,t,n,i){const r=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(e,i);return o(),r(),a},root:function(e,t,n,i){return(e.children.some(function(e){return xf(e)})?n.containerPhrasing:n.containerFlow).call(n,e,i)},strong:bf,text:function(e,t,n,i){return n.safe(e.value,i)},thematicBreak:function(e,t,n){const i=(_f(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?i.slice(0,-1):i}};function Df(e){const t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function Ef(e){this.exit(e),this.data.inTable=void 0}function Cf(e){this.enter({type:"tableRow",children:[]},e)}function Af(e){this.exit(e)}function Sf(e){this.enter({type:"tableCell",children:[]},e)}function Tf(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Ff));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Ff(e,t){return"|"===t?t:e}function kf(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,r=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let i=wf.inlineCode(e,t,n);n.stack.includes("tableCell")&&(i=i.replace(/\|/g,"\\$&"));return i},table:function(e,t,n,i){return s(function(e,t,n){const i=e.children;let r=-1;const o=[],a=t.enter("table");for(;++r<i.length;)o[r]=l(i[r],t,n);return a(),o}(e,n,i),e.align)},tableCell:a,tableRow:function(e,t,n,i){const r=l(e,n,i),o=s([r]);return o.slice(0,o.indexOf("\n"))}}};function a(e,t,n,i){const r=n.enter("tableCell"),a=n.enter("phrasing"),s=n.containerPhrasing(e,Fe(Fe({},i),{},{before:o,after:o}));return a(),r(),s}function s(e,t){return function(e,t){const n=t||{},i=(n.align||[]).concat(),r=n.stringLength||Qp,o=[],a=[],s=[],l=[];let c=0,u=-1;for(;++u<e.length;){const t=[],i=[];let o=-1;for(e[u].length>c&&(c=e[u].length);++o<e[u].length;){const a=Jp(e[u][o]);if(!1!==n.alignDelimiters){const e=r(a);i[o]=e,(void 0===l[o]||e>l[o])&&(l[o]=e)}t.push(a)}a[u]=t,s[u]=i}let h=-1;if("object"===typeof i&&"length"in i)for(;++h<c;)o[h]=ef(i[h]);else{const e=ef(i);for(;++h<c;)o[h]=e}h=-1;const d=[],p=[];for(;++h<c;){const e=o[h];let t="",i="";99===e?(t=":",i=":"):108===e?t=":":114===e&&(i=":");let r=!1===n.alignDelimiters?1:Math.max(1,l[h]-t.length-i.length);const a=t+"-".repeat(r)+i;!1!==n.alignDelimiters&&(r=t.length+r+i.length,r>l[h]&&(l[h]=r),p[h]=r),d[h]=a}a.splice(1,0,d),s.splice(1,0,p),u=-1;const f=[];for(;++u<a.length;){const e=a[u],t=s[u];h=-1;const i=[];for(;++h<c;){const r=e[h]||"";let a="",s="";if(!1!==n.alignDelimiters){const e=l[h]-(t[h]||0),n=o[h];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),s=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),s=a):s=" ".repeat(e)}!1===n.delimiterStart||h||i.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===r||!1===n.delimiterStart&&!h||i.push(" "),!1!==n.alignDelimiters&&i.push(a),i.push(r),!1!==n.alignDelimiters&&i.push(s),!1!==n.padding&&i.push(" "),!1===n.delimiterEnd&&h===c-1||i.push("|")}f.push(!1===n.delimiterEnd?i.join("").replace(/ +$/,""):i.join(""))}return f.join("\n")}(e,{align:t,alignDelimiters:i,padding:n,stringLength:r})}function l(e,t,n){const i=e.children;let r=-1;const o=[],s=t.enter("tableRow");for(;++r<i.length;)o[r]=a(i[r],0,t,n);return s(),o}}function Pf(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function Mf(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"===typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const i=t.children;let r,o=-1;for(;++o<i.length;){const e=i[o];if("paragraph"===e.type){r=e;break}}r===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"===typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function If(e,t,n,i){const r=e.children[0],o="boolean"===typeof e.checked&&r&&"paragraph"===r.type,a="["+(e.checked?"x":" ")+"] ",s=n.createTracker(i);o&&s.move(a);let l=wf.listItem(e,t,n,Fe(Fe({},i),s.current()));return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+a})),l}const jf={tokenize:function(e,t,n){let i=0;return function t(o){if((87===o||119===o)&&i<3)return i++,e.consume(o),t;if(46===o&&3===i)return e.consume(o),r;return n(o)};function r(e){return null===e?n(e):t(e)}},partial:!0},Nf={tokenize:function(e,t,n){let i,r,o;return a;function a(t){return 46===t||95===t?e.check(Bf,l,s)(t):null===t||ku(t)||Iu(t)||45!==t&&Mu(t)?l(t):(o=!0,e.consume(t),a)}function s(t){return 95===t?i=!0:(r=i,i=void 0),e.consume(t),a}function l(e){return r||i||!o?n(e):t(e)}},partial:!0},Of={tokenize:function(e,t){let n=0,i=0;return r;function r(a){return 40===a?(n++,e.consume(a),r):41===a&&i<n?o(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(Bf,t,o)(a):null===a||ku(a)||Iu(a)?t(a):(e.consume(a),r)}function o(t){return 41===t&&i++,e.consume(t),r}},partial:!0},Bf={tokenize:function(e,t,n){return i;function i(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),i):38===a?(e.consume(a),o):93===a?(e.consume(a),r):60===a||null===a||ku(a)||Iu(a)?t(a):n(a)}function r(e){return null===e||40===e||91===e||ku(e)||Iu(e)?t(e):i(e)}function o(e){return wu(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),i):wu(t)?(e.consume(t),a):n(t)}},partial:!0},Lf={tokenize:function(e,t,n){return function(t){return e.consume(t),i};function i(e){return Du(e)?n(e):t(e)}},partial:!0},zf={name:"wwwAutolink",tokenize:function(e,t,n){const i=this;return function(t){if(87!==t&&119!==t||!Zf.call(i,i.previous)||Yf(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(jf,e.attempt(Nf,e.attempt(Of,r),n),n)(t)};function r(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:Zf},Rf={name:"protocolAutolink",tokenize:function(e,t,n){const i=this;let r="",o=!1;return function(t){if((72===t||104===t)&&Hf.call(i,i.previous)&&!Yf(i.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),r+=String.fromCodePoint(t),e.consume(t),a;return n(t)};function a(t){if(wu(t)&&r.length<5)return r+=String.fromCodePoint(t),e.consume(t),a;if(58===t){const n=r.toLowerCase();if("http"===n||"https"===n)return e.consume(t),s}return n(t)}function s(t){return 47===t?(e.consume(t),o?l:(o=!0,s)):n(t)}function l(t){return null===t||Cu(t)||ku(t)||Iu(t)||Mu(t)?n(t):e.attempt(Nf,e.attempt(Of,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Hf},Vf={name:"emailAutolink",tokenize:function(e,t,n){const i=this;let r,o;return function(t){if(!Wf(t)||!Gf.call(i,i.previous)||Yf(i.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return Wf(t)?(e.consume(t),a):64===t?(e.consume(t),s):n(t)}function s(t){return 46===t?e.check(Lf,c,l)(t):45===t||95===t||Du(t)?(o=!0,e.consume(t),s):c(t)}function l(t){return e.consume(t),r=!0,s}function c(a){return o&&r&&wu(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:Gf},Uf={};let qf=48;for(;qf<123;)Uf[qf]=Vf,qf++,58===qf?qf=65:91===qf&&(qf=97);function Zf(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||ku(e)}function Hf(e){return!wu(e)}function Gf(e){return!(47===e||Wf(e))}function Wf(e){return 43===e||45===e||46===e||95===e||Du(e)}function Yf(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if(("labelLink"===i.type||"labelImage"===i.type)&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}Uf[43]=Vf,Uf[45]=Vf,Uf[46]=Vf,Uf[95]=Vf,Uf[72]=[Vf,Rf],Uf[104]=[Vf,Rf],Uf[87]=[Vf,zf],Uf[119]=[Vf,zf];const Xf={tokenize:function(e,t,n){const i=this;return Nu(e,function(e){const r=i.events[i.events.length-1];return r&&"gfmFootnoteDefinitionIndent"===r[1].type&&4===r[2].sliceSerialize(r[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function Kf(e,t,n){const i=this;let r=i.events.length;const o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;r--;){const e=i.events[r][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(r){if(!a||!a._balanced)return n(r);const s=rh(i.sliceSerialize({start:a.end,end:i.now()}));if(94!==s.codePointAt(0)||!o.includes(s.slice(1)))return n(r);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(r),e.exit("gfmFootnoteCallLabelMarker"),t(r)}}function $f(e,t){let n,i=e.length;for(;i--;)if("labelImage"===e[i][1].type&&"enter"===e[i][0]){n=e[i][1];break}e[i+1][1].type="data",e[i+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[i+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[i+3][1].end),end:Object.assign({},e[i+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[i+1],e[i+2],["enter",r,t],e[i+3],e[i+4],["enter",o,t],["exit",o,t],["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(i,e.length-i+1,...l),e}function Qf(e,t,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o,a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),s};function s(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(s){if(a>999||93===s&&!o||null===s||91===s||ku(s))return n(s);if(93===s){e.exit("chunkString");const o=e.exit("gfmFootnoteCallString");return r.includes(rh(i.sliceSerialize(o)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(s)}return ku(s)||(o=!0),a++,e.consume(s),92===s?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),a++,l):l(t)}}function Jf(e,t,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o,a,s=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(s>999||93===t&&!a||null===t||91===t||ku(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return o=rh(i.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return ku(t)||(a=!0),s++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),s++,c):c(t)}function h(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),r.includes(o)||r.push(o),Nu(e,d,"gfmFootnoteDefinitionWhitespace")):n(t)}function d(e){return t(e)}}function em(e,t,n){return e.check(zu,t,e.attempt(Xf,t,n))}function tm(e){e.exit("gfmFootnoteDefinition")}function nm(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,i){const r=this.previous,o=this.events;let a=0;return function(t){if(126===r&&"characterEscape"!==o[o.length-1][1].type)return i(t);return e.enter("strikethroughSequenceTemporary"),s(t)};function s(o){const l=Fh(r);if(126===o)return a>1?i(o):(e.consume(o),a++,s);if(a<2&&!t)return i(o);const c=e.exit("strikethroughSequenceTemporary"),u=Fh(o);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),n(o)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let i=n;for(;i--;)if("exit"===e[i][0]&&"strikethroughSequenceTemporary"===e[i][1].type&&e[i][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[i][1].end.offset-e[i][1].start.offset){e[n][1].type="strikethroughSequence",e[i][1].type="strikethroughSequence";const r={type:"strikethrough",start:Object.assign({},e[i][1].start),end:Object.assign({},e[n][1].end)},o={type:"strikethroughText",start:Object.assign({},e[i][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",r,t],["enter",e[i][1],t],["exit",e[i][1],t],["enter",o,t]],s=t.parser.constructs.insideSpan.null;s&&du(a,a.length,0,Dh(s,e.slice(i+1,n),t)),du(a,a.length,0,[["exit",o,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",r,t]]),du(e,i-1,n-i+3,a),n=i+a.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null!==t&&void 0!==t||(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class im{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,i){let r=0;if(0===n&&0===i.length)return;for(;r<e.map.length;){if(e.map[r][0]===t)return e.map[r][1]+=n,void e.map[r][2].push(...i);r+=1}e.map.push([t,n,i])}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let i=n.pop();for(;i;){for(const t of i)e.push(t);i=n.pop()}this.map.length=0}}function rm(e,t){let n=!1;const i=[];for(;t<e.length;){const r=e[t];if(n){if("enter"===r[0])"tableContent"===r[1].type&&i.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===r[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=i.length-1;i[e]="left"===i[e]?"center":"right"}}else if("tableDelimiterRow"===r[1].type)break}else"enter"===r[0]&&"tableDelimiterRow"===r[1].type&&(n=!0);t+=1}return i}function om(e,t,n){const i=this;let r,o=0,a=0;return function(e){let t=i.events.length-1;for(;t>-1;){const e=i.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const r=t>-1?i.events[t][1].type:null,o="tableHead"===r||"tableRow"===r?x:s;if(o===x&&i.parser.lazy[i.now().line])return n(e);return o(e)};function s(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return r=!0,a+=1,l(e)}(t)}function l(t){return null===t?n(t):Fu(t)?a>1?(a=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),h):n(t):Pu(t)?Nu(e,l,"whitespace")(t):(a+=1,r&&(r=!1,o+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||ku(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function h(t){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(t):(e.enter("tableDelimiterRow"),r=!1,Pu(t)?Nu(e,d,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):d(t))}function d(t){return 45===t||58===t?f(t):124===t?(r=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):_(t)}function p(t){return Pu(t)?Nu(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(a+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(a+=1,m(t)):null===t||Fu(t)?v(t):_(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):_(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(t))}function y(t){return Pu(t)?Nu(e,v,"whitespace")(t):v(t)}function v(n){return 124===n?d(n):(null===n||Fu(n))&&r&&o===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):_(n)}function _(e){return n(e)}function x(t){return e.enter("tableRow"),b(t)}function b(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),b):null===n||Fu(n)?(e.exit("tableRow"),t(n)):Pu(n)?Nu(e,b,"whitespace")(n):(e.enter("data"),w(n))}function w(t){return null===t||124===t||ku(t)?(e.exit("data"),b(t)):(e.consume(t),92===t?D:w)}function D(t){return 92===t||124===t?(e.consume(t),w):w(t)}}function am(e,t){let n,i,r,o=-1,a=!0,s=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,h=0;const d=new im;for(;++o<e.length;){const p=e[o],f=p[1];"enter"===p[0]?"tableHead"===f.type?(u=!1,0!==h&&(lm(d,t,h,n,i),i=void 0,h=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(o,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(a=!0,r=void 0,l=[0,0,0,0],c=[0,o+1,0,0],u&&(u=!1,i={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(o,0,[["enter",i,t]])),s="tableDelimiterRow"===f.type?2:i?3:1):!s||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(a?a=!1:(0!==l[1]&&(c[0]=c[1],r=sm(d,t,l,s,void 0,r)),l=c,c=[l[1],o,0,0])):(a=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],r=sm(d,t,l,s,void 0,r),l=[0,0,0,0]),c[2]=o)):"tableHead"===f.type?(u=!0,h=o):"tableRow"===f.type||"tableDelimiterRow"===f.type?(h=o,0!==l[1]?(c[0]=c[1],r=sm(d,t,l,s,o,r)):0!==c[1]&&(r=sm(d,t,c,s,o,r)),s=0):!s||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=o)}for(0!==h&&lm(d,t,h,n,i),d.consume(t.events),o=-1;++o<t.events.length;){const e=t.events[o];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=rm(t.events,o))}return e}function sm(e,t,n,i,r,o){const a=1===i?"tableHeader":2===i?"tableDelimiter":"tableData";0!==n[0]&&(o.end=Object.assign({},cm(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const s=cm(t.events,n[1]);if(o={type:a,start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",o,t]]),0!==n[2]){const r=cm(t.events,n[2]),o=cm(t.events,n[3]),a={type:"tableContent",start:Object.assign({},r),end:Object.assign({},o)};if(e.add(n[2],0,[["enter",a,t]]),2!==i){const i=t.events[n[2]],r=t.events[n[3]];if(i[1].end=Object.assign({},r[1].end),i[1].type="chunkText",i[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,i=n[3]-n[2]-1;e.add(t,i,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==r&&(o.end=Object.assign({},cm(t.events,r)),e.add(r,0,[["exit",o,t]]),o=void 0),o}function lm(e,t,n,i,r){const o=[],a=cm(t.events,n);r&&(r.end=Object.assign({},a),o.push(["exit",r,t])),i.end=Object.assign({},a),o.push(["exit",i,t]),e.add(n+1,0,o)}function cm(e,t){const n=e[t],i="enter"===n[0]?"start":"end";return n[1][i]}const um={name:"tasklistCheck",tokenize:function(e,t,n){const i=this;return function(t){if(null!==i.previous||!i._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),r};function r(t){return ku(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(i){return Fu(i)?t(i):Pu(i)?e.check({tokenize:hm},t,n)(i):n(i)}}};function hm(e,t,n){return Nu(e,function(e){return null===e?n(e):t(e)},"whitespace")}const dm={};function pm(e){const t=e||dm,n=this.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),r=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(function(e){return _u([{text:Uf},{document:{91:{name:"gfmFootnoteDefinition",tokenize:Jf,continuation:{tokenize:em},exit:tm}},text:{91:{name:"gfmFootnoteCall",tokenize:Qf},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Kf,resolveTo:$f}}},nm(e),{flow:{null:{name:"table",tokenize:om,resolveAll:am}}},{text:{91:um}}])}(t)),r.push([{transforms:[Mp],enter:{literalAutolink:Ap,literalAutolinkEmail:Sp,literalAutolinkHttp:Sp,literalAutolinkWww:Sp},exit:{literalAutolink:Pp,literalAutolinkEmail:kp,literalAutolinkHttp:Tp,literalAutolinkWww:Fp}},{enter:{gfmFootnoteCallString:Op,gfmFootnoteCall:Bp,gfmFootnoteDefinitionLabelString:Lp,gfmFootnoteDefinition:zp},exit:{gfmFootnoteCallString:Rp,gfmFootnoteCall:Vp,gfmFootnoteDefinitionLabelString:Up,gfmFootnoteDefinition:qp}},{canContainEols:["delete"],enter:{strikethrough:Xp},exit:{strikethrough:Kp}},{enter:{table:Df,tableData:Sf,tableHeader:Sf,tableRow:Cf},exit:{codeText:Tf,table:Ef,tableData:Af,tableHeader:Af,tableRow:Af}},{exit:{taskListCheckValueChecked:Pf,taskListCheckValueUnchecked:Pf,paragraph:Mf}}]),o.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Ep,notInConstruct:Cp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Ep,notInConstruct:Cp},{character:":",before:"[ps]",after:"\\/",inConstruct:Ep,notInConstruct:Cp}]},Hp(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Yp}],handlers:{delete:$p}},kf(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:If}}]}}(t))}const fm=e=>{let{isOpen:t,onClose:n,currentData:i,locationName:r,compareData:a}=e;const[s,l]=(0,o.useState)([{role:"assistant",content:"Hello! I'm GeoGPT Intelligence. What would you like to know about our geospatial analysis?"}]),[c,u]=(0,o.useState)(""),[h,d]=(0,o.useState)(!1),[p,f]=(0,o.useState)(""),[m,g]=(0,o.useState)(!0),[y,v]=(0,o.useState)(!1),_=(0,o.useRef)(null);(0,o.useEffect)(()=>{x()},[s]);const x=()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},b=async e=>{if(e&&e.preventDefault(),!c.trim())return;const t={role:"user",content:c};l(e=>[...e,t]),d(!0);const n=c;u(""),m&&g(!1);try{const e=await fetch("".concat(it,"/ask_geogpt"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,history:s,currentData:i||{},locationName:r||"Unknown Location",compareData:a||{}})});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const t=await e.json();l(e=>[...e,{role:"assistant",content:t.answer,provider:t.provider,confidence:t.confidence,response_time:t.response_time,timestamp:t.timestamp}]),f(t.provider)}catch(o){console.error("GeoGPT API Error:",o);let e="I apologize, but I'm having trouble connecting right now. Please try again in a moment.";o.message.includes("Failed to fetch")?e="Network connection issue. Please check your internet connection and try again.":o.message.includes("403")||o.message.includes("401")?e="API authentication issue. Please check your API keys and try again.":o.message.includes("429")?e="Rate limit exceeded. Please wait a moment and try again.":o.message.includes("500")&&(e="Server error. The team has been notified. Please try again later."),l(t=>[...t,{role:"assistant",content:e,provider:"Error"}])}finally{d(!1)}},w=e=>{u(e),setTimeout(()=>{b()},50)},D=e=>{switch(e){case"Grok":return"#1e40af";case"OpenAI":return"#059669";case"Gemini":return"#7c3aed";case"Fallback":return"#dc2626";default:return"#64748b"}},E=e=>{switch(e){case"Grok":return"\ud83d\ude80";case"OpenAI":return"\ud83e\udd16";case"Gemini":return"\ud83d\udc8e";case"Fallback":return"\u26a0\ufe0f";default:return"\ud83d\udcac"}},C=e=>"".concat((1e3*e).toFixed(0),"ms");return t?(0,et.jsxs)("div",{className:"geogpt-polished-box",children:[(0,et.jsxs)("div",{className:"geogpt-chat-header",children:[(0,et.jsxs)("div",{className:"gpt-status",children:[(0,et.jsx)("strong",{children:"GeoGPT Intelligence"}),p&&(0,et.jsxs)("span",{className:"current-provider",style:{color:D(p)},children:[E(p)," ",p]})]}),(0,et.jsxs)("div",{className:"chat-controls",children:[(0,et.jsx)("button",{className:"sidebar-toggle-btn ".concat(y?"extended":""),onClick:()=>v(!y),title:"Toggle Sidebar",children:"\u2630"}),(0,et.jsx)("button",{className:"close-gpt",onClick:()=>n(!1),children:"\xd7"})]})]}),(0,et.jsxs)("div",{className:"geogpt-content ".concat(y?"sidebar-extended":""),children:[(0,et.jsxs)("div",{className:"geogpt-sidebar ".concat(y?"extended":"collapsed"),children:[(0,et.jsxs)("div",{className:"sidebar-header",children:[(0,et.jsx)("h4",{children:"\ud83d\ude80 Quick Actions"}),y&&(0,et.jsx)("button",{className:"sidebar-collapse-btn",onClick:()=>v(!1),children:"\u25c0"})]}),y&&(0,et.jsxs)("div",{className:"sidebar-content",children:[(0,et.jsxs)("div",{className:"sidebar-section",children:[(0,et.jsx)("h5",{children:"\ud83d\udcca Site Analysis"}),(0,et.jsx)("div",{className:"sidebar-actions",children:[{text:"Analyze Site A completely",action:"Analyze Site A completely - provide detailed analysis of all factors, scores, risks, and recommendations"},{text:"Analyze Site B completely",action:"Analyze Site B completely - provide detailed analysis of all factors, scores, risks, and recommendations"},{text:"Compare Site A vs Site B",action:"Compare Site A versus Site B in detail - analyze all factors, scores, and recommend the best option"},{text:"Which site is better?",action:"Which site has the highest suitability score and why? Provide detailed comparison and recommendation"}].map((e,t)=>(0,et.jsx)("button",{className:"sidebar-action-btn site-analysis",onClick:()=>w(e.action),children:e.text},t))})]}),(0,et.jsxs)("div",{className:"sidebar-section",children:[(0,et.jsx)("h5",{children:"\ud83e\udd16 AI Models"}),(0,et.jsxs)("div",{className:"sidebar-actions",children:[(0,et.jsx)("button",{className:"sidebar-action-btn",onClick:()=>w("What models does GeoAI use and why were they chosen?"),children:"\ud83e\udd16 Model Overview"}),(0,et.jsx)("button",{className:"sidebar-action-btn",onClick:()=>w("How accurate are the ML models and what's their training data?"),children:"\ud83d\udcca Model Accuracy"}),(0,et.jsx)("button",{className:"sidebar-action-btn",onClick:()=>w("What is the CNN model used for satellite imagery classification?"),children:"\ud83e\udde0 CNN Details"}),(0,et.jsx)("button",{className:"sidebar-action-btn",onClick:()=>w("How does the ensemble system work with Random Forest and XGBoost?"),children:"\ud83c\udf33 Ensemble Models"})]})]}),(0,et.jsxs)("div",{className:"sidebar-section",children:[(0,et.jsx)("h5",{children:"\ud83d\ude80 Features"}),(0,et.jsxs)("div",{className:"sidebar-actions",children:[(0,et.jsx)("button",{className:"sidebar-action-btn",onClick:()=>w("What features and capabilities does GeoAI have?"),children:"Features"}),(0,et.jsx)("button",{className:"sidebar-action-btn",onClick:()=>w("Explain the scoring system and how grades are calculated"),children:"Scoring System"})]})]})]})]}),(0,et.jsxs)("div",{className:"geogpt-main",children:[(0,et.jsxs)("div",{className:"geogpt-messages",children:[s.map((e,t)=>{return(0,et.jsx)("div",{className:"chat-msg ".concat(e.role),children:(0,et.jsxs)("div",{className:"msg-bubble",children:["assistant"===e.role&&e.provider&&(0,et.jsx)("div",{className:"msg-header",children:(0,et.jsxs)("div",{className:"msg-provider-info",children:[(0,et.jsx)("span",{className:"provider-icon",children:E(e.provider)}),(0,et.jsx)("span",{className:"provider-name",style:{color:D(e.provider)},children:e.provider}),e.confidence&&(0,et.jsxs)("span",{className:"confidence",children:[Math.round(100*e.confidence),"%"]}),e.responseTime&&(0,et.jsx)("span",{className:"response-time",children:C(e.responseTime)})]})}),(0,et.jsx)("div",{className:"msg-content",children:(0,et.jsx)(mp,{remarkPlugins:[pm],children:e.content})}),(n=e.sources,n&&0!==n.length?(0,et.jsxs)("div",{className:"sources",children:[(0,et.jsx)("span",{className:"sources-label",children:"Sources:"}),n.map((e,t)=>(0,et.jsx)("span",{className:"source-tag",children:e},t))]}):null)]})},t);var n}),h&&(0,et.jsx)("div",{className:"chat-msg assistant",children:(0,et.jsxs)("div",{className:"msg-bubble thinking-bubble",children:[(0,et.jsxs)("div",{className:"typing-indicator",children:[(0,et.jsx)("span",{}),(0,et.jsx)("span",{}),(0,et.jsx)("span",{})]}),(0,et.jsx)("span",{children:"Thinking..."})]})}),(0,et.jsx)("div",{ref:_})]}),m&&(0,et.jsxs)("div",{className:"quick-questions-compact-unified",children:[(0,et.jsxs)("div",{className:"quick-questions-header-unified",children:[(0,et.jsx)("span",{className:"quick-questions-title-unified",children:"\ud83d\udca1 Quick Questions"}),(0,et.jsx)("button",{className:"quick-questions-close-btn",onClick:()=>g(!1),title:"Hide Quick Questions",children:"\xd7"})]}),(0,et.jsx)("div",{className:"quick-questions-list-unified",children:["What is GeoAI and how does it work?","Who are the team members and project guide?","What machine learning models are used in this project?","How does the 3D terrain visualization work?","What are the 14 factors for land suitability analysis?","How accurate are the ML models and what's their training data?","What technologies are used in the frontend and backend?","How does the scoring system work and what do the grades mean?","What APIs are used for data collection?","How does the CNN model classify satellite imagery?","What is the development methodology used in this project?","How are the ML models trained and what's their accuracy?"].map((e,t)=>(0,et.jsx)("button",{className:"quick-question-item-unified",onClick:()=>w(e),title:e,children:e.length>65?e.substring(0,65)+"...":e},t))})]}),(0,et.jsxs)("form",{className:"geogpt-input-area",onSubmit:b,children:[(0,et.jsxs)("div",{className:"input-wrapper-inline",children:[(0,et.jsx)("input",{type:"text",placeholder:"Ask GeoGPT about geospatial intelligence...",value:c,onChange:e=>u(e.target.value),className:"geogpt-input",disabled:h}),(0,et.jsx)("button",{type:"submit",className:"send-btn",disabled:h||!c.trim(),children:h?(0,et.jsx)("div",{className:"loading-spinner"}):(0,et.jsx)("span",{children:"\u2192"})})]}),(0,et.jsx)("div",{className:"quick-questions-toggle-unified",children:(0,et.jsxs)("button",{className:"quick-questions-toggle-btn-unified",onClick:()=>g(!m),disabled:h,children:["\ud83d\udca1 ",m?"Hide":"Show"," Quick Questions"]})})]})]})]})]}):(0,et.jsx)("button",{className:"geogpt-pill-btn",onClick:()=>n(!0),children:(0,et.jsx)("div",{className:"gpt-icon-glow",children:(0,et.jsxs)("div",{className:"gpt-logo",children:[(0,et.jsx)("div",{className:"gpt-circle",children:(0,et.jsx)("span",{className:"gpt-g",children:"Geo"})}),(0,et.jsx)("span",{className:"gpt-pt",children:"GPT"})]})})})};var mm=n(9885);const gm=e=>{const t={ocean:["/sounds/ocean.mp3"],forest:["/sounds/forest.mp3"],mountain:["/sounds/mountain.webm"],urban:["/sounds/urban.mp3"],traffic:["/sounds/traffic.mp3"],flood:["/sounds/flood.mp3"],ambient:["/sounds/ambient.mp3"],success:["/sounds/success.mp3"],river:["/sounds/river.mp3"],rural:["/sounds/rural.mp3"]};return t[e]||t.ambient},ym=e=>{let{activeFactors:t,isEnabled:n,isLoading:i,resultLabel:r,compareFactors:a,compareResultLabel:s,analysisComplete:l,siteAPlaying:c=!0,siteBPlaying:u=!0}=e;const h=(0,o.useRef)(null),d=(0,o.useRef)(null),p=(0,o.useRef)(!1),f=(0,o.useRef)(!1);(0,o.useEffect)(()=>{console.log("\ud83d\udd0d AudioLandscape Props Changed:"),console.log("  - siteAPlaying: ".concat(c)),console.log("  - siteBPlaying: ".concat(u)),console.log("  - compareFactors: ".concat(!!a)),console.log('  - compareResultLabel: "'.concat(s,'"'))},[c,u,a,s]);const m=(0,o.useCallback)((e,t)=>{if(!e&&!t)return"ambient";const n=(null===t||void 0===t?void 0:t.toLowerCase())||"";if(n.includes("ocean")||n.includes("sea")||n.includes("water body"))return"ocean";if(n.includes("forest"))return"forest";if(n.includes("mountain"))return"mountain";if(n.includes("urban")||n.includes("city"))return"urban";if(n.includes("flood"))return"flood";if(n.includes("river"))return"river";if(n.includes("rural"))return"rural";if(e){const{elevation:t,climate:n,vegetation:i,water_proximity:r,land_use:o}=e;if(r>.7)return"ocean";if(i>.8&&n>.6)return"forest";if(t>.7)return"mountain";if(o>.8)return"urban";if(r>.5&&r<=.7)return"river"}return"ambient"},[]),g=(0,o.useCallback)(()=>{console.log("\ud83c\udf89 Playing success sound...");const e=new mm.Howl({src:gm("success"),volume:.3,onplay:()=>console.log("\ud83c\udf89 Success sound playing"),onplayerror:(e,t)=>console.warn("\u26a0\ufe0f Success sound blocked:",t)});if(p.current)e.play();else{const t=()=>{p.current&&(e.play(),document.removeEventListener("click",t))};document.addEventListener("click",t,{once:!0})}},[]),y=(0,o.useCallback)(()=>{if(h.current){console.log("\ud83d\udd07 Stopping Site A audio");try{h.current.stop(),h.current.unload()}catch(gV){console.warn("Error stopping Site A audio:",gV)}h.current=null}},[]),v=(0,o.useCallback)(()=>{if(d.current){console.log("\ud83d\udd07 Stopping Site B audio");try{d.current.stop(),d.current.unload()}catch(gV){console.warn("Error stopping Site B audio:",gV)}d.current=null}},[]),_=(0,o.useCallback)(e=>{if(h.current&&y(),!n||!c)return void console.log("\ud83d\udd07 Site A audio disabled or muted");console.log("\ud83c\udfb5 Starting Site A audio: ".concat(e));const t=new mm.Howl({src:gm(e),loop:!0,volume:.25,html5:!0,onplay:()=>console.log("\ud83c\udfb5 Site A playing: ".concat(e)),onplayerror:(t,n)=>console.warn("\u26a0\ufe0f Site A audio blocked: ".concat(e),n),onloaderror:(t,n)=>console.error("\u274c Site A load failed: ".concat(e),n)});if(p.current)t.play();else{console.log("\ud83d\udc46 Site A audio waiting for user interaction...");const e=()=>{p.current&&(t.play(),document.removeEventListener("click",e))};document.addEventListener("click",e,{once:!0})}h.current=t},[n,c,y]),x=(0,o.useCallback)(e=>{if(d.current&&v(),!n||!u)return void console.log("\ud83d\udd07 Site B audio disabled or muted");console.log("\ud83c\udfb5 Starting Site B audio: ".concat(e));const t=new mm.Howl({src:gm(e),loop:!0,volume:.25,html5:!0,onplay:()=>console.log("\ud83c\udfb5 Site B playing: ".concat(e)),onplayerror:(t,n)=>console.warn("\u26a0\ufe0f Site B audio blocked: ".concat(e),n),onloaderror:(t,n)=>console.error("\u274c Site B load failed: ".concat(e),n)});if(p.current)t.play();else{console.log("\ud83d\udc46 Site B audio waiting for user interaction...");const e=()=>{p.current&&(t.play(),document.removeEventListener("click",e))};document.addEventListener("click",e,{once:!0})}d.current=t},[n,u,v]);return(0,o.useEffect)(()=>{const e=()=>{p.current||(p.current=!0,console.log("\ud83d\udc46 User interaction detected - audio enabled"))},t=["click","keydown","touchstart"];return t.forEach(t=>{document.addEventListener(t,e,{once:!0})}),()=>{t.forEach(t=>{document.removeEventListener(t,e)})}},[]),(0,o.useEffect)(()=>{if(console.log("\ud83c\udfb5 Audio Controller Activated"),console.log("\ud83d\udd0a Enabled: ".concat(n)),console.log("\ud83d\udccd Site A Playing: ".concat(c)),console.log("\ud83d\udccd Site B Playing: ".concat(u)),console.log("\u23f3 Loading: ".concat(i)),console.log("\u2705 Analysis Complete: ".concat(l)),l&&!f.current?(g(),f.current=!0):l||(f.current=!1),t||r){const e=m(t,r);c&&n?_(e):y()}else y();if(console.log("\ud83d\udd0d Site B Audio Check:"),console.log("  - compareFactors: ".concat(!!a)),console.log('  - compareResultLabel: "'.concat(s,'"')),console.log("  - siteBPlaying: ".concat(u)),console.log("  - isEnabled: ".concat(n)),a||s){const e=m(a,s);console.log("  - Site B Biome: ".concat(e)),u&&n?(console.log("\ud83c\udfb5 Starting Site B audio..."),x(e)):(console.log("\ud83d\udd07 Site B audio disabled or muted - stopping"),v())}else console.log("\ud83d\udd07 No compare data - stopping Site B audio"),v()},[t,a,n,i,r,s,l,c,u,m,g,_,x,y,v]),(0,o.useEffect)(()=>()=>{y(),v()},[y,v]),null};delete Ne().Icon.Default.prototype._getIconUrl,Ne().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const vm={standard:null,ndvi:"https://tiles.maps.eox.at/wmts/1.0.0/s2cloudless-2020_3857/default/g/{z}/{y}/{x}.jpg",thermal:"https://tiles.maps.eox.at/wmts/1.0.0/terrain-light_3857/default/g/{z}/{y}/{x}.jpg",hydrology:"https://tiles.maps.eox.at/wmts/1.0.0/hydrography_3857/default/g/{z}/{y}/{x}.jpg"},_m={streets:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",satellite:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",hybrid:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",terrain:"https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}",roads:"https://mt1.google.com/vt/lyrs=h&x={x}/{y}&z={z}",dark:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",light:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",voyager:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",topo:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",watercolor:"https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg"},xm=e=>{let{factors:t,score:n}=e;const i=((e,t)=>{var n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,D,E,C,A,S,T,F,k,P,M,I,j,N,O,B,L,z,R,V,U,q,Z,H,G;const W=[];if(!e)return W;const Y={flood:null!==(n=null===e||void 0===e||null===(i=e.hydrology)||void 0===i||null===(r=i.flood)||void 0===r?void 0:r.value)&&void 0!==n?n:50,water:null!==(o=null===e||void 0===e||null===(a=e.hydrology)||void 0===a||null===(s=a.water)||void 0===s?void 0:s.value)&&void 0!==o?o:50,drainage:null!==(l=null===e||void 0===e||null===(c=e.hydrology)||void 0===c||null===(u=c.drainage)||void 0===u?void 0:u.value)&&void 0!==l?l:50,pollution:null!==(h=null===e||void 0===e||null===(d=e.environmental)||void 0===d||null===(p=d.pollution)||void 0===p?void 0:p.value)&&void 0!==h?h:50,soil:null!==(f=null===e||void 0===e||null===(m=e.environmental)||void 0===m||null===(g=m.soil)||void 0===g?void 0:g.value)&&void 0!==f?f:50,vegetation:null!==(y=null===e||void 0===e||null===(v=e.environmental)||void 0===v||null===(_=v.vegetation)||void 0===_?void 0:_.value)&&void 0!==y?y:50,rainfall:null!==(x=null===e||void 0===e||null===(b=e.climatic)||void 0===b||null===(w=b.rainfall)||void 0===w?void 0:w.value)&&void 0!==x?x:50,thermal:null!==(D=null===e||void 0===e||null===(E=e.climatic)||void 0===E||null===(C=E.thermal)||void 0===C?void 0:C.value)&&void 0!==D?D:50,heatIntensity:null!==(A=null===e||void 0===e||null===(S=e.climatic)||void 0===S||null===(T=S.intensity)||void 0===T?void 0:T.value)&&void 0!==A?A:50,infrastructure:null!==(F=null===e||void 0===e||null===(k=e.socio_econ)||void 0===k||null===(P=k.infrastructure)||void 0===P?void 0:P.value)&&void 0!==F?F:50,landuse:null!==(M=null===e||void 0===e||null===(I=e.socio_econ)||void 0===I||null===(j=I.landuse)||void 0===j?void 0:j.value)&&void 0!==M?M:50,population:null!==(N=null===e||void 0===e||null===(O=e.socio_econ)||void 0===O||null===(B=O.population)||void 0===B?void 0:B.value)&&void 0!==N?N:50,slope:null!==(L=null===e||void 0===e||null===(z=e.physical)||void 0===z||null===(R=z.slope)||void 0===R?void 0:R.value)&&void 0!==L?L:50,elevation:null!==(V=null===e||void 0===e||null===(U=e.physical)||void 0===U||null===(q=U.elevation)||void 0===q?void 0:q.value)&&void 0!==V?V:50},X=[];if(Y.flood<40&&X.push("FLOOD RISK"),Y.pollution<35&&X.push("AIR QUALITY"),(null!==(Z=Y.slope)&&void 0!==Z?Z:100)<35&&X.push("STEEP TERRAIN"),Y.drainage<40&&X.push("POOR DRAINAGE"),Y.heatIntensity>70&&X.push("HIGH HEAT STRESS"),X.length>0){var K,$;const e=[];Y.flood<40&&e.push("flood safety ".concat(Y.flood.toFixed(0),"/100")),Y.pollution<35&&e.push("air quality ".concat(Y.pollution.toFixed(0),"/100")),(null!==(K=Y.slope)&&void 0!==K?K:100)<35&&e.push("slope suitability ".concat((null!==($=Y.slope)&&void 0!==$?$:0).toFixed(0),"/100 (steep)")),Y.drainage<40&&e.push("drainage ".concat(Y.drainage.toFixed(0),"/100")),Y.heatIntensity>70&&e.push("heat stress ".concat(Y.heatIntensity.toFixed(0),"/100")),W.push({type:"Risk",label:"Development Constraints",class:"pot-red",icon:"\u26a0\ufe0f",reason:"Critical limitations: ".concat(X.join(" & "),". ").concat(e.length?"Numericals: ".concat(e.join("; "),". "):"","Construction may require advanced mitigation or be restricted to conservation or low-impact usage.")})}if(Y.flood>55&&Y.pollution>50&&Y.thermal>55&&Y.infrastructure>50&&(null!==(H=Y.slope)&&void 0!==H?H:50)>70){const e=Y.pollution>70?"clean air quality":Y.thermal>70?"comfortable climate conditions":"stable terrain conditions";W.push({type:"Residential",label:"Residential Development",class:"pot-green",icon:"\ud83c\udfe0",reason:"Well-suited for housing due to ".concat(e,", manageable flood exposure, and good infrastructure accessibility.")})}const Q=null!==(G=Y.vegetation)&&void 0!==G?G:50;if(Q>=45&&(Y.soil>60&&Y.rainfall>50||Y.soil>55&&Y.water>60)){const e=Y.soil>Y.rainfall?"high soil fertility":"reliable rainfall and water availability";W.push({type:"Agricultural",label:"Agricultural Suitability",class:"pot-blue",icon:"\ud83d\ude9c",reason:"Favorable for farming driven by ".concat(e,". Vegetation index ").concat(Q.toFixed(0),"/100 supports crop potential. Suitable for sustained crop cycles with moderate water management.")})}return Y.infrastructure>65&&Y.landuse>45&&Y.flood>50&&Y.pollution>40&&W.push({type:"Industrial",label:"Logistics & Industrial Use",class:"pot-purple",icon:"\ud83c\udfed",reason:"Strategically positioned: infrastructure ".concat(Y.infrastructure.toFixed(0),"/100, land-use ").concat(Y.landuse.toFixed(0),"/100, flood safety ").concat(Y.flood.toFixed(0),"/100, pollution ").concat(Y.pollution.toFixed(0),"/100. Compatible for logistics and industrial use.")}),Y.vegetation>70&&Y.landuse<40&&Y.population<40&&W.push({type:"Conservation",label:"Ecological Conservation Value",class:"pot-green",icon:"\ud83c\udf33",reason:"High vegetation density and low human footprint indicate strong ecological value. Best suited for conservation, eco-tourism, or carbon-offset initiatives."}),"hydrology"===t&&Y.flood<50&&W.push({type:"Risk",label:"Hydrological Accumulation Zone",class:"pot-red",icon:"\ud83c\udf0a",reason:"Hydrology overlay indicates water convergence and potential surface runoff accumulation during heavy rainfall events."}),"thermal"===t&&Y.heatIntensity>65&&W.push({type:"Climate",label:"Urban Heat Stress",class:"pot-blue",icon:"\ud83c\udf21\ufe0f",reason:"Thermal overlay reveals elevated heat stress. Passive cooling, green roofing, and vegetation buffers are recommended."}),W})(t),r=n>80?"A":n>60?"B":n>40?"C":"F";return(0,et.jsxs)("div",{className:"card potential-card glass-morphic",style:{marginBottom:"16px"},children:[(0,et.jsxs)("div",{className:"potential-header enhanced-header",children:[(0,et.jsxs)("div",{className:"title-stack",children:[(0,et.jsx)("h3",{children:"Site Potential Analysis"}),(0,et.jsx)("p",{className:"subtitle",children:"Algorithmic Terrain Synthesis"})]}),(0,et.jsxs)("div",{className:"geo-score-container",children:[(0,et.jsx)("div",{className:"index-box",children:(0,et.jsxs)("span",{className:"geo-value",children:[null===n||void 0===n?void 0:n.toFixed(0),"%"]})}),(0,et.jsxs)("div",{className:"grade-box grade-".concat(r),children:[(0,et.jsx)("span",{className:"geo-label forced-white-label",children:"GRADE"}),(0,et.jsx)("span",{className:"geo-value",children:r})]})]})]}),(0,et.jsx)("div",{className:"recommendations-list",children:i.map((e,t)=>(0,et.jsxs)("div",{className:"potential-item ".concat(e.class),children:[(0,et.jsxs)("div",{className:"potential-tag-row",children:[(0,et.jsx)("span",{className:"potential-icon",children:e.icon}),(0,et.jsx)("span",{className:"potential-label",children:e.label})]}),(0,et.jsx)("p",{className:"potential-reason",children:e.reason})]},t))})]})},bm=(0,o.memo)(e=>{var t,n;let{data:i,latVal:r,lngVal:o,locationName:a,isDarkMode:s,viewMode:l,setViewMode:c,onOpenHistory:u,mapVariety:h,isCompareMode:d,activeSpectral:p,mapMode:f,active3DStyle:m,setLat:g,setLng:y,isSelectingB:v,handleCompareSelect:_,currentZoom:x,setCurrentZoom:b,zoom:w}=e;const D=parseFloat(r),E=parseFloat(o),C=!isNaN(D)&&!isNaN(E),{factors:A,category_scores:S,suitability_score:T}=i,F={physical_terrain:{icon:"\u26f0\ufe0f",label:"Physical Terrain"},hydrology:{icon:"\ud83d\udca7",label:"Hydrology"},environmental:{icon:"\ud83c\udf3f",label:"Environmental"},climatic:{icon:"\ud83c\udf24\ufe0f",label:"Climatic"},socio_econ:{icon:"\ud83c\udfd7\ufe0f",label:"Socio-Economic"}},k=(0,et.jsxs)("div",{className:"card factors-card glass-morphic",children:[(0,et.jsxs)("div",{className:"factors-header",children:[(0,et.jsxs)("div",{className:"title-stack",children:[(0,et.jsx)("h3",{children:"Terrain Intelligence"}),(0,et.jsx)("p",{className:"subtitle",children:"14-Factor Geospatial Synthesis"})]}),(0,et.jsx)("button",{className:"view-toggle",onClick:()=>c("bars"===l?"radar":"bars"),children:"bars"===l?"\ud83d\udd78\ufe0f Radar View":"\ud83d\udcca Bar View"})]}),"bars"===l?(0,et.jsxs)("div",{className:"categories-wrapper",children:[Object.entries(A).map(e=>{var t,n,i;let[r,o]=e;return(0,et.jsxs)("div",{className:"factor-category-group animate-in",children:[(0,et.jsxs)("div",{className:"category-sub-header",children:[(0,et.jsxs)("div",{className:"cat-title",children:[(0,et.jsx)("span",{className:"cat-icon",children:(null===(t=F[r])||void 0===t?void 0:t.icon)||"\ud83d\udcc2"}),(0,et.jsx)("span",{className:"cat-label",children:(null===(n=F[r])||void 0===n?void 0:n.label)||r})]}),(0,et.jsxs)("span",{className:"cat-score-badge",children:[(null===S||void 0===S||null===(i=S[r])||void 0===i?void 0:i.toFixed(0))||0,"%"]})]}),(0,et.jsx)("div",{className:"bars-container categorized",children:Object.entries(o).map(e=>{var t;let[n,i]=e;const r="object"===typeof i?null!==(t=i.scaled_score)&&void 0!==t?t:i.value:i,o=Math.min(100,Math.max(0,Number(r)||0));return(0,et.jsx)(tt,{label:n.replace(/_/g," ").toUpperCase(),value:o},n)})})]},r)}),(0,et.jsxs)("div",{className:"suitability-summation-bar",children:[(0,et.jsx)("label",{children:"Aggregated Index"}),(0,et.jsx)("div",{className:"summation-value",children:(0,et.jsxs)("strong",{children:[null===T||void 0===T?void 0:T.toFixed(1),"%"]})})]})]}):(0,et.jsx)("div",{className:"radar-container",style:{height:"350px",width:"100%",position:"relative"},children:(0,et.jsx)(Zl,{data:Object.values(A).reduce((e,t)=>Fe(Fe({},e),t),{}),isDarkMode:s,categoryScores:S},"radar-".concat(D,"-").concat(E))})]});return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsxs)("div",{className:"card hero-card glass-morphic ".concat(i.suitability_score<40?"danger-glow":""),children:[(0,et.jsxs)("div",{className:"mini-map-context",children:[C?"2D"===f?(0,et.jsxs)(ze,{center:[D,E],zoom:16,zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,touchZoom:!1,style:{height:"100%",width:"100%"},children:[(0,et.jsx)(We,{url:_m[h]||_m.hybrid}),"standard"!==p&&vm[p]&&(0,et.jsx)(We,{url:vm[p],opacity:.7,zIndex:100},p),(0,et.jsx)(Ke,{position:[D,E]})]},"minimap-".concat(D,"-").concat(E)):(0,et.jsx)(lt,{lat:D,lng:E,setLat:g,setLng:y,zoom:16,factors:i.factors,isDarkMode:s,activeStyle:m,interactive:!1}):(0,et.jsx)("div",{className:"empty-results",style:{fontSize:"11px"},children:"Awaiting Analysis..."}),(0,et.jsxs)("div",{className:"mini-map-label",children:[f," Tactical Preview"]})]}),(0,et.jsxs)("div",{className:"card-coordinates",children:[(0,et.jsxs)("span",{children:["LAT: ",C?D.toFixed(4):"0.0000"]}),(0,et.jsxs)("span",{children:["LNG: ",C?E.toFixed(4):"0.0000"]})]}),(0,et.jsx)("div",{className:"suitability-header-row",children:(0,et.jsx)("h3",{children:"Suitability Intelligence"})}),(0,et.jsx)("div",{className:"score-value",style:{"--score-color":i.suitability_score<40?"#ef4444":i.suitability_score<70?"#f59e0b":"#10b981"},children:null===(t=i.suitability_score)||void 0===t?void 0:t.toFixed(1)}),(0,et.jsx)("div",{className:"status-pill ".concat(null===(n=i.label)||void 0===n?void 0:n.toLowerCase().replace(/\s+/g,"-")),children:i.label}),(i.water_body_snippet||i.protected_snippet)&&(0,et.jsxs)("div",{className:"suitability-snippet",children:[i.water_body_snippet&&(0,et.jsxs)("span",{className:"snippet-water",children:["Located on: ",(0,et.jsx)("strong",{children:i.water_body_snippet})]}),i.protected_snippet&&(0,et.jsxs)("span",{className:"snippet-protected",children:["Protected / Forest: ",(0,et.jsx)("strong",{children:i.protected_snippet})]})]}),(0,et.jsx)("div",{className:"history-action-container",children:(0,et.jsxs)("button",{className:"history-pro-btn",onClick:()=>u(i,a,r,o),title:"Execute Temporal Analysis",children:[(0,et.jsx)("span",{className:"pulse-dot"}),(0,et.jsx)("span",{className:"btn-text",children:"ANALYZE HISTORICAL TRENDS"}),(0,et.jsx)("span",{className:"btn-icon",children:"\u2192"})]})})]}),k]})}),wm=e=>{let{setViewCenter:t}=e;const n=$e();return Qe({moveend(){const e=n.getCenter();e&&t&&t([e.lat,e.lng])}}),null},Dm=e=>{let{latA:t,lngA:n,latB:i,lngB:r,currentLat:a,currentLng:s,setLat:l,setLng:c,isSelectingB:u,setBLatInput:h,setBLngInput:d,isTacticalMode:p,setViewCenter:f,setZoom:m}=e;const g=$e();Qe({click(e){const t=e.latlng.lat.toString(),n=e.latlng.lng.toString(),i=[e.latlng.lat,e.latlng.lng];f&&f(i),u?(h(t),d(n)):(l(t),c(n))}}),(0,o.useEffect)(()=>{const e=1.2;return window.snapToA=()=>{const i=parseFloat(t),r=parseFloat(n);Number.isFinite(i)&&Number.isFinite(r)&&(g.flyTo([i,r],16,{animate:!0,duration:e}),m&&m(16))},window.snapToB=()=>{const t=parseFloat(i),n=parseFloat(r);Number.isFinite(t)&&Number.isFinite(n)&&(g.flyTo([t,n],16,{animate:!0,duration:e}),m&&m(16))},window.snapToLive=()=>{if(g)if(navigator.geolocation)navigator.geolocation.getCurrentPosition(t=>{const n=t.coords.latitude,i=t.coords.longitude;Number.isFinite(n)&&Number.isFinite(i)&&(g.flyTo([n,i],16,{animate:!0,duration:e}),m&&m(16),l(n.toString()),c(i.toString()))},t=>{console.error("Error getting device location:",t);const n=parseFloat(a),i=parseFloat(s);Number.isFinite(n)&&Number.isFinite(i)&&(g.flyTo([n,i],16,{animate:!0,duration:e}),m&&m(16))});else{const t=parseFloat(a),n=parseFloat(s);Number.isFinite(t)&&Number.isFinite(n)&&(g.flyTo([t,n],16,{animate:!0,duration:e}),m&&m(16))}else console.warn("Map not initialized yet")},()=>{delete window.snapToA,delete window.snapToB,delete window.snapToLive}},[g,t,n,i,r,a,s,m,l,c]);const y=e=>new(Ne().Icon)({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-".concat(e,".png"),shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),v=[parseFloat(t),parseFloat(n)],_=[parseFloat(i),parseFloat(r)],x=[parseFloat(a),parseFloat(s)];return(0,et.jsxs)(et.Fragment,{children:[p&&Number.isFinite(v[0])&&(0,et.jsx)(Ke,{position:v,icon:y("blue"),children:(0,et.jsx)(Je,{children:"Site A: Analyzed Target"})}),p&&Number.isFinite(_[0])&&(0,et.jsx)(Ke,{position:_,icon:y("red"),children:(0,et.jsx)(Je,{children:"Site B: Comparison Target"})}),Number.isFinite(x[0])&&(0,et.jsx)(Ke,{position:x,icon:y("green"),children:(0,et.jsx)(Je,{children:"Current Selection (Neutral)"})})]})};function Em(){const e=()=>{S(e=>Math.min(e+1,20))},t=()=>{S(e=>Math.max(e-1,0))},[n,i]=(0,o.useState)(!1),[r,a]=(0,o.useState)("2D"),[s,l]=(0,o.useState)("satellite"),c=(0,o.useRef)(!1),[u,h]=(0,o.useState)("A"),[d,p]=(0,o.useState)({lat:null,lng:null}),[f,m]=(0,o.useState)(()=>JSON.parse(localStorage.getItem("analysis_history"))||[]),[g,y]=(0,o.useState)(!0),[v,_]=(0,o.useState)(!0),[x,b]=(0,o.useState)(!0),[w,D]=(0,o.useState)(()=>localStorage.getItem("geo_lat")||"17.385"),[E,C]=(0,o.useState)(()=>localStorage.getItem("geo_lng")||"78.4867"),[A,S]=(0,o.useState)(()=>Number(localStorage.getItem("geo_zoom"))||13),[T,F]=(0,o.useState)(()=>{const e=localStorage.getItem("geo_lat")||"17.385",t=localStorage.getItem("geo_lng")||"78.4867";return[parseFloat(e)||17.385,parseFloat(t)||78.4867]}),[k,P]=(0,o.useState)(()=>localStorage.getItem("geo_map_style")||"streets"),[M,I]=(0,o.useState)("suitability"),[j,N]=(0,o.useState)(()=>{var e;return null===(e=JSON.parse(localStorage.getItem("geo_theme")))||void 0===e||e}),[O,B]=(0,o.useState)(()=>JSON.parse(localStorage.getItem("geo_last_result"))||null),[L,z]=(0,o.useState)(()=>JSON.parse(localStorage.getItem("geo_last_compare_result"))||null),[R,V]=(0,o.useState)(()=>JSON.parse(localStorage.getItem("geo_is_compare"))||!1),[U,q]=(0,o.useState)(()=>JSON.parse(localStorage.getItem("geo_show_b"))||!1),[Z,H]=(0,o.useState)(()=>localStorage.getItem("geo_name_a")||"Site A"),[G,W]=(0,o.useState)(()=>localStorage.getItem("geo_name_b")||"Site B"),[Y,X]=(0,o.useState)(()=>Number(localStorage.getItem("sidebar_width"))||320),[K,$]=(0,o.useState)(()=>{const e=Number(localStorage.getItem("bottom_height"));return e>0?e:.5*window.innerHeight}),Q=(0,o.useRef)(!1),J=(0,o.useRef)(!1),[ee,te]=(0,o.useState)(""),[ne,ie]=(0,o.useState)(!1),[re,oe]=(0,o.useState)(!1),[ae,se]=(0,o.useState)(""),[le,ce]=(0,o.useState)(""),[ue,he]=(0,o.useState)(!1),[de]=(0,o.useState)(!1),[pe,fe]=(0,o.useState)("bars"),[me,ge]=(0,o.useState)(()=>({lat:localStorage.getItem("geo_lat_analyzed")||null,lng:localStorage.getItem("geo_lng_analyzed")||null})),[ye,ve]=(0,o.useState)(()=>({lat:localStorage.getItem("geo_lat_b_analyzed")||null,lng:localStorage.getItem("geo_lng_b_analyzed")||null})),[_e,xe]=(0,o.useState)(null),[be,we]=(0,o.useState)(""),[De,Ee]=(0,o.useState)(()=>JSON.parse(localStorage.getItem("savedPlaces"))||[]),[Ce]=(0,o.useState)(!1),[Ae,Se]=(0,o.useState)(!1),[Te,Fe]=(0,o.useState)(null),[ke,Pe]=(0,o.useState)(!1),[Me,Ie]=(0,o.useState)(null),[je,Ne]=(0,o.useState)(!1),[Oe,Be]=(0,o.useState)(!1),[Le,Re]=(0,o.useState)(!1),[Ve,Ue]=(0,o.useState)(!1),[qe,Ze]=(0,o.useState)(!1),[He,Ge]=(0,o.useState)({x:0,y:0}),[Ye,Xe]=(0,o.useState)({x:0,y:0}),[Ke]=(0,o.useState)([{role:"assistant",content:"Hello! I'm GeoGPT Intelligence. What would you like to know about our geospatial analysis?"}]),$e=(0,o.useRef)(null),Qe=(0,o.useCallback)(()=>{var e;null===(e=$e.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[]);(0,o.useEffect)(()=>{Qe()},[Ke,Qe]);const Je=(0,o.useCallback)(e=>{e.preventDefault(),Ze(!0),Xe({x:e.clientX-He.x,y:e.clientY-He.y})},[He]),tt=(0,o.useCallback)(e=>{if(qe){const t=e.clientX-Ye.x,n=e.clientY-Ye.y;Ge({x:t,y:n})}},[qe,Ye]),nt=(0,o.useCallback)(()=>{Ze(!1)},[]);(0,o.useEffect)(()=>{if(qe)return document.addEventListener("mousemove",tt),document.addEventListener("mouseup",nt),()=>{document.removeEventListener("mousemove",tt),document.removeEventListener("mouseup",nt)}},[qe,tt,nt]);const[rt,at]=(0,o.useState)(null),[st,ut]=(0,o.useState)(null),[ht,dt]=(0,o.useState)(!1),pt=(0,o.useCallback)(async(e,t)=>{try{const n=await fetch("".concat(it,"/snapshot_identity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:parseFloat(e),longitude:parseFloat(t)})});return await n.json()}catch(n){return console.error("Snapshot error:",n),null}},[]),ft=(0,o.useCallback)(async(e,t)=>{try{const n=await fetch("".concat(it,"/suitability"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({latitude:parseFloat(e),longitude:parseFloat(t),debug:de})});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(n){throw console.error("Analysis Request Failed:",n),n}},[de]),mt=(0,o.useCallback)((e,t,n)=>{const i=parseFloat(e).toFixed(4),r=parseFloat(t).toFixed(4),o=De.find(e=>e.lat.toFixed(4)===i&&e.lng.toFixed(4)===r);if(o)return o.name;if(a=e,s=t,(l=d)&&l.lat&&l.lng&&parseFloat(a).toFixed(4)===l.lat&&parseFloat(s).toFixed(4)===l.lng)return"My Location";var a,s,l;return prompt("New location detected at ".concat(i,", ").concat(r,". Enter a name:"))||n},[De,d]),gt=(0,o.useCallback)(async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ie(!1),se(e.toString()),ce(t.toString());let i=n||mt(e,t,"Site B");te(i),W(i),oe(!0),V(!0),z(null);try{const[n,i]=await Promise.all([ft(e,t),pt(e,t)]);z(n),ut(i);const r={lat:e.toString(),lng:t.toString()};ve(r),localStorage.setItem("geo_lat_b_analyzed",e.toString()),localStorage.setItem("geo_lng_b_analyzed",t.toString())}catch(r){console.error(r)}finally{oe(!1)}},[mt,ft,pt]);(0,o.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{p({lat:e.coords.latitude.toFixed(4),lng:e.coords.longitude.toFixed(4)})})},[]);const yt=(0,o.useCallback)(async e=>{e&&e.preventDefault&&e.preventDefault();const t=me.lat!==w||me.lng!==E;let n=Z;"Site A"===Z||t?(n=mt(w,E,"Site A"),H(n)):H(n),B(null),z(null),he(!0),dt(!0);const i=U&&ae&&le;if(i){V(!0),oe(!0);const e=G&&"Site B"!==G?G:mt(ae,le,"Site B");W(e),te(e)}else V(!1);const r=[ft(w,E),pt(w,E)];i&&(r.push(ft(ae,le)),r.push(pt(ae,le)));try{const e=await Promise.allSettled(r);if("fulfilled"===e[0].status){var o;const t=e[0].value;B(t),ge({lat:w,lng:E}),localStorage.setItem("geo_lat_analyzed",w),localStorage.setItem("geo_lng_analyzed",E);const r=i&&"fulfilled"===(null===(o=e[2])||void 0===o?void 0:o.status)?e[2].value.suitability_score:void 0,a=i?"Site B"!==G?G:mt(ae,le,"Site B"):null,s={name:n,lat:w,lng:E,score:t.suitability_score,timestamp:(new Date).getTime(),isCompareMode:i,nameB:a,bLat:i?ae:null,bLng:i?le:null,scoreB:r};m(e=>{const t=[s,...e].slice(0,20);return localStorage.setItem("analysis_history",JSON.stringify(t)),t})}if("fulfilled"===e[1].status&&at(e[1].value),i){if(e[2]&&"fulfilled"===e[2].status){const t=e[2].value;z(t),ve({lat:ae.toString(),lng:le.toString()})}e[3]&&"fulfilled"===e[3].status&&ut&&ut(e[3].value)}}catch(a){console.error("Critical Analysis Error:",a)}finally{he(!1),oe(!1),dt(!1)}},[w,E,Z,G,ae,le,U,mt,ft,pt,ut,m,me.lat,me.lng]),vt=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(new URLSearchParams(window.location.search).get("bLat"))return;const e=parseFloat(ae).toFixed(4),t=parseFloat(le).toFixed(4),n=De.find(n=>parseFloat(n.lat).toFixed(4)===e&&parseFloat(n.lng).toFixed(4)===t);n?W(n.name):ye.lat&&ae!==ye.lat.toString()&&W("Site B")},[ae,le,ye.lat,De]),(0,o.useEffect)(()=>{if(new URLSearchParams(window.location.search).get("lat"))return;const e=parseFloat(w).toFixed(4),t=parseFloat(E).toFixed(4),n=De.find(n=>n.lat.toFixed(4)===e&&n.lng.toFixed(4)===t);n?H(n.name):me.lat&&w!==me.lat.toString()&&H("Site A")},[w,E,me,De]),(0,o.useEffect)(()=>{if(c.current)return;const e=new URLSearchParams(window.location.search),t=e.get("lat"),n=e.get("lng"),i=e.get("nameA"),r=e.get("bLat"),o=e.get("bLng"),a=e.get("nameB"),s="1"===e.get("compare")||"true"===e.get("compare");let l=!1;if(t&&n){if(D(t),C(n),localStorage.setItem("geo_lat",t),localStorage.setItem("geo_lng",n),i){const e=decodeURIComponent(i);H(e),localStorage.setItem("geo_name_a",e)}l=!0}if(s&&r&&o){se(r),ce(o);const e=a?decodeURIComponent(a):"Site B";W(e),te(e),q(!0),V(!0),gt(r,o,e)}if(l){c.current=!0;const e=setTimeout(()=>{yt()},500);return()=>clearTimeout(e)}},[gt,yt]),(0,o.useEffect)(()=>{O&&L&&R&&m(e=>{if(e.some(e=>e.lat===w&&e.lng===E&&e.bLat===ae&&e.bLng===le))return e;const t=[{name:Z,lat:w,lng:E,score:O.suitability_score,isCompareMode:!0,nameB:G,bLat:ae,bLng:le,scoreB:L.suitability_score,timestamp:Date.now()},...e].slice(0,20);return localStorage.setItem("analysis_history",JSON.stringify(t)),t})},[O,L,R,w,E,ae,le,Z,G]),(0,o.useEffect)(()=>{localStorage.setItem("geo_lat",w),localStorage.setItem("geo_lng",E),localStorage.setItem("geo_name_a",Z),localStorage.setItem("geo_name_b",G),localStorage.setItem("geo_is_compare",JSON.stringify(R)),localStorage.setItem("geo_show_b",JSON.stringify(U)),localStorage.setItem("geo_zoom",A),localStorage.setItem("geo_theme",JSON.stringify(j)),localStorage.setItem("geo_map_style",k),localStorage.setItem("sidebar_width",Y),localStorage.setItem("bottom_height",K),localStorage.setItem("savedPlaces",JSON.stringify(De)),L&&localStorage.setItem("geo_last_compare_result",JSON.stringify(L)),O?localStorage.setItem("geo_last_result",JSON.stringify(O)):localStorage.removeItem("geo_last_result"),localStorage.setItem("geo_is_compare",JSON.stringify(R)),localStorage.setItem("geo_show_b",JSON.stringify(U)),U&&(localStorage.setItem("geo_lat_b",ae),localStorage.setItem("geo_lng_b",le),localStorage.setItem("geo_name_b",G),L&&localStorage.setItem("geo_last_compare_result",JSON.stringify(L))),document.body.setAttribute("data-theme",j?"dark":"light")},[w,E,Z,A,j,Y,K,O,De,k,R,U,ae,le,G,L]);const _t=(0,o.useCallback)(e=>{if(Q.current){const t=e.clientX;t>260&&t<600&&X(t)}if(J.current){const t=window.innerHeight,n=t-e.clientY,i=Math.max(200,Math.min(.8*t,n));$(i)}},[]),xt=(0,o.useCallback)(()=>{Q.current=!1,J.current=!1,document.removeEventListener("mousemove",_t),document.removeEventListener("mouseup",xt),document.body.style.cursor="default"},[_t]),bt=(0,o.useCallback)(()=>{Q.current=!0,document.addEventListener("mousemove",_t),document.addEventListener("mouseup",xt),document.body.style.cursor="col-resize"},[_t,xt]),wt=(0,o.useCallback)(()=>{J.current=!0,document.addEventListener("mousemove",_t),document.addEventListener("mouseup",xt),document.body.style.cursor="row-resize"},[_t,xt]),Dt=(0,o.useCallback)((e,t,n,i)=>{const r="".concat(window.location.origin).concat((window.location.pathname||"/").replace(/\/?$/,"")),o="".concat(r,"/history?lat=").concat(encodeURIComponent(n),"&lng=").concat(encodeURIComponent(i),"&name=").concat(encodeURIComponent(t||"Site A"));window.open(o,"_blank","noopener,noreferrer")},[]),[Et,Ct]=(0,o.useState)("standard"),At=(e,t,n)=>{D(e.toString()),C(t.toString()),S(16)},St=e=>{var t;let{data:n}=e;const i=null===(t=n.explanation)||void 0===t?void 0:t.factors_meta;if(!i)return(0,et.jsxs)("div",{className:"card evidence-card",children:[(0,et.jsx)("h3",{className:"evidence-title",children:"EVIDENCE DETAILS"}),(0,et.jsx)("p",{children:"No evidence metadata available."})]});const r={slope:"SLOPE",elevation:"ELEVATION",flood:"FLOOD",water:"WATER",drainage:"DRAINAGE",vegetation:"VEGETATION",pollution:"POLLUTION",soil:"SOIL",rainfall:"RAINFALL",thermal:"THERMAL COMFORT",intensity:"HEAT INTENSITY",landuse:"LANDUSE",infrastructure:"PROXIMITY",population:"POPULATION"},o=[];return Object.entries(i).forEach(e=>{let[t,n]=e;Object.entries(n).forEach(e=>{let[n,i]=e;o.push({category:t,factorKey:n,factor:i})})}),(0,et.jsxs)("div",{className:"evidence-section-container",children:[(0,et.jsx)("h3",{className:"evidence-title",children:"EVIDENCE DETAILS"}),(0,et.jsx)("div",{className:"evidence-list",children:o.map(e=>{let{category:t,factorKey:i,factor:o}=e;const a=null!==o.value&&void 0!==o.value?"number"===typeof o.value?o.value.toFixed(1):o.value:"N/A",s="number"===typeof o.value?o.value:50,l=s<40?"red":s<70?"yellow":"green",c=((e,t)=>{var i,r,o;if(t.evidence)return t.evidence;const a=t.value,s=t.raw,l=t.label||"";switch(e){case"slope":return"Slope: ".concat(a,a<3?"% gradient. VERY FLAT terrain. IDEAL for construction with minimal grading required. No slope stability concerns.":a<8?"% gradient. GENTLE slope. Suitable for most construction types with minor earthwork. Good natural drainage.":a<15?"% gradient. MODERATE slope. Requires careful site planning and grading. May need retaining structures.":a<30?"% gradient. STEEP terrain. HIGH construction costs due to extensive earthwork and stabilization requirements.":"% gradient. VERY STEEP terrain. NOT SUITABLE for standard construction. Landslide and erosion risk elevated.");case"elevation":return"Elevation: ".concat(a,a<50?"m above sea level. LOW elevation coastal/floodplain zone. Monitor for sea-level and flood risks.":a<200?"m above sea level. LOW to MODERATE elevation. Good accessibility with manageable flood exposure.":a<600?"m above sea level. MODERATE elevation. Optimal range for most construction activities.":a<1500?"m above sea level. HIGH elevation. Consider temperature extremes and access logistics.":"m above sea level. VERY HIGH elevation. Challenging conditions - reduced oxygen, extreme weather.");case"flood":const e=null===n||void 0===n||null===(i=n.factors)||void 0===i||null===(r=i.hydrology)||void 0===r||null===(o=r.water)||void 0===o?void 0:o.distance_km;return void 0!==e?e<.5?"COMBINED ASSESSMENT: Flood safety score ".concat(a,"/100. Located ").concat(e.toFixed(2),"km from water body. HIGH FLOOD RISK during monsoon/heavy rainfall."):e<1.5?"COMBINED ASSESSMENT: Flood safety score ".concat(a,"/100. Located ").concat(e.toFixed(2),"km from water. MODERATE risk - floods only with exceptional rainfall."):e<3?"COMBINED ASSESSMENT: Flood safety score ".concat(a,"/100. Located ").concat(e.toFixed(2),"km from water. LOW flood risk. Natural terrain provides protection."):"COMBINED ASSESSMENT: Flood safety score ".concat(a,"/100. Remote location ").concat(e.toFixed(2),"km from water sources. VERY LOW flood risk."):"Flood safety score: ".concat(a,"/100. ").concat(l,". Analysis based on regional hydrology patterns.");case"water":const c=t.distance_km;return void 0!==c&&null!==c?c<.02?"Location is ON a water body. Score: 0/100. NOT SUITABLE for terrestrial construction.":"Located approximately ".concat(c.toFixed(2),c<.5?"km from nearest water body. CLOSE proximity - irrigation advantage but flood monitoring needed.":c<2?"km from nearest water body. MODERATE water access for utility and agriculture needs.":"km from nearest water body. DISTANT from surface water - may require well/borewell for water supply."):"Water proximity score: ".concat(a,"/100. ").concat(l);case"vegetation":const u=s||a/100;return a<20?"Vegetation Index: ".concat(a,"/100 (NDVI proxy: ").concat(u.toFixed?u.toFixed(2):u,"). BARE/BUILT-UP land detected. Urban or barren classification."):a<40?"Vegetation Index: ".concat(a,"/100 (NDVI proxy: ").concat(u.toFixed?u.toFixed(2):u,"). SPARSE vegetation. Suitable for development with minimal clearing."):a<60?"Vegetation Index: ".concat(a,"/100 (NDVI proxy: ").concat(u.toFixed?u.toFixed(2):u,"). MODERATE vegetation. Agricultural or mixed land cover."):"Vegetation Index: ".concat(a,"/100 (NDVI proxy: ").concat(u.toFixed?u.toFixed(2):u,"). DENSE vegetation. May indicate forest/protected area - verify zoning.");case"pollution":return null!==s&&void 0!==s?"PM2.5: ".concat(s,s<10?" \xb5g/m\xb3. EXCELLENT air quality. Below WHO Annual Guideline (10 \xb5g/m\xb3). OPTIMAL for residential development.":s<25?" \xb5g/m\xb3. GOOD air quality. Acceptable for residential and commercial development.":s<50?" \xb5g/m\xb3. MODERATE air quality. Exceeds WHO guidelines. Industrial/traffic sources may be nearby.":" \xb5g/m\xb3. POOR air quality. Significantly exceeds safety standards. Air filtration recommended for habitation."):"Air quality score: ".concat(a,"/100. Estimated using satellite aerosol data and regional baseline models.");case"soil":return"Soil quality score: ".concat(a,a>=80?"/100. EXCELLENT bearing capacity and drainage. Ideal loam conditions for construction.":a>=60?"/100. GOOD soil conditions. Standard foundation design adequate.":a>=40?"/100. MODERATE soil quality. May require soil testing and foundation enhancement.":"/100. POOR soil conditions. Clayey/waterlogged terrain. Special foundations required.");case"rainfall":return null!==s&&void 0!==s?"Rainfall: ".concat(s,s<300?"mm/year. LOW rainfall - ARID conditions. IDEAL for construction, minimal flood risk. Irrigation required for agriculture.":s<800?"mm/year. MODERATE rainfall. Good balance for construction and agriculture with proper drainage.":s<1500?"mm/year. HIGH rainfall. Requires robust drainage systems. Moderate flood susceptibility.":"mm/year. EXCESSIVE rainfall. High flood and foundation damage risk. Monsoon region challenges."):"Rainfall suitability score: ".concat(a,"/100. ").concat(l,".");case"thermal":const h=s;return h&&"object"===typeof h&&void 0!==h.temperature_c?a>=80?"Thermal Comfort Index: ".concat(a,"/100. Temperature: ").concat(h.temperature_c,"\xb0C, Humidity: ").concat(h.humidity_pct,"%. HIGHLY COMFORTABLE climate conditions."):a>=60?"Thermal Comfort Index: ".concat(a,"/100. Temperature: ").concat(h.temperature_c,"\xb0C, Humidity: ").concat(h.humidity_pct,"%. COMFORTABLE conditions with minor seasonal extremes."):a>=40?"Thermal Comfort Index: ".concat(a,"/100. Temperature: ").concat(h.temperature_c,"\xb0C, Humidity: ").concat(h.humidity_pct,"%. MARGINAL comfort - consider HVAC requirements."):"Thermal Comfort Index: ".concat(a,"/100. Temperature: ").concat(h.temperature_c,"\xb0C, Humidity: ").concat(h.humidity_pct,"%. UNCOMFORTABLE - extreme heat/cold stress."):"Thermal Comfort Index: ".concat(a,"/100. ").concat(l,".");case"intensity":return"Heat Stress Index: ".concat(a,a<25?"/100. LOW heat stress. Comfortable thermal conditions year-round.":a<45?"/100. MODERATE heat stress. Some cooling measures recommended during peak hours.":a<65?"/100. HIGH heat stress. Active cooling and ventilation essential.":"/100. EXTREME heat stress. Significant thermal management infrastructure required.");case"landuse":const d=t.classification||"Unknown";return a<=15?"Land-use Classification: ".concat(d,". Score: ").concat(a,"/100. PROTECTED/FOREST area. Legally non-buildable. Conservation zone detected."):a<=40?"Land-use Classification: ".concat(d,". Score: ").concat(a,"/100. RESTRICTED development potential. Environmental sensitivity detected."):a<=70?"Land-use Classification: ".concat(d,". Score: ").concat(a,"/100. MODERATE development potential. Agricultural or mixed-use zoning."):"Land-use Classification: ".concat(d,". Score: ").concat(a,"/100. HIGH development potential. Urban/commercial zoning compatible.");case"infrastructure":return"Infrastructure Score: ".concat(a,a<30?"/100. REMOTE location. Significant infrastructure investment needed for development.":a<50?"/100. MODERATE access. May require access road development.":a<70?"/100. GOOD road access. Optimal balance of connectivity and tranquility.":"/100. EXCELLENT accessibility with nearby road network.");case"population":const p=t.density||s;return null!==p&&void 0!==p?"Population Density: ".concat(p,p<200?" people/km\xb2. SPARSE population. Rural/remote area. Limited services and labor availability.":p<600?" people/km\xb2. MODERATE population. Balanced environment with available workforce and services.":p<1200?" people/km\xb2. WELL POPULATED. Good access to services, labor, and markets.":" people/km\xb2. HIGHLY DENSE urban area. Congestion considerations but excellent market access."):"Population Score: ".concat(a,"/100. ").concat(l,".");case"drainage":return"Drainage Capacity: ".concat(a,a>=80?"/100. EXCELLENT drainage. Well-drained terrain with high stream density. Low waterlogging risk.":a>=60?"/100. GOOD drainage. Adequate surface water flow. Minor ponding during heavy rainfall.":a>=40?"/100. MODERATE drainage. May require drainage improvements for construction.":"/100. POOR drainage. Flat/low-lying terrain prone to waterlogging.");default:return"Score: ".concat(a,"/100. ").concat(l)}})(i,o);return(0,et.jsxs)("div",{className:"evidence-item evidence-".concat(l),children:[(0,et.jsx)("div",{className:"evidence-header",children:(0,et.jsxs)("strong",{className:"evidence-factor-name ".concat(l),children:[r[i]||i.toUpperCase(),(0,et.jsxs)("span",{className:"evidence-score-inline",children:["(",a,")"]})]})}),(0,et.jsx)("div",{className:"evidence-text",children:c}),o.source&&(0,et.jsx)("div",{className:"evidence-source",children:(0,et.jsxs)("small",{children:["Source: ",o.source]})})]},"".concat(t,"-").concat(i))})})]})},Tt=(n,i,o,a)=>{const l=a?"results-grid":"column-stack",c=o===Z?rt:st;if("suitability"===M)return(0,et.jsxs)("div",{className:l,children:[(0,et.jsx)("div",{className:a?"col-1":"",children:(0,et.jsx)(bm,{data:n,latVal:i.lat,lngVal:i.lng,locationName:o,isDarkMode:j,viewMode:pe,setViewMode:fe,onOpenHistory:Dt,mapVariety:k,isCompareMode:!a,activeSpectral:Et,mapMode:r,active3DStyle:s,currentZoom:A,setZoom:S,handleZoomIn:e,handleZoomOut:t,setLat:D,setLng:C,setCurrentZoom:S,onZoomIn:e,onZoomOut:t,isSelectingB:ne,handleCompareSelect:gt})}),(0,et.jsx)("div",{className:a?"col-2":"",children:(0,et.jsx)(St,{data:n})})]});if("environmental"===M){var u,h,d,p;const e=null===n||void 0===n?void 0:n.cnn_analysis,t=(null===e||void 0===e?void 0:e.confidence)||0,i=(e=>e>=70?{color:"#10b981",label:"VERIFIED",note:"TARGET LOCKED",class:"high-conf",glow:"rgba(16, 185, 129, 0.2)"}:e>=40?{color:"#3b82f6",label:"PROBABLE",note:"PATTERN RECOGNIZED",class:"mid-conf",glow:"rgba(59, 130, 246, 0.2)"}:{color:"#ef4444",label:"UNCERTAIN",note:"SIGNAL INTERFERENCE",class:"low-conf",glow:"rgba(239, 68, 68, 0.2)"})(t);return(0,et.jsx)("div",{className:"environmental-container",children:(0,et.jsxs)("div",{className:"environmental-cards-grid",children:[(0,et.jsxs)("div",{className:"card cnn-tactical-card glass-morphic animate-in ".concat(i.class),style:{"--status-color":i.color,"--status-glow":i.glow},children:[(0,et.jsxs)("div",{className:"cnn-tactical-header",children:[(0,et.jsxs)("div",{className:"cnn-title-group",children:[(0,et.jsx)("span",{className:"live-tag",children:"LIVE TELEMETRY"}),(0,et.jsx)("h3",{children:"Visual Intelligence Scan"})]}),(0,et.jsxs)("div",{className:"tactical-header-right",children:[(0,et.jsxs)("div",{className:"model-id-badge",children:[(0,et.jsx)("span",{className:"model-label",children:"ENGINE"}),(0,et.jsx)("span",{className:"model-name",children:"CNN-V2 / MOBILE-NET"})]}),(0,et.jsxs)("div",{className:"status-indicator-pill",style:{backgroundColor:i.color},children:[t<40&&(0,et.jsx)("span",{className:"mini-warn",children:"\u26a0\ufe0f"}),i.label]})]})]}),(0,et.jsxs)("div",{className:"cnn-tactical-layout",children:[(0,et.jsx)("div",{className:"cnn-visual-container",children:(0,et.jsxs)("div",{className:"cnn-frame",style:{borderColor:i.color},children:[(0,et.jsx)("div",{className:"cnn-image-feed",style:{backgroundImage:null!==e&&void 0!==e&&e.image_sample?"url(".concat(e.image_sample,")"):"none",filter:t<40?"grayscale(0.4) contrast(1.1) brightness(0.9)":"none"},children:(null===e||void 0===e?void 0:e.image_sample)&&(0,et.jsx)("div",{className:"scan-telemetry-overlay"})}),(0,et.jsx)("div",{className:"corner-bit tl"}),(0,et.jsx)("div",{className:"corner-bit tr"}),(0,et.jsx)("div",{className:"corner-bit bl"}),(0,et.jsx)("div",{className:"corner-bit br"})]})}),(0,et.jsxs)("div",{className:"cnn-data-grid",children:[(0,et.jsxs)("div",{className:"cnn-stat-item",children:[(0,et.jsx)("label",{children:"TERRAIN CLASSIFICATION:"}),(0,et.jsx)("strong",{className:"cnn-class-text",style:{color:i.color},children:(null===e||void 0===e?void 0:e.class)||"ANALYZING..."})]}),(0,et.jsxs)("div",{className:"cnn-stat-item",children:[(0,et.jsxs)("div",{className:"label-row",children:[(0,et.jsx)("label",{children:"SPECTRAL CONFIDENCE:"}),(0,et.jsxs)("span",{className:"confidence-value",style:{color:i.color},children:[t,"%"]})]}),(0,et.jsx)("div",{className:"tactical-progress-bg",children:(0,et.jsx)("div",{className:"tactical-progress-fill",style:{width:"".concat(t,"%"),backgroundColor:i.color}})})]}),(0,et.jsxs)("div",{className:"cnn-alert-box",style:{borderLeftColor:i.color,background:"".concat(i.color,"15")},children:[(0,et.jsx)("strong",{style:{color:i.color},children:i.note}),(0,et.jsx)("p",{children:t<40?"Terrain complexity exceeding standard spectral resolution.":"Visual markers confirm high correlation with ".concat(null===e||void 0===e?void 0:e.class," signatures.")})]})]})]}),(0,et.jsxs)("div",{className:"cnn-footer-telemetry",children:[(0,et.jsxs)("span",{children:["RES:"," ",null!=(null===e||void 0===e||null===(u=e.telemetry)||void 0===u?void 0:u.resolution_m_per_px)?"".concat(e.telemetry.resolution_m_per_px,"m/px"):"10m/px"]}),(0,et.jsxs)("span",{children:["SENSOR: ",(null===e||void 0===e||null===(h=e.telemetry)||void 0===h?void 0:h.tile_url_source)||"SENTINEL-2 L2A"]}),(0,et.jsxs)("span",{children:["MODEL: ",(null===e||void 0===e||null===(d=e.telemetry)||void 0===d?void 0:d.model)||"CNN-V2 / MOBILE-NET"]}),(0,et.jsxs)("span",{children:["TS: ",(new Date).toLocaleTimeString()]}),(null===e||void 0===e||null===(p=e.telemetry)||void 0===p?void 0:p.verified_by)&&(0,et.jsxs)("span",{children:["\u2713 ",e.telemetry.verified_by]})]})]}),(0,et.jsx)(Hl,{weather:null===n||void 0===n?void 0:n.weather}),(0,et.jsx)(Gl,{data:null===c||void 0===c?void 0:c.hazards_analysis,loading:ht}),(0,et.jsx)(Wl,{data:c,loading:ht})]})})}if("infrastructure"===M){var f,m,g,y,v,_,x,b,T,F,P,I,N,O,B,L,z,R,V,U,q,H,G,W,Y,X,K,$,Q,J,ee,te,ie,re,oe,ae,se,le,ce,ue,he,de,me,ge,ye,ve,_e,xe,be,we,De,Ee,Ce,Ae,Se,Te,Fe,ke,Pe,Me,Ie,je,Ne,Oe,Be,Le,ze,Re,Ve,Ue,Ze,Ge,We,Ye,Xe,Ke,$e,Qe,tt,nt,it,ot,at,lt,ct,ut,dt,pt,ft,mt,yt,vt,_t,xt,bt,wt,Ct,At,Tt,Ft,kt,Pt,Mt,It,jt,Nt,Ot,Bt,Lt,zt,Rt,Vt,Ut,qt,Zt,Ht,Gt,Wt,Yt,Xt,Kt,$t,Qt,Jt,en,tn,nn,rn,on,an,sn,ln,cn,un,hn,dn,pn,fn,mn,gn;const e=n.strategic_intelligence||{},t=n.flat_factors||((e,t,i,r,o,a)=>{const s=n.factors||{},l=(e,t)=>{var n;const i=null===(n=s[e])||void 0===n?void 0:n[t];return"object"===typeof i&&null!==i?i.value:i};return{landuse:null!==(e=l("socio_econ","landuse"))&&void 0!==e?e:50,pollution:null!==(t=l("environmental","pollution"))&&void 0!==t?t:50,proximity:null!==(i=l("socio_econ","infrastructure"))&&void 0!==i?i:50,soil:null!==(r=l("environmental","soil"))&&void 0!==r?r:50,water:null!==(o=l("hydrology","water"))&&void 0!==o?o:50,vegetation:null!==(a=l("environmental","vegetation"))&&void 0!==a?a:50}})(),i="number"===typeof t.landuse?t.landuse:50,r="number"===typeof t.pollution?t.pollution:50,o="number"===typeof t.proximity?t.proximity:"number"===typeof t.infrastructure?t.infrastructure:50,a="number"===typeof t.soil?t.soil:50,s="number"===typeof t.water?t.water:50,l=(.75*i).toFixed(1),c=((100-r+(100-o))/15).toFixed(1),u=Math.round((a+r+s)/3),h=u>75?"grade-A":u>50?"grade-B":u>35?"grade-C":"grade-F";return(0,et.jsx)("div",{className:"infrastructure-container",children:(0,et.jsxs)("div",{className:"infrastructure-cards-grid",children:[(0,et.jsxs)("div",{className:"card glass-morphic intel-card potential-card",children:[(0,et.jsx)("div",{className:"intel-header",children:(0,et.jsx)("div",{className:"potential-score-badge"})}),(0,et.jsx)(xm,{factors:n.factors,score:n.suitability_score}),(0,et.jsxs)("div",{className:"potential-insights",children:[(0,et.jsx)("h4",{children:"Development Recommendations"}),(0,et.jsxs)("div",{className:"insights-grid",children:[(0,et.jsxs)("div",{className:"insight-item",children:[(0,et.jsx)("span",{className:"insight-icon",children:"\ud83c\udfd7\ufe0f"}),(0,et.jsxs)("div",{className:"insight-content",children:[(0,et.jsx)("strong",{children:"Construction Viability"}),(0,et.jsx)("span",{children:n.suitability_score>70?"Excellent":n.suitability_score>50?"Good":"Limited"})]})]}),(0,et.jsxs)("div",{className:"insight-item",children:[(0,et.jsx)("span",{className:"insight-icon",children:"\ud83c\udf31"}),(0,et.jsxs)("div",{className:"insight-content",children:[(0,et.jsx)("strong",{children:"Agricultural Potential"}),(0,et.jsx)("span",{children:(null===(f=n.factors)||void 0===f||null===(m=f.environmental)||void 0===m||null===(g=m.soil)||void 0===g?void 0:g.value)>60?"High":"Moderate"})]})]}),(0,et.jsxs)("div",{className:"insight-item",children:[(0,et.jsx)("span",{className:"insight-icon",children:"\ud83c\udfd8\ufe0f"}),(0,et.jsxs)("div",{className:"insight-content",children:[(0,et.jsx)("strong",{children:"Residential Suitability"}),(0,et.jsx)("span",{children:(null===(y=n.factors)||void 0===y||null===(v=y.socio_econ)||void 0===v||null===(_=v.infrastructure)||void 0===_?void 0:_.value)>60?"Favorable":"Challenging"})]})]})]})]})]}),(0,et.jsxs)("div",{className:"card glass-morphic intel-card sustainability-card",children:[(0,et.jsxs)("div",{className:"intel-header",children:[(0,et.jsx)("h3",{children:"\ud83c\udf33 Sustainability Intelligence"}),(0,et.jsxs)("div",{className:"esg-score-circle ".concat(h),children:[(0,et.jsx)("span",{className:"esg-val",children:u}),(0,et.jsx)("span",{className:"esg-lab",children:"ESG"})]})]}),(0,et.jsxs)("div",{className:"carbon-analysis-zone",children:[(0,et.jsxs)("div",{className:"analysis-row",children:[(0,et.jsxs)("div",{className:"analysis-item",children:[(0,et.jsx)("label",{children:"Carbon Asset"}),(0,et.jsxs)("span",{className:"val-green",children:["+",l," ",(0,et.jsx)("small",{children:"tCO2e/yr"})]}),(0,et.jsx)("div",{className:"mini-progress-bg",children:(0,et.jsx)("div",{className:"mini-progress-fill green",style:{width:"".concat(Math.min(2*l,100),"%")}})})]}),(0,et.jsxs)("div",{className:"analysis-item",children:[(0,et.jsx)("label",{children:"Live Footprint"}),(0,et.jsxs)("span",{className:"val-red",children:["-",c," ",(0,et.jsx)("small",{children:"tCO2e/yr"})]}),(0,et.jsx)("div",{className:"mini-progress-bg",children:(0,et.jsx)("div",{className:"mini-progress-fill red",style:{width:"".concat(Math.min(10*c,100),"%")}})})]})]}),(0,et.jsxs)("div",{className:"net-impact-summary",children:[(0,et.jsx)("div",{className:"impact-label",children:"Net Ecosystem Impact"}),(0,et.jsx)("div",{className:"impact-value",children:l-c>0?"CARBON NEGATIVE":"CARBON POSITIVE"})]})]}),(0,et.jsxs)("div",{className:"eligibility-drawer",children:[(0,et.jsxs)("div",{className:"drawer-item",children:[(0,et.jsx)("span",{children:"\ud83c\udf3f Conservation Credit Match:"}),(0,et.jsx)("strong",{className:u>65?"status-ok":"status-no",children:u>65?"HIGHLY ELIGIBLE":"INELIGIBLE"})]}),(0,et.jsxs)("div",{className:"drawer-item",children:[(0,et.jsx)("span",{children:"\ud83d\udee1\ufe0f Biodiversity Buffer:"}),(0,et.jsx)("strong",{children:i>60?"PREMIUM":"STANDARD"})]})]}),(0,et.jsx)("p",{className:"legal-disclaimer",children:"Estimates based on biomass density and emission intensity."})]}),(0,et.jsxs)("div",{className:"card glass-morphic intel-card roadmap-card",children:[(0,et.jsxs)("div",{className:"intel-header",children:[(0,et.jsx)("h3",{children:"\ud83d\udea7 Dynamic Improvement Roadmap"}),e.development_readiness&&(0,et.jsx)("div",{className:"readiness-badge",children:(0,et.jsx)("span",{className:"status-".concat(e.development_readiness.status),children:e.development_readiness.status.toUpperCase()})})]}),e.development_readiness&&(0,et.jsx)("div",{className:"readiness-summary",children:(0,et.jsxs)("div",{className:"readiness-metrics",children:[(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{className:"label",children:"Total Investment:"}),(0,et.jsx)("span",{className:"value",children:e.development_readiness.estimated_total_investment||"Calculating..."})]}),(0,et.jsxs)("div",{className:"metric",children:[(0,et.jsx)("span",{className:"label",children:"Time to Ready:"}),(0,et.jsx)("span",{className:"value",children:e.development_readiness.time_to_readiness||"Calculating..."})]})]})}),(0,et.jsx)("div",{className:"roadmap-list",children:(null===(x=e.roadmap)||void 0===x?void 0:x.length)>0?e.roadmap.map((e,t)=>(0,et.jsx)("div",{className:"roadmap-item priority-".concat(e.priority||"medium"),children:(0,et.jsxs)("div",{className:"roadmap-task-info",children:[(0,et.jsxs)("div",{className:"task-header",children:[(0,et.jsx)("span",{className:"task-name",children:e.task}),(0,et.jsx)("span",{className:"impact-tag",children:e.impact})]}),(0,et.jsx)("p",{className:"tiny-note",children:e.note}),e.estimated_cost&&(0,et.jsxs)("div",{className:"task-details",children:[(0,et.jsxs)("span",{className:"cost",children:["\ud83d\udcb0 ",e.estimated_cost]}),(0,et.jsxs)("span",{className:"timeline",children:["\u23f1\ufe0f ",e.timeline]})]})]})},t)):(0,et.jsx)("div",{className:"nearby-empty",children:"Analyzing location for improvement opportunities..."})})]}),(0,et.jsxs)("div",{className:"card glass-morphic intel-card prevention-card",children:[(0,et.jsxs)("div",{className:"intel-header",children:[(0,et.jsx)("h3",{children:"\ud83d\udca1 AI-Driven Strategic Interventions"}),(0,et.jsx)("p",{className:"subtitle",children:"Location-specific actionable intelligence"})]}),(0,et.jsx)("div",{className:"interventions-list",children:(null===(b=e.interventions)||void 0===b?void 0:b.length)>0?e.interventions.map((e,t)=>(0,et.jsxs)("div",{className:"intervention-item urgency-".concat(e.urgency||"medium"),children:[(0,et.jsxs)("div",{className:"intervention-header",children:[(0,et.jsx)("span",{className:"intervention-action",children:e.action||e}),e.urgency&&(0,et.jsx)("span",{className:"urgency-badge urgency-".concat(e.urgency),children:e.urgency})]}),e.rationale&&(0,et.jsx)("p",{className:"intervention-rationale",children:e.rationale}),e.expected_impact&&(0,et.jsxs)("div",{className:"intervention-impact",children:[(0,et.jsx)("span",{className:"impact-label",children:"Expected Impact:"}),(0,et.jsx)("span",{className:"impact-value",children:e.expected_impact})]})]},t)):(0,et.jsx)("div",{className:"nearby-empty",children:"Generating AI-powered interventions..."})})]}),(0,et.jsxs)("div",{className:"card glass-morphic intel-card prediction-card",children:[(0,et.jsxs)("div",{className:"intel-header",children:[(0,et.jsx)("h3",{children:"\ud83d\ude80 Advanced AI Projection (2036)"}),(0,et.jsxs)("div",{className:"future-score-wrap",children:[(0,et.jsx)("span",{className:"current-mini",children:null===(T=n.suitability_score)||void 0===T?void 0:T.toFixed(1)}),(0,et.jsx)("span",{className:"drift-arrow",children:"\u2192"}),(0,et.jsxs)("span",{className:"future-score",children:[e.expected_score||"Calculating...","%"]}),e.projection_analysis&&(0,et.jsx)("span",{className:"trend-".concat(e.projection_analysis.trend_direction),children:e.projection_analysis.trend_direction})]})]}),e.projection_analysis&&(0,et.jsxs)("div",{className:"projection-insights",children:[(0,et.jsxs)("div",{className:"confidence-meter",children:[(0,et.jsx)("span",{className:"label",children:"AI Confidence:"}),(0,et.jsx)("div",{className:"confidence-bar",children:(0,et.jsx)("div",{className:"confidence-fill confidence-".concat(e.projection_analysis.confidence_level),style:{width:"high"===e.projection_analysis.confidence_level?"85%":"60%"}})}),(0,et.jsx)("span",{className:"confidence-value",children:e.projection_analysis.confidence_level})]}),(null===(F=e.projection_analysis.key_drivers)||void 0===F?void 0:F.length)>0&&(0,et.jsxs)("div",{className:"key-drivers",children:[(0,et.jsx)("span",{className:"label",children:"Key Change Drivers:"}),(0,et.jsx)("div",{className:"drivers-list",children:e.projection_analysis.key_drivers.map((e,t)=>(0,et.jsx)("span",{className:"driver-tag",children:e},t))})]}),e.projection_analysis.mitigation_potential&&(0,et.jsxs)("div",{className:"mitigation-potential",children:[(0,et.jsx)("span",{className:"label",children:"Mitigation Potential:"}),(0,et.jsxs)("span",{className:"potential-value",children:["+",e.projection_analysis.mitigation_potential,"%"]})]})]}),(0,et.jsxs)("div",{className:"drift-metrics",children:[(0,et.jsxs)("div",{className:"drift-row",children:[(0,et.jsx)("span",{children:"Urbanization Risk:"}),(0,et.jsx)("span",{className:"val-red",children:(null===(P=e.metrics)||void 0===P?void 0:P.urban_sprawl)||"Calculating..."})]}),(0,et.jsxs)("div",{className:"drift-row",children:[(0,et.jsx)("span",{children:"Vegetation Loss:"}),(0,et.jsx)("span",{className:"val-red",children:(null===(I=e.metrics)||void 0===I?void 0:I.veg_loss)||"Calculating..."})]}),(null===(N=e.metrics)||void 0===N?void 0:N.water_security_risk)&&(0,et.jsxs)("div",{className:"drift-row",children:[(0,et.jsx)("span",{children:"Water Security Risk:"}),(0,et.jsx)("span",{className:"val-orange",children:e.metrics.water_security_risk})]}),(null===(O=e.metrics)||void 0===O?void 0:O.climate_resilience)&&(0,et.jsxs)("div",{className:"drift-row",children:[(0,et.jsx)("span",{children:"Climate Resilience:"}),(0,et.jsx)("span",{className:"val-orange",children:e.metrics.climate_resilience})]}),(null===(B=e.metrics)||void 0===B?void 0:B.overall_risk_index)&&(0,et.jsxs)("div",{className:"drift-row overall-risk",children:[(0,et.jsx)("span",{children:"Overall Risk Index:"}),(0,et.jsxs)("span",{className:"val-".concat(e.metrics.overall_risk_index>20?"red":e.metrics.overall_risk_index>10?"orange":"green"),children:[e.metrics.overall_risk_index,"%"]})]})]})]}),(0,et.jsxs)("div",{className:"card glass-morphic intel-card terrain-card",children:[(0,et.jsx)("div",{className:"intel-header",children:(0,et.jsxs)("div",{className:"intel-title-section",children:[(0,et.jsx)("h3",{children:"\u26f0\ufe0f Terrain & Slope Analysis"}),(0,et.jsx)("p",{className:"subtitle",children:"Professional Assessment"})]})}),(0,et.jsx)("div",{className:"terrain-compact-grid",children:(0,et.jsxs)("div",{className:"terrain-metric-row",children:[(0,et.jsxs)("div",{className:"terrain-metric-item",children:[(0,et.jsx)("div",{className:"metric-icon",children:"\ud83d\udcd0"}),(0,et.jsxs)("div",{className:"metric-info",children:[(0,et.jsx)("strong",{children:"Slope"}),(0,et.jsxs)("span",{children:[(null===(L=n.factors)||void 0===L||null===(z=L.physical)||void 0===z||null===(R=z.slope)||void 0===R||null===(V=R.value)||void 0===V?void 0:V.toFixed(1))||"---","\xb0"]})]}),(0,et.jsx)("div",{className:"metric-status",children:(0,et.jsx)("span",{className:"status-badge ".concat(((null===(U=n.factors)||void 0===U||null===(q=U.physical)||void 0===q||null===(H=q.slope)||void 0===H?void 0:H.value)||0)<8?"good":((null===(G=n.factors)||void 0===G||null===(W=G.physical)||void 0===W||null===(Y=W.slope)||void 0===Y?void 0:Y.value)||0)<15?"moderate":((null===(X=n.factors)||void 0===X||null===(K=X.physical)||void 0===K||null===($=K.slope)||void 0===$?void 0:$.value)||0)<30?"poor":"critical"),children:((null===(Q=n.factors)||void 0===Q||null===(J=Q.physical)||void 0===J||null===(ee=J.slope)||void 0===ee?void 0:ee.value)||0)<8?"FLAT":((null===(te=n.factors)||void 0===te||null===(ie=te.physical)||void 0===ie||null===(re=ie.slope)||void 0===re?void 0:re.value)||0)<15?"MODERATE":((null===(oe=n.factors)||void 0===oe||null===(ae=oe.physical)||void 0===ae||null===(se=ae.slope)||void 0===se?void 0:se.value)||0)<30?"STEEP":"VERY STEEP"})})]}),(0,et.jsxs)("div",{className:"terrain-metric-item",children:[(0,et.jsx)("div",{className:"metric-icon",children:"\ud83c\udfd4\ufe0f"}),(0,et.jsxs)("div",{className:"metric-info",children:[(0,et.jsx)("strong",{children:"Elevation"}),(0,et.jsxs)("span",{children:[(null===(le=n.factors)||void 0===le||null===(ce=le.physical)||void 0===ce||null===(ue=ce.elevation)||void 0===ue||null===(he=ue.value)||void 0===he?void 0:he.toFixed(0))||"---","m"]})]}),(0,et.jsx)("div",{className:"metric-status",children:(0,et.jsx)("span",{className:"status-badge ".concat(((null===(de=n.factors)||void 0===de||null===(me=de.physical)||void 0===me||null===(ge=me.elevation)||void 0===ge?void 0:ge.value)||0)<100?"low":((null===(ye=n.factors)||void 0===ye||null===(ve=ye.physical)||void 0===ve||null===(_e=ve.elevation)||void 0===_e?void 0:_e.value)||0)<500?"medium":((null===(xe=n.factors)||void 0===xe||null===(be=xe.physical)||void 0===be||null===(we=be.elevation)||void 0===we?void 0:we.value)||0)<1500?"high":"extreme"),children:((null===(De=n.factors)||void 0===De||null===(Ee=De.physical)||void 0===Ee||null===(Ce=Ee.elevation)||void 0===Ce?void 0:Ce.value)||0)<100?"LOWLAND":((null===(Ae=n.factors)||void 0===Ae||null===(Se=Ae.physical)||void 0===Se||null===(Te=Se.elevation)||void 0===Te?void 0:Te.value)||0)<500?"PLAINS":((null===(Fe=n.factors)||void 0===Fe||null===(ke=Fe.physical)||void 0===ke||null===(Pe=ke.elevation)||void 0===Pe?void 0:Pe.value)||0)<1500?"HILLS":"MOUNTAINS"})})]}),(0,et.jsxs)("div",{className:"terrain-metric-item",children:[(0,et.jsx)("div",{className:"metric-icon",children:"\ud83d\udea7"}),(0,et.jsxs)("div",{className:"metric-info",children:[(0,et.jsx)("strong",{children:"Viability"}),(0,et.jsx)("span",{children:((null===(Me=n.factors)||void 0===Me||null===(Ie=Me.physical)||void 0===Ie||null===(je=Ie.slope)||void 0===je?void 0:je.value)||0)<8?"Excellent":((null===(Ne=n.factors)||void 0===Ne||null===(Oe=Ne.physical)||void 0===Oe||null===(Be=Oe.slope)||void 0===Be?void 0:Be.value)||0)<15?"Good":((null===(Le=n.factors)||void 0===Le||null===(ze=Le.physical)||void 0===ze||null===(Re=ze.slope)||void 0===Re?void 0:Re.value)||0)<30?"Challenging":"Limited"})]}),(0,et.jsx)("div",{className:"metric-status",children:(0,et.jsx)("span",{className:"status-badge ".concat(((null===(Ve=n.factors)||void 0===Ve||null===(Ue=Ve.physical)||void 0===Ue||null===(Ze=Ue.slope)||void 0===Ze?void 0:Ze.value)||0)<8?"excellent":((null===(Ge=n.factors)||void 0===Ge||null===(We=Ge.physical)||void 0===We||null===(Ye=We.slope)||void 0===Ye?void 0:Ye.value)||0)<15?"good":((null===(Xe=n.factors)||void 0===Xe||null===(Ke=Xe.physical)||void 0===Ke||null===($e=Ke.slope)||void 0===$e?void 0:$e.value)||0)<30?"challenging":"not-recommended"),children:((null===(Qe=n.factors)||void 0===Qe||null===(tt=Qe.physical)||void 0===tt||null===(nt=tt.slope)||void 0===nt?void 0:nt.value)||0)<8?"IDEAL":((null===(it=n.factors)||void 0===it||null===(ot=it.physical)||void 0===ot||null===(at=ot.slope)||void 0===at?void 0:at.value)||0)<15?"SUITABLE":((null===(lt=n.factors)||void 0===lt||null===(ct=lt.physical)||void 0===ct||null===(ut=ct.slope)||void 0===ut?void 0:ut.value)||0)<30?"DIFFICULT":"NOT RECOMMENDED"})})]})]})}),(0,et.jsx)("div",{className:"terrain-quick-insights",children:(0,et.jsxs)("div",{className:"insight-row",children:[(0,et.jsxs)("div",{className:"insight-item",children:[(0,et.jsx)("span",{className:"insight-icon",children:"\u26a1"}),(0,et.jsxs)("div",{className:"insight-content",children:[(0,et.jsx)("strong",{children:"Earthwork"}),(0,et.jsx)("span",{children:((null===(dt=n.factors)||void 0===dt||null===(pt=dt.physical)||void 0===pt||null===(ft=pt.slope)||void 0===ft?void 0:ft.value)||0)<5?"Minimal":((null===(mt=n.factors)||void 0===mt||null===(yt=mt.physical)||void 0===yt||null===(vt=yt.slope)||void 0===vt?void 0:vt.value)||0)<10?"Low":((null===(_t=n.factors)||void 0===_t||null===(xt=_t.physical)||void 0===xt||null===(bt=xt.slope)||void 0===bt?void 0:bt.value)||0)<20?"Moderate":"High"})]})]}),(0,et.jsxs)("div",{className:"insight-item",children:[(0,et.jsx)("span",{className:"insight-icon",children:"\ud83d\udee1\ufe0f"}),(0,et.jsxs)("div",{className:"insight-content",children:[(0,et.jsx)("strong",{children:"Walls"}),(0,et.jsx)("span",{children:((null===(wt=n.factors)||void 0===wt||null===(Ct=wt.physical)||void 0===Ct||null===(At=Ct.slope)||void 0===At?void 0:At.value)||0)<8?"Not Required":((null===(Tt=n.factors)||void 0===Tt||null===(Ft=Tt.physical)||void 0===Ft||null===(kt=Ft.slope)||void 0===kt?void 0:kt.value)||0)<15?"Partial":((null===(Pt=n.factors)||void 0===Pt||null===(Mt=Pt.physical)||void 0===Mt||null===(It=Mt.slope)||void 0===It?void 0:It.value)||0)<25?"Extensive":"Major"})]})]}),(0,et.jsxs)("div",{className:"insight-item",children:[(0,et.jsx)("span",{className:"insight-icon",children:"\ud83d\udcb0"}),(0,et.jsxs)("div",{className:"insight-content",children:[(0,et.jsx)("strong",{children:"Cost Impact"}),(0,et.jsx)("span",{children:((null===(jt=n.factors)||void 0===jt||null===(Nt=jt.physical)||void 0===Nt||null===(Ot=Nt.slope)||void 0===Ot?void 0:Ot.value)||0)<8?"Standard":((null===(Bt=n.factors)||void 0===Bt||null===(Lt=Bt.physical)||void 0===Lt||null===(zt=Lt.slope)||void 0===zt?void 0:zt.value)||0)<15?"Moderate":((null===(Rt=n.factors)||void 0===Rt||null===(Vt=Rt.physical)||void 0===Vt||null===(Ut=Vt.slope)||void 0===Ut?void 0:Ut.value)||0)<30?"High":"Very High"})]})]}),(0,et.jsxs)("div",{className:"insight-item",children:[(0,et.jsx)("span",{className:"insight-icon",children:"\u23f1\ufe0f"}),(0,et.jsxs)("div",{className:"insight-content",children:[(0,et.jsx)("strong",{children:"Build Time"}),(0,et.jsx)("span",{children:((null===(qt=n.factors)||void 0===qt||null===(Zt=qt.physical)||void 0===Zt||null===(Ht=Zt.slope)||void 0===Ht?void 0:Ht.value)||0)<8?"Normal":((null===(Gt=n.factors)||void 0===Gt||null===(Wt=Gt.physical)||void 0===Wt||null===(Yt=Wt.slope)||void 0===Yt?void 0:Yt.value)||0)<15?"+2-4 weeks":((null===(Xt=n.factors)||void 0===Xt||null===(Kt=Xt.physical)||void 0===Kt||null===($t=Kt.slope)||void 0===$t?void 0:$t.value)||0)<30?"+1-3 months":"+3+ months"})]})]})]})}),(0,et.jsx)("div",{className:"terrain-recommendation",children:(0,et.jsxs)("div",{className:"recommendation-header",children:[(0,et.jsx)("span",{className:"rec-icon",children:((null===(Qt=n.factors)||void 0===Qt||null===(Jt=Qt.physical)||void 0===Jt||null===(en=Jt.slope)||void 0===en?void 0:en.value)||0)<8?"\u2705":((null===(tn=n.factors)||void 0===tn||null===(nn=tn.physical)||void 0===nn||null===(rn=nn.slope)||void 0===rn?void 0:rn.value)||0)<15?"\ud83d\udc4d":((null===(on=n.factors)||void 0===on||null===(an=on.physical)||void 0===an||null===(sn=an.slope)||void 0===sn?void 0:sn.value)||0)<30?"\u26a0\ufe0f":"\ud83d\udeab"}),(0,et.jsx)("span",{className:"rec-title",children:((null===(ln=n.factors)||void 0===ln||null===(cn=ln.physical)||void 0===cn||null===(un=cn.slope)||void 0===un?void 0:un.value)||0)<8?"Excellent for all development types":((null===(hn=n.factors)||void 0===hn||null===(dn=hn.physical)||void 0===dn||null===(pn=dn.slope)||void 0===pn?void 0:pn.value)||0)<15?"Suitable with minor planning":((null===(fn=n.factors)||void 0===fn||null===(mn=fn.physical)||void 0===mn||null===(gn=mn.slope)||void 0===gn?void 0:gn.value)||0)<30?"Requires extensive engineering":"Not recommended for standard construction"})]})})]}),(0,et.jsxs)("div",{className:"card glass-morphic intel-card digital-twin-card draggable-digital-twin ".concat(qe?"dragging":""),style:{position:"relative",transform:"translate(".concat(He.x,"px, ").concat(He.y,"px)")},children:[(0,et.jsxs)("div",{className:"intel-header",children:[(0,et.jsx)("h3",{children:"\ud83c\udfd7\ufe0f Digital Twin Infrastructure Simulation"}),(0,et.jsx)("p",{className:"subtitle",children:"Interactive Development Impact Analysis & Planning"}),(0,et.jsx)("div",{className:"drag-handle",onMouseDown:Je,children:"\u22ee\u22ee"})]}),(0,et.jsx)("div",{className:"impact-info",children:(0,et.jsxs)("p",{className:"impact-description",children:["\ud83d\udca1 ",(0,et.jsx)("strong",{children:"Impact Simulation:"})," This advanced digital twin allows you to simulate various development scenarios and their environmental impacts in real-time. Try placing buildings, roads, or infrastructure to see immediate effects on the ecosystem."]})}),(0,et.jsx)(Yl,{location:{lat:w,lng:E,factors:n.factors},onImpactUpdate:e=>{console.log("Development impact:",e)}})]})]})})}};return(0,et.jsxs)("div",{className:"app-shell",children:[(0,et.jsx)(ym,{activeFactors:R?"A"===u?null===O||void 0===O?void 0:O.factors:null===L||void 0===L?void 0:L.factors:null===O||void 0===O?void 0:O.factors,resultLabel:R?"A"===u?null===O||void 0===O?void 0:O.label:null===L||void 0===L?void 0:L.label:null===O||void 0===O?void 0:O.label,compareFactors:null===L||void 0===L?void 0:L.factors,compareResultLabel:null===L||void 0===L?void 0:L.label,isEnabled:g,isLoading:ue||re,siteAPlaying:v,siteBPlaying:x}),(0,et.jsx)(ct,{isDarkMode:j,setIsDarkMode:N,isAudioEnabled:g,setIsAudioEnabled:y,siteAPlaying:v,setSiteAPlaying:_,siteBPlaying:x,setSiteBPlaying:b,analysisHistory:f,onSearchResult:At,compareResult:L,isCompareMode:R}),(0,et.jsx)(ot,{onSearchResult:At,lat:w,setLat:D,lng:E,setLng:C,locationAName:Z,setLocationAName:H,loading:ue,handleSubmit:yt,handleMyLocation:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,n=e.coords.longitude;D(t.toString()),C(n.toString()),F([t,n]),S(16)})},handleSavePlace:()=>{const e=prompt("Enter a name for this location:");e&&Ee([...De,{name:e,lat:parseFloat(w),lng:parseFloat(E)}])},handleNearbyPlaces:async()=>{if(w&&E){Pe(!0);try{const e=await fetch("".concat(it,"/nearby_places"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:parseFloat(w),longitude:parseFloat(E)})});if(!e.ok)throw new Error(e.status);const t=await e.json();Fe(t),Se(!0)}catch(e){alert("Backend starting up, please retry in 10s")}finally{Pe(!1)}}},nearbyLoading:ke,nearbyData:Te,result:O,showLocationB:U,setShowLocationB:q,locationBName:G,isSelectingB:ne,setIsSelectingB:ie,bLatInput:ae,setBLatInput:se,bLngInput:le,setBLngInput:ce,savedPlaces:De,handleCompareSelect:gt,compareLoading:re,isCompareMode:R,setCompareResult:z,setSnapshotDataB:ut,setLocationBName:W,setIsCompareMode:V,handleMyLocationB:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{se(e.coords.latitude.toString()),ce(e.coords.longitude.toString()),gt(e.coords.latitude,e.coords.longitude)})},handleSavePlaceB:()=>{ee&&Ee([...De,{name:ee,lat:parseFloat(ae),lng:parseFloat(le)}])},isBFromSavedPlace:Ce,setSavedPlaces:Ee,sidebarWidth:Y,startResizingSide:bt,analyzedCoordsB:ye,nearbyLoadingB:je,handleNearbyPlacesB:async()=>{const e=ye.lat||ae,t=ye.lng||le;if(e&&t){Ne(!0);try{const n=await fetch("".concat(it,"/nearby_places"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:parseFloat(e),longitude:parseFloat(t)})});if(!n.ok)throw new Error(n.status);const i=await n.json();Ie(i),Be(!0)}catch(n){alert("Backend starting up, please retry in 10s")}finally{Ne(!1)}}},showNearby:Ae,setShowNearby:Se,compareResult:L,editingIndex:_e,setEditingIndex:xe,editingName:be,setEditingName:we,setAnalyzedCoordsB:ve}),(0,et.jsxs)("main",{className:"main-content",style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[(0,et.jsx)("section",{className:"map-container",style:{flex:1,position:"relative"},children:(0,et.jsxs)("div",{ref:vt,className:"map-viewport",style:{height:"100%",width:"100%",position:"relative",background:"#000"},children:[(0,et.jsxs)("div",{className:"tactical-zoom-hud",children:[(0,et.jsx)("button",{onClick:e,children:"+"}),(0,et.jsx)("div",{className:"zoom-divider"}),(0,et.jsx)("button",{onClick:t,children:"\u2212"})]}),(0,et.jsxs)("div",{className:"engine-switch-container",children:[(0,et.jsx)("button",{className:"switch-btn ".concat("2D"===r?"active":""),onClick:()=>a("2D"),title:"Standard 2D",children:"2D"}),(0,et.jsx)("button",{className:"switch-btn ".concat("3D"===r?"active":""),onClick:()=>a("3D"),title:"Tactical 3D",children:"3D"}),(0,et.jsx)("div",{className:"vertical-divider"}),(0,et.jsx)("button",{className:"fullscreen-btn",onClick:()=>{const e=vt.current;e&&(document.fullscreenElement?document.exitFullscreen():e.requestFullscreen().catch(e=>{console.error("Fullscreen failed:",e)}))},title:"Map Focus Mode",children:"\u26f6"})]}),(0,et.jsxs)("div",{className:"map-variety-picker",children:[(0,et.jsx)("label",{className:"picker-header",children:"\ud83d\uddfa\ufe0f Map Variety"}),"2D"===r?(0,et.jsxs)(et.Fragment,{children:[(0,et.jsxs)("select",{value:k,onChange:e=>P(e.target.value),className:"variety-select",children:[(0,et.jsxs)("optgroup",{label:"Google Maps",children:[(0,et.jsx)("option",{value:"hybrid",children:"Satellite Hybrid"}),(0,et.jsx)("option",{value:"satellite",children:"Pure Satellite"}),(0,et.jsx)("option",{value:"terrain",children:"Physical Terrain"})]}),(0,et.jsxs)("optgroup",{label:"Analysis Themes",children:[(0,et.jsx)("option",{value:"dark",children:"Dark Matter (Pro)"}),(0,et.jsx)("option",{value:"topo",children:"Topographic (Technical)"}),(0,et.jsx)("option",{value:"streets",children:"Standard Streets"}),(0,et.jsx)("option",{value:"light",children:"Minimalist Light"})]})]}),(0,et.jsxs)("div",{className:"spectral-toggle-bar",children:[(0,et.jsx)("button",{className:"ndvi"===Et?"active":"",onClick:()=>Ct("ndvi"===Et?"standard":"ndvi"),children:"\ud83c\udf3f NDVI"}),(0,et.jsx)("button",{className:"thermal"===Et?"active":"",onClick:()=>Ct("thermal"),children:"\ud83d\udd25 Heat"}),(0,et.jsx)("button",{className:"hydrology"===Et?"active":"",onClick:()=>Ct("hydrology"),children:"\ud83d\udca7 Flow"})]})]}):(0,et.jsxs)("select",{value:s,onChange:e=>l(e.target.value),className:"variety-select",children:[(0,et.jsx)("option",{value:"satellite",children:"\ud83d\udef0\ufe0f 3D Satellite"}),(0,et.jsx)("option",{value:"topo",children:"\ud83c\udfd4\ufe0f 3D Topographic"}),(0,et.jsx)("option",{value:"dark",children:"\ud83d\udd76\ufe0f 3D Stealth"}),(0,et.jsx)("option",{value:"nature",children:"\ud83c\udf31 3D Nature"}),(0,et.jsx)("option",{value:"streets",children:"\ud83c\udfd9\ufe0f 3D Urban (Buildings)"})," ",(0,et.jsx)("option",{value:"outdoor",children:"\u26c5 3D Atmospheric"})]})]}),(0,et.jsxs)("div",{className:"tactical-mode-toggle-container",children:[(0,et.jsxs)("div",{className:"toggle-row-content",children:[(0,et.jsx)("span",{className:"toggle-label",children:"Geo-Triad"}),(0,et.jsxs)("label",{className:"switch-attractive",children:[(0,et.jsx)("input",{type:"checkbox",checked:n,onChange:()=>i(!n)}),(0,et.jsx)("span",{className:"slider-attractive"})]})]}),n&&(0,et.jsxs)("div",{className:"tactical-snap-controls animate-slide-in",children:[(0,et.jsx)("button",{className:"snap-btn btn-a",onClick:()=>{var e,t;return null===(e=(t=window).snapToA)||void 0===e?void 0:e.call(t)},children:"A"}),(0,et.jsx)("button",{className:"snap-btn btn-b",onClick:()=>{var e,t;return null===(e=(t=window).snapToB)||void 0===e?void 0:e.call(t)},children:"B"}),(0,et.jsx)("button",{className:"snap-btn btn-live",onClick:()=>{var e,t;return null===(e=(t=window).snapToLive)||void 0===e?void 0:e.call(t)},children:"\ud83d\udccd"})]})]}),"2D"===r?(0,et.jsxs)(ze,{center:T,zoom:A,zoomControl:!1,style:{height:"100%",width:"100%"},children:[(0,et.jsx)(wm,{setViewCenter:F}),(0,et.jsx)(We,{url:_m[k]}),"standard"!==Et&&vm[Et]&&(0,et.jsx)(We,{url:vm[Et],opacity:.6}),(0,et.jsx)(Dm,{latA:me.lat,lngA:me.lng,latB:ye.lat,lngB:ye.lng,currentLat:w,currentLng:E,setLat:D,setLng:C,isSelectingB:ne,setBLatInput:se,setBLngInput:ce,isTacticalMode:n,setViewCenter:F,setZoom:S})]},"map-".concat(w,"-").concat(E,"-").concat(A)):(0,et.jsx)(lt,{lat:w,lng:E,zoom:A,setLat:D,setLng:C,factors:null===O||void 0===O?void 0:O.factors,isDarkMode:j,activeStyle:s,interactive:!0,isTacticalMode:n,latA:me.lat,lngA:me.lng,latB:ye.lat,lngB:ye.lng})]})}),(0,et.jsx)("div",{className:"horizontal-resizer",onMouseDown:wt}),(0,et.jsx)("section",{className:"results-container",style:{height:"".concat(K,"px"),flex:"0 0 ".concat(K,"px"),overflowY:"auto"},children:O||ue||re?(0,et.jsxs)(et.Fragment,{children:[(0,et.jsxs)("div",{className:"results-tab-bar glass-morphic ".concat(Ve?"fullscreen":""),children:[(0,et.jsxs)("div",{className:"tab-buttons-container",children:[(0,et.jsx)("button",{className:"suitability"===M?"active":"",onClick:()=>I("suitability"),children:"\ud83c\udfaf Suitability"}),(0,et.jsx)("button",{className:"environmental"===M?"active":"",onClick:()=>I("environmental"),children:"\ud83c\udf10 Locational Intelligence"}),(0,et.jsx)("button",{className:"infrastructure"===M?"active":"",onClick:()=>I("infrastructure"),children:"\ud83c\udfd7\ufe0f Strategic Utility"})]}),(0,et.jsx)("div",{className:"fullscreen-controls",children:Ve?(0,et.jsx)("button",{className:"close-fullscreen-btn",onClick:()=>Ue(!1),title:"Exit Fullscreen (ESC)",children:"\u2715"}):(0,et.jsx)("button",{className:"fullscreen-tab-btn",onClick:()=>Ue(!0),title:"Fullscreen Analysis (F11)",children:"\u26f6"})})]}),(ue||re)&&(0,et.jsxs)("div",{className:"loading-overlay",children:[(0,et.jsx)("div",{className:"spinner"}),(0,et.jsx)("p",{children:"Analyzing Terrain Data..."})]}),(0,et.jsxs)("div",{className:"tab-viewport ".concat(Ve?"fullscreen":""),children:[Ve&&(0,et.jsx)("button",{className:"floating-close-btn",onClick:()=>Ue(!1),title:"Exit Fullscreen (ESC)",children:"\u2715"}),!R&&O&&(0,et.jsxs)("div",{className:"single-analysis-view",children:[(0,et.jsxs)("h4",{className:"pane-header",children:[Z.toUpperCase()," - FULL TERRAIN REPORT"]}),Tt(O,me,Z,!0)]}),R&&(0,et.jsxs)("div",{className:"mobile-location-tabs glass-morphic only-mobile",children:[(0,et.jsxs)("button",{className:"A"===u?"active":"",onClick:()=>h("A"),children:["\ud83d\udccd ",Z]}),(0,et.jsxs)("button",{className:"B"===u?"active":"",onClick:()=>h("B"),children:["\ud83d\udccd ",G||"Site B"]})]}),R&&(0,et.jsxs)("div",{className:"compare-layout-ditto",children:[(0,et.jsxs)("div",{className:"compare-pane-ditto ".concat("A"===u?"show-mobile":"hide-mobile"),children:[(0,et.jsx)("h4",{className:"pane-header only-desktop",children:Z.toUpperCase()}),O?Tt(O,me,Z,!1):(0,et.jsx)("div",{className:"empty-results",children:"Analyzing Site A..."})]}),(0,et.jsxs)("div",{className:"compare-pane-ditto ".concat("B"===u?"show-mobile":"hide-mobile"),children:[(0,et.jsx)("h4",{className:"pane-header only-desktop",children:G.toUpperCase()||"SITE B"}),L?Tt(L,ye,G,!1):(0,et.jsx)("div",{className:"empty-results",children:"Waiting for selection..."})]})]})]})]}):(0,et.jsx)("div",{className:"welcome-placeholder",children:(0,et.jsxs)("div",{className:"placeholder-content",children:[(0,et.jsx)("span",{className:"placeholder-icon",children:"\ud83c\udf0d"}),(0,et.jsx)("h3",{children:"Ready for Analysis"}),(0,et.jsx)("p",{children:"Select a location on the map or search above to begin geospatial synthesis."})]})})}),(0,et.jsx)(fm,{isOpen:Le,onClose:Re,currentData:O,locationName:Z,compareData:L})]}),(Ae||Oe)&&(0,et.jsx)("div",{className:"modal-overlay",onClick:()=>{Se(!1),Be(!1)},children:(0,et.jsxs)("div",{className:"modal-card",onClick:e=>e.stopPropagation(),children:[(0,et.jsxs)("div",{className:"modal-header",children:[(0,et.jsxs)("h3",{children:["Nearby Amenities (",Oe?G:Z,")"]}),(0,et.jsx)("button",{className:"modal-close",onClick:()=>{Se(!1),Be(!1)},children:"\u2716"})]}),(0,et.jsx)("div",{className:"modal-body",children:(e=>{const t=Oe?Me:Te;if(null===t||void 0===t||null===(e=t.places)||void 0===e||!e.length)return(0,et.jsx)("div",{className:"nearby-empty",children:"No mapped amenities within 1.5 km."});const n=[{title:"\ud83c\udfeb Schools",items:t.places.filter(e=>"school"===e.type)},{title:"\ud83c\udfe5 Hospitals",items:t.places.filter(e=>"hospital"===e.type)},{title:"\ud83c\udf93 Colleges & Universities",items:t.places.filter(e=>"college"===e.type||"university"===e.type)},{title:"\ud83d\uded2 Markets & Shopping",items:t.places.filter(e=>"market"===e.type)},{title:"\u26fd Petrol Bunks",items:t.places.filter(e=>"petrol_bunk"===e.type)},{title:"\ud83c\udfd9\ufe0f Access Cities",items:t.places.filter(e=>"access_city"===e.type)},{title:"\ud83d\ude8c Transit",items:t.places.filter(e=>"transit"===e.type)}].filter(e=>e.items.length>0),i=e=>{let{title:t,items:n}=e;return(0,et.jsxs)("div",{className:"nearby-section",children:[(0,et.jsxs)("h4",{children:[t," (",n.length,")"]}),n.length?n.map((e,t)=>(0,et.jsxs)("div",{className:"nearby-item",children:[(0,et.jsx)("span",{className:"nearby-name",children:e.name}),(0,et.jsxs)("span",{className:"nearby-distance",children:[e.distance_km," km"]})]},t)):(0,et.jsxs)("div",{className:"nearby-empty",children:["No nearby ",t.toLowerCase()," found."]})]})};return(0,et.jsx)(et.Fragment,{children:n.map((e,t)=>(0,et.jsx)(i,{title:e.title,items:e.items},t))})})()})]})})]})}function Cm(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Cm(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Am(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Cm(e))&&(i&&(i+=" "),i+=t);return i}var Sm=n(7820),Tm=n.n(Sm),Fm=n(7770),km=n.n(Fm);function Pm(e){var t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),n=Math.round(e*t)/t;return Object.is(n,-0)?0:n}function Mm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.reduce((e,t,i)=>{var r=n[i-1];return"string"===typeof r?e+r+t:void 0!==r?e+Pm(r)+t:e+t},"")}var Im=e=>0===e?0:e>0?1:-1,jm=e=>"number"==typeof e&&e!=+e,Nm=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,Om=e=>("number"===typeof e||e instanceof Number)&&!jm(e),Bm=e=>Om(e)||"string"===typeof e,Lm=0,zm=e=>{var t=++Lm;return"".concat(e||"").concat(t)},Rm=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Om(e)&&"string"!==typeof e)return i;if(Nm(e)){if(null==t)return i;var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return jm(n)&&(n=i),r&&null!=t&&n>t&&(n=t),n},Vm=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},i=0;i<t;i++){if(n[String(e[i])])return!0;n[String(e[i])]=!0}return!1};function Um(e,t,n){return Om(e)&&Om(t)?Pm(e+n*(t-e)):t}function qm(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):km()(e,t))===n)}var Zm=e=>null===e||"undefined"===typeof e,Hm=e=>Zm(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Gm(e){return null!=e}function Wm(){}var Ym=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if("undefined"!==typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(t.replace(/%s/g,()=>i[o++]))}},Xm=(e,t,n)=>{var{width:i="100%",height:r="100%",aspect:o,maxHeight:a}=n,s=Nm(i)?e:Number(i),l=Nm(r)?t:Number(r);return o&&o>0&&(s?l=s/o:l&&(s=l*o),a&&null!=l&&l>a&&(l=a)),{calculatedWidth:s,calculatedHeight:l}},Km={width:0,height:0,overflow:"visible"},$m={width:0,overflowX:"visible"},Qm={height:0,overflowY:"visible"},Jm={},eg=e=>{var{width:t,height:n}=e,i=Nm(t),r=Nm(n);return i&&r?Km:i?$m:r?Qm:Jm};function tg(e){return Number.isFinite(e)}function ng(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function ig(){return ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ig.apply(null,arguments)}function rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function og(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rg(Object(n),!0).forEach(function(t){ag(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ag(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sg=(0,o.createContext)({width:-1,height:-1});function lg(e){var{children:t,width:n,height:i}=e,r=(0,o.useMemo)(()=>({width:n,height:i}),[n,i]);return function(e){return ng(e.width)&&ng(e.height)}(r)?o.createElement(sg.Provider,{value:r},t):null}var cg=()=>(0,o.useContext)(sg),ug=(0,o.forwardRef)((e,t)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:a,minWidth:s=0,minHeight:l,maxHeight:c,children:u,debounce:h=0,id:d,className:p,onResize:f,style:m={}}=e,g=(0,o.useRef)(null),y=(0,o.useRef)();y.current=f,(0,o.useImperativeHandle)(t,()=>g.current);var[v,_]=(0,o.useState)({containerWidth:i.width,containerHeight:i.height}),x=(0,o.useCallback)((e,t)=>{_(n=>{var i=Math.round(e),r=Math.round(t);return n.containerWidth===i&&n.containerHeight===r?n:{containerWidth:i,containerHeight:r}})},[]);(0,o.useEffect)(()=>{if(null==g.current||"undefined"===typeof ResizeObserver)return Wm;var e=e=>{var t,{width:n,height:i}=e[0].contentRect;x(n,i),null===(t=y.current)||void 0===t||t.call(y,n,i)};h>0&&(e=Tm()(e,h,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:i}=g.current.getBoundingClientRect();return x(n,i),t.observe(g.current),()=>{t.disconnect()}},[x,h]);var{containerWidth:b,containerHeight:w}=v;Ym(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:E}=Xm(b,w,{width:r,height:a,aspect:n,maxHeight:c});return Ym(null!=D&&D>0||null!=E&&E>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",D,E,r,a,s,l,n),o.createElement("div",{id:d?"".concat(d):void 0,className:Am("recharts-responsive-container",p),style:og(og({},m),{},{width:r,height:a,minWidth:s,minHeight:l,maxHeight:c}),ref:g},o.createElement("div",{style:eg({width:r,height:a})},o.createElement(lg,{width:D,height:E},u)))}),hg=(0,o.forwardRef)((e,t)=>{var n=cg();if(ng(n.width)&&ng(n.height))return e.children;var{width:i,height:r}=function(e){var{width:t,height:n,aspect:i}=e,r=t,o=n;return void 0===r&&void 0===o?(r="100%",o="100%"):void 0===r?r=i&&i>0?void 0:"100%":void 0===o&&(o=i&&i>0?void 0:"100%"),{width:r,height:o}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:s}=Xm(void 0,void 0,{width:i,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return Om(a)&&Om(s)?o.createElement(lg,{width:a,height:s},e.children):o.createElement(ug,ig({},e,{width:i,height:r,ref:t}))}),dg=Symbol.for("immer-nothing"),pg=Symbol.for("immer-draftable"),fg=Symbol.for("immer-state");function mg(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var gg=Object,yg=gg.getPrototypeOf,vg="constructor",_g="prototype",xg="configurable",bg="enumerable",wg="writable",Dg="value",Eg=e=>!!e&&!!e[fg];function Cg(e){var t;return!!e&&(Tg(e)||jg(e)||!!e[pg]||!(null===(t=e[vg])||void 0===t||!t[pg])||Ng(e)||Og(e))}var Ag=gg[_g][vg].toString(),Sg=new WeakMap;function Tg(e){if(!e||!Bg(e))return!1;const t=yg(e);if(null===t||t===gg[_g])return!0;const n=gg.hasOwnProperty.call(t,vg)&&t[vg];if(n===Object)return!0;if(!Lg(n))return!1;let i=Sg.get(n);return void 0===i&&(i=Function.toString.call(n),Sg.set(n,i)),i===Ag}function Fg(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===kg(e)){(n?Reflect.ownKeys(e):gg.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,i)=>t(i,n,e))}function kg(e){const t=e[fg];return t?t.type_:jg(e)?1:Ng(e)?2:Og(e)?3:0}var Pg=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:kg(e))?e.has(t):gg[_g].hasOwnProperty.call(e,t)},Mg=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:kg(e))?e.get(t):e[t]},Ig=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:kg(e);2===i?e.set(t,n):3===i?e.add(n):e[t]=n};var jg=Array.isArray,Ng=e=>e instanceof Map,Og=e=>e instanceof Set,Bg=e=>"object"===typeof e,Lg=e=>"function"===typeof e,zg=e=>"boolean"===typeof e;var Rg=e=>e.copy_||e.base_,Vg=e=>e.modified_?e.copy_:e.base_;function Ug(e,t){if(Ng(e))return new Map(e);if(Og(e))return new Set(e);if(jg(e))return Array[_g].slice.call(e);const n=Tg(e);if(!0===t||"class_only"===t&&!n){const t=gg.getOwnPropertyDescriptors(e);delete t[fg];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const r=n[i],o=t[r];!1===o[wg]&&(o[wg]=!0,o[xg]=!0),(o.get||o.set)&&(t[r]={[xg]:!0,[wg]:!0,[bg]:o[bg],[Dg]:e[r]})}return gg.create(yg(e),t)}{const t=yg(e);if(null!==t&&n)return Fe({},e);const i=gg.create(t);return gg.assign(i,e)}}function qg(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Hg(e)||Eg(e)||!Cg(e)||(kg(e)>1&&gg.defineProperties(e,{set:Zg,add:Zg,clear:Zg,delete:Zg}),gg.freeze(e),t&&Fg(e,(e,t)=>{qg(t,!0)},!1)),e}var Zg={[Dg]:function(){mg(2)}};function Hg(e){return null===e||!Bg(e)||gg.isFrozen(e)}var Gg="MapSet",Wg="Patches",Yg="ArrayMethods",Xg={};function Kg(e){const t=Xg[e];return t||mg(0),t}var $g,Qg=e=>!!Xg[e];var Jg=()=>$g;function ey(e,t){t&&(e.patchPlugin_=Kg(Wg),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ty(e){ny(e),e.drafts_.forEach(ry),e.drafts_=null}function ny(e){e===$g&&($g=e.parent_)}var iy=e=>$g={drafts_:[],parent_:$g,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Qg(Gg)?Kg(Gg):void 0,arrayMethodsPlugin_:Qg(Yg)?Kg(Yg):void 0};function ry(e){const t=e[fg];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function oy(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(void 0!==e&&e!==n){n[fg].modified_&&(ty(t),mg(4)),Cg(e)&&(e=ay(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[fg].base_,e,t)}else e=ay(t,n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qg(t,n)}(t,e,!0),ty(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dg?e:void 0}function ay(e,t){if(Hg(t))return t;const n=t[fg];if(!n){return py(t,e.handledSet_,e)}if(!ly(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:t}=n;if(t)for(;t.length>0;){t.pop()(e)}hy(n,e)}return n.copy_}function sy(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ly=(e,t)=>e.scope_===t,cy=[];function uy(e,t,n,i){var r;const o=Rg(e),a=e.type_;if(void 0!==i){if(Mg(o,i,a)===t)return void Ig(o,i,n,a)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;Fg(o,(e,n)=>{if(Eg(n)){const i=t.get(n)||[];i.push(e),t.set(n,i)}})}const s=null!==(r=e.draftLocations_.get(t))&&void 0!==r?r:cy;for(const l of s)Ig(o,l,n,a)}function hy(e,t){var n,i;if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(null!==(n=null===(i=e.assigned_)||void 0===i?void 0:i.size)&&void 0!==n?n:0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}sy(e)}}function dy(e,t,n){const{scope_:i}=e;if(Eg(n)){const r=n[fg];ly(r,i)&&r.callbacks_.push(function(){_y(e);const i=Vg(r);uy(e,n,i,t)})}else Cg(n)&&e.callbacks_.push(function(){const r=Rg(e);var o;3===e.type_?r.has(n)&&py(n,i.handledSet_,i):Mg(r,t,e.type_)===n&&i.drafts_.length>1&&!0===(null!==(o=e.assigned_.get(t))&&void 0!==o&&o)&&e.copy_&&py(Mg(e.copy_,t,e.type_),i.handledSet_,i)})}function py(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Eg(e)||t.has(e)||!Cg(e)||Hg(e)||(t.add(e),Fg(e,(i,r)=>{if(Eg(r)){const t=r[fg];if(ly(t,n)){const n=Vg(t);Ig(e,i,n,e.type_),sy(t)}}else Cg(r)&&py(r,t,n)})),e}var fy={get(e,t){if(t===fg)return e;let n=e.scope_.arrayMethodsPlugin_;const i=1===e.type_&&"string"===typeof t;if(i&&null!==n&&void 0!==n&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const r=Rg(e);if(!Pg(r,t,e.type_))return function(e,t,n){var i;const r=yy(t,n);return r?Dg in r?r[Dg]:null===(i=r.get)||void 0===i?void 0:i.call(e.draft_):void 0}(e,r,t);const o=r[t];if(e.finalized_||!Cg(o))return o;if(i&&e.operationMethod&&null!==n&&void 0!==n&&n.isMutatingArrayMethod(e.operationMethod)&&function(e){const t=+e;return Number.isInteger(t)&&String(t)===e}(t))return o;if(o===gy(e.base_,t)){_y(e);const n=1===e.type_?+t:t,i=xy(e.scope_,o,e,n);return e.copy_[n]=i}return o},has:(e,t)=>t in Rg(e),ownKeys:e=>Reflect.ownKeys(Rg(e)),set(e,t,n){const i=yy(Rg(e),t);if(null!==i&&void 0!==i&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=gy(Rg(e),t),a=null===i||void 0===i?void 0:i[fg];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(((r=n)===(o=i)?0!==r||1/r===1/o:r!==r&&o!==o)&&(void 0!==n||Pg(e.base_,t,e.type_)))return!0;_y(e),vy(e)}var r,o;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),dy(e,t,n)),!0},deleteProperty:(e,t)=>(_y(e),void 0!==gy(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),vy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Rg(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{[wg]:!0,[xg]:1!==e.type_||"length"!==t,[bg]:i[bg],[Dg]:n[t]}:i},defineProperty(){mg(11)},getPrototypeOf:e=>yg(e.base_),setPrototypeOf(){mg(12)}},my={};for(let n in fy){let e=fy[n];my[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}function gy(e,t){const n=e[fg];return(n?Rg(n):e)[t]}function yy(e,t){if(!(t in e))return;let n=yg(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=yg(n)}}function vy(e){e.modified_||(e.modified_=!0,e.parent_&&vy(e.parent_))}function _y(e){e.copy_||(e.assigned_=new Map,e.copy_=Ug(e.base_,e.scope_.immer_.useStrictShallowCopy_))}my.deleteProperty=function(e,t){return my.set.call(this,e,t,void 0)},my.set=function(e,t,n){return fy.set.call(this,e[0],t,n,e[0])};function xy(e,t,n,i){var r,o;const[a,s]=Ng(t)?Kg(Gg).proxyMap_(t,n):Og(t)?Kg(Gg).proxySet_(t,n):function(e,t){const n=jg(e),i={type_:n?1:0,scope_:t?t.scope_:Jg(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,o=fy;n&&(r=[i],o=my);const{revoke:a,proxy:s}=Proxy.revocable(r,o);return i.draft_=s,i.revoke_=a,[s,i]}(t,n);return(null!==(r=null===n||void 0===n?void 0:n.scope_)&&void 0!==r?r:Jg()).drafts_.push(a),s.callbacks_=null!==(o=null===n||void 0===n?void 0:n.callbacks_)&&void 0!==o?o:[],s.key_=i,n&&void 0!==i?function(e,t,n){e.callbacks_.push(function(i){var r,o;const a=t;if(!a||!ly(a,i))return;null===(r=i.mapSetPlugin_)||void 0===r||r.fixSetContents(a);const s=Vg(a);uy(e,null!==(o=a.draft_)&&void 0!==o?o:a,s,n),hy(a,i)})}(n,s,i):s.callbacks_.push(function(e){var t;null===(t=e.mapSetPlugin_)||void 0===t||t.fixSetContents(s);const{patchPlugin_:n}=e;s.modified_&&n&&n.generatePatches_(s,[],e)}),a}function by(e){return Eg(e)||mg(10),wy(e)}function wy(e){if(!Cg(e)||Hg(e))return e;const t=e[fg];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ug(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=Ug(e,!0);return Fg(n,(e,t)=>{Ig(n,e,wy(t))},i),t&&(t.finalized_=!1),n}var Dy=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,n)=>{if(Lg(e)&&!Lg(t)){const n=t;t=e;const i=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return i.produce(e,e=>t.call(this,e,...o))}}let i;if(Lg(t)||mg(6),void 0===n||Lg(n)||mg(7),Cg(e)){const r=iy(this),o=xy(r,e,void 0);let a=!0;try{i=t(o),a=!1}finally{a?ty(r):ny(r)}return ey(r,n),oy(i,r)}if(!e||!Bg(e)){if(i=t(e),void 0===i&&(i=e),i===dg&&(i=void 0),this.autoFreeze_&&qg(i,!0),n){const t=[],r=[];Kg(Wg).generateReplacementPatches_(e,i,{patches_:t,inversePatches_:r}),n(t,r)}return i}mg(1)},this.produceWithPatches=(e,n)=>{if(Lg(e))return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.produceWithPatches(n,t=>e(t,...r))};let i,r;return[this.produce(e,n,(e,t)=>{i=e,r=t}),i,r]},zg(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),zg(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),zg(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Cg(e)||mg(8),Eg(e)&&(e=by(e));const t=iy(this),n=xy(t,e,void 0);return n[fg].isManual_=!0,ny(t),n}finishDraft(e,t){const n=e&&e[fg];n&&n.isManual_||mg(9);const{scope_:i}=n;return ey(i,t),oy(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=Kg(Wg).applyPatches_;return Eg(e)?i(e,t):this.produce(e,e=>i(e,t))}},Ey=Dy.produce;function Cy(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Ay=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Sy=()=>Math.random().toString(36).substring(7).split("").join("."),Ty={INIT:"@@redux/INIT".concat(Sy()),REPLACE:"@@redux/REPLACE".concat(Sy()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Sy())};function Fy(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function ky(e,t,n){if("function"!==typeof e)throw new Error(Cy(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Cy(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Cy(1));return n(ky)(e,t)}let i=e,r=t,o=new Map,a=o,s=0,l=!1;function c(){a===o&&(a=new Map,o.forEach((e,t)=>{a.set(t,e)}))}function u(){if(l)throw new Error(Cy(3));return r}function h(e){if("function"!==typeof e)throw new Error(Cy(4));if(l)throw new Error(Cy(5));let t=!0;c();const n=s++;return a.set(n,e),function(){if(t){if(l)throw new Error(Cy(6));t=!1,c(),a.delete(n),o=null}}}function d(e){if(!Fy(e))throw new Error(Cy(7));if("undefined"===typeof e.type)throw new Error(Cy(8));if("string"!==typeof e.type)throw new Error(Cy(17));if(l)throw new Error(Cy(9));try{l=!0,r=i(r,e)}finally{l=!1}return(o=a).forEach(e=>{e()}),e}d({type:Ty.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Cy(10));i=e,d({type:Ty.REPLACE})},[Ay]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Cy(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Ay](){return this}}}}}function Py(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const i=t[o];0,"function"===typeof e[i]&&(n[i]=e[i])}const i=Object.keys(n);let r;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Ty.INIT}))throw new Error(Cy(12));if("undefined"===typeof n(void 0,{type:Ty.PROBE_UNKNOWN_ACTION()}))throw new Error(Cy(13))})}(n)}catch(gV){r=gV}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(r)throw r;let o=!1;const a={};for(let r=0;r<i.length;r++){const s=i[r],l=n[s],c=e[s],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(Cy(14))}a[s]=u,o=o||u!==c}return o=o||i.length!==Object.keys(e).length,o?a:e}}function My(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function Iy(e){return Fy(e)&&"type"in e&&"string"===typeof e.type}function jy(e){return t=>{let{dispatch:n,getState:i}=t;return t=>r=>"function"===typeof r?r(n,i,e):t(r)}}var Ny=jy(),Oy=jy;const By=["reducerPath"];var Ly="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?My:My.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function zy(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Iv(0));return Fe(Fe({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>Iy(t)&&t.type===e,n}var Ry=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Vy(e){return Cg(e)?Ey(e,()=>{}):e}function Uy(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var qy="RTK_autoBatch",Zy=()=>e=>({payload:e,meta:{[qy]:!0}}),Hy=e=>t=>{setTimeout(t,e)},Gy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let i=!0,r=!1,o=!1;const a=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Hy(10):"callback"===e.type?e.queueNotification:Hy(e.timeout),l=()=>{o=!1,r&&(r=!1,a.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>i&&e());return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{var t;return i=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[qy]),r=!i,r&&(o||(o=!0,s(l))),n.dispatch(e)}finally{i=!0}}})}};function Wy(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:r=!0}=null!==e&&void 0!==e?e:{};let o=new Ry;return t&&("boolean"===typeof t?o.push(Ny):o.push(Oy(t.extraArgument))),o},{reducer:n,middleware:i,devTools:r=!0,duplicateMiddlewareCheck:o=!0,preloadedState:a,enhancers:s}=e||{};let l,c;if("function"===typeof n)l=n;else{if(!Fy(n))throw new Error(Iv(1));l=Py(n)}c="function"===typeof i?i(t):t();let u=My;r&&(u=Ly(Fe({trace:!1},"object"===typeof r&&r)));const h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,i)=>{const r=e(n,i);let o=()=>{throw new Error(Cy(15))};const a={getState:r.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o(e,...n)}},s=t.map(e=>e(a));return o=My(...s)(r.dispatch),Fe(Fe({},r),{},{dispatch:o})}}(...c),d=(e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let i=new Ry(e);return n&&i.push(Gy("object"===typeof n?n:void 0)),i})(h);return ky(l,a,u(..."function"===typeof s?s(d):d()))}function Yy(e){const t={},n=[];let i;const r={addCase(e,n){const i="string"===typeof e?e:e.type;if(!i)throw new Error(Iv(28));if(i in t)throw new Error(Iv(29));return t[i]=n,r},addAsyncThunk:(e,i)=>(i.pending&&(t[e.pending.type]=i.pending),i.rejected&&(t[e.rejected.type]=i.rejected),i.fulfilled&&(t[e.fulfilled.type]=i.fulfilled),i.settled&&n.push({matcher:e.settled,reducer:i.settled}),r),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(i=e,r)};return e(r),[t,n,i]}var Xy=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Ky=Symbol.for("rtk-slice-createasyncthunk");function $y(e,t){return"".concat(e,"/").concat(t)}function Qy(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Ky];return function(e){const{name:t,reducerPath:i=t}=e;if(!t)throw new Error(Iv(11));const r=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return Fe({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(r),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Iv(12));if(n in a.sliceCaseReducersByType)throw new Error(Iv(13));return a.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(a.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,s)};function l(){const[t={},n=[],i]="function"===typeof e.extraReducers?Yy(e.extraReducers):[e.extraReducers],r=Fe(Fe({},t),a.sliceCaseReducersByType);return function(e,t){let n,[i,r,o]=Yy(t);if("function"===typeof e)n=()=>Vy(e());else{const t=Vy(e);n=()=>t}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,a=[i[t.type],...r.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===a.filter(e=>!!e).length&&(a=[o]),a.reduce((e,n)=>{if(n){if(Eg(e)){const i=n(e,t);return void 0===i?e:i}if(Cg(e))return Ey(e,e=>n(e,t));{const i=n(e,t);if(void 0===i){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}}return e},e)}return a.getInitialState=n,a}(e.initialState,e=>{for(let t in r)e.addCase(t,r[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);i&&e.addDefaultCase(i)})}o.forEach(i=>{const o=r[i],a={reducerName:i,type:$y(t,i),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function(e,t,n){let i,r,{type:o,reducerName:a,createNotation:s}=e;if("reducer"in t){if(s&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Iv(17));i=t.reducer,r=t.prepare}else i=t;n.addCase(o,i).exposeCaseReducer(a,i).exposeAction(a,r?zy(o,r):zy(o))}(a,o,s):function(e,t,n,i){let{type:r,reducerName:o}=e;if(!i)throw new Error(Iv(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:c,settled:u,options:h}=t,d=i(r,a,h);n.exposeAction(o,d),s&&n.addCase(d.fulfilled,s);l&&n.addCase(d.pending,l);c&&n.addCase(d.rejected,c);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(o,{fulfilled:s||tv,pending:l||tv,rejected:c||tv,settled:u||tv})}(a,o,s,n)});const c=e=>e,u=new Map,h=new WeakMap;let d;function p(e,t){return d||(d=l()),d(e,t)}function f(){return d||(d=l()),d.getInitialState()}function m(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function i(e){let r=e[t];return"undefined"===typeof r&&n&&(r=Uy(h,i,f)),r}function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const i=Uy(u,n,()=>new WeakMap);return Uy(i,t,()=>{const i={};for(const[o,a]of Object.entries(null!==(r=e.selectors)&&void 0!==r?r:{})){var r;i[o]=Jy(a,t,()=>Uy(h,t,f),n)}return i})}return{reducerPath:t,getSelectors:r,get selectors(){return r(i)},selectSlice:i}}const g=Fe(Fe({name:t,reducer:p,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:f},m(i)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,r=ke(t,By);const o=null!==n&&void 0!==n?n:i;return e.inject({reducerPath:o,reducer:p},r),Fe(Fe({},g),m(o,!0))}});return g}}function Jy(e,t,n,i){function r(r){let o=t(r);"undefined"===typeof o&&i&&(o=n());for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return e(o,...s)}return r.unwrapped=e,r}var ev=Qy();function tv(){}var nv="listener",iv="completed",rv="cancelled",ov="task-".concat(rv),av="task-".concat(iv),sv="".concat(nv,"-").concat(rv),lv="".concat(nv,"-").concat(iv),cv=class{constructor(e){Se(this,"name","TaskAbortError"),Se(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(rv," (reason: ").concat(e,")")}},uv=(e,t)=>{if("function"!==typeof e)throw new TypeError(Iv(32))},hv=()=>{},dv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hv;return e.catch(t),e},pv=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),fv=e=>{if(e.aborted)throw new cv(e.reason)};function mv(e,t){let n=hv;return new Promise((i,r)=>{const o=()=>r(new cv(e.reason));e.aborted?o():(n=pv(e,o),t.finally(()=>n()).then(i,r))}).finally(()=>{n=hv})}var gv=e=>t=>dv(mv(e,t).then(t=>(fv(e),t))),yv=e=>{const t=gv(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:vv}=Object,_v={},xv="listenerMiddleware",bv=(e,t)=>(n,i)=>{uv(n);const r=new AbortController;var o;o=r,pv(e,()=>o.abort(e.reason));const a=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof cv?"cancelled":"rejected",error:n}}finally{null===t||void 0===t||t()}})(async()=>{fv(e),fv(r.signal);const t=await n({pause:gv(r.signal),delay:yv(r.signal),signal:r.signal});return fv(r.signal),t},()=>r.abort(av));return null!==i&&void 0!==i&&i.autoJoin&&t.push(a.catch(hv)),{result:gv(e)(a),cancel(){r.abort(ov)}}},wv=(e,t)=>(n,i)=>dv((async(n,i)=>{fv(t);let r=()=>{};const o=new Promise((t,i)=>{let o=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});r=()=>{o(),i()}}),a=[o];null!=i&&a.push(new Promise(e=>setTimeout(e,i,null)));try{const e=await mv(t,Promise.race(a));return fv(t),e}finally{r()}})(n,i)),Dv=e=>{let{type:t,actionCreator:n,matcher:i,predicate:r,effect:o}=e;if(t)r=zy(t).match;else if(n)t=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(Iv(21));return uv(o),{predicate:r,type:t,effect:o}},Ev=vv(e=>{const{type:t,predicate:n,effect:i}=Dv(e);return{id:Xy(),effect:i,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Iv(22))}}},{withTypes:()=>Ev}),Cv=(e,t)=>{const{type:n,effect:i,predicate:r}=Dv(t);return Array.from(e.values()).find(e=>("string"===typeof n?e.type===n:e.predicate===r)&&e.effect===i)},Av=e=>{e.pending.forEach(e=>{e.abort(sv)})},Sv=(e,t,n)=>{try{e(t,n)}catch(i){setTimeout(()=>{throw i},0)}},Tv=vv(zy("".concat(xv,"/add")),{withTypes:()=>Tv}),Fv=zy("".concat(xv,"/removeAll")),kv=vv(zy("".concat(xv,"/remove")),{withTypes:()=>kv}),Pv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("".concat(xv,"/error"),...t)},Mv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,n=new Map,{extra:i,onError:r=Pv}=e;uv(r);const o=e=>{var n;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&Av(e)}))(null!==(n=Cv(t,e))&&void 0!==n?n:Ev(e))};vv(o,{withTypes:()=>o});const a=e=>{const n=Cv(t,e);return n&&(n.unsubscribe(),e.cancelActive&&Av(n)),!!n};vv(a,{withTypes:()=>a});const s=async(e,a,s,l)=>{const c=new AbortController,u=wv(o,c.signal),h=[];try{e.pending.add(c),(e=>{var t;const i=null!==(t=n.get(e))&&void 0!==t?t:0;n.set(e,i+1)})(e),await Promise.resolve(e.effect(a,vv({},s,{getOriginalState:l,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:yv(c.signal),pause:gv(c.signal),extra:i,signal:c.signal,fork:bv(c.signal,h),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==c&&(e.abort(sv),n.delete(e))})},cancel:()=>{c.abort(sv),e.pending.delete(c)},throwIfCancelled:()=>{fv(c.signal)}})))}catch(d){d instanceof cv||Sv(r,d,{raisedBy:"effect"})}finally{await Promise.all(h),c.abort(lv),(e=>{var t;const i=null!==(t=n.get(e))&&void 0!==t?t:1;1===i?n.delete(e):n.set(e,i-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())Av(e);e.clear()})(t,n);return{middleware:e=>n=>i=>{if(!Iy(i))return n(i);if(Tv.match(i))return o(i.payload);if(Fv.match(i))return void l();if(kv.match(i))return a(i.payload);let c=e.getState();const u=()=>{if(c===_v)throw new Error(Iv(23));return c};let h;try{if(h=n(i),t.size>0){const n=e.getState(),o=Array.from(t.values());for(const t of o){let o=!1;try{o=t.predicate(i,n,c)}catch(d){o=!1,Sv(r,d,{raisedBy:"predicate"})}o&&s(t,i,e,u)}}}finally{c=_v}return h},startListening:o,stopListening:a,clearListeners:l}};Symbol.for("rtk-state-proxy-original");function Iv(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function jv(e,t){if(t){var n=Number.parseInt(t,10);if(!jm(n))return null===e||void 0===e?void 0:e[n]}}var Nv=ev({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Ov=Nv.reducer,{createEventEmitter:Bv}=Nv.actions;n(7237);function Lv(e){e()}var zv={notify(){},get:()=>[]};function Rv(e,t){let n,i=zv,r=0,o=!1;function a(){c.onStateChange&&c.onStateChange()}function s(){r++,n||(n=t?t.addNestedSub(a):e.subscribe(a),i=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Lv(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let i=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){i&&null!==e&&(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function l(){r--,n&&0===r&&(n(),n=void 0,i.clear(),i=zv)}const c={addNestedSub:function(e){s();const t=i.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:a,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>i};return c}var Vv=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),Uv=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),qv=(()=>Vv||Uv?o.useLayoutEffect:o.useEffect)();function Zv(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Hv(e,t){if(Zv(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Zv(e[n[r]],t[n[r]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Gv=Symbol.for("react-redux-context"),Wv="undefined"!==typeof globalThis?globalThis:{};function Yv(){var e;if(!o.createContext)return{};const t=null!==(e=Wv[Gv])&&void 0!==e?e:Wv[Gv]=new Map;let n=t.get(o.createContext);return n||(n=o.createContext(null),t.set(o.createContext,n)),n}var Xv=Yv();var Kv=function(e){const{children:t,context:n,serverState:i,store:r}=e,a=o.useMemo(()=>{const e=Rv(r);return{store:r,subscription:e,getServerState:i?()=>i:void 0}},[r,i]),s=o.useMemo(()=>r.getState(),[r]);qv(()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,s]);const l=n||Xv;return o.createElement(l.Provider,{value:a},t)};var $v=Symbol.for("immer-nothing"),Qv=Symbol.for("immer-draftable"),Jv=Symbol.for("immer-state");function e_(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var t_=Object.getPrototypeOf;function n_(e){return!!e&&!!e[Jv]}function i_(e){var t;return!!e&&(a_(e)||Array.isArray(e)||!!e[Qv]||!(null===(t=e.constructor)||void 0===t||!t[Qv])||h_(e)||d_(e))}var r_=Object.prototype.constructor.toString(),o_=new WeakMap;function a_(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if("function"!==typeof n)return!1;let i=o_.get(n);return void 0===i&&(i=Function.toString.call(n),o_.set(n,i)),i===r_}function s_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===l_(e)){(n?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,i)=>t(i,n,e))}function l_(e){const t=e[Jv];return t?t.type_:Array.isArray(e)?1:h_(e)?2:d_(e)?3:0}function c_(e,t){return 2===l_(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u_(e,t,n){const i=l_(e);2===i?e.set(t,n):3===i?e.add(n):e[t]=n}function h_(e){return e instanceof Map}function d_(e){return e instanceof Set}function p_(e){return e.copy_||e.base_}function f_(e,t){if(h_(e))return new Map(e);if(d_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=a_(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Jv];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const r=n[i],o=t[r];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[r]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[r]})}return Object.create(t_(e),t)}{const t=t_(e);if(null!==t&&n)return Fe({},e);const i=Object.create(t);return Object.assign(i,e)}}function m_(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y_(e)||n_(e)||!i_(e)||(l_(e)>1&&Object.defineProperties(e,{set:g_,add:g_,clear:g_,delete:g_}),Object.freeze(e),t&&Object.values(e).forEach(e=>m_(e,!0))),e}var g_={value:function(){e_(2)}};function y_(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var v_,__={};function x_(e){const t=__[e];return t||e_(0),t}function b_(){return v_}function w_(e,t){t&&(x_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function D_(e){E_(e),e.drafts_.forEach(A_),e.drafts_=null}function E_(e){e===v_&&(v_=e.parent_)}function C_(e){return v_={drafts_:[],parent_:v_,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function A_(e){const t=e[Jv];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function S_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Jv].modified_&&(D_(t),e_(4)),i_(e)&&(e=T_(t,e),t.parent_||k_(t,e)),t.patches_&&x_("Patches").generateReplacementPatches_(n[Jv].base_,e,t.patches_,t.inversePatches_)):e=T_(t,n,[]),D_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$v?e:void 0}function T_(e,t,n){if(y_(t))return t;const i=e.immer_.shouldUseStrictIteration(),r=t[Jv];if(!r)return s_(t,(i,o)=>F_(e,r,t,i,o,n),i),t;if(r.scope_!==e)return t;if(!r.modified_)return k_(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let o=t,a=!1;3===r.type_&&(o=new Set(t),t.clear(),a=!0),s_(o,(i,o)=>F_(e,r,t,i,o,n,a),i),k_(e,t,!1),n&&e.patches_&&x_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function F_(e,t,n,i,r,o,a){if(null==r)return;if("object"!==typeof r&&!a)return;const s=y_(r);if(!s||a){if(n_(r)){const a=T_(e,r,o&&t&&3!==t.type_&&!c_(t.assigned_,i)?o.concat(i):void 0);if(u_(n,i,a),!n_(a))return;e.canAutoFreeze_=!1}else a&&n.add(r);if(i_(r)&&!s){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[i]===r&&s)return;T_(e,r),t&&t.scope_.parent_||"symbol"===typeof i||!(h_(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))||k_(e,r)}}}function k_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&m_(t,n)}var P_={get(e,t){if(t===Jv)return e;const n=p_(e);if(!c_(n,t))return function(e,t,n){var i;const r=j_(t,n);return r?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(e.draft_):void 0}(e,n,t);const i=n[t];return e.finalized_||!i_(i)?i:i===I_(e.base_,t)?(O_(e),e.copy_[t]=B_(i,e)):i},has:(e,t)=>t in p_(e),ownKeys:e=>Reflect.ownKeys(p_(e)),set(e,t,n){const i=j_(p_(e),t);if(null!==i&&void 0!==i&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=I_(p_(e),t),a=null===i||void 0===i?void 0:i[Jv];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((r=n)===(o=i)?0!==r||1/r===1/o:r!==r&&o!==o)&&(void 0!==n||c_(e.base_,t)))return!0;O_(e),N_(e)}var r,o;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==I_(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,O_(e),N_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=p_(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty(){e_(11)},getPrototypeOf:e=>t_(e.base_),setPrototypeOf(){e_(12)}},M_={};function I_(e,t){const n=e[Jv];return(n?p_(n):e)[t]}function j_(e,t){if(!(t in e))return;let n=t_(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=t_(n)}}function N_(e){e.modified_||(e.modified_=!0,e.parent_&&N_(e.parent_))}function O_(e){e.copy_||(e.copy_=f_(e.base_,e.scope_.immer_.useStrictShallowCopy_))}s_(P_,(e,t)=>{M_[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),M_.deleteProperty=function(e,t){return M_.set.call(this,e,t,void 0)},M_.set=function(e,t,n){return P_.set.call(this,e[0],t,n,e[0])};function B_(e,t){const n=h_(e)?x_("MapSet").proxyMap_(e,t):d_(e)?x_("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:b_(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,o=P_;n&&(r=[i],o=M_);const{revoke:a,proxy:s}=Proxy.revocable(r,o);return i.draft_=s,i.revoke_=a,s}(e,t);return(t?t.scope_:b_()).drafts_.push(n),n}function L_(e){if(!i_(e)||y_(e))return e;const t=e[Jv];let n,i=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=f_(e,t.scope_.immer_.useStrictShallowCopy_),i=t.scope_.immer_.shouldUseStrictIteration()}else n=f_(e,!0);return s_(n,(e,t)=>{u_(n,e,L_(t))},i),t&&(t.finalized_=!1),n}var z_=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const i=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return i.produce(e,e=>t.call(this,e,...o))}}let i;if("function"!==typeof t&&e_(6),void 0!==n&&"function"!==typeof n&&e_(7),i_(e)){const r=C_(this),o=B_(e,void 0);let a=!0;try{i=t(o),a=!1}finally{a?D_(r):E_(r)}return w_(r,n),S_(i,r)}if(!e||"object"!==typeof e){if(i=t(e),void 0===i&&(i=e),i===$v&&(i=void 0),this.autoFreeze_&&m_(i,!0),n){const t=[],r=[];x_("Patches").generateReplacementPatches_(e,i,t,r),n(t,r)}return i}e_(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.produceWithPatches(n,t=>e(t,...r))};let i,r;return[this.produce(e,n,(e,t)=>{i=e,r=t}),i,r]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){i_(e)||e_(8),n_(e)&&(e=function(e){n_(e)||e_(10);return L_(e)}(e));const t=C_(this),n=B_(e,void 0);return n[Jv].isManual_=!0,E_(t),n}finishDraft(e,t){const n=e&&e[Jv];n&&n.isManual_||e_(9);const{scope_:i}=n;return w_(i,t),S_(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=x_("Patches").applyPatches_;return n_(e)?i(e,t):this.produce(e,e=>i(e,t))}};z_.produce;var R_={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},V_=ev({name:"tooltip",initialState:{itemInteraction:{click:R_,hover:R_},axisInteraction:{click:R_,hover:R_},keyboardInteraction:R_,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Zy()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:i}=t.payload,r=by(e).tooltipItemPayloads.indexOf(n);r>-1&&(e.tooltipItemPayloads[r]=i)},prepare:Zy()},removeTooltipEntrySettings:{reducer(e,t){var n=by(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Zy()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:U_,replaceTooltipEntrySettings:q_,removeTooltipEntrySettings:Z_,setTooltipSettingsState:H_,setActiveMouseOverItemIndex:G_,mouseLeaveItem:W_,mouseLeaveChart:Y_,setActiveClickItemIndex:X_,setMouseOverAxisIndex:K_,setMouseClickAxisIndex:$_,setSyncInteraction:Q_,setKeyboardInteraction:J_}=V_.actions,ex=V_.reducer,tx=ev({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:i}=t.payload;null!=n&&(e.dataStartIndex=n),null!=i&&(e.dataEndIndex=i)}}}),{setChartData:nx,setDataStartEndIndexes:ix,setComputedData:rx}=tx.actions,ox=tx.reducer,ax=ev({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,i,r,o;e.margin.top=null!==(n=t.payload.top)&&void 0!==n?n:0,e.margin.right=null!==(i=t.payload.right)&&void 0!==i?i:0,e.margin.bottom=null!==(r=t.payload.bottom)&&void 0!==r?r:0,e.margin.left=null!==(o=t.payload.left)&&void 0!==o?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:sx,setLayout:lx,setChartSize:cx,setScale:ux}=ax.actions,hx=ax.reducer;function dx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var px=e=>Array.isArray(e)?e:[e];function fx(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const n=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var mx="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function gx(){return{s:0,v:void 0,o:null,p:null}}function yx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=t;let r,o=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const i=e.get(n);void 0===i?(t=gx(),e.set(n,t)):t=i}else{let e=t.p;null===e&&(t.p=e=new Map);const i=e.get(n);void 0===i?(t=gx(),e.set(n,t)):t=i}}const s=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),o++,i){var c,u,h;const e=null!==(c=null===(u=r)||void 0===u||null===(h=u.deref)||void 0===h?void 0:h.call(u))&&void 0!==c?c:r;null!=e&&i(e,l)&&(l=e,0!==o&&o--);r="object"===typeof l&&null!==l||"function"===typeof l?new mx(l):l}return s.s=1,s.v=l,l}return a.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function vx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r="function"===typeof e?{memoize:e,memoizeOptions:n}:e,o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i,o=0,a=0,s={},l=t.pop();"object"===typeof l&&(s=l,l=t.pop()),dx(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=Fe(Fe({},r),s),{memoize:u,memoizeOptions:h=[],argsMemoize:d=yx,argsMemoizeOptions:p=[],devModeChecks:f={}}=c,m=px(h),g=px(p),y=fx(t),v=u(function(){return o++,l.apply(null,arguments)},...m);const _=d(function(){a++;const e=function(e,t){const n=[],{length:i}=e;for(let r=0;r<i;r++)n.push(e[r].apply(null,t));return n}(y,arguments);return i=v.apply(null,e),i},...g);return Object.assign(_,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>i,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:u,argsMemoize:d})};return Object.assign(o,{withTypes:()=>o}),o}var _x=vx(yx),xx=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_x;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),i=t(n.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((e,t,i)=>(e[n[i]]=t,e),{})});return i},{withTypes:()=>xx}),bx=n(8443),wx=(0,o.createContext)(null),Dx=e=>e,Ex=()=>{var e=(0,o.useContext)(wx);return e?e.store.dispatch:Dx},Cx=()=>{},Ax=()=>Cx,Sx=(e,t)=>e===t;function Tx(e){var t=(0,o.useContext)(wx);return(0,bx.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:Ax,t?t.store.getState:Cx,t?t.store.getState:Cx,t?e:Cx,Sx)}var Fx=n(3821),kx=n.n(Fx),Px=e=>e.legend.settings;_x([e=>e.legend.payload,Px],(e,t)=>{var{itemSorter:n}=t,i=e.flat(1);return n?kx()(i,n):i});function Mx(e,t){if((r=e.length)>1)for(var n,i,r,o=1,a=e[t[0]],s=a.length;o<r;++o)for(i=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}Array.prototype.slice;function Ix(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function jx(e){return function(){return e}}function Nx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Ox(e,t){return e[t]}function Bx(e){const t=[];return t.key=e,t}function Lx(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function zx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Rx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zx(Object(n),!0).forEach(function(t){Vx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ux(e,t,n){return Zm(e)||Zm(t)?n:Bm(t)?km()(e,t,n):"function"===typeof t?t(e):n}var qx=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Zx=(e,t,n,i)=>{if(i)return e.map(e=>e.coordinate);var r,o,a=e.map(e=>(e.coordinate===t&&(r=!0),e.coordinate===n&&(o=!0),e.coordinate));return r||a.push(t),o||a.push(n),a},Hx=(e,t,n)=>{if(!e)return null;var{duplicateDomain:i,type:r,range:o,scale:a,realScaleType:s,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:d,axisType:p}=e;if(!a)return null;var f="scaleBand"===s&&a.bandwidth?a.bandwidth()/2:2,m=(t||n)&&"category"===r&&a.bandwidth?a.bandwidth()/f:0;if(m="angleAxis"===p&&o&&o.length>=2?2*Im(o[0]-o[1])*m:m,t&&(h||d)){var g=(h||d||[]).map((e,t)=>{var n=i?i.indexOf(e):e;return{coordinate:a(n)+m,value:e,offset:m,index:t}});return g.filter(e=>!jm(e.coordinate))}return l&&c?c.map((e,t)=>({coordinate:a(e)+m,value:e,index:t,offset:m})):a.ticks&&!n&&null!=u?a.ticks(u).map((e,t)=>({coordinate:a(e)+m,value:e,offset:m,index:t})):a.domain().map((e,t)=>({coordinate:a(e)+m,value:i?i[e]:e,index:t,offset:m}))},Gx=1e-4,Wx={sign:e=>{var t,n=e.length;if(!(n<=0)){var i=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==i||i<=0))for(var r=0;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=e[s],c=null===l||void 0===l?void 0:l[r];if(null!=c){var u=c[1],h=c[0],d=jm(u)?h:u;d>=0?(c[0]=o,c[1]=o+d,o=u):(c[0]=a,c[1]=a+d,a=u)}}}},expand:function(e,t){if((i=e.length)>0){for(var n,i,r,o=0,a=e[0].length;o<a;++o){for(r=n=0;n<i;++n)r+=e[n][o][1]||0;if(r)for(n=0;n<i;++n)e[n][o][1]/=r}Mx(e,t)}},none:Mx,silhouette:function(e,t){if((n=e.length)>0){for(var n,i=0,r=e[t[0]],o=r.length;i<o;++i){for(var a=0,s=0;a<n;++a)s+=e[a][i][1]||0;r[i][1]+=r[i][0]=-s/2}Mx(e,t)}},wiggle:function(e,t){if((r=e.length)>0&&(i=(n=e[t[0]]).length)>0){for(var n,i,r,o=0,a=1;a<i;++a){for(var s=0,l=0,c=0;s<r;++s){for(var u=e[t[s]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];d+=(f[a][1]||0)-(f[a-1][1]||0)}l+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,Mx(e,t)}},positive:e=>{var t,n=e.length;if(!(n<=0)){var i=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==i||i<=0))for(var r=0;r<i;++r)for(var o=0,a=0;a<n;++a){var s=e[a],l=null===s||void 0===s?void 0:s[r];if(null!=l){var c=jm(l[1])?l[0]:l[1];c>=0?(l[0]=o,l[1]=o+c,o=l[1]):(l[0]=0,l[1]=0)}}}}},Yx=(e,t,n)=>{var i,r=null!==(i=Wx[n])&&void 0!==i?i:Mx,o=function(){var e=jx([]),t=Nx,n=Mx,i=Ox;function r(r){var o,a,s=Array.from(e.apply(this,arguments),Bx),l=s.length,c=-1;for(const e of r)for(o=0,++c;o<l;++o)(s[o][c]=[0,+i(e,s[o].key,c,r)]).data=e;for(o=0,a=Ix(t(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return r.keys=function(t){return arguments.length?(e="function"===typeof t?t:jx(Array.from(t)),r):e},r.value=function(e){return arguments.length?(i="function"===typeof e?e:jx(+e),r):i},r.order=function(e){return arguments.length?(t=null==e?Nx:"function"===typeof e?e:jx(Array.from(e)),r):t},r.offset=function(e){return arguments.length?(n=null==e?Mx:e,r):n},r}().keys(t).value((e,t)=>Number(Ux(e,t,0))).order(Nx).offset(r),a=o(e);return a.forEach((n,i)=>{n.forEach((n,r)=>{var o=Ux(e[r],t[i],0);Array.isArray(o)&&2===o.length&&Om(o[0])&&Om(o[1])&&(n[0]=o[0],n[1]=o[1])})}),a};function Xx(e){var{axis:t,ticks:n,bandSize:i,entry:r,index:o,dataKey:a}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Zm(r[t.dataKey])){var s=qm(n,"value",r[t.dataKey]);if(s)return s.coordinate+i/2}return n[o]?n[o].coordinate+i/2:null}var l=Ux(r,Zm(a)?t.dataKey:a);return Zm(l)?null:t.scale(l)}var Kx=(e,t,n)=>{if(null!=e)return(e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]])(Object.keys(e).reduce((i,r)=>{var o=e[r];if(!o)return i;var{stackedData:a}=o,s=a.reduce((e,i)=>{var r=(e=>{var t=e.flat(2).filter(Om);return[Math.min(...t),Math.max(...t)]})(Lx(i,t,n));return tg(r[0])&&tg(r[1])?[Math.min(e[0],r[0]),Math.max(e[1],r[1])]:e},[1/0,-1/0]);return[Math.min(s[0],i[0]),Math.max(s[1],i[1])]},[1/0,-1/0]))},$x=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qx=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Jx=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&t&&t.length>=2){for(var r=kx()(t,e=>e.coordinate),o=1/0,a=1,s=r.length;a<s;a++){var l=r[a],c=r[a-1];o=Math.min(((null===l||void 0===l?void 0:l.coordinate)||0)-((null===c||void 0===c?void 0:c.coordinate)||0),o)}return o===1/0?0:o}return n?void 0:0};function eb(e){var{tooltipEntrySettings:t,dataKey:n,payload:i,value:r,name:o}=e;return Rx(Rx({},t),{},{dataKey:n,payload:i,value:r,name:o})}function tb(e,t){return e?String(e):"string"===typeof t?t:void 0}var nb=e=>e.layout.width,ib=e=>e.layout.height,rb=e=>e.layout.scale,ob=e=>e.layout.margin,ab=_x(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),sb=_x(e=>e.cartesianAxis.yAxis,e=>Object.values(e));function lb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lb(Object(n),!0).forEach(function(t){ub(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ub(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hb=_x([nb,ib,ob,e=>e.brush.height,function(e){return sb(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return sb(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return ab(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return ab(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},Px,e=>e.legend.size],(e,t,n,i,r,o,a,s,l,c)=>{var u={left:(n.left||0)+r,right:(n.right||0)+o},h=cb(cb({},{top:(n.top||0)+a,bottom:(n.bottom||0)+s}),u),d=h.bottom;h.bottom+=i,h=((e,t,n)=>{if(t&&n){var{width:i,height:r}=n,{align:o,verticalAlign:a,layout:s}=t;if(("vertical"===s||"horizontal"===s&&"middle"===a)&&"center"!==o&&Om(e[o]))return Rx(Rx({},e),{},{[o]:e[o]+(i||0)});if(("horizontal"===s||"vertical"===s&&"center"===o)&&"middle"!==a&&Om(e[a]))return Rx(Rx({},e),{},{[a]:e[a]+(r||0)})}return e})(h,l,c);var p=e-h.left-h.right,f=t-h.top-h.bottom;return cb(cb({brushBottom:d},h),{},{width:Math.max(p,0),height:Math.max(f,0)})}),db=_x(hb,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),pb=_x(nb,ib,(e,t)=>({x:0,y:0,width:e,height:t})),fb=(0,o.createContext)(null),mb=()=>null!=(0,o.useContext)(fb),gb=e=>e.brush,yb=_x([gb,hb,ob],(e,t,n)=>({height:e.height,x:Om(e.x)?e.x:t.left,y:Om(e.y)?e.y:t.top+t.height+t.brushBottom-((null===n||void 0===n?void 0:n.bottom)||0),width:Om(e.width)?e.width:t.width}));function vb(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var _b=()=>{var e,t=mb(),n=Tx(db),i=Tx(yb),r=null===(e=Tx(gb))||void 0===e?void 0:e.padding;return t&&i&&r?{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}:n},xb={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},bb=()=>{var e;return null!==(e=Tx(hb))&&void 0!==e?e:xb},wb=()=>Tx(nb),Db=()=>Tx(ib),Eb=e=>e.layout.layoutType,Cb=()=>Tx(Eb),Ab=e=>{var t=Ex(),n=mb(),{width:i,height:r}=e,a=cg(),s=i,l=r;return a&&(s=a.width>0?a.width:i,l=a.height>0?a.height:r),(0,o.useEffect)(()=>{!n&&ng(s)&&ng(l)&&t(cx({width:s,height:l}))},[t,n,s,l]),null},Sb=n(9859),Tb=n.n(Sb);function Fb(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function kb(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class Pb extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nb;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(Mb(this,e))}has(e){return super.has(Mb(this,e))}set(e,t){return super.set(Ib(this,e),t)}delete(e){return super.delete(jb(this,e))}}Set;function Mb(e,t){let{_intern:n,_key:i}=e;const r=i(t);return n.has(r)?n.get(r):t}function Ib(e,t){let{_intern:n,_key:i}=e;const r=i(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function jb(e,t){let{_intern:n,_key:i}=e;const r=i(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Nb(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Ob=Symbol("implicit");function Bb(){var e=new Pb,t=[],n=[],i=Ob;function r(r){let o=e.get(r);if(void 0===o){if(i!==Ob)return i;e.set(r,o=t.push(r)-1)}return n[o%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Pb;for(const i of n)e.has(i)||e.set(i,t.push(i)-1);return r},r.range=function(e){return arguments.length?(n=Array.from(e),r):n.slice()},r.unknown=function(e){return arguments.length?(i=e,r):i},r.copy=function(){return Bb(t,n).unknown(i)},Fb.apply(r,arguments),r}function Lb(){var e,t,n=Bb().unknown(void 0),i=n.domain,r=n.range,o=0,a=1,s=!1,l=0,c=0,u=.5;function h(){var n=i().length,h=a<o,d=h?a:o,p=h?o:a;e=(p-d)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),d+=(p-d-e*(n-l))*u,t=e*(1-l),s&&(d=Math.round(d),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}(n).map(function(t){return d+e*t});return r(h?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),h()):i()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return Lb(i(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},Fb.apply(h(),arguments)}function zb(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zb(t())},e}function Rb(){return zb(Lb.apply(null,arguments).paddingInner(1))}const Vb=Math.sqrt(50),Ub=Math.sqrt(10),qb=Math.sqrt(2);function Zb(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Vb?10:o>=Ub?5:o>=qb?2:1;let s,l,c;return r<0?(c=Math.pow(10,-r)/a,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*a,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?Zb(e,t,2*n):[s,l,c]}function Hb(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const i=t<e,[r,o,a]=i?Zb(t,e,n):Zb(e,t,n);if(!(o>=r))return[];const s=o-r+1,l=new Array(s);if(i)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(r+c)/-a;else for(let c=0;c<s;++c)l[c]=(r+c)*a;return l}function Gb(e,t,n){return Zb(e=+e,t=+t,n=+n)[2]}function Wb(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?Gb(t,e,n):Gb(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Yb(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xb(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kb(e){let t,n,i;function r(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<0?r=t+1:o=t}while(r<o)}return r}return 2!==e.length?(t=Yb,n=(t,n)=>Yb(e(t),n),i=(t,n)=>e(t)-n):(t=e===Yb||e===Xb?e:$b,n=e,i=e),{left:r,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=r(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&i(e[o-1],t)>-i(e[o],t)?o-1:o},right:function(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<o){if(0!==t(i,i))return o;do{const t=r+o>>>1;n(e[t],i)<=0?r=t+1:o=t}while(r<o)}return r}}}function $b(){return 0}function Qb(e){return null===e?NaN:+e}const Jb=Kb(Yb),ew=Jb.right,tw=(Jb.left,Kb(Qb).center,ew);function nw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iw(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function rw(){}var ow=.7,aw=1/ow,sw="\\s*([+-]?\\d+)\\s*",lw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uw=/^#([0-9a-f]{3,8})$/,hw=new RegExp("^rgb\\(".concat(sw,",").concat(sw,",").concat(sw,"\\)$")),dw=new RegExp("^rgb\\(".concat(cw,",").concat(cw,",").concat(cw,"\\)$")),pw=new RegExp("^rgba\\(".concat(sw,",").concat(sw,",").concat(sw,",").concat(lw,"\\)$")),fw=new RegExp("^rgba\\(".concat(cw,",").concat(cw,",").concat(cw,",").concat(lw,"\\)$")),mw=new RegExp("^hsl\\(".concat(lw,",").concat(cw,",").concat(cw,"\\)$")),gw=new RegExp("^hsla\\(".concat(lw,",").concat(cw,",").concat(cw,",").concat(lw,"\\)$")),yw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vw(){return this.rgb().formatHex()}function _w(){return this.rgb().formatRgb()}function xw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?bw(t):3===n?new Ew(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ww(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ww(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=hw.exec(e))?new Ew(t[1],t[2],t[3],1):(t=dw.exec(e))?new Ew(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=pw.exec(e))?ww(t[1],t[2],t[3],t[4]):(t=fw.exec(e))?ww(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=mw.exec(e))?kw(t[1],t[2]/100,t[3]/100,1):(t=gw.exec(e))?kw(t[1],t[2]/100,t[3]/100,t[4]):yw.hasOwnProperty(e)?bw(yw[e]):"transparent"===e?new Ew(NaN,NaN,NaN,0):null}function bw(e){return new Ew(e>>16&255,e>>8&255,255&e,1)}function ww(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ew(e,t,n,i)}function Dw(e,t,n,i){return 1===arguments.length?((r=e)instanceof rw||(r=xw(r)),r?new Ew((r=r.rgb()).r,r.g,r.b,r.opacity):new Ew):new Ew(e,t,n,null==i?1:i);var r}function Ew(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Cw(){return"#".concat(Fw(this.r)).concat(Fw(this.g)).concat(Fw(this.b))}function Aw(){const e=Sw(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Tw(this.r),", ").concat(Tw(this.g),", ").concat(Tw(this.b)).concat(1===e?")":", ".concat(e,")"))}function Sw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fw(e){return((e=Tw(e))<16?"0":"")+e.toString(16)}function kw(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mw(e,t,n,i)}function Pw(e){if(e instanceof Mw)return new Mw(e.h,e.s,e.l,e.opacity);if(e instanceof rw||(e=xw(e)),!e)return new Mw;if(e instanceof Mw)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=t===o?(n-i)/s+6*(n<i):n===o?(i-t)/s+2:(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Mw(a,s,l,e.opacity)}function Mw(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Iw(e){return(e=(e||0)%360)<0?e+360:e}function jw(e){return Math.max(0,Math.min(1,e||0))}function Nw(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Ow(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}nw(rw,xw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vw,formatHex:vw,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Pw(this).formatHsl()},formatRgb:_w,toString:_w}),nw(Ew,Dw,iw(rw,{brighter(e){return e=null==e?aw:Math.pow(aw,e),new Ew(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?ow:Math.pow(ow,e),new Ew(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ew(Tw(this.r),Tw(this.g),Tw(this.b),Sw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cw,formatHex:Cw,formatHex8:function(){return"#".concat(Fw(this.r)).concat(Fw(this.g)).concat(Fw(this.b)).concat(Fw(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Aw,toString:Aw})),nw(Mw,function(e,t,n,i){return 1===arguments.length?Pw(e):new Mw(e,t,n,null==i?1:i)},iw(rw,{brighter(e){return e=null==e?aw:Math.pow(aw,e),new Mw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?ow:Math.pow(ow,e),new Mw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ew(Nw(e>=240?e-240:e+120,r,i),Nw(e,r,i),Nw(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Mw(Iw(this.h),jw(this.s),jw(this.l),Sw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sw(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Iw(this.h),", ").concat(100*jw(this.s),"%, ").concat(100*jw(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Bw=e=>()=>e;function Lw(e,t){return function(n){return e+n*t}}function zw(e){return 1===(e=+e)?Rw:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):Bw(isNaN(t)?n:t)}}function Rw(e,t){var n=t-e;return n?Lw(e,n):Bw(isNaN(e)?t:e)}const Vw=function e(t){var n=zw(t);function i(e,t){var i=n((e=Dw(e)).r,(t=Dw(t)).r),r=n(e.g,t.g),o=n(e.b,t.b),a=Rw(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=o(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);function Uw(e){return function(t){var n,i,r=t.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=Dw(t[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=e(o),a=e(a),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=a(e),i.b=s(e),i+""}}}Uw(function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return Ow((n-i/t)*t,a,r,o,s)}}),Uw(function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return Ow((n-i/t)*t,r,o,a,s)}});function qw(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=$w(e[n],t[n]);for(;n<i;++n)a[n]=t[n];return function(e){for(n=0;n<r;++n)a[n]=o[n](e);return a}}function Zw(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Hw(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Gw(e,t){var n,i={},r={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?i[n]=$w(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var Ww=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yw=new RegExp(Ww.source,"g");function Xw(e,t){var n,i,r,o=Ww.lastIndex=Yw.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Ww.exec(e))&&(i=Yw.exec(t));)(r=i.index)>o&&(r=t.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Hw(n,i)})),o=Yw.lastIndex;return o<t.length&&(r=t.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function Kw(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(o){for(n=0;n<i;++n)r[n]=e[n]*(1-o)+t[n]*o;return r}}function $w(e,t){var n,i,r=typeof t;return null==t||"boolean"===r?Bw(t):("number"===r?Hw:"string"===r?(n=xw(t))?(t=n,Vw):Xw:t instanceof xw?Vw:t instanceof Date?Zw:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?qw:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Gw:Hw:Kw))(e,t)}function Qw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Jw(e){return+e}var eD=[0,1];function tD(e){return e}function nD(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function iD(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=nD(r,i),o=n(a,o)):(i=nD(i,r),o=n(o,a)),function(e){return o(i(e))}}function rD(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=nD(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=tw(e,t,1,i)-1;return o[n](r[n](t))}}function oD(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function aD(){var e,t,n,i,r,o,a=eD,s=eD,l=$w,c=tD;function u(){var e=Math.min(a.length,s.length);return c!==tD&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),i=e>2?rD:iD,r=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(r||(r=i(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=i(s,a.map(e),Hw)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,Jw),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=Qw,u()},h.clamp=function(e){return arguments.length?(c=!!e||tD,u()):c!==tD},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function sD(){return aD()(tD,tD)}var lD,cD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uD(e){if(!(t=cD.exec(e)))throw new Error("invalid format: "+e);var t;return new hD({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function hD(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function dD(e,t){if(!isFinite(e)||0===e)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function pD(e){return(e=dD(Math.abs(e)))?e[1]:NaN}function fD(e,t){var n=dD(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}uD.prototype=hD.prototype,hD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const mD={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fD(100*e,t),r:fD,s:function(e,t){var n=dD(e,t);if(!n)return lD=void 0,e.toPrecision(t);var i=n[0],r=n[1],o=r-(lD=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+dD(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gD(e){return e}var yD,vD,_D,xD=Array.prototype.map,bD=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function wD(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?gD:(t=xD.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,o=[],a=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(e.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?gD:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(xD.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e,t){var n=(e=uD(e)).fill,h=e.align,d=e.sign,p=e.symbol,f=e.zero,m=e.width,g=e.comma,y=e.precision,v=e.trim,_=e.type;"n"===_?(g=!0,_="g"):mD[_]||(void 0===y&&(y=12),v=!0,_="g"),(f||"0"===n&&"="===h)&&(f=!0,n="0",h="=");var x=(t&&void 0!==t.prefix?t.prefix:"")+("$"===p?r:"#"===p&&/[boxX]/.test(_)?"0"+_.toLowerCase():""),b=("$"===p?o:/[%p]/.test(_)?l:"")+(t&&void 0!==t.suffix?t.suffix:""),w=mD[_],D=/[defgprs%]/.test(_);function E(e){var t,r,o,l=x,p=b;if("c"===_)p=w(e)+p,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),y),v&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==d&&(E=!1),l=(E?"("===d?d:c:"-"===d||"("===d?"":d)+l,p=("s"!==_||isNaN(e)||void 0===lD?"":bD[8+lD/3])+p+(E&&"("===d?")":""),D)for(t=-1,r=e.length;++t<r;)if(48>(o=e.charCodeAt(t))||o>57){p=(46===o?a+e.slice(t+1):e.slice(t))+p,e=e.slice(0,t);break}}g&&!f&&(e=i(e,1/0));var C=l.length+e.length+p.length,A=C<m?new Array(m-C+1).join(n):"";switch(g&&f&&(e=i(A+e,A.length?m-p.length:1/0),A=""),h){case"<":e=l+e+p+A;break;case"=":e=l+A+e+p;break;case"^":e=A.slice(0,C=A.length>>1)+l+e+p+A.slice(C);break;default:e=A+l+e+p}return s(e)}return y=void 0===y?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),E.toString=function(){return e+""},E}return{format:h,formatPrefix:function(e,t){var n=3*Math.max(-8,Math.min(8,Math.floor(pD(t)/3))),i=Math.pow(10,-n),r=h(((e=uD(e)).type="f",e),{suffix:bD[8+n/3]});return function(e){return r(i*e)}}}}function DD(e,t,n,i){var r,o=Wb(e,t,n);switch((i=uD(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pD(t)/3)))-pD(Math.abs(e)))}(o,a))||(i.precision=r),_D(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pD(t)-pD(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-pD(Math.abs(e)))}(o))||(i.precision=r-2*("%"===i.type))}return vD(i)}function ED(e){var t=e.domain;return e.ticks=function(e){var n=t();return Hb(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return DD(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(r=l,l=c,c=r,r=a,a=s,s=r);u-- >0;){if((r=Gb(l,c,n))===i)return o[a]=l,o[s]=c,t(o);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function CD(){var e=sD();return e.copy=function(){return oD(e,CD())},Fb.apply(e,arguments),ED(e)}function AD(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,Jw),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return AD(e).unknown(t)},e=arguments.length?Array.from(e,Jw):[0,1],ED(n)}function SD(e,t){var n,i=0,r=(e=e.slice()).length-1,o=e[i],a=e[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),e[i]=t.floor(o),e[r]=t.ceil(a),e}function TD(e){return Math.log(e)}function FD(e){return Math.exp(e)}function kD(e){return-Math.log(-e)}function PD(e){return-Math.exp(-e)}function MD(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ID(e){return(t,n)=>-e(-t,n)}function jD(e){const t=e(TD,FD),n=t.domain;let i,r,o=10;function a(){return i=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),r=function(e){return 10===e?MD:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(i=ID(i),r=ID(r),e(kD,PD)):e(TD,FD),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let c,u,h=i(a),d=i(s);const p=null==e?10:+e;let f=[];if(!(o%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(c=1;c<o;++c)if(u=h<0?c/r(-h):c*r(h),!(u<a)){if(u>s)break;f.push(u)}}else for(;h<=d;++h)for(c=o-1;c>=1;--c)if(u=h>0?c/r(-h):c*r(h),!(u<a)){if(u>s)break;f.push(u)}2*f.length<p&&(f=Hb(a,s,p))}else f=Hb(h,d,Math.min(d-h,p)).map(r);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=uD(n)).precision||(n.trim=!0),n=vD(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/r(Math.round(i(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(SD(n(),{floor:e=>r(Math.floor(i(e))),ceil:e=>r(Math.ceil(i(e)))})),t}function ND(){const e=jD(aD()).domain([1,10]);return e.copy=()=>oD(e,ND()).base(e.base()),Fb.apply(e,arguments),e}function OD(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function BD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LD(e){var t=1,n=e(OD(t),BD(t));return n.constant=function(n){return arguments.length?e(OD(t=+n),BD(t)):t},ED(n)}function zD(){var e=LD(aD());return e.copy=function(){return oD(e,zD()).constant(e.constant())},Fb.apply(e,arguments)}function RD(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function VD(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function UD(e){return e<0?-e*e:e*e}function qD(e){var t=e(tD,tD),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(tD,tD):.5===n?e(VD,UD):e(RD(n),RD(1/n)):n},ED(t)}function ZD(){var e=qD(aD());return e.copy=function(){return oD(e,ZD()).exponent(e.exponent())},Fb.apply(e,arguments),e}function HD(){return ZD.apply(null,arguments).exponent(.5)}function GD(e){return Math.sign(e)*e*e}function WD(){var e,t=sD(),n=[0,1],i=!1;function r(n){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(r)?e:i?Math.round(r):r}return r.invert=function(e){return t.invert(GD(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain()},r.range=function(e){return arguments.length?(t.range((n=Array.from(e,Jw)).map(GD)),r):n.slice()},r.rangeRound=function(e){return r.range(e).round(!0)},r.round=function(e){return arguments.length?(i=!!e,r):i},r.clamp=function(e){return arguments.length?(t.clamp(e),r):t.clamp()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return WD(t.domain(),n).round(i).clamp(t.clamp()).unknown(e)},Fb.apply(r,arguments),ED(r)}function YD(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function XD(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function KD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yb;if(e===Yb)return $D;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||0===i?i:(0===e(n,n))-(0===e(t,t))}}function $D(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function QD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=void 0===r?$D:KD(r);i>n;){if(i-n>600){const o=i-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);QD(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(i,Math.floor(t+(o-a)*l/o+c)),r)}const o=e[t];let a=n,s=i;for(JD(e,n,t),r(e[i],o)>0&&JD(e,n,i);a<s;){for(JD(e,a,s),++a,--s;r(e[a],o)<0;)++a;for(;r(e[s],o)>0;)--s}0===r(e[n],o)?JD(e,n,s):(++s,JD(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}return e}function JD(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function eE(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i=+i)>=i&&(yield i)}}(e,n)),(i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return XD(e);if(t>=1)return YD(e);var i,r=(i-1)*t,o=Math.floor(r),a=YD(QD(e,o).subarray(0,o+1));return a+(XD(e.subarray(o+1))-a)*(r-o)}}function tE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qb;if((i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(r-o)}}function nE(){var e,t=[],n=[],i=[];function r(){var e=0,r=Math.max(1,n.length);for(i=new Array(r-1);++e<r;)i[e-1]=tE(t,e/r);return o}function o(t){return null==t||isNaN(t=+t)?e:n[tw(i,t)]}return o.invertExtent=function(e){var r=n.indexOf(e);return r<0?[NaN,NaN]:[r>0?i[r-1]:t[0],r<i.length?i[r]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Yb),r()},o.range=function(e){return arguments.length?(n=Array.from(e),r()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return i.slice()},o.copy=function(){return nE().domain(t).range(n).unknown(e)},Fb.apply(o,arguments)}function iE(){var e,t=0,n=1,i=1,r=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[tw(r,t,0,i)]:e}function s(){var e=-1;for(r=new Array(i);++e<i;)r[e]=((e+1)*n-(e-i)*t)/(i+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},a.range=function(e){return arguments.length?(i=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,r[0]]:a>=i?[r[i-1],n]:[r[a-1],r[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return r.slice()},a.copy=function(){return iE().domain([t,n]).range(o).unknown(e)},Fb.apply(ED(a),arguments)}function rE(){var e,t=[.5],n=[0,1],i=1;function r(r){return null!=r&&r<=r?n[tw(t,r,0,i)]:e}return r.domain=function(e){return arguments.length?(t=Array.from(e),i=Math.min(t.length,n.length-1),r):t.slice()},r.range=function(e){return arguments.length?(n=Array.from(e),i=Math.min(t.length,n.length-1),r):n.slice()},r.invertExtent=function(e){var i=n.indexOf(e);return[t[i-1],t[i]]},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return rE().domain(t).range(n).unknown(e)},Fb.apply(r,arguments)}!function(e){yD=wD(e),vD=yD.format,_D=yD.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const oE=1e3,aE=6e4,sE=36e5,lE=864e5,cE=6048e5,uE=2592e6,hE=31536e6,dE=new Date,pE=new Date;function fE(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=t=>(e(t=new Date(+t)),t),r.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),r.round=e=>{const t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),r.range=(n,i,o)=>{const a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<i);return a},r.filter=n=>fE(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,i)=>{if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}),n&&(r.count=(t,i)=>(dE.setTime(+t),pE.setTime(+i),e(dE),e(pE),Math.floor(n(dE,pE))),r.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?t=>i(t)%e===0:t=>r.count(0,t)%e===0):r:null)),r}const mE=fE(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mE.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?fE(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):mE:null);mE.range;const gE=fE(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oE)},(e,t)=>(t-e)/oE,e=>e.getUTCSeconds()),yE=(gE.range,fE(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oE)},(e,t)=>{e.setTime(+e+t*aE)},(e,t)=>(t-e)/aE,e=>e.getMinutes())),vE=(yE.range,fE(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*aE)},(e,t)=>(t-e)/aE,e=>e.getUTCMinutes())),_E=(vE.range,fE(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oE-e.getMinutes()*aE)},(e,t)=>{e.setTime(+e+t*sE)},(e,t)=>(t-e)/sE,e=>e.getHours())),xE=(_E.range,fE(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*sE)},(e,t)=>(t-e)/sE,e=>e.getUTCHours())),bE=(xE.range,fE(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*aE)/lE,e=>e.getDate()-1)),wE=(bE.range,fE(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lE,e=>e.getUTCDate()-1)),DE=(wE.range,fE(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lE,e=>Math.floor(e/lE)));DE.range;function EE(e){return fE(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*aE)/cE)}const CE=EE(0),AE=EE(1),SE=EE(2),TE=EE(3),FE=EE(4),kE=EE(5),PE=EE(6);CE.range,AE.range,SE.range,TE.range,FE.range,kE.range,PE.range;function ME(e){return fE(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/cE)}const IE=ME(0),jE=ME(1),NE=ME(2),OE=ME(3),BE=ME(4),LE=ME(5),zE=ME(6),RE=(IE.range,jE.range,NE.range,OE.range,BE.range,LE.range,zE.range,fE(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),VE=(RE.range,fE(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),UE=(VE.range,fE(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));UE.every=e=>isFinite(e=Math.floor(e))&&e>0?fE(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;UE.range;const qE=fE(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());qE.every=e=>isFinite(e=Math.floor(e))&&e>0?fE(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;qE.range;function ZE(e,t,n,i,r,o){const a=[[gE,1,oE],[gE,5,5e3],[gE,15,15e3],[gE,30,3e4],[o,1,aE],[o,5,3e5],[o,15,9e5],[o,30,18e5],[r,1,sE],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,lE],[i,2,1728e5],[n,1,cE],[t,1,uE],[t,3,7776e6],[e,1,hE]];function s(t,n,i){const r=Math.abs(n-t)/i,o=Kb(e=>{let[,,t]=e;return t}).right(a,r);if(o===a.length)return e.every(Wb(t/hE,n/hE,i));if(0===o)return mE.every(Math.max(Wb(t,n,i),1));const[s,l]=a[r/a[o-1][2]<a[o][2]/r?o-1:o];return s.every(l)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const r=n&&"function"===typeof n.range?n:s(e,t,n),o=r?r.range(e,+t+1):[];return i?o.reverse():o},s]}const[HE,GE]=ZE(qE,VE,IE,DE,xE,vE),[WE,YE]=ZE(UE,RE,CE,bE,_E,yE);function XE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function KE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $E(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var QE,JE,eC,tC={"-":"",_:" ",0:"0"},nC=/^\s*\d+/,iC=/^%/,rC=/[\\^$*+?|[\]().{}]/g;function oC(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function aC(e){return e.replace(rC,"\\$&")}function sC(e){return new RegExp("^(?:"+e.map(aC).join("|")+")","i")}function lC(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function cC(e,t,n){var i=nC.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function uC(e,t,n){var i=nC.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function hC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function dC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function pC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function fC(e,t,n){var i=nC.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function mC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function gC(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function yC(e,t,n){var i=nC.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function vC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function _C(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function xC(e,t,n){var i=nC.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function bC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function wC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function DC(e,t,n){var i=nC.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function EC(e,t,n){var i=nC.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function CC(e,t,n){var i=nC.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function AC(e,t,n){var i=iC.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function SC(e,t,n){var i=nC.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function TC(e,t,n){var i=nC.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function FC(e,t){return oC(e.getDate(),t,2)}function kC(e,t){return oC(e.getHours(),t,2)}function PC(e,t){return oC(e.getHours()%12||12,t,2)}function MC(e,t){return oC(1+bE.count(UE(e),e),t,3)}function IC(e,t){return oC(e.getMilliseconds(),t,3)}function jC(e,t){return IC(e,t)+"000"}function NC(e,t){return oC(e.getMonth()+1,t,2)}function OC(e,t){return oC(e.getMinutes(),t,2)}function BC(e,t){return oC(e.getSeconds(),t,2)}function LC(e){var t=e.getDay();return 0===t?7:t}function zC(e,t){return oC(CE.count(UE(e)-1,e),t,2)}function RC(e){var t=e.getDay();return t>=4||0===t?FE(e):FE.ceil(e)}function VC(e,t){return e=RC(e),oC(FE.count(UE(e),e)+(4===UE(e).getDay()),t,2)}function UC(e){return e.getDay()}function qC(e,t){return oC(AE.count(UE(e)-1,e),t,2)}function ZC(e,t){return oC(e.getFullYear()%100,t,2)}function HC(e,t){return oC((e=RC(e)).getFullYear()%100,t,2)}function GC(e,t){return oC(e.getFullYear()%1e4,t,4)}function WC(e,t){var n=e.getDay();return oC((e=n>=4||0===n?FE(e):FE.ceil(e)).getFullYear()%1e4,t,4)}function YC(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+oC(t/60|0,"0",2)+oC(t%60,"0",2)}function XC(e,t){return oC(e.getUTCDate(),t,2)}function KC(e,t){return oC(e.getUTCHours(),t,2)}function $C(e,t){return oC(e.getUTCHours()%12||12,t,2)}function QC(e,t){return oC(1+wE.count(qE(e),e),t,3)}function JC(e,t){return oC(e.getUTCMilliseconds(),t,3)}function eA(e,t){return JC(e,t)+"000"}function tA(e,t){return oC(e.getUTCMonth()+1,t,2)}function nA(e,t){return oC(e.getUTCMinutes(),t,2)}function iA(e,t){return oC(e.getUTCSeconds(),t,2)}function rA(e){var t=e.getUTCDay();return 0===t?7:t}function oA(e,t){return oC(IE.count(qE(e)-1,e),t,2)}function aA(e){var t=e.getUTCDay();return t>=4||0===t?BE(e):BE.ceil(e)}function sA(e,t){return e=aA(e),oC(BE.count(qE(e),e)+(4===qE(e).getUTCDay()),t,2)}function lA(e){return e.getUTCDay()}function cA(e,t){return oC(jE.count(qE(e)-1,e),t,2)}function uA(e,t){return oC(e.getUTCFullYear()%100,t,2)}function hA(e,t){return oC((e=aA(e)).getUTCFullYear()%100,t,2)}function dA(e,t){return oC(e.getUTCFullYear()%1e4,t,4)}function pA(e,t){var n=e.getUTCDay();return oC((e=n>=4||0===n?BE(e):BE.ceil(e)).getUTCFullYear()%1e4,t,4)}function fA(){return"+0000"}function mA(){return"%"}function gA(e){return+e}function yA(e){return Math.floor(+e/1e3)}function vA(e){return new Date(e)}function _A(e){return e instanceof Date?+e:+new Date(+e)}function xA(e,t,n,i,r,o,a,s,l,c){var u=sD(),h=u.invert,d=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),_=c("%B"),x=c("%Y");function b(e){return(l(e)<e?p:s(e)<e?f:a(e)<e?m:o(e)<e?g:i(e)<e?r(e)<e?y:v:n(e)<e?_:x)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Array.from(e,_A)):d().map(vA)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?b:c(t)},u.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(SD(n,e)):u},u.copy=function(){return oD(u,xA(e,t,n,i,r,o,a,s,l,c))},u}function bA(){return Fb.apply(xA(WE,YE,UE,RE,CE,bE,_E,yE,gE,JE).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wA(){return Fb.apply(xA(HE,GE,qE,VE,IE,wE,xE,vE,gE,eC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function DA(){var e,t,n,i,r,o=0,a=1,s=tD,l=!1;function c(t){return null==t||isNaN(t=+t)?r:s(0===n?.5:(t=(i(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,i;return arguments.length?([n,i]=t,s=e(n,i),c):[s(0),s(1)]}}return c.domain=function(r){return arguments.length?([o,a]=r,e=i(o=+o),t=i(a=+a),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u($w),c.rangeRound=u(Qw),c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return i=r,e=r(o),t=r(a),n=e===t?0:1/(t-e),c}}function EA(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function CA(){var e=ED(DA()(tD));return e.copy=function(){return EA(e,CA())},kb.apply(e,arguments)}function AA(){var e=jD(DA()).domain([1,10]);return e.copy=function(){return EA(e,AA()).base(e.base())},kb.apply(e,arguments)}function SA(){var e=LD(DA());return e.copy=function(){return EA(e,SA()).constant(e.constant())},kb.apply(e,arguments)}function TA(){var e=qD(DA());return e.copy=function(){return EA(e,TA()).exponent(e.exponent())},kb.apply(e,arguments)}function FA(){return TA.apply(null,arguments).exponent(.5)}function kA(){var e=[],t=tD;function n(n){if(null!=n&&!isNaN(n=+n))return t((tw(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Yb),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,i)=>eE(e,i/t))},n.copy=function(){return kA(t).domain(e)},kb.apply(n,arguments)}function PA(){var e,t,n,i,r,o,a,s=0,l=.5,c=1,u=1,h=tD,d=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(u*e<u*t?i:r),h(d?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,i,r;return arguments.length?([n,i,r]=t,h=function(e,t){void 0===t&&(t=e,e=$w);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return o[t](e-t)}}(e,[n,i,r]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,l,c]=a,e=o(s=+s),t=o(l=+l),n=o(c=+c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,p):[s,l,c]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(h=e,p):h},p.range=f($w),p.rangeRound=f(Qw),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function MA(){var e=ED(PA()(tD));return e.copy=function(){return EA(e,MA())},kb.apply(e,arguments)}function IA(){var e=jD(PA()).domain([.1,1,10]);return e.copy=function(){return EA(e,IA()).base(e.base())},kb.apply(e,arguments)}function jA(){var e=LD(PA());return e.copy=function(){return EA(e,jA()).constant(e.constant())},kb.apply(e,arguments)}function NA(){var e=qD(PA());return e.copy=function(){return EA(e,NA()).exponent(e.exponent())},kb.apply(e,arguments)}function OA(){return NA.apply(null,arguments).exponent(.5)}!function(e){QE=function(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=sC(r),u=lC(r),h=sC(o),d=lC(o),p=sC(a),f=lC(a),m=sC(s),g=lC(s),y=sC(l),v=lC(l),_={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:FC,e:FC,f:jC,g:HC,G:WC,H:kC,I:PC,j:MC,L:IC,m:NC,M:OC,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:gA,s:yA,S:BC,u:LC,U:zC,V:VC,w:UC,W:qC,x:null,X:null,y:ZC,Y:GC,Z:YC,"%":mA},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:XC,e:XC,f:eA,g:hA,G:pA,H:KC,I:$C,j:QC,L:JC,m:tA,M:nA,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:gA,s:yA,S:iA,u:rA,U:oA,V:sA,w:lA,W:cA,x:null,X:null,y:uA,Y:dA,Z:fA,"%":mA},b={a:function(e,t,n){var i=p.exec(t.slice(n));return i?(e.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=y.exec(t.slice(n));return i?(e.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=g.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return E(e,t,n,i)},d:_C,e:_C,f:CC,g:mC,G:fC,H:bC,I:bC,j:xC,L:EC,m:vC,M:wC,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:yC,Q:SC,s:TC,S:DC,u:uC,U:hC,V:dC,w:cC,W:pC,x:function(e,t,i){return E(e,n,t,i)},X:function(e,t,n){return E(e,i,t,n)},y:mC,Y:fC,Z:gC,"%":AC};function w(e,t){return function(n){var i,r,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(r=tC[i=e.charAt(++s)])?i=e.charAt(++s):r="e"===i?" ":"0",(o=t[i])&&(i=o(n,r)),a.push(i),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function D(e,t){return function(n){var i,r,o=$E(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=KE($E(o.y,0,1))).getUTCDay(),i=r>4||0===r?jE.ceil(i):jE(i),i=wE.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=XE($E(o.y,0,1))).getDay(),i=r>4||0===r?AE.ceil(i):AE(i),i=bE.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?KE($E(o.y,0,1)).getUTCDay():XE($E(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,KE(o)):XE(o)}}function E(e,t,n,i){for(var r,o,a=0,s=t.length,l=n.length;a<s;){if(i>=l)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(o=b[r in tC?t.charAt(a++):r])||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return _.x=w(n,_),_.X=w(i,_),_.c=w(t,_),x.x=w(n,x),x.X=w(i,x),x.c=w(t,x),{format:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=D(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=D(e+="",!0);return t.toString=function(){return e},t}}}(e),JE=QE.format,QE.parse,eC=QE.utcFormat,QE.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var BA=e=>e.chartData,LA=_x([BA],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),zA=(e,t,n,i)=>i?LA(e):BA(e);function RA(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(tg(t)&&tg(n))return!0}return!1}function VA(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function UA(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var n,i,[r,o]=e;if(tg(r))n=r;else if("function"===typeof r)return;if(tg(o))i=o;else if("function"===typeof o)return;var a=[n,i];if(RA(a))return a}}var qA,ZA=n(8210),HA=n.n(ZA),GA=e=>e,WA={"@@functional/placeholder":!0},YA=e=>e===WA,XA=e=>function t(){return 0===arguments.length||1===arguments.length&&YA(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},KA=(e,t)=>1===e?t:XA(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=i.filter(e=>e!==WA).length;return o>=e?t(...i):KA(e-o,XA(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=i.map(e=>YA(e)?n.shift():e);return t(...o,...n)}))}),$A=(e,t)=>{for(var n=[],i=e;i<t;++i)n[i-e]=i;return n},QA=KA((qA=(e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)).length,qA);function JA(e){return 0===e?1:Math.floor(new(HA())(e).abs().log(10).toNumber())+1}function eS(e,t,n){for(var i=new(HA())(e),r=0,o=[];i.lt(t)&&r<1e5;)o.push(i.toNumber()),i=i.add(n),r++;return o}var tS=e=>{var[t,n]=e,[i,r]=[t,n];return t>n&&([i,r]=[n,t]),[i,r]},nS=(e,t,n)=>{if(e.lte(0))return new(HA())(0);var i=JA(e.toNumber()),r=new(HA())(10).pow(i),o=e.div(r),a=1!==i?.05:.1,s=new(HA())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(r);return t?new(HA())(s.toNumber()):new(HA())(Math.ceil(s.toNumber()))},iS=(e,t,n)=>{var i=new(HA())(1),r=new(HA())(e);if(!r.isint()&&n){var o=Math.abs(e);o<1?(i=new(HA())(10).pow(JA(e)-1),r=new(HA())(Math.floor(r.div(i).toNumber())).mul(i)):o>1&&(r=new(HA())(Math.floor(e)))}else 0===e?r=new(HA())(Math.floor((t-1)/2)):n||(r=new(HA())(Math.floor(e)));var a=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return GA;var i=t.reverse(),r=i[0],o=i.slice(1);return function(){return o.reduce((e,t)=>t(e),r(...arguments))}}(QA(e=>r.add(new(HA())(e-a).mul(i)).toNumber()),$A)(0,t)},rS=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(HA())(0),tickMin:new(HA())(0),tickMax:new(HA())(0)};var o,a=nS(new(HA())(t).sub(e).div(n-1),i,r);o=e<=0&&t>=0?new(HA())(0):(o=new(HA())(e).add(t).div(2)).sub(new(HA())(o).mod(a));var s=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new(HA())(t).sub(o).div(a).toNumber()),c=s+l+1;return c>n?rS(e,t,n,i,r+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:a,tickMin:o.sub(new(HA())(s).mul(a)),tickMax:o.add(new(HA())(l).mul(a))})},oS=e=>e.rootProps.stackOffset,aS=e=>e.rootProps.reverseStackOrder,sS=e=>e.options.chartName,lS=e=>e.rootProps.syncId,cS=e=>e.rootProps.syncMethod,uS=e=>e.options.eventEmitter;function hS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function dS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hS(Object(n),!0).forEach(function(t){pS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fS=Math.PI/180,mS=e=>180*e/Math.PI,gS=(e,t,n,i)=>({x:e+Math.cos(-fS*i)*n,y:t+Math.sin(-fS*i)*n}),yS=(e,t)=>{var{x:n,y:i}=e,{cx:r,cy:o}=t,a=((e,t)=>{var{x:n,y:i}=e,{x:r,y:o}=t;return Math.sqrt((n-r)**2+(i-o)**2)})({x:n,y:i},{x:r,y:o});if(a<=0)return{radius:a,angle:0};var s=(n-r)/a,l=Math.acos(s);return i>o&&(l=2*Math.PI-l),{radius:a,angle:mS(l),angleInRadian:l}},vS=(e,t)=>{var{startAngle:n,endAngle:i}=t,r=Math.floor(n/360),o=Math.floor(i/360);return e+360*Math.min(r,o)},_S=(e,t)=>{var{chartX:n,chartY:i}=e,{radius:r,angle:o}=yS({x:n,y:i},t),{innerRadius:a,outerRadius:s}=t;if(r<a||r>s)return null;if(0===r)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),r=Math.floor(n/360),o=Math.min(i,r);return{startAngle:t-360*o,endAngle:n-360*o}})(t),h=o;if(c<=u){for(;h>u;)h-=360;for(;h<c;)h+=360;l=h>=c&&h<=u}else{for(;h>c;)h-=360;for(;h<u;)h+=360;l=h>=u&&h<=c}return l?dS(dS({},t),{},{radius:r,angle:vS(h,t)}):null},xS={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},bS=!0,wS=0,DS=!1,ES="auto",CS=!0,AS="category",SS=(xS.axis,!1),TS=!0,FS=0,kS="auto",PS=!0,MS=5,IS="number",jS=(xS.axis,(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t}),NS={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:wS,includeHidden:!1,name:void 0,reversed:DS,scale:ES,tick:CS,tickCount:void 0,ticks:void 0,type:AS,unit:void 0},OS={allowDataOverflow:SS,allowDecimals:!1,allowDuplicatedCategory:TS,dataKey:void 0,domain:void 0,id:FS,includeHidden:!1,name:void 0,reversed:!1,scale:kS,tick:PS,tickCount:MS,ticks:void 0,type:IS,unit:void 0},BS={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:bS,dataKey:void 0,domain:void 0,id:wS,includeHidden:!1,name:void 0,reversed:!1,scale:ES,tick:CS,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},LS={allowDataOverflow:SS,allowDecimals:!1,allowDuplicatedCategory:TS,dataKey:void 0,domain:void 0,id:FS,includeHidden:!1,name:void 0,reversed:!1,scale:kS,tick:PS,tickCount:MS,ticks:void 0,type:"category",unit:void 0},zS=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?BS:NS,RS=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?LS:OS,VS=e=>e.polarOptions,US=_x([nb,ib,hb],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2}),qS=_x([VS,US],(e,t)=>{if(null!=e)return Rm(e.innerRadius,t,0)}),ZS=_x([VS,US],(e,t)=>{if(null!=e)return Rm(e.outerRadius,t,.8*t)}),HS=_x([VS],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]}),GS=(_x([zS,HS],jS),_x([US,qS,ZS],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),WS=(_x([RS,GS],jS),_x([Eb,VS,qS,ZS,nb,ib],(e,t,n,i,r,o)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=i){var{cx:a,cy:s,startAngle:l,endAngle:c}=t;return{cx:Rm(a,r,r/2),cy:Rm(s,o,o/2),innerRadius:n,outerRadius:i,startAngle:l,endAngle:c,clockWise:!1}}})),YS=(e,t)=>t,XS=(e,t,n)=>n;function KS(e){return null===e||void 0===e?void 0:e.id}function $S(e,t,n){var{chartData:i=[]}=t,{allowDuplicatedCategory:r,dataKey:o}=n,a=new Map;return e.forEach(e=>{var t,n=null!==(t=e.data)&&void 0!==t?t:i;if(null!=n&&0!==n.length){var s=KS(e);n.forEach((t,n)=>{var i,l=null==o||r?n:String(Ux(t,o,null)),c=Ux(t,e.dataKey,0);i=a.has(l)?a.get(l):{},Object.assign(i,{[s]:c}),a.set(l,i)})}}),Array.from(a.values())}function QS(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var JS=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function eT(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var tT=e=>{var t=Eb(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},nT=e=>e.tooltip.settings.axisId;function iT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function rT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iT(Object(n),!0).forEach(function(t){oT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aT=[0,"auto"],sT={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},lT=(e,t)=>e.cartesianAxis.xAxis[t],cT=(e,t)=>{var n=lT(e,t);return null==n?sT:n},uT={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:aT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},hT=(e,t)=>e.cartesianAxis.yAxis[t],dT=(e,t)=>{var n=hT(e,t);return null==n?uT:n},pT={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},fT=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?pT:n},mT=(e,t,n)=>{switch(t){case"xAxis":return cT(e,n);case"yAxis":return dT(e,n);case"zAxis":return fT(e,n);case"angleAxis":return zS(e,n);case"radiusAxis":return RS(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},gT=(e,t,n)=>{switch(t){case"xAxis":return cT(e,n);case"yAxis":return dT(e,n);case"angleAxis":return zS(e,n);case"radiusAxis":return RS(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},yT=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function vT(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var _T=e=>e.graphicalItems.cartesianItems,xT=_x([YS,XS],vT),bT=(e,t,n)=>e.filter(n).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),wT=_x([_T,mT,xT],bT,{memoizeOptions:{resultEqualityCheck:eT}}),DT=_x([wT],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(QS)),ET=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),CT=_x([wT],ET),AT=e=>e.map(e=>e.data).filter(Boolean).flat(1),ST=_x([wT],AT,{memoizeOptions:{resultEqualityCheck:eT}}),TT=(e,t)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=t;return e.length>0?e:n.slice(i,r+1)},FT=_x([ST,zA],TT),kT=(e,t,n)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Ux(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Ux(e,t)}))):e.map(e=>({value:e})),PT=_x([FT,mT,wT],kT);function MT(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function IT(e){if(Bm(e)||e instanceof Date){var t=Number(e);if(tg(t))return t}}function jT(e){if(Array.isArray(e)){var t=[IT(e[0]),IT(e[1])];return RA(t)?t:void 0}var n=IT(e);if(null!=n)return[n,n]}function NT(e){return e.map(IT).filter(Gm)}var OT=e=>{var t=tT(e),n=nT(e);return gT(e,t,n)},BT=_x([OT],e=>null===e||void 0===e?void 0:e.dataKey),LT=_x([DT,zA,OT],$S),zT=(e,t,n,i)=>{var r=t.reduce((e,t)=>{if(null==t.stackId)return e;var n=e[t.stackId];return null==n&&(n=[]),n.push(t),e[t.stackId]=n,e},{});return Object.fromEntries(Object.entries(r).map(t=>{var[r,o]=t,a=i?[...o].reverse():o,s=a.map(KS);return[r,{stackedData:Yx(e,s,n),graphicalItems:a}]}))},RT=_x([LT,DT,oS,aS],zT),VT=(e,t,n,i)=>{var{dataStartIndex:r,dataEndIndex:o}=t;if(null==i&&"zAxis"!==n){var a=Kx(e,r,o);if(null==a||0!==a[0]||0!==a[1])return a}},UT=_x([mT],e=>e.allowDataOverflow),qT=e=>{var t;if(null==e||!("domain"in e))return aT;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var n=NT(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:aT},ZT=_x([mT],qT),HT=_x([ZT,UT],UA),GT=_x([RT,BA,YS,HT],VT,{memoizeOptions:{resultEqualityCheck:JS}}),WT=e=>e.errorBars,YT=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);if(0!==i.length){var r=i.flat();return[Math.min(...r),Math.max(...r)]}},XT=(e,t,n,i,r)=>{var o,a;if(n.length>0&&e.forEach(e=>{n.forEach(n=>{var s,l,c=null===(s=i[n.id])||void 0===s?void 0:s.filter(e=>MT(r,e)),u=Ux(e,null!==(l=t.dataKey)&&void 0!==l?l:n.dataKey),h=function(e,t,n){return!n||"number"!==typeof t||jm(t)?[]:n.length?NT(n.flatMap(n=>{var i,r,o=Ux(e,n.dataKey);if(Array.isArray(o)?[i,r]=o:i=r=o,tg(i)&&tg(r))return[t-i,t+r]})):[]}(e,u,c);if(h.length>=2){var d=Math.min(...h),p=Math.max(...h);(null==o||d<o)&&(o=d),(null==a||p>a)&&(a=p)}var f=jT(u);null!=f&&(o=null==o?f[0]:Math.min(o,f[0]),a=null==a?f[1]:Math.max(a,f[1]))})}),null!=(null===t||void 0===t?void 0:t.dataKey)&&e.forEach(e=>{var n=jT(Ux(e,t.dataKey));null!=n&&(o=null==o?n[0]:Math.min(o,n[0]),a=null==a?n[1]:Math.max(a,n[1]))}),tg(o)&&tg(a))return[o,a]},KT=_x([FT,mT,CT,WT,YS],XT,{memoizeOptions:{resultEqualityCheck:JS}});function $T(e){var{value:t}=e;if(Bm(t)||t instanceof Date)return t}var QT=e=>e.referenceElements.dots,JT=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),eF=_x([QT,YS,XS],JT),tF=e=>e.referenceElements.areas,nF=_x([tF,YS,XS],JT),iF=e=>e.referenceElements.lines,rF=_x([iF,YS,XS],JT),oF=(e,t)=>{if(null!=e){var n=NT(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},aF=_x(eF,YS,oF),sF=(e,t)=>{if(null!=e){var n=NT(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},lF=_x([nF,YS],sF);var cF=(e,t)=>{if(null!=e){var n=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return NT([e.x]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==n||0===n.length?[]:NT(n)}(e):function(e){var t;if(null!=e.y)return NT([e.y]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==n||0===n.length?[]:NT(n)}(e));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},uF=_x([rF,YS],cF),hF=_x(aF,uF,lF,(e,t,n)=>YT(e,n,t)),dF=(e,t,n,i,r,o,a,s)=>null!=n?n:function(e,t,n){if(n||null!=t){if("function"===typeof e&&null!=t)try{var i=e(t,n);if(RA(i))return VA(i,t,n)}catch(p){}if(Array.isArray(e)&&2===e.length){var r,o,[a,s]=e;if("auto"===a)null!=t&&(r=Math.min(...t));else if(Om(a))r=a;else if("function"===typeof a)try{null!=t&&(r=a(null===t||void 0===t?void 0:t[0]))}catch(f){}else if("string"===typeof a&&$x.test(a)){var l=$x.exec(a);if(null==l||null==l[1]||null==t)r=void 0;else{var c=+l[1];r=t[0]-c}}else r=null===t||void 0===t?void 0:t[0];if("auto"===s)null!=t&&(o=Math.max(...t));else if(Om(s))o=s;else if("function"===typeof s)try{null!=t&&(o=s(null===t||void 0===t?void 0:t[1]))}catch(m){}else if("string"===typeof s&&Qx.test(s)){var u=Qx.exec(s);if(null==u||null==u[1]||null==t)o=void 0;else{var h=+u[1];o=t[1]+h}}else o=null===t||void 0===t?void 0:t[1];var d=[r,o];if(RA(d))return null==t?d:VA(d,t,n)}}}(t,"vertical"===a&&"xAxis"===s||"horizontal"===a&&"yAxis"===s?YT(i,o,r):YT(o,r),e.allowDataOverflow),pF=_x([mT,ZT,HT,GT,KT,hF,Eb,YS],dF,{memoizeOptions:{resultEqualityCheck:JS}}),fF=[0,1],mF=(e,t,n,i,r,o,a)=>{if(null!=e&&null!=n&&0!==n.length||void 0!==a){var s,{dataKey:l,type:c}=e,u=qx(t,o);return u&&null==l?Tb()(0,null!==(s=null===n||void 0===n?void 0:n.length)&&void 0!==s?s:0):"category"===c?((e,t,n)=>{var i=e.map($T).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&Vm(i))?Tb()(0,e.length):t.allowDuplicatedCategory?i:Array.from(new Set(i))})(i,e,u):"expand"===r?fF:a}},gF=_x([mT,Eb,FT,PT,oS,YS,pF],mF),yF=(e,t,n,r,o)=>{if(null!=e){var{scale:a,type:s}=e;if("auto"===a)return"radial"===t&&"radiusAxis"===o?"band":"radial"===t&&"angleAxis"===o?"linear":"category"===s&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":"category"===s?"band":"linear";if("string"===typeof a){var l="scale".concat(Hm(a));return l in i?l:"point"}}},vF=_x([mT,Eb,yT,sS,YS],yF);function _F(e,t,n,r){if(null!=n&&null!=r){if("function"===typeof e.scale)return e.scale.copy().domain(n).range(r);var o=function(e){if(null!=e){if(e in i)return i[e]();var t="scale".concat(Hm(e));return t in i?i[t]():void 0}}(t);if(null!=o){var a=o.domain(n).range(r);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,i=e.range(),r=Math.min(i[0],i[1])-Gx,o=Math.max(i[0],i[1])+Gx,a=e(t[0]),s=e(t[n-1]);(a<r||a>o||s<r||s>o)&&e.domain([t[0],t[n-1]])}})(a),a}}}var xF=(e,t,n)=>{var i=qT(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(i)&&("auto"===i[0]||"auto"===i[1])&&RA(e)?function(e){var[t,n]=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),[a,s]=tS([t,n]);if(a===-1/0||s===1/0){var l=s===1/0?[a,...$A(0,i-1).map(()=>1/0)]:[...$A(0,i-1).map(()=>-1/0),s];return t>n?l.reverse():l}if(a===s)return iS(a,i,r);var{step:c,tickMin:u,tickMax:h}=rS(a,s,o,r,0),d=eS(u,h.add(new(HA())(.1).mul(c)),c);return t>n?d.reverse():d}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&RA(e)?function(e,t){var[n,i]=e,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[o,a]=tS([n,i]);if(o===-1/0||a===1/0)return[n,i];if(o===a)return[o];var s=Math.max(t,2),l=nS(new(HA())(a).sub(o).div(s-1),r,0),c=[...eS(new(HA())(o),new(HA())(a),l),a];return!1===r&&(c=c.map(e=>Math.round(e))),n>i?c.reverse():c}(e,t.tickCount,t.allowDecimals):void 0},bF=_x([gF,gT,vF],xF),wF=(e,t,n,i)=>{if("angleAxis"!==i&&"number"===(null===e||void 0===e?void 0:e.type)&&RA(t)&&Array.isArray(n)&&n.length>0){var r=t[0],o=n[0],a=t[1],s=n[n.length-1];return[Math.min(r,o),Math.max(a,s)]}return t},DF=_x([mT,gF,bF,YS],wF),EF=_x(PT,mT,(e,t)=>{if(t&&"number"===t.type){var n=1/0,i=Array.from(NT(e.map(e=>e.value))).sort((e,t)=>e-t),r=i[0],o=i[i.length-1];if(null==r||null==o)return 1/0;var a=o-r;if(0===a)return 1/0;for(var s=0;s<i.length-1;s++){var l=i[s],c=i[s+1];if(null!=l&&null!=c){var u=c-l;n=Math.min(n,u)}}return n/a}}),CF=_x(EF,Eb,e=>e.rootProps.barCategoryGap,hb,(e,t,n,i,r)=>r,(e,t,n,i,r)=>{if(!tg(e))return 0;var o="vertical"===t?i.height:i.width;if("gap"===r)return e*o/2;if("no-gap"===r){var a=Rm(n,e*o),s=e*o/2;return s-a-(s-a)/o*a}return 0}),AF=_x(cT,(e,t,n)=>{var i=cT(e,t);return null==i||"string"!==typeof i.padding?0:CF(e,"xAxis",t,n,i.padding)},(e,t)=>{var n,i;if(null==e)return{left:0,right:0};var{padding:r}=e;return"string"===typeof r?{left:t,right:t}:{left:(null!==(n=r.left)&&void 0!==n?n:0)+t,right:(null!==(i=r.right)&&void 0!==i?i:0)+t}}),SF=_x(dT,(e,t,n)=>{var i=dT(e,t);return null==i||"string"!==typeof i.padding?0:CF(e,"yAxis",t,n,i.padding)},(e,t)=>{var n,i;if(null==e)return{top:0,bottom:0};var{padding:r}=e;return"string"===typeof r?{top:t,bottom:t}:{top:(null!==(n=r.top)&&void 0!==n?n:0)+t,bottom:(null!==(i=r.bottom)&&void 0!==i?i:0)+t}}),TF=_x([hb,AF,yb,gb,(e,t,n)=>n],(e,t,n,i,r)=>{var{padding:o}=i;return r?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),FF=_x([hb,Eb,SF,yb,gb,(e,t,n)=>n],(e,t,n,i,r,o)=>{var{padding:a}=r;return o?[i.height-a.bottom,a.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),kF=(e,t,n,i)=>{var r;switch(t){case"xAxis":return TF(e,n,i);case"yAxis":return FF(e,n,i);case"zAxis":return null===(r=fT(e,n))||void 0===r?void 0:r.range;case"angleAxis":return HS(e);case"radiusAxis":return GS(e,n);default:return}},PF=_x([mT,kF],jS),MF=_x([mT,vF,DF,PF],_F);_x([wT,WT,YS],(e,t,n)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>MT(n,e)));function IF(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var jF=(e,t)=>t,NF=(e,t,n)=>n,OF=_x(ab,jF,NF,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(IF)),BF=_x(sb,jF,NF,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(IF)),LF=(e,t)=>({width:e.width,height:t.height}),zF=_x(hb,cT,LF),RF=_x(ib,hb,OF,jF,NF,(e,t,n,i,r)=>{var o,a={};return n.forEach(n=>{var s=LF(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,i,e));var l="top"===i&&!r||"bottom"===i&&r;a[n.id]=o-Number(l)*s.height,o+=(l?-1:1)*s.height}),a}),VF=_x(nb,hb,BF,jF,NF,(e,t,n,i,r)=>{var o,a={};return n.forEach(n=>{var s=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,i,e));var l="left"===i&&!r||"right"===i&&r;a[n.id]=o-Number(l)*s.width,o+=(l?-1:1)*s.width}),a}),UF=_x([hb,cT,(e,t)=>{var n=cT(e,t);if(null!=n)return RF(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,i)=>{if(null!=t){var r=null===n||void 0===n?void 0:n[i];return null==r?{x:e.left,y:0}:{x:e.left,y:r}}}),qF=_x([hb,dT,(e,t)=>{var n=dT(e,t);if(null!=n)return VF(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,i)=>{if(null!=t){var r=null===n||void 0===n?void 0:n[i];return null==r?{x:0,y:e.top}:{x:r,y:e.top}}}),ZF=_x(hb,dT,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),HF=(e,t,n,i)=>{if(null!=n){var{allowDuplicatedCategory:r,type:o,dataKey:a}=n,s=qx(e,i),l=t.map(e=>e.value);return a&&s&&"category"===o&&r&&Vm(l)?l:void 0}},GF=_x([Eb,PT,mT,YS],HF),WF=(e,t,n,i)=>{if(null!=n&&null!=n.dataKey){var{type:r,scale:o}=n;return!qx(e,i)||"number"!==r&&"auto"===o?void 0:t.map(e=>e.value)}},YF=_x([Eb,PT,gT,YS],WF),XF=_x([Eb,(e,t,n)=>{switch(t){case"xAxis":return cT(e,n);case"yAxis":return dT(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},vF,MF,GF,YF,kF,bF,YS],(e,t,n,i,r,o,a,s,l)=>{if(null!=t){var c=qx(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:o,duplicateDomain:r,isCategorical:c,niceTicks:s,range:a,realScaleType:n,scale:i}}}),KF=_x([Eb,gT,vF,MF,bF,kF,GF,YF,YS],(e,t,n,i,r,o,a,s,l)=>{if(null!=t&&null!=i){var c=qx(e,l),{type:u,ticks:h,tickCount:d}=t,p="scaleBand"===n&&"function"===typeof i.bandwidth?i.bandwidth()/2:2,f="category"===u&&i.bandwidth?i.bandwidth()/p:0;f="angleAxis"===l&&null!=o&&o.length>=2?2*Im(o[0]-o[1])*f:f;var m=h||r;if(m){var g=m.map((e,t)=>{var n=a?a.indexOf(e):e;return{index:t,coordinate:i(n)+f,value:e,offset:f}});return g.filter(e=>tg(e.coordinate))}return c&&s?s.map((e,t)=>({coordinate:i(e)+f,value:e,index:t,offset:f})).filter(e=>tg(e.coordinate)):i.ticks?i.ticks(d).map(e=>({coordinate:i(e)+f,value:e,offset:f})):i.domain().map((e,t)=>({coordinate:i(e)+f,value:a?a[e]:e,index:t,offset:f}))}}),$F=_x([Eb,gT,MF,kF,GF,YF,YS],(e,t,n,i,r,o,a)=>{if(null!=t&&null!=n&&null!=i&&i[0]!==i[1]){var s=qx(e,a),{tickCount:l}=t,c=0;return c="angleAxis"===a&&(null===i||void 0===i?void 0:i.length)>=2?2*Im(i[0]-i[1])*c:c,s&&o?o.map((e,t)=>({coordinate:n(e)+c,value:e,index:t,offset:c})):n.ticks?n.ticks(l).map(e=>({coordinate:n(e)+c,value:e,offset:c})):n.domain().map((e,t)=>({coordinate:n(e)+c,value:r?r[e]:e,index:t,offset:c}))}}),QF=_x(mT,MF,(e,t)=>{if(null!=e&&null!=t)return rT(rT({},e),{},{scale:t})}),JF=_x([mT,vF,gF,PF],_F),ek=(_x((e,t,n)=>fT(e,n),JF,(e,t)=>{if(null!=e&&null!=t)return rT(rT({},e),{},{scale:t})}),_x([Eb,ab,sb],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),tk=e=>e.options.defaultTooltipEventType,nk=e=>e.options.validateTooltipEventTypes;function ik(e,t,n){if(null==e)return t;var i=e?"axis":"item";return null==n?t:n.includes(i)?i:t}function rk(e,t){return ik(t,tk(e),nk(e))}var ok=(e,t)=>{var n,i=Number(t);if(!jm(i)&&null!=t)return i>=0?null===e||void 0===e||null===(n=e[i])||void 0===n?void 0:n.value:void 0};function ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function sk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ak(Object(n),!0).forEach(function(t){lk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ck=(e,t,n,i)=>{if(null==t)return R_;var r=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==r)return R_;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(null!=r.index){if(o)return sk(sk({},r),{},{active:!0})}else if(null!=i)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return sk(sk({},R_),{},{coordinate:r.coordinate})};function uk(e,t){var n=function(e){if("number"===typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}(e),i=t[0],r=t[1];if(void 0===n)return!1;var o=Math.min(i,r),a=Math.max(i,r);return n>=o&&n<=a}var hk=(e,t,n,i)=>{var r=null===e||void 0===e?void 0:e.index;if(null==r)return null;var o=Number(r);if(!tg(o))return r;var a=1/0;t.length>0&&(a=t.length-1);var s=Math.max(0,Math.min(o,a)),l=t[s];return null==l||function(e,t,n){if(null==n||null==t)return!0;var i=Ux(e,t);return null==i||!RA(n)||uk(i,n)}(l,n,i)?String(s):null},dk=(e,t,n,i,r,o,a,s)=>{if(null!=o&&null!=s){var l=a[0],c=null==l?void 0:s(l.positions,o);if(null!=c)return c;var u=null===r||void 0===r?void 0:r[Number(o)];if(u)return"horizontal"===n?{x:u.coordinate,y:(i.top+t)/2}:{x:(i.left+e)/2,y:u.coordinate}}},pk=(e,t,n,i)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];var r;if(null==(r="hover"===n?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=i){var o=e.tooltipItemPayloads[0];return null!=o?[o]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.graphicalItemId)===r})},fk=e=>e.options.tooltipPayloadSearcher,mk=e=>e.tooltip;function gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function yk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gk(Object(n),!0).forEach(function(t){vk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _k=(e,t,n,i,r,o,a)=>{if(null!=t&&null!=o){var{chartData:s,computedData:l,dataStartIndex:c,dataEndIndex:u}=n;return e.reduce((e,n)=>{var h,d,p,{dataDefinedOnItem:f,settings:m}=n,g=function(e,t){return null!=e?e:t}(f,s),y=Array.isArray(g)?Lx(g,c,u):g,v=null!==(h=null===m||void 0===m?void 0:m.dataKey)&&void 0!==h?h:i,_=null===m||void 0===m?void 0:m.nameKey;(d=i&&Array.isArray(y)&&!Array.isArray(y[0])&&"axis"===a?qm(y,i,r):o(y,t,l,_),Array.isArray(d))?d.forEach(t=>{var n=yk(yk({},m),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(eb({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:Ux(t.payload,t.dataKey),name:t.name}))}):e.push(eb({tooltipEntrySettings:m,dataKey:v,payload:d,value:Ux(d,v),name:null!==(p=Ux(d,_))&&void 0!==p?p:null===m||void 0===m?void 0:m.name}));return e},[])}},xk=_x([OT,Eb,yT,sS,tT],yF),bk=_x([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),wk=_x([tT,nT],vT),Dk=_x([bk,OT,wk],bT,{memoizeOptions:{resultEqualityCheck:eT}}),Ek=_x([Dk],e=>e.filter(QS)),Ck=_x([Dk],AT,{memoizeOptions:{resultEqualityCheck:eT}}),Ak=_x([Ck,BA],TT),Sk=_x([Ek,BA,OT],$S),Tk=_x([Ak,OT,Dk],kT),Fk=_x([OT],qT),kk=_x([OT],e=>e.allowDataOverflow),Pk=_x([Fk,kk],UA),Mk=_x([Dk],e=>e.filter(QS)),Ik=_x([Sk,Mk,oS,aS],zT),jk=_x([Ik,BA,tT,Pk],VT),Nk=_x([Dk],ET),Ok=_x([Ak,OT,Nk,WT,tT],XT,{memoizeOptions:{resultEqualityCheck:JS}}),Bk=_x([QT,tT,nT],JT),Lk=_x([Bk,tT],oF),zk=_x([tF,tT,nT],JT),Rk=_x([zk,tT],sF),Vk=_x([iF,tT,nT],JT),Uk=_x([Vk,tT],cF),qk=_x([Lk,Uk,Rk],YT),Zk=_x([OT,Fk,Pk,jk,Ok,qk,Eb,tT],dF),Hk=_x([OT,Eb,Ak,Tk,oS,tT,Zk],mF),Gk=_x([Hk,OT,xk],xF),Wk=_x([OT,Hk,Gk,tT],wF),Yk=e=>{var t=tT(e),n=nT(e);return kF(e,t,n,!1)},Xk=_x([OT,Yk],jS),Kk=_x([OT,xk,Wk,Xk],_F),$k=_x([Eb,Tk,OT,tT],HF),Qk=_x([Eb,Tk,OT,tT],WF),Jk=_x([Eb,OT,xk,Kk,Yk,$k,Qk,tT],(e,t,n,i,r,o,a,s)=>{if(t){var{type:l}=t,c=qx(e,s);if(i){var u="scaleBand"===n&&i.bandwidth?i.bandwidth()/2:2,h="category"===l&&i.bandwidth?i.bandwidth()/u:0;return h="angleAxis"===s&&null!=r&&(null===r||void 0===r?void 0:r.length)>=2?2*Im(r[0]-r[1])*h:h,c&&a?a.map((e,t)=>({coordinate:i(e)+h,value:e,index:t,offset:h})):i.domain().map((e,t)=>({coordinate:i(e)+h,value:o?o[e]:e,index:t,offset:h}))}}}),eP=_x([tk,nk,e=>e.tooltip.settings],(e,t,n)=>ik(n.shared,e,t)),tP=e=>e.tooltip.settings.trigger,nP=e=>e.tooltip.settings.defaultIndex,iP=_x([mk,eP,tP,nP],ck),rP=_x([iP,Ak,BT,Hk],hk),oP=_x([Jk,rP],ok),aP=_x([iP],e=>{if(e)return e.dataKey}),sP=(_x([iP],e=>{if(e)return e.graphicalItemId}),_x([mk,eP,tP,nP],pk)),lP=_x([nb,ib,Eb,hb,Jk,nP,sP,fk],dk),cP=_x([iP,lP],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),uP=_x([iP],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.active)&&void 0!==t&&t}),hP=_x([sP,rP,BA,BT,oP,fk,eP],_k),dP=_x([hP],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function pP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function fP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pP(Object(n),!0).forEach(function(t){mP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gP=(e,t,n,i,r)=>{var o,a=null!==(o=null===t||void 0===t?void 0:t.length)&&void 0!==o?o:0;if(a<=1||null==e)return 0;if("angleAxis"===i&&null!=r&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var s=0;s<a;s++){var l,c,u,h,d,p=s>0?null===(l=n[s-1])||void 0===l?void 0:l.coordinate:null===(c=n[a-1])||void 0===c?void 0:c.coordinate,f=null===(u=n[s])||void 0===u?void 0:u.coordinate,m=s>=a-1?null===(h=n[0])||void 0===h?void 0:h.coordinate:null===(d=n[s+1])||void 0===d?void 0:d.coordinate,g=void 0;if(null!=p&&null!=f&&null!=m)if(Im(f-p)!==Im(m-f)){var y=[];if(Im(m-f)===Im(r[1]-r[0])){g=m;var v=f+r[1]-r[0];y[0]=Math.min(v,(v+p)/2),y[1]=Math.max(v,(v+p)/2)}else{g=p;var _=m+r[1]-r[0];y[0]=Math.min(f,(_+f)/2),y[1]=Math.max(f,(_+f)/2)}var x,b=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>b[0]&&e<=b[1]||e>=y[0]&&e<=y[1])return null===(x=n[s])||void 0===x?void 0:x.index}else{var w,D=Math.min(p,m),E=Math.max(p,m);if(e>(D+f)/2&&e<=(E+f)/2)return null===(w=n[s])||void 0===w?void 0:w.index}}else if(t)for(var C=0;C<a;C++){var A=t[C];if(null!=A){var S=t[C+1],T=t[C-1];if(0===C&&null!=S&&e<=(A.coordinate+S.coordinate)/2)return A.index;if(C===a-1&&null!=T&&e>(A.coordinate+T.coordinate)/2)return A.index;if(C>0&&C<a-1&&null!=T&&null!=S&&e>(A.coordinate+T.coordinate)/2&&e<=(A.coordinate+S.coordinate)/2)return A.index}}return-1},yP=()=>Tx(sS),vP=(e,t)=>t,_P=(e,t,n)=>n,xP=(e,t,n,i)=>i,bP=_x(Jk,e=>kx()(e,e=>e.coordinate)),wP=_x([mk,vP,_P,xP],ck),DP=_x([wP,Ak,BT,Hk],hk),EP=_x([mk,vP,_P,xP],pk),CP=_x([nb,ib,Eb,hb,Jk,xP,EP,fk],dk),AP=_x([wP,CP],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),SP=_x([Jk,DP],ok),TP=_x([EP,DP,BA,BT,SP,fk,vP],_k),FP=_x([wP,DP],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),kP=(e,t,n,i,r,o,a)=>{if(e&&i&&r&&o&&n){var s=_S(e,n);if(s){var l=((e,t)=>"centric"===t?e.angle:e.radius)(s,t),c=gP(l,a,o,i,r),u=((e,t,n,i)=>{var r=t.find(e=>e&&e.index===n);if(r){if("centric"===e){var o=r.coordinate,{radius:a}=i;return fP(fP(fP({},i),gS(i.cx,i.cy,a,o)),{},{angle:o,radius:a})}var s=r.coordinate,{angle:l}=i;return fP(fP(fP({},i),gS(i.cx,i.cy,s,l)),{},{angle:l,radius:s})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,o,c,s);return{activeIndex:String(c),activeCoordinate:u}}}},PP=_x([(e,t)=>t,Eb,WS,tT,Xk,Jk,bP,hb],(e,t,n,i,r,o,a,s)=>{if(e&&t&&i&&r&&o)return"horizontal"===t||"vertical"===t?((e,t,n,i,r,o,a)=>{if(e&&n&&i&&r&&function(e,t){var{chartX:n,chartY:i}=e;return n>=t.left&&n<=t.left+t.width&&i>=t.top&&i<=t.top+t.height}(e,a)){var s=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=gP(s,o,r,n,i),c=((e,t,n,i)=>{var r=t.find(e=>e&&e.index===n);if(r){if("horizontal"===e)return{x:r.coordinate,y:i.chartY};if("vertical"===e)return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}})(t,r,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,i,r,o,a,s):kP(e,t,n,i,r,o,a)}),MP=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,i=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/i)}},IP=zy("mouseClick"),jP=Mv();jP.startListening({actionCreator:IP,effect:(e,t)=>{var n=e.payload,i=PP(t.getState(),MP(n));null!=(null===i||void 0===i?void 0:i.activeIndex)&&t.dispatch($_({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var NP=zy("mouseMove"),OP=Mv(),BP=null;function LP(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"===typeof t&&null!==t?"<<CHILDREN>>":t}function zP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function RP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zP(Object(n),!0).forEach(function(t){VP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}OP.startListening({actionCreator:NP,effect:(e,t)=>{var n=e.payload;null!==BP&&cancelAnimationFrame(BP);var i=MP(n);BP=requestAnimationFrame(()=>{var e=t.getState();if("axis"===rk(e,e.tooltip.settings.shared)){var n=PP(e,i);null!=(null===n||void 0===n?void 0:n.activeIndex)?t.dispatch(K_({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate})):t.dispatch(Y_())}BP=null})}});var UP=ev({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Zy()},replaceXAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;void 0!==e.xAxis[n.id]&&(n.id!==i.id&&delete e.xAxis[n.id],e.xAxis[i.id]=i)},prepare:Zy()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Zy()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Zy()},replaceYAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;void 0!==e.yAxis[n.id]&&(n.id!==i.id&&delete e.yAxis[n.id],e.yAxis[i.id]=i)},prepare:Zy()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Zy()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Zy()},replaceZAxis:{reducer(e,t){var{prev:n,next:i}=t.payload;void 0!==e.zAxis[n.id]&&(n.id!==i.id&&delete e.zAxis[n.id],e.zAxis[i.id]=i)},prepare:Zy()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Zy()},updateYAxisWidth(e,t){var{id:n,width:i}=t.payload,r=e.yAxis[n];if(r){var o=r.widthHistory||[];if(3===o.length&&o[0]===o[2]&&i===o[1]&&i!==r.width&&Math.abs(i-o[0])<=1)return;var a=[...o,i].slice(-3);e.yAxis[n]=RP(RP({},e.yAxis[n]),{},{width:i,widthHistory:a})}}}}),{addXAxis:qP,replaceXAxis:ZP,removeXAxis:HP,addYAxis:GP,replaceYAxis:WP,removeYAxis:YP,addZAxis:XP,replaceZAxis:KP,removeZAxis:$P,updateYAxisWidth:QP}=UP.actions,JP=UP.reducer,eM=ev({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Zy()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:i}=t.payload,r=by(e).cartesianItems.indexOf(n);r>-1&&(e.cartesianItems[r]=i)},prepare:Zy()},removeCartesianGraphicalItem:{reducer(e,t){var n=by(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Zy()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Zy()},removePolarGraphicalItem:{reducer(e,t){var n=by(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Zy()}}}),{addCartesianGraphicalItem:tM,replaceCartesianGraphicalItem:nM,removeCartesianGraphicalItem:iM,addPolarGraphicalItem:rM,removePolarGraphicalItem:oM}=eM.actions,aM=eM.reducer,sM=ev({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=by(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=by(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=by(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:lM,removeDot:cM,addArea:uM,removeArea:hM,addLine:dM,removeLine:pM}=sM.actions,fM=sM.reducer,mM={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},gM=ev({name:"brush",initialState:mM,reducers:{setBrushSettings:(e,t)=>null==t.payload?mM:t.payload}}),{setBrushSettings:yM}=gM.actions,vM=gM.reducer,_M=ev({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Zy()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:i}=t.payload,r=by(e).payload.indexOf(n);r>-1&&(e.payload[r]=i)},prepare:Zy()},removeLegendPayload:{reducer(e,t){var n=by(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Zy()}}}),{setLegendSize:xM,setLegendSettings:bM,addLegendPayload:wM,replaceLegendPayload:DM,removeLegendPayload:EM}=_M.actions,CM=_M.reducer,AM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},SM=ev({name:"rootProps",initialState:AM,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:AM.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),TM=SM.reducer,{updateOptions:FM}=SM.actions,kM=ev({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:PM,removeRadiusAxis:MM,addAngleAxis:IM,removeAngleAxis:jM}=kM.actions,NM=kM.reducer,OM=ev({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:BM}=OM.actions,LM=OM.reducer,zM=zy("keyDown"),RM=zy("focus"),VM=Mv();VM.startListening({actionCreator:zM,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:i}=n.tooltip,r=e.payload;if("ArrowRight"===r||"ArrowLeft"===r||"Enter"===r){var o=hk(i,Ak(n),BT(n),Hk(n)),a=null==o?-1:Number(o);if(Number.isFinite(a)&&!(a<0)){var s=Jk(n);if("Enter"!==r){var l=a+("ArrowRight"===r?1:-1)*("left-to-right"===ek(n)?1:-1);if(!(null==s||l>=s.length||l<0)){var c=CP(n,"axis","hover",String(l));t.dispatch(J_({active:!0,activeIndex:l.toString(),activeCoordinate:c}))}}else{var u=CP(n,"axis","hover",String(i.index));t.dispatch(J_({active:!i.active,activeIndex:i.index,activeCoordinate:u}))}}}}}}),VM.startListening({actionCreator:RM,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&null==i.index){var r=CP(n,"axis","hover",String("0"));t.dispatch(J_({active:!0,activeIndex:"0",activeCoordinate:r}))}}}});var UM=zy("externalEvent"),qM=Mv(),ZM=new Map;qM.startListening({actionCreator:UM,effect:(e,t)=>{var{handler:n,reactEvent:i}=e.payload;if(null!=n){i.persist();var r=i.type,o=ZM.get(r);void 0!==o&&cancelAnimationFrame(o);var a=requestAnimationFrame(()=>{try{var e=t.getState(),o={activeCoordinate:cP(e),activeDataKey:aP(e),activeIndex:rP(e),activeLabel:oP(e),activeTooltipIndex:rP(e),isTooltipActive:uP(e)};n(o,i)}finally{ZM.delete(r)}});ZM.set(r,a)}}});var HM=_x([mk],e=>e.tooltipItemPayloads),GM=_x([HM,fk,(e,t)=>t,(e,t,n)=>n],(e,t,n,i)=>{var r=e.find(e=>e.settings.graphicalItemId===i);if(null!=r){var{positions:o}=r;if(null!=o)return t(o,n)}}),WM=zy("touchMove"),YM=Mv();YM.startListening({actionCreator:WM,effect:(e,t)=>{var n=e.payload;if(null!=n.touches&&0!==n.touches.length){var i=t.getState(),r=rk(i,i.tooltip.settings.shared);if("axis"===r){var o=n.touches[0];if(null==o)return;var a=PP(i,MP({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));null!=(null===a||void 0===a?void 0:a.activeIndex)&&t.dispatch(K_({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if("item"===r){var s,l=n.touches[0];if(null==document.elementFromPoint||null==l)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute("data-recharts-item-index"),h=null!==(s=c.getAttribute("data-recharts-item-id"))&&void 0!==s?s:void 0,d=Dk(i).find(e=>e.id===h);if(null==u||null==d||null==h)return;var{dataKey:p}=d,f=GM(i,u,h);t.dispatch(G_({activeDataKey:p,activeIndex:u,activeCoordinate:f,activeGraphicalItemId:h}))}}}});var XM=ev({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]||(e[n]=[]),e[n].push(i)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:i,next:r}=t.payload;e[n]&&(e[n]=e[n].map(e=>e.dataKey===i.dataKey&&e.direction===i.direction?r:e))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:i}=t.payload;e[n]&&(e[n]=e[n].filter(e=>e.dataKey!==i.dataKey||e.direction!==i.direction))}}}),{addErrorBar:KM,replaceErrorBar:$M,removeErrorBar:QM}=XM.actions,JM=XM.reducer,eI=!0,tI=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function nI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function iI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nI(Object(n),!0).forEach(function(t){rI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oI={zIndexMap:Object.values(xS).reduce((e,t)=>iI(iI({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},aI=new Set(Object.values(xS));var sI=ev({name:"zIndex",initialState:oI,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Zy()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!function(e){return aI.has(e)}(n)&&delete e.zIndexMap[n])},prepare:Zy()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:i,isPanorama:r}=t.payload;e.zIndexMap[n]?r?e.zIndexMap[n].panoramaElement=i:e.zIndexMap[n].element=i:e.zIndexMap[n]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:Zy()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:Zy()}}}),{registerZIndexPortal:lI,unregisterZIndexPortal:cI,registerZIndexPortalElement:uI,unregisterZIndexPortalElement:hI}=sI.actions,dI=Py({brush:vM,cartesianAxis:JP,chartData:ox,errorBars:JM,graphicalItems:aM,layout:hx,legend:CM,options:Ov,polarAxis:NM,polarOptions:LM,referenceElements:fM,rootProps:TM,tooltip:ex,zIndex:sI.reducer});function pI(e){var{preloadedState:t,children:n,reduxStoreName:i}=e,r=mb(),a=(0,o.useRef)(null);if(r)return n;null==a.current&&(a.current=function(e){return Wy({reducer:dI,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([jP.middleware,OP.middleware,VM.middleware,qM.middleware,YM.middleware]),enhancers:e=>{var t=e;return"function"===typeof e&&(t=e()),t.concat(Gy({type:"raf"}))},devTools:eI&&{serialize:{replacer:LP},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,i));var s=wx;return o.createElement(Kv,{context:s,store:a.current},n)}var fI=e=>{var{chartData:t}=e,n=Ex(),i=mb();return(0,o.useEffect)(()=>i?()=>{}:(n(nx(t)),()=>{n(nx(void 0))}),[t,n,i]),null},mI=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function gI(e,t){return null==e&&null==t||("number"===typeof e&&"number"===typeof t?e===t||e!==e&&t!==t:e===t)}function yI(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var i of n)if(mI.has(i)){if(null==e[i]&&null==t[i])continue;if(!Hv(e[i],t[i]))return!1}else if(!gI(e[i],t[i]))return!1;return!0}function vI(e){var{layout:t,margin:n}=e,i=Ex(),r=mb();return(0,o.useEffect)(()=>{r||(i(lx(t)),i(sx(n)))},[i,r,t,n]),null}var _I=(0,o.memo)(vI,yI);function xI(e){var t=Ex();return(0,o.useEffect)(()=>{t(FM(e))},[t,e]),null}var bI=()=>{var e;return null===(e=Tx(e=>e.rootProps.accessibilityLayer))||void 0===e||e},wI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function DI(e){return"string"===typeof e&&wI.includes(e)}var EI=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function CI(e){return"string"===typeof e&&EI.has(e)}function AI(e){return"string"===typeof e&&e.startsWith("data-")}function SI(e){if("object"!==typeof e||null===e)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(CI(n)||AI(n))&&(t[n]=e[n]);return t}function TI(e){return null==e?null:(0,o.isValidElement)(e)&&"object"===typeof e.props&&null!==e.props?SI(e.props):"object"!==typeof e||Array.isArray(e)?null:SI(e)}function FI(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(CI(n)||AI(n)||DI(n))&&(t[n]=e[n]);return t}var kI=["children","width","height","viewBox","className","style","title","desc"];function PI(){return PI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},PI.apply(null,arguments)}var MI=(0,o.forwardRef)((e,t)=>{var{children:n,width:i,height:r,viewBox:a,className:s,style:l,title:c,desc:u}=e,h=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,kI),d=a||{width:i,height:r,x:0,y:0},p=Am("recharts-surface",s);return o.createElement("svg",PI({},FI(h),{className:p,width:i,height:r,style:l,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:t}),o.createElement("title",null,c),o.createElement("desc",null,u),n)}),II=_x(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(null!=t){var i=e[t];if(null!=i)return n?i.panoramaElement:i.element}}),jI=_x(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(xS));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}}});function NI(e){var{zIndex:t,isPanorama:n}=e,i=(0,o.useRef)(null),r=Ex();return(0,o.useLayoutEffect)(()=>(i.current&&r(uI({zIndex:t,element:i.current,isPanorama:n})),()=>{r(hI({zIndex:t,isPanorama:n}))}),[r,t,n]),o.createElement("g",{tabIndex:-1,ref:i})}function OI(e){var{children:t,isPanorama:n}=e,i=Tx(jI);if(!i||0===i.length)return t;var r=i.filter(e=>e<0),a=i.filter(e=>e>0);return o.createElement(o.Fragment,null,r.map(e=>o.createElement(NI,{key:e,zIndex:e,isPanorama:n})),t,a.map(e=>o.createElement(NI,{key:e,zIndex:e,isPanorama:n})))}var BI=["children"];function LI(){return LI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LI.apply(null,arguments)}var zI={width:"100%",height:"100%",display:"block"},RI=(0,o.forwardRef)((e,t)=>{var n=wb(),i=Db(),r=bI();if(!ng(n)||!ng(i))return null;var a,s,{children:l,otherAttributes:c,title:u,desc:h}=e;return null!=c&&(a="number"===typeof c.tabIndex?c.tabIndex:r?0:void 0,s="string"===typeof c.role?c.role:r?"application":void 0),o.createElement(MI,LI({},c,{title:u,desc:h,role:s,tabIndex:a,width:n,height:i,style:zI,ref:t}),l)}),VI=e=>{var{children:t}=e,n=Tx(yb);if(!n)return null;var{width:i,height:r,y:a,x:s}=n;return o.createElement(MI,{width:i,height:r,x:s,y:a},t)},UI=(0,o.forwardRef)((e,t)=>{var{children:n}=e,i=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,BI);return mb()?o.createElement(VI,null,o.createElement(OI,{isPanorama:!0},n)):o.createElement(RI,LI({ref:t},i),o.createElement(OI,{isPanorama:!1},n))});var qI=new(n(8499)),ZI="recharts.syncEvent.tooltip",HI="recharts.syncEvent.brush";function GI(e){return e.tooltip.syncInteraction}var WI=["x","y"];function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function XI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(t){KI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function KI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $I(){var e=Tx(lS),t=Tx(uS),n=Ex(),i=Tx(cS),r=Tx(Jk),a=Cb(),s=_b(),l=Tx(e=>e.rootProps.className);(0,o.useEffect)(()=>{if(null==e)return Wm;var o=(o,l,c)=>{var u;if(t!==c&&e===o)if("index"!==i){if(null!=r){var h;if("function"===typeof i){var d={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},p=i(r,d);h=r[p]}else"value"===i&&(h=r.find(e=>String(e.value)===l.payload.label));var{coordinate:f}=l.payload;if(null!=h&&!1!==l.payload.active&&null!=f&&null!=s){var{x:m,y:g}=f,y=Math.min(m,s.x+s.width),v=Math.min(g,s.y+s.height),_={x:"horizontal"===a?h.coordinate:y,y:"horizontal"===a?v:h.coordinate},x=Q_({active:l.payload.active,coordinate:_,dataKey:l.payload.dataKey,index:String(h.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox,graphicalItemId:l.payload.graphicalItemId});n(x)}else n(Q_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}))}}else if(s&&null!==l&&void 0!==l&&null!==(u=l.payload)&&void 0!==u&&u.coordinate&&l.payload.sourceViewBox){var b=l.payload.coordinate,{x:w,y:D}=b,E=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(b,WI),{x:C,y:A,width:S,height:T}=l.payload.sourceViewBox,F=XI(XI({},E),{},{x:s.x+(S?(w-C)/S:0)*s.width,y:s.y+(T?(D-A)/T:0)*s.height});n(XI(XI({},l),{},{payload:XI(XI({},l.payload),{},{coordinate:F})}))}else n(l)};return qI.on(ZI,o),()=>{qI.off(ZI,o)}},[l,n,t,e,i,r,a,s])}function QI(){var e=Ex();(0,o.useEffect)(()=>{e(Bv())},[e]),$I(),function(){var e=Tx(lS),t=Tx(uS),n=Ex();(0,o.useEffect)(()=>{if(null==e)return Wm;var i=(i,r,o)=>{t!==o&&e===i&&n(ix(r))};return qI.on(HI,i),()=>{qI.off(HI,i)}},[n,t,e])}()}function JI(e,t,n,i,r,a){var s=Tx(n=>((e,t,n)=>{if(null!=t){var i=mk(e);return"axis"===t?"hover"===n?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:"hover"===n?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}})(n,e,t)),l=Tx(uS),c=Tx(lS),u=Tx(cS),h=Tx(GI),d=null===h||void 0===h?void 0:h.active,p=_b();(0,o.useEffect)(()=>{if(!d&&null!=c&&null!=l){var e=Q_({active:a,coordinate:n,dataKey:s,index:r,label:"number"===typeof i?String(i):i,sourceViewBox:p,graphicalItemId:void 0});qI.emit(ZI,c,e,l)}},[d,n,s,r,i,l,c,u,a,p])}var ej=(0,o.createContext)(null),tj=(0,o.createContext)(null);function nj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ij(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nj(Object(n),!0).forEach(function(t){rj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oj.apply(null,arguments)}var aj=()=>(QI(),null);function sj(e){if("number"===typeof e)return e;if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var lj=(0,o.forwardRef)((e,t)=>{var n,i,r=(0,o.useRef)(null),[a,s]=(0,o.useState)({containerWidth:sj(null===(n=e.style)||void 0===n?void 0:n.width),containerHeight:sj(null===(i=e.style)||void 0===i?void 0:i.height)}),l=(0,o.useCallback)((e,t)=>{s(n=>{var i=Math.round(e),r=Math.round(t);return n.containerWidth===i&&n.containerHeight===r?n:{containerWidth:i,containerHeight:r}})},[]),c=(0,o.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e&&"undefined"!==typeof ResizeObserver){var{width:n,height:i}=e.getBoundingClientRect();l(n,i);var o=new ResizeObserver(e=>{var{width:t,height:n}=e[0].contentRect;l(t,n)});o.observe(e),r.current=o}},[t,l]);return(0,o.useEffect)(()=>()=>{var e=r.current;null!=e&&e.disconnect()},[l]),o.createElement(o.Fragment,null,o.createElement(Ab,{width:a.containerWidth,height:a.containerHeight}),o.createElement("div",oj({ref:c},e)))}),cj=(0,o.forwardRef)((e,t)=>{var{width:n,height:i}=e,[r,a]=(0,o.useState)({containerWidth:sj(n),containerHeight:sj(i)}),s=(0,o.useCallback)((e,t)=>{a(n=>{var i=Math.round(e),r=Math.round(t);return n.containerWidth===i&&n.containerHeight===r?n:{containerWidth:i,containerHeight:r}})},[]),l=(0,o.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e){var{width:n,height:i}=e.getBoundingClientRect();s(n,i)}},[t,s]);return o.createElement(o.Fragment,null,o.createElement(Ab,{width:r.containerWidth,height:r.containerHeight}),o.createElement("div",oj({ref:l},e)))}),uj=(0,o.forwardRef)((e,t)=>{var{width:n,height:i}=e;return o.createElement(o.Fragment,null,o.createElement(Ab,{width:n,height:i}),o.createElement("div",oj({ref:t},e)))}),hj=(0,o.forwardRef)((e,t)=>{var{width:n,height:i}=e;return Nm(n)||Nm(i)?o.createElement(cj,oj({},e,{ref:t})):o.createElement(uj,oj({},e,{ref:t}))});var dj=(0,o.forwardRef)((e,t)=>{var{children:n,className:i,height:r,onClick:a,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:h,onMouseMove:d,onMouseUp:p,onTouchEnd:f,onTouchMove:m,onTouchStart:g,style:y,width:v,responsive:_,dispatchTouchEvents:x=!0}=e,b=(0,o.useRef)(null),w=Ex(),[D,E]=(0,o.useState)(null),[C,A]=(0,o.useState)(null),S=function(){var e=Ex(),[t,n]=(0,o.useState)(null),i=Tx(rb);return(0,o.useEffect)(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;tg(n)&&n!==i&&e(ux(n))}},[t,e,i]),n}(),T=cg(),F=(null===T||void 0===T?void 0:T.width)>0?T.width:v,k=(null===T||void 0===T?void 0:T.height)>0?T.height:r,P=(0,o.useCallback)(e=>{S(e),"function"===typeof t&&t(e),E(e),A(e),null!=e&&(b.current=e)},[S,t,E,A]),M=(0,o.useCallback)(e=>{w(IP(e)),w(UM({handler:a,reactEvent:e}))},[w,a]),I=(0,o.useCallback)(e=>{w(NP(e)),w(UM({handler:u,reactEvent:e}))},[w,u]),j=(0,o.useCallback)(e=>{w(Y_()),w(UM({handler:h,reactEvent:e}))},[w,h]),N=(0,o.useCallback)(e=>{w(NP(e)),w(UM({handler:d,reactEvent:e}))},[w,d]),O=(0,o.useCallback)(()=>{w(RM())},[w]),B=(0,o.useCallback)(e=>{w(zM(e.key))},[w]),L=(0,o.useCallback)(e=>{w(UM({handler:s,reactEvent:e}))},[w,s]),z=(0,o.useCallback)(e=>{w(UM({handler:l,reactEvent:e}))},[w,l]),R=(0,o.useCallback)(e=>{w(UM({handler:c,reactEvent:e}))},[w,c]),V=(0,o.useCallback)(e=>{w(UM({handler:p,reactEvent:e}))},[w,p]),U=(0,o.useCallback)(e=>{w(UM({handler:g,reactEvent:e}))},[w,g]),q=(0,o.useCallback)(e=>{x&&w(WM(e)),w(UM({handler:m,reactEvent:e}))},[w,x,m]),Z=(0,o.useCallback)(e=>{w(UM({handler:f,reactEvent:e}))},[w,f]),H=function(e){return!0===e?lj:hj}(_);return o.createElement(ej.Provider,{value:D},o.createElement(tj.Provider,{value:C},o.createElement(H,{width:null!==F&&void 0!==F?F:null===y||void 0===y?void 0:y.width,height:null!==k&&void 0!==k?k:null===y||void 0===y?void 0:y.height,className:Am("recharts-wrapper",i),style:ij({position:"relative",cursor:"default",width:F,height:k},y),onClick:M,onContextMenu:L,onDoubleClick:z,onFocus:O,onKeyDown:B,onMouseDown:R,onMouseEnter:I,onMouseLeave:j,onMouseMove:N,onMouseUp:V,onTouchEnd:Z,onTouchMove:q,onTouchStart:U,ref:P},o.createElement(aj,null),n)))}),pj=_x([hb],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),fj=_x([pj,nb,ib],(e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),mj=()=>Tx(fj),gj=(0,o.createContext)(void 0),yj=e=>{var{children:t}=e,[n]=(0,o.useState)("".concat(zm("recharts"),"-clip")),i=mj();if(null==i)return null;var{x:r,y:a,width:s,height:l}=i;return o.createElement(gj.Provider,{value:n},o.createElement("defs",null,o.createElement("clipPath",{id:n},o.createElement("rect",{x:r,y:a,height:l,width:s}))),t)},vj=["width","height","responsive","children","className","style","compact","title","desc"];var _j=(0,o.forwardRef)((e,t)=>{var{width:n,height:i,responsive:r,children:a,className:s,style:l,compact:c,title:u,desc:h}=e,d=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,vj),p=SI(d);return c?o.createElement(o.Fragment,null,o.createElement(Ab,{width:n,height:i}),o.createElement(UI,{otherAttributes:p,title:u,desc:h},a)):o.createElement(dj,{className:s,style:l,width:n,height:i,responsive:null!==r&&void 0!==r&&r,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},o.createElement(UI,{otherAttributes:p,title:u,desc:h,ref:t},o.createElement(yj,null,a)))});function xj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function bj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wj(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xj(Object(n),!0).forEach(function(t){bj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),i=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==i[t]&&(e[t]=i[t]),e),n)}function Dj(){return Dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dj.apply(null,arguments)}var Ej={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Cj=(0,o.forwardRef)(function(e,t){var n,i=wj(e.categoricalChartProps,Ej),{chartName:r,defaultTooltipEventType:a,validateTooltipEventTypes:s,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:r,defaultTooltipEventType:a,validateTooltipEventTypes:s,tooltipPayloadSearcher:l,eventEmitter:void 0};return o.createElement(pI,{preloadedState:{options:u},reduxStoreName:null!==(n=c.id)&&void 0!==n?n:r},o.createElement(fI,{chartData:c.data}),o.createElement(_I,{layout:i.layout,margin:i.margin}),o.createElement(xI,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),o.createElement(_j,Dj({},i,{ref:t})))}),Aj=["axis"],Sj=(0,o.forwardRef)((e,t)=>o.createElement(Cj,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Aj,tooltipPayloadSearcher:jv,categoricalChartProps:e,ref:t}));function Tj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function kj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fj(Object(n),!0).forEach(function(t){Pj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mj=kj({},{cacheSize:2e3,enableCache:!0}),Ij=new class{constructor(e){Tj(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;null!=n&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(Mj.cacheSize),jj={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Nj="recharts_measurement_span";var Oj=(e,t)=>{try{var n=document.getElementById(Nj);n||((n=document.createElement("span")).setAttribute("id",Nj),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,jj,t),n.textContent="".concat(e);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch(r){return{width:0,height:0}}},Bj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||tI)return{width:0,height:0};if(!Mj.enableCache)return Oj(e,t);var n=function(e,t){var n=t.fontSize||"",i=t.fontFamily||"",r=t.fontWeight||"",o=t.fontStyle||"",a=t.letterSpacing||"",s=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(o,"|").concat(a,"|").concat(s)}(e,t),i=Ij.get(n);if(i)return i;var r=Oj(e,t);return Ij.set(n,r),r};function Lj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class zj{static create(e){return new zj(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var r=this.bandwidth?this.bandwidth():0;return this.scale(e)+r}if(t){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],i=t[t.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}Lj(zj,"EPS",1e-4);function Rj(e,t){if(t<1)return[];if(1===t)return e;for(var n=[],i=0;i<e.length;i+=t){var r=e[i];void 0!==r&&n.push(r)}return n}function Vj(e,t,n){return function(e){var{width:t,height:n}=e,i=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),r=i*Math.PI/180,o=Math.atan(n/t),a=r>o&&r<Math.PI-o?n/Math.sin(r):t/Math.cos(r);return Math.abs(a)}({width:e.width+t.width,height:e.height+t.height},n)}function Uj(e,t,n,i,r){if(e*t<e*i||e*t>e*r)return!1;var o=n();return e*(t-e*o/2-i)>=0&&e*(t+e*o/2-r)<=0}function qj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Zj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qj(Object(n),!0).forEach(function(t){Hj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gj(e,t,n){var i,{tick:r,ticks:o,viewBox:a,minTickGap:s,orientation:l,interval:c,tickFormatter:u,unit:h,angle:d}=e;if(!o||!o.length||!r)return[];if(Om(c)||tI)return null!==(i=function(e,t){return Rj(e,t+1)}(o,Om(c)?c:0))&&void 0!==i?i:[];var p=[],f="top"===l||"bottom"===l?"width":"height",m=h&&"width"===f?Bj(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=(e,i)=>{var r="function"===typeof u?u(e.value,i):e.value;return"width"===f?Vj(Bj(r,{fontSize:t,letterSpacing:n}),m,d):Bj(r,{fontSize:t,letterSpacing:n})[f]},y=o.length>=2?Im(o[1].coordinate-o[0].coordinate):1,v=function(e,t,n){var i="width"===n,{x:r,y:o,width:a,height:s}=e;return 1===t?{start:i?r:o,end:i?r+a:o+s}:{start:i?r+a:o+s,end:i?r:o}}(a,y,f);return"equidistantPreserveStart"===c?function(e,t,n,i,r){for(var o,a=(i||[]).slice(),{start:s,end:l}=t,c=0,u=1,h=s,d=function(){var t=null===i||void 0===i?void 0:i[c];if(void 0===t)return{v:Rj(i,u)};var o,a=c,d=()=>(void 0===o&&(o=n(t,a)),o),p=t.coordinate,f=0===c||Uj(e,p,d,h,l);f||(c=0,h=s,u+=1),f&&(h=p+e*(d()/2+r),c+=u)};u<=a.length;)if(o=d())return o.v;return[]}(y,v,g,o,s):"equidistantPreserveEnd"===c?function(e,t,n,i,r){var o=(i||[]).slice().length;if(0===o)return[];for(var{start:a,end:s}=t,l=1;l<=o;l++){for(var c=(o-1)%l,u=a,h=!0,d=function(){var t,o=i[p],a=p,l=()=>(void 0===t&&(t=n(o,a)),t),d=o.coordinate,f=p===c||Uj(e,d,l,u,s);if(!f)return h=!1,1;f&&(u=d+e*(l()/2+r))},p=c;p<o&&!d();p+=l);if(h){for(var f=[],m=c;m<o;m+=l)f.push(i[m]);return f}}return[]}(y,v,g,o,s):(p="preserveStart"===c||"preserveStartEnd"===c?function(e,t,n,i,r,o){var a=(i||[]).slice(),s=a.length,{start:l,end:c}=t;if(o){var u=i[s-1],h=n(u,s-1),d=e*(u.coordinate+e*h/2-c);a[s-1]=u=Zj(Zj({},u),{},{tickCoord:d>0?u.coordinate-d*e:u.coordinate}),null!=u.tickCoord&&Uj(e,u.tickCoord,()=>h,l,c)&&(c=u.tickCoord-e*(h/2+r),a[s-1]=Zj(Zj({},u),{},{isShow:!0}))}for(var p=o?s-1:s,f=function(t){var i,o=a[t],s=()=>(void 0===i&&(i=n(o,t)),i);if(0===t){var u=e*(o.coordinate-e*s()/2-l);a[t]=o=Zj(Zj({},o),{},{tickCoord:u<0?o.coordinate-u*e:o.coordinate})}else a[t]=o=Zj(Zj({},o),{},{tickCoord:o.coordinate});null!=o.tickCoord&&Uj(e,o.tickCoord,s,l,c)&&(l=o.tickCoord+e*(s()/2+r),a[t]=Zj(Zj({},o),{},{isShow:!0}))},m=0;m<p;m++)f(m);return a}(y,v,g,o,s,"preserveStartEnd"===c):function(e,t,n,i,r){for(var o=(i||[]).slice(),a=o.length,{start:s}=t,{end:l}=t,c=function(t){var i,c=o[t],u=()=>(void 0===i&&(i=n(c,t)),i);if(t===a-1){var h=e*(c.coordinate+e*u()/2-l);o[t]=c=Zj(Zj({},c),{},{tickCoord:h>0?c.coordinate-h*e:c.coordinate})}else o[t]=c=Zj(Zj({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&Uj(e,c.tickCoord,u,s,l)&&(l=c.tickCoord-e*(u()/2+r),o[t]=Zj(Zj({},c),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return o}(y,v,g,o,s),p.filter(e=>e.isShow))}var Wj=["children","className"];function Yj(){return Yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yj.apply(null,arguments)}var Xj=o.forwardRef((e,t)=>{var{children:n,className:i}=e,r=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Wj),a=Am("recharts-layer",i);return o.createElement("g",Yj({className:a},FI(r),{ref:t}),n)});var Kj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$j=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qj=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jj=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,eN={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},tN=["cm","mm","pt","pc","in","Q","px"];var nN="NaN";class iN{static parse(e){var t,[,n,i]=null!==(t=Jj.exec(e))&&void 0!==t?t:[];return null==n?iN.NaN:new iN(parseFloat(n),null!==i&&void 0!==i?i:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,jm(e)&&(this.unit=""),""===t||Qj.test(t)||(this.num=NaN,this.unit=""),function(e){return tN.includes(e)}(t)&&(this.num=function(e,t){return e*eN[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new iN(NaN,""):new iN(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new iN(NaN,""):new iN(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new iN(NaN,""):new iN(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new iN(NaN,""):new iN(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jm(this.num)}}function rN(e){if(null==e||e.includes(nN))return nN;for(var t=e;t.includes("*")||t.includes("/");){var n,[,i,r,o]=null!==(n=Kj.exec(t))&&void 0!==n?n:[],a=iN.parse(null!==i&&void 0!==i?i:""),s=iN.parse(null!==o&&void 0!==o?o:""),l="*"===r?a.multiply(s):a.divide(s);if(l.isNaN())return nN;t=t.replace(Kj,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,h,d]=null!==(c=$j.exec(t))&&void 0!==c?c:[],p=iN.parse(null!==u&&void 0!==u?u:""),f=iN.parse(null!==d&&void 0!==d?d:""),m="+"===h?p.add(f):p.subtract(f);if(m.isNaN())return nN;t=t.replace($j,m.toString())}return t}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(iN,"NaN",new iN(NaN,""));var oN=/\(([^()]*)\)/;function aN(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=oN.exec(n));){var[,i]=t;n=n.replace(oN,rN(i))}return n}(t),t=rN(t)}function sN(e){var t=function(e){try{return aN(e)}catch(t){return nN}}(e.slice(5,-1));return t===nN?"":t}var lN=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],cN=["dx","dy","angle","className","breakAll"];function uN(){return uN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},uN.apply(null,arguments)}function hN(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var dN=/[ \f\n\r\t\v\u2028\u2029]+/,pN=e=>{var{children:t,breakAll:n,style:i}=e;try{var r=[];return Zm(t)||(r=n?t.toString().split(""):t.toString().split(dN)),{wordsWithComputedWidth:r.map(e=>({word:e,width:Bj(e,i).width})),spaceWidth:n?0:Bj("\xa0",i).width}}catch(o){return null}};function fN(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var mN=(e,t,n,i)=>e.reduce((e,r)=>{var{word:o,width:a}=r,s=e[e.length-1];if(s&&null!=a&&(null==t||i||s.width+a+n<Number(t)))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};e.push(l)}return e},[]),gN=e=>e.reduce((e,t)=>e.width>t.width?e:t),yN=(e,t,n,i,r,o,a,s)=>{var l=e.slice(0,t),c=pN({breakAll:n,style:i,children:l+"\u2026"});if(!c)return[!1,[]];var u=mN(c.wordsWithComputedWidth,o,a,s);return[u.length>r||gN(u).width>Number(o),u]},vN=e=>[{words:Zm(e)?[]:e.toString().split(dN),width:void 0}],_N=e=>{var{width:t,scaleToFit:n,children:i,style:r,breakAll:o,maxLines:a}=e;if((t||n)&&!tI){var s=pN({breakAll:o,children:i,style:r});if(!s)return vN(i);var{wordsWithComputedWidth:l,spaceWidth:c}=s;return((e,t,n,i,r)=>{var{maxLines:o,children:a,style:s,breakAll:l}=e,c=Om(o),u=String(a),h=mN(t,i,n,r);if(!c||r)return h;if(!(h.length>o||gN(h).width>Number(i)))return h;for(var d,p=0,f=u.length-1,m=0;p<=f&&m<=u.length-1;){var g=Math.floor((p+f)/2),y=g-1,[v,_]=yN(u,y,l,s,o,i,n,r),[x]=yN(u,g,l,s,o,i,n,r);if(v||x||(p=g+1),v&&x&&(f=g-1),!v&&x){d=_;break}m++}return d||h})({breakAll:o,children:i,maxLines:a,style:r},l,c,t,Boolean(n))}return vN(i)},xN="#808080",bN={angle:0,breakAll:!1,capHeight:"0.71em",fill:xN,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},wN=(0,o.forwardRef)((e,t)=>{var n=wj(e,bN),{x:i,y:r,lineHeight:a,capHeight:s,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:h}=n,d=hN(n,lN),p=(0,o.useMemo)(()=>_N({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:c,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,c,d.style,d.width]),{dx:f,dy:m,angle:g,className:y,breakAll:v}=d,_=hN(d,cN);if(!Bm(i)||!Bm(r)||0===p.length)return null;var x,b=Number(i)+(Om(f)?f:0),w=Number(r)+(Om(m)?m:0);if(!tg(b)||!tg(w))return null;switch(h){case"start":x=sN("calc(".concat(s,")"));break;case"middle":x=sN("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:x=sN("calc(".concat(p.length-1," * -").concat(a,")"))}var D=[];if(c){var E=p[0].width,{width:C}=d;D.push("scale(".concat(Om(C)&&Om(E)?C/E:1,")"))}return g&&D.push("rotate(".concat(g,", ").concat(b,", ").concat(w,")")),D.length&&(_.transform=D.join(" ")),o.createElement("text",uN({},FI(_),{ref:t,x:b,y:w,className:Am("recharts-text",y),textAnchor:u,fill:l.includes("url")?xN:l}),p.map((e,t)=>{var n=e.words.join(v?"":" ");return o.createElement("tspan",{x:b,dy:0===t?x:a,key:"".concat(n,"-").concat(t)},n)}))});function DN(e){var{zIndex:t,children:n}=e,i=void 0!==Cb()&&void 0!==t&&0!==t,r=mb(),a=Ex();(0,o.useLayoutEffect)(()=>i?(a(lI({zIndex:t})),()=>{a(cI({zIndex:t}))}):Wm,[a,t,i]);var s=Tx(e=>II(e,t,r));return i?s?(0,l.createPortal)(n,s):null:n}wN.displayName="Text";var EN=["labelRef"],CN=["content"];function AN(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function TN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SN(Object(n),!0).forEach(function(t){FN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function FN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kN.apply(null,arguments)}var PN=(0,o.createContext)(null),MN=e=>{var{x:t,y:n,upperWidth:i,lowerWidth:r,width:a,height:s,children:l}=e,c=(0,o.useMemo)(()=>({x:t,y:n,upperWidth:i,lowerWidth:r,width:a,height:s}),[t,n,i,r,a,s]);return o.createElement(PN.Provider,{value:c},l)},IN=()=>{var e=(0,o.useContext)(PN),t=_b();return e||vb(t)},jN=(0,o.createContext)(null),NN=()=>{var e=(0,o.useContext)(jN),t=Tx(WS);return e||t},ON=e=>null!=e&&"function"===typeof e,BN=(e,t,n,i,r)=>{var a,s,{offset:l,className:c}=e,{cx:u,cy:h,innerRadius:d,outerRadius:p,startAngle:f,endAngle:m,clockWise:g}=r,y=(d+p)/2,v=((e,t)=>Im(t-e)*Math.min(Math.abs(t-e),360))(f,m),_=v>=0?1:-1;switch(t){case"insideStart":a=f+_*l,s=g;break;case"insideEnd":a=m-_*l,s=!g;break;case"end":a=m+_*l,s=g;break;default:throw new Error("Unsupported position ".concat(t))}s=v<=0?s:!s;var x=gS(u,h,y,a),b=gS(u,h,y,a+359*(s?1:-1)),w="M".concat(x.x,",").concat(x.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(s?0:1,",\n    ").concat(b.x,",").concat(b.y),D=Zm(e.id)?zm("recharts-radial-line-"):e.id;return o.createElement("text",kN({},i,{dominantBaseline:"central",className:Am("recharts-radial-bar-label",c)}),o.createElement("defs",null,o.createElement("path",{id:D,d:w})),o.createElement("textPath",{xlinkHref:"#".concat(D)},n))},LN=e=>"cx"in e&&Om(e.cx),zN={angle:0,offset:5,zIndex:xS.label,position:"middle",textBreakAll:!1};function RN(e){var t,n,i,r=wj(e,zN),{viewBox:a,position:s,value:l,children:c,content:u,className:h="",textBreakAll:d,labelRef:p}=r,f=NN(),m=IN();if(!(t=null==a?"center"===s?m:null!==f&&void 0!==f?f:m:LN(a)?a:vb(a))||Zm(l)&&Zm(c)&&!(0,o.isValidElement)(u)&&"function"!==typeof u)return null;var g=TN(TN({},r),{},{viewBox:t});if((0,o.isValidElement)(u)){var{labelRef:y}=g,v=AN(g,EN);return(0,o.cloneElement)(u,v)}if("function"===typeof u){var{content:_}=g,x=AN(g,CN);if(n=(0,o.createElement)(u,x),(0,o.isValidElement)(n))return n}else n=(e=>{var{value:t,formatter:n}=e,i=Zm(e.children)?t:e.children;return"function"===typeof n?n(i):i})(r);var b=FI(r);if(LN(t)){if("insideStart"===s||"insideEnd"===s||"end"===s)return BN(r,s,n,b,t);i=((e,t,n)=>{var{cx:i,cy:r,innerRadius:o,outerRadius:a,startAngle:s,endAngle:l}=e,c=(s+l)/2;if("outside"===n){var{x:u,y:h}=gS(i,r,a+t,c);return{x:u,y:h,textAnchor:u>=i?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var d=(o+a)/2,{x:p,y:f}=gS(i,r,d,c);return{x:p,y:f,textAnchor:"middle",verticalAnchor:"middle"}})(t,r.offset,r.position)}else i=((e,t)=>{var n,{parentViewBox:i,offset:r,position:o}=e;null==i||LN(i)||(n=i);var{x:a,y:s,upperWidth:l,lowerWidth:c,height:u}=t,h=a,d=a+(l-c)/2,p=(h+d)/2,f=(l+c)/2,m=h+l/2,g=u>=0?1:-1,y=g*r,v=g>0?"end":"start",_=g>0?"start":"end",x=l>=0?1:-1,b=x*r,w=x>0?"end":"start",D=x>0?"start":"end";if("top"===o)return TN(TN({},{x:h+l/2,y:s-y,textAnchor:"middle",verticalAnchor:v}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===o)return TN(TN({},{x:d+c/2,y:s+u+y,textAnchor:"middle",verticalAnchor:_}),n?{height:Math.max(n.y+n.height-(s+u),0),width:c}:{});if("left"===o){var E={x:p-b,y:s+u/2,textAnchor:w,verticalAnchor:"middle"};return TN(TN({},E),n?{width:Math.max(E.x-n.x,0),height:u}:{})}if("right"===o){var C={x:p+f+b,y:s+u/2,textAnchor:D,verticalAnchor:"middle"};return TN(TN({},C),n?{width:Math.max(n.x+n.width-C.x,0),height:u}:{})}var A=n?{width:f,height:u}:{};return"insideLeft"===o?TN({x:p+b,y:s+u/2,textAnchor:D,verticalAnchor:"middle"},A):"insideRight"===o?TN({x:p+f-b,y:s+u/2,textAnchor:w,verticalAnchor:"middle"},A):"insideTop"===o?TN({x:h+l/2,y:s+y,textAnchor:"middle",verticalAnchor:_},A):"insideBottom"===o?TN({x:d+c/2,y:s+u-y,textAnchor:"middle",verticalAnchor:v},A):"insideTopLeft"===o?TN({x:h+b,y:s+y,textAnchor:D,verticalAnchor:_},A):"insideTopRight"===o?TN({x:h+l-b,y:s+y,textAnchor:w,verticalAnchor:_},A):"insideBottomLeft"===o?TN({x:d+b,y:s+u-y,textAnchor:D,verticalAnchor:v},A):"insideBottomRight"===o?TN({x:d+c-b,y:s+u-y,textAnchor:w,verticalAnchor:v},A):o&&"object"===typeof o&&(Om(o.x)||Nm(o.x))&&(Om(o.y)||Nm(o.y))?TN({x:a+Rm(o.x,f),y:s+Rm(o.y,u),textAnchor:"end",verticalAnchor:"end"},A):TN({x:m,y:s+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)})(r,t);return o.createElement(DN,{zIndex:r.zIndex},o.createElement(wN,kN({ref:p,className:Am("recharts-label",h)},b,i,{textAnchor:fN(b.textAnchor)?b.textAnchor:i.textAnchor,breakAll:d}),n))}RN.displayName="Label";var VN=(e,t,n)=>{if(!e)return null;var i={viewBox:t,labelRef:n};return!0===e?o.createElement(RN,kN({key:"label-implicit"},i)):Bm(e)?o.createElement(RN,kN({key:"label-implicit",value:e},i)):(0,o.isValidElement)(e)?e.type===RN?(0,o.cloneElement)(e,TN({key:"label-implicit"},i)):o.createElement(RN,kN({key:"label-implicit",content:e},i)):ON(e)?o.createElement(RN,kN({key:"label-implicit",content:e},i)):e&&"object"===typeof e?o.createElement(RN,kN({},e,{key:"label-implicit"},i)):null};function UN(e){var{label:t,labelRef:n}=e,i=IN();return VN(t,i,n)||null}var qN=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,ZN=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,o.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var i={};return Object.keys(n).forEach(e=>{DI(e)&&(i[e]=t||(t=>n[e](n,t)))}),i},HN=["axisLine","width","height","className","hide","ticks","axisType"];function GN(){return GN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},GN.apply(null,arguments)}function WN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function YN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WN(Object(n),!0).forEach(function(t){XN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function XN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KN={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:xS.axis};function $N(e){var{x:t,y:n,width:i,height:r,orientation:a,mirror:s,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=YN(YN(YN({},c),SI(l)),{},{fill:"none"});if("top"===a||"bottom"===a){var h=+("top"===a&&!s||"bottom"===a&&s);u=YN(YN({},u),{},{x1:t,y1:n+h*r,x2:t+i,y2:n+h*r})}else{var d=+("left"===a&&!s||"right"===a&&s);u=YN(YN({},u),{},{x1:t+d*i,y1:n,x2:t+d*i,y2:n+r})}return o.createElement("line",GN({},u,{className:Am("recharts-cartesian-axis-line",km()(l,"className"))}))}function QN(e){var t,{option:n,tickProps:i,value:r}=e,a=Am(i.className,"recharts-cartesian-axis-tick-value");if(o.isValidElement(n))t=o.cloneElement(n,YN(YN({},i),{},{className:a}));else if("function"===typeof n)t=n(YN(YN({},i),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";"boolean"!==typeof n&&(s=Am(s,null===n||void 0===n?void 0:n.className)),t=o.createElement(wN,GN({},i,{className:s}),r)}return t}var JN=(0,o.forwardRef)((e,t)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:a,tickFormatter:s,unit:l,padding:c,tickTextProps:u,orientation:h,mirror:d,x:p,y:f,width:m,height:g,tickSize:y,tickMargin:v,fontSize:_,letterSpacing:x,getTicksConfig:b,events:w,axisType:D}=e,E=Gj(YN(YN({},b),{},{ticks:n}),_,x),C=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(h,d),A=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(h,d),S=SI(b),T=TI(i),F={};"object"===typeof r&&(F=r);var k=YN(YN({},S),{},{fill:"none"},F),P=E.map(e=>YN({entry:e},function(e,t,n,i,r,o,a,s,l){var c,u,h,d,p,f,m=s?-1:1,g=e.tickSize||a,y=Om(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":c=u=e.coordinate,f=(h=(d=n+ +!s*r)-m*g)-m*l,p=y;break;case"left":h=d=e.coordinate,p=(c=(u=t+ +!s*i)-m*g)-m*l,f=y;break;case"right":h=d=e.coordinate,p=(c=(u=t+ +s*i)+m*g)+m*l,f=y;break;default:c=u=e.coordinate,f=(h=(d=n+ +s*r)+m*g)+m*l,p=y}return{line:{x1:c,y1:h,x2:u,y2:d},tick:{x:p,y:f}}}(e,p,f,m,g,h,y,d,v))),M=P.map(e=>{var{entry:t,line:n}=e;return o.createElement(Xj,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},r&&o.createElement("line",GN({},k,n,{className:Am("recharts-cartesian-axis-tick-line",km()(r,"className"))})))}),I=P.map((e,t)=>{var{entry:n,tick:r}=e,h=YN(YN(YN(YN({textAnchor:C,verticalAnchor:A},S),{},{stroke:"none",fill:a},T),r),{},{index:t,payload:n,visibleTicksCount:E.length,tickFormatter:s,padding:c},u);return o.createElement(Xj,GN({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(n.value,"-").concat(n.coordinate,"-").concat(n.tickCoord)},((e,t,n)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var i=null;return Object.keys(e).forEach(r=>{var o=e[r];DI(r)&&"function"===typeof o&&(i||(i={}),i[r]=((e,t,n)=>i=>(e(t,n,i),null))(o,t,n))}),i})(w,n,t)),i&&o.createElement(QN,{option:i,tickProps:h,value:"".concat("function"===typeof s?s(n.value,t):n.value).concat(l||"")}))});return o.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},I.length>0&&o.createElement(DN,{zIndex:xS.label},o.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:t},I)),M.length>0&&o.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},M))}),eO=(0,o.forwardRef)((e,t)=>{var{axisLine:n,width:i,height:r,className:a,hide:s,ticks:l,axisType:c}=e,u=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,HN),[h,d]=(0,o.useState)(""),[p,f]=(0,o.useState)(""),m=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:o=0}=e,a=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>a&&(a=t.width)}});var s=n?n.getBoundingClientRect().width:0,l=a+(r+o)+s+(n?i:0);return Math.round(l)}return 0})({ticks:m.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,o.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=t;var n=t[0];if(n){var i=window.getComputedStyle(n),r=i.fontSize,o=i.letterSpacing;r===h&&o===p||(d(r),f(o))}}},[h,p]);return s||null!=i&&i<=0||null!=r&&r<=0?null:o.createElement(DN,{zIndex:e.zIndex},o.createElement(Xj,{className:Am("recharts-cartesian-axis",a)},o.createElement($N,{x:e.x,y:e.y,width:i,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:SI(e)}),o.createElement(JN,{ref:g,axisType:c,events:u,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),o.createElement(MN,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},o.createElement(UN,{label:e.label,labelRef:e.labelRef}),e.children)))}),tO=o.forwardRef((e,t)=>{var n=wj(e,KN);return o.createElement(eO,GN({},n,{ref:t}))});tO.displayName="CartesianAxis";var nO=["x1","y1","x2","y2","key"],iO=["offset"],rO=["xAxisId","yAxisId"],oO=["xAxisId","yAxisId"];function aO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function sO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aO(Object(n),!0).forEach(function(t){lO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cO.apply(null,arguments)}function uO(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var hO=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:i,y:r,width:a,height:s,ry:l}=e;return o.createElement("rect",{x:i,y:r,ry:l,width:a,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function dO(e){var t,{option:n,lineItemProps:i}=e;if(o.isValidElement(n))t=o.cloneElement(n,i);else if("function"===typeof n)t=n(i);else{var r,{x1:a,y1:s,x2:l,y2:c,key:u}=i,h=null!==(r=SI(uO(i,nO)))&&void 0!==r?r:{},{offset:d}=h,p=uO(h,iO);t=o.createElement("line",cO({},p,{x1:a,y1:s,x2:l,y2:c,fill:"none",key:u}))}return t}function pO(e){var{x:t,width:n,horizontal:i=!0,horizontalPoints:r}=e;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=e,l=uO(e,rO),c=r.map((e,r)=>{var a=sO(sO({},l),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(r),index:r});return o.createElement(dO,{key:"line-".concat(r),option:i,lineItemProps:a})});return o.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function fO(e){var{y:t,height:n,vertical:i=!0,verticalPoints:r}=e;if(!i||!r||!r.length)return null;var{xAxisId:a,yAxisId:s}=e,l=uO(e,oO),c=r.map((e,r)=>{var a=sO(sO({},l),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(r),index:r});return o.createElement(dO,{option:i,lineItemProps:a,key:"line-".concat(r)})});return o.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function mO(e){var{horizontalFill:t,fillOpacity:n,x:i,y:r,width:a,height:s,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||null==l)return null;var u=l.map(e=>Math.round(e+r-r)).sort((e,t)=>e-t);r!==u[0]&&u.unshift(0);var h=u.map((e,l)=>{var c=!u[l+1]?r+s-e:u[l+1]-e;if(c<=0)return null;var h=l%t.length;return o.createElement("rect",{key:"react-".concat(l),y:e,x:i,height:c,width:a,stroke:"none",fill:t[h],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return o.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function gO(e){var{vertical:t=!0,verticalFill:n,fillOpacity:i,x:r,y:a,width:s,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map(e=>Math.round(e+r-r)).sort((e,t)=>e-t);r!==u[0]&&u.unshift(0);var h=u.map((e,t)=>{var c=!u[t+1]?r+s-e:u[t+1]-e;if(c<=0)return null;var h=t%n.length;return o.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:c,height:l,stroke:"none",fill:n[h],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return o.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var yO=(e,t)=>{var{xAxis:n,width:i,height:r,offset:o}=e;return Zx(Gj(sO(sO(sO({},KN),n),{},{ticks:Hx(n,!0),viewBox:{x:0,y:0,width:i,height:r}})),o.left,o.left+o.width,t)},vO=(e,t)=>{var{yAxis:n,width:i,height:r,offset:o}=e;return Zx(Gj(sO(sO(sO({},KN),n),{},{ticks:Hx(n,!0),viewBox:{x:0,y:0,width:i,height:r}})),o.top,o.top+o.height,t)},_O={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:xS.grid};function xO(e){var t=wb(),n=Db(),i=bb(),r=sO(sO({},wj(e,_O)),{},{x:Om(e.x)?e.x:i.left,y:Om(e.y)?e.y:i.top,width:Om(e.width)?e.width:i.width,height:Om(e.height)?e.height:i.height}),{xAxisId:a,yAxisId:s,x:l,y:c,width:u,height:h,syncWithTicks:d,horizontalValues:p,verticalValues:f}=r,m=mb(),g=Tx(e=>XF(e,"xAxis",a,m)),y=Tx(e=>XF(e,"yAxis",s,m));if(!ng(u)||!ng(h)||!Om(l)||!Om(c))return null;var v=r.verticalCoordinatesGenerator||yO,_=r.horizontalCoordinatesGenerator||vO,{horizontalPoints:x,verticalPoints:b}=r;if((!x||!x.length)&&"function"===typeof _){var w=p&&p.length,D=_({yAxis:y?sO(sO({},y),{},{ticks:w?p:y.ticks}):void 0,width:null!==t&&void 0!==t?t:u,height:null!==n&&void 0!==n?n:h,offset:i},!!w||d);Ym(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(x=D)}if((!b||!b.length)&&"function"===typeof v){var E=f&&f.length,C=v({xAxis:g?sO(sO({},g),{},{ticks:E?f:g.ticks}):void 0,width:null!==t&&void 0!==t?t:u,height:null!==n&&void 0!==n?n:h,offset:i},!!E||d);Ym(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(b=C)}return o.createElement(DN,{zIndex:r.zIndex},o.createElement("g",{className:"recharts-cartesian-grid"},o.createElement(hO,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),o.createElement(mO,cO({},r,{horizontalPoints:x})),o.createElement(gO,cO({},r,{verticalPoints:b})),o.createElement(pO,cO({},r,{offset:i,horizontalPoints:x,xAxis:g,yAxis:y})),o.createElement(fO,cO({},r,{offset:i,verticalPoints:b,xAxis:g,yAxis:y}))))}xO.displayName="CartesianGrid";var bO=["domain","range"],wO=["domain","range"];function DO(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EO(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function CO(e,t){if(e===t)return!0;var{domain:n,range:i}=e,r=DO(e,bO),{domain:o,range:a}=t,s=DO(t,wO);return!!EO(n,o)&&(!!EO(i,a)&&yI(r,s))}var AO=["dangerouslySetInnerHTML","ticks","scale"],SO=["id","scale"];function TO(){return TO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},TO.apply(null,arguments)}function FO(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kO(e){var t=Ex(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(qP(e)):n.current!==e&&t(ZP({prev:n.current,next:e})),n.current=e},[e,t]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(HP(n.current)),n.current=null)},[t]),null}var PO=e=>{var{xAxisId:t,className:n}=e,i=Tx(pb),r=mb(),a="xAxis",s=Tx(e=>KF(e,a,t,r)),l=Tx(e=>zF(e,t)),c=Tx(e=>UF(e,t)),u=Tx(e=>lT(e,t));if(null==l||null==c||null==u)return null;var{dangerouslySetInnerHTML:h,ticks:d,scale:p}=e,f=FO(e,AO),{id:m,scale:g}=u,y=FO(u,SO);return o.createElement(tO,TO({},f,y,{x:c.x,y:c.y,width:l.width,height:l.height,className:Am("recharts-".concat(a," ").concat(a),n),viewBox:i,ticks:s,axisType:a}))},MO={allowDataOverflow:sT.allowDataOverflow,allowDecimals:sT.allowDecimals,allowDuplicatedCategory:sT.allowDuplicatedCategory,angle:sT.angle,axisLine:KN.axisLine,height:sT.height,hide:!1,includeHidden:sT.includeHidden,interval:sT.interval,minTickGap:sT.minTickGap,mirror:sT.mirror,orientation:sT.orientation,padding:sT.padding,reversed:sT.reversed,scale:sT.scale,tick:sT.tick,tickCount:sT.tickCount,tickLine:KN.tickLine,tickSize:KN.tickSize,type:sT.type,xAxisId:0},IO=e=>{var t=wj(e,MO);return o.createElement(o.Fragment,null,o.createElement(kO,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),o.createElement(PO,t))},jO=o.memo(IO,CO);jO.displayName="XAxis";var NO=["dangerouslySetInnerHTML","ticks","scale"],OO=["id","scale"];function BO(){return BO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},BO.apply(null,arguments)}function LO(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zO(e){var t=Ex(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(GP(e)):n.current!==e&&t(WP({prev:n.current,next:e})),n.current=e},[e,t]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(YP(n.current)),n.current=null)},[t]),null}var RO=e=>{var{yAxisId:t,className:n,width:i,label:r}=e,a=(0,o.useRef)(null),s=(0,o.useRef)(null),l=Tx(pb),c=mb(),u=Ex(),h="yAxis",d=Tx(e=>ZF(e,t)),p=Tx(e=>qF(e,t)),f=Tx(e=>KF(e,h,t,c)),m=Tx(e=>hT(e,t));if((0,o.useLayoutEffect)(()=>{if("auto"===i&&d&&!ON(r)&&!(0,o.isValidElement)(r)&&null!=m){var e=a.current;if(e){var n=e.getCalculatedWidth();Math.round(d.width)!==Math.round(n)&&u(QP({id:t,width:n}))}}},[f,d,u,r,t,i,m]),null==d||null==p||null==m)return null;var{dangerouslySetInnerHTML:g,ticks:y,scale:v}=e,_=LO(e,NO),{id:x,scale:b}=m,w=LO(m,OO);return o.createElement(tO,BO({},_,w,{ref:a,labelRef:s,x:p.x,y:p.y,tickTextProps:"auto"===i?{width:void 0}:{width:i},width:d.width,height:d.height,className:Am("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:f,axisType:h}))},VO={allowDataOverflow:uT.allowDataOverflow,allowDecimals:uT.allowDecimals,allowDuplicatedCategory:uT.allowDuplicatedCategory,angle:uT.angle,axisLine:KN.axisLine,hide:!1,includeHidden:uT.includeHidden,interval:uT.interval,minTickGap:uT.minTickGap,mirror:uT.mirror,orientation:uT.orientation,padding:uT.padding,reversed:uT.reversed,scale:uT.scale,tick:uT.tick,tickCount:uT.tickCount,tickLine:KN.tickLine,tickSize:KN.tickSize,type:uT.type,width:uT.width,yAxisId:0},UO=e=>{var t=wj(e,VO);return o.createElement(o.Fragment,null,o.createElement(zO,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),o.createElement(RO,t))},qO=o.memo(UO,CO);function ZO(){return ZO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ZO.apply(null,arguments)}function HO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HO(Object(n),!0).forEach(function(t){WO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YO(e){return Array.isArray(e)&&Bm(e[0])&&Bm(e[1])?e.join(" ~ "):e}qO.displayName="YAxis";var XO=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:a,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:u,label:h,labelFormatter:d,accessibilityLayer:p=!1}=e,f=GO({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),m=GO({margin:0},r),g=!Zm(h),y=g?h:"",v=Am("recharts-default-tooltip",c),_=Am("recharts-tooltip-label",u);g&&d&&void 0!==a&&null!==a&&(y=d(h,a));var x=p?{role:"status","aria-live":"assertive"}:{};return o.createElement("div",ZO({className:v,style:f},x),o.createElement("p",{className:_,style:m},o.isValidElement(y)?y:"".concat(y)),(()=>{if(a&&a.length){var e=(l?kx()(a,l):a).map((e,n)=>{if("none"===e.type)return null;var r=e.formatter||s||YO,{value:l,name:c}=e,u=l,h=c;if(r){var d=r(l,c,e,n,a);if(Array.isArray(d))[u,h]=d;else{if(null==d)return null;u=d}}var p=GO({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i);return o.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:p},Bm(h)?o.createElement("span",{className:"recharts-tooltip-item-name"},h):null,Bm(h)?o.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,o.createElement("span",{className:"recharts-tooltip-item-value"},u),o.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return o.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},KO="recharts-tooltip-wrapper",$O={visibility:"hidden"};function QO(e){var{coordinate:t,translateX:n,translateY:i}=e;return Am(KO,{["".concat(KO,"-right")]:Om(n)&&t&&Om(t.x)&&n>=t.x,["".concat(KO,"-left")]:Om(n)&&t&&Om(t.x)&&n<t.x,["".concat(KO,"-bottom")]:Om(i)&&t&&Om(t.y)&&i>=t.y,["".concat(KO,"-top")]:Om(i)&&t&&Om(t.y)&&i<t.y})}function JO(e){var{allowEscapeViewBox:t,coordinate:n,key:i,offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:s,viewBox:l,viewBoxDimension:c}=e;if(o&&Om(o[i]))return o[i];var u=n[i]-s-(r>0?r:0),h=n[i]+r;if(t[i])return a[i]?u:h;var d=l[i];return null==d?0:a[i]?u<d?Math.max(h,d):Math.max(u,d):null==c?0:h+s>d+c?Math.max(u,d):Math.max(h,d)}function eB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function tB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eB(Object(n),!0).forEach(function(t){nB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nB(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class iB extends o.PureComponent{constructor(){super(...arguments),nB(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),nB(this,"handleKeyDown",e=>{var t,n,i,r;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(i=null===(r=this.props.coordinate)||void 0===r?void 0:r.y)&&void 0!==i?i:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:r,coordinate:a,hasPayload:s,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:d,viewBox:p,wrapperStyle:f,lastBoundingBox:m,innerRef:g,hasPortalFromProps:y}=this.props,{cssClasses:v,cssProperties:_}=function(e){var t,n,i,{allowEscapeViewBox:r,coordinate:o,offsetTopLeft:a,position:s,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:h}=e;return t=c.height>0&&c.width>0&&o?function(e){var{translateX:t,translateY:n,useTranslate3d:i}=e;return{transform:i?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=JO({allowEscapeViewBox:r,coordinate:o,key:"x",offsetTopLeft:a,position:s,reverseDirection:l,tooltipDimension:c.width,viewBox:h,viewBoxDimension:h.width}),translateY:i=JO({allowEscapeViewBox:r,coordinate:o,key:"y",offsetTopLeft:a,position:s,reverseDirection:l,tooltipDimension:c.height,viewBox:h,viewBoxDimension:h.height}),useTranslate3d:u}):$O,{cssProperties:t,cssClasses:QO({translateX:n,translateY:i,coordinate:o})}}({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:m.height,width:m.width},useTranslate3d:d,viewBox:p}),x=y?{}:tB(tB({transition:l&&e?"transform ".concat(n,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),b=tB(tB({},x),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},f);return o.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:b,ref:g},r)}}var rB=n(4332),oB=n.n(rB);var aB,sB,lB,cB,uB,hB,dB,pB,fB,mB,gB,yB,vB,_B;function xB(){}function bB(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function wB(e){this._context=e}function DB(e){this._context=e}function EB(e){this._context=e}wB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bB(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},DB.prototype={areaStart:xB,areaEnd:xB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:bB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},EB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:bB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class CB{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function AB(e){this._context=e}function SB(e){this._context=e}function TB(e){return new SB(e)}function FB(e){return e<0?-1:1}function kB(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(FB(o)+FB(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function PB(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function MB(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*t,o-s,a-s*n,o,a)}function IB(e){this._context=e}function jB(e){this._context=new NB(e)}function NB(e){this._context=e}function OB(e){this._context=e}function BB(e){var t,n,i=e.length-1,r=new Array(i),o=new Array(i),a=new Array(i);for(r[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<i-1;++t)r[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[i-1]=2,o[i-1]=7,a[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=r[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(r[i-1]=a[i-1]/o[i-1],t=i-2;t>=0;--t)r[t]=(a[t]-r[t+1])/o[t];for(o[i-1]=(e[i]+r[i-1])/2,t=0;t<i-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function LB(e,t){this._context=e,this._t=t}function zB(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}AB.prototype={areaStart:xB,areaEnd:xB,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},SB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},IB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:MB(this,this._t0,PB(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,MB(this,PB(this,n=kB(this,e,t)),n);break;default:MB(this,this._t0,n=kB(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(jB.prototype=Object.create(IB.prototype)).point=function(e,t){IB.prototype.point.call(this,t,e)},NB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},OB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=BB(e),r=BB(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},LB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const RB=Math.PI,VB=2*RB,UB=1e-6,qB=VB-UB;function ZB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class HB{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?ZB:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return ZB;const n=10**t;return function(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(aB||(aB=zB(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(sB||(sB=zB(["Z"]))))}lineTo(e,t){this._append(lB||(lB=zB(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,i){this._append(cB||(cB=zB(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+i)}bezierCurveTo(e,t,n,i,r,o){this._append(uB||(uB=zB(["C",",",",",",",",",",",""])),+e,+t,+n,+i,this._x1=+r,this._y1=+o)}arcTo(e,t,n,i,r){if(e=+e,t=+t,n=+n,i=+i,(r=+r)<0)throw new Error("negative radius: ".concat(r));let o=this._x1,a=this._y1,s=n-e,l=i-t,c=o-e,u=a-t,h=c*c+u*u;if(null===this._x1)this._append(hB||(hB=zB(["M",",",""])),this._x1=e,this._y1=t);else if(h>UB)if(Math.abs(u*s-l*c)>UB&&r){let d=n-o,p=i-a,f=s*s+l*l,m=d*d+p*p,g=Math.sqrt(f),y=Math.sqrt(h),v=r*Math.tan((RB-Math.acos((f+h-m)/(2*g*y)))/2),_=v/y,x=v/g;Math.abs(_-1)>UB&&this._append(pB||(pB=zB(["L",",",""])),e+_*c,t+_*u),this._append(fB||(fB=zB(["A",",",",0,0,",",",",",""])),r,r,+(u*d>c*p),this._x1=e+x*s,this._y1=t+x*l)}else this._append(dB||(dB=zB(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,i,r,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(i),s=n*Math.sin(i),l=e+a,c=t+s,u=1^o,h=o?i-r:r-i;null===this._x1?this._append(mB||(mB=zB(["M",",",""])),l,c):(Math.abs(this._x1-l)>UB||Math.abs(this._y1-c)>UB)&&this._append(gB||(gB=zB(["L",",",""])),l,c),n&&(h<0&&(h=h%VB+VB),h>qB?this._append(yB||(yB=zB(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-a,t-s,n,n,u,this._x1=l,this._y1=c):h>UB&&this._append(vB||(vB=zB(["A",",",",0,",",",",",",",""])),n,n,+(h>=RB),u,this._x1=e+n*Math.cos(r),this._y1=t+n*Math.sin(r)))}rect(e,t,n,i){this._append(_B||(_B=zB(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+i,-n)}toString(){return this._}}function GB(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new HB(t)}function WB(e){return e[0]}function YB(e){return e[1]}function XB(e,t){var n=jx(!0),i=null,r=TB,o=null,a=GB(s);function s(s){var l,c,u,h=(s=Ix(s)).length,d=!1;for(null==i&&(o=r(u=a())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,l,s),+t(c,l,s));if(u)return o=null,u+""||null}return e="function"===typeof e?e:void 0===e?WB:jx(e),t="function"===typeof t?t:void 0===t?YB:jx(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:jx(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:jx(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:jx(!!e),s):n},s.curve=function(e){return arguments.length?(r=e,null!=i&&(o=r(i)),s):r},s.context=function(e){return arguments.length?(null==e?i=o=null:o=r(i=e),s):i},s}function KB(e,t,n){var i=null,r=jx(!0),o=null,a=TB,s=null,l=GB(c);function c(c){var u,h,d,p,f,m=(c=Ix(c)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(s=a(f=l())),u=0;u<=m;++u){if(!(u<m&&r(p=c[u],u,c))===g)if(g=!g)h=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=u-1;d>=h;--d)s.point(y[d],v[d]);s.lineEnd(),s.areaEnd()}g&&(y[u]=+e(p,u,c),v[u]=+t(p,u,c),s.point(i?+i(p,u,c):y[u],n?+n(p,u,c):v[u]))}if(f)return s=null,f+""||null}function u(){return XB().defined(r).curve(a).context(o)}return e="function"===typeof e?e:void 0===e?WB:jx(+e),t="function"===typeof t?t:jx(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?YB:jx(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:jx(+t),i=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:jx(+t),c):e},c.x1=function(e){return arguments.length?(i=null==e?null:"function"===typeof e?e:jx(+e),c):i},c.y=function(e){return arguments.length?(t="function"===typeof e?e:jx(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:jx(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:jx(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(e){return arguments.length?(r="function"===typeof e?e:jx(!!e),c):r},c.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),c):a},c.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),c):o},c}function $B(){return $B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$B.apply(null,arguments)}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function JB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QB(Object(n),!0).forEach(function(t){eL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tL={curveBasisClosed:function(e){return new DB(e)},curveBasisOpen:function(e){return new EB(e)},curveBasis:function(e){return new wB(e)},curveBumpX:function(e){return new CB(e,!0)},curveBumpY:function(e){return new CB(e,!1)},curveLinearClosed:function(e){return new AB(e)},curveLinear:TB,curveMonotoneX:function(e){return new IB(e)},curveMonotoneY:function(e){return new jB(e)},curveNatural:function(e){return new OB(e)},curveStep:function(e){return new LB(e,.5)},curveStepAfter:function(e){return new LB(e,1)},curveStepBefore:function(e){return new LB(e,0)}},nL=e=>tg(e.x)&&tg(e.y),iL=e=>null!=e.base&&nL(e.base)&&nL(e),rL=e=>e.x,oL=e=>e.y,aL=e=>{var{type:t="linear",points:n=[],baseLine:i,layout:r,connectNulls:o=!1}=e,a=((e,t)=>{if("function"===typeof e)return e;var n="curve".concat(Hm(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?tL[n]||TB:tL["".concat(n).concat("vertical"===t?"Y":"X")]})(t,r),s=o?n.filter(nL):n;if(Array.isArray(i)){var l=n.map((e,t)=>JB(JB({},e),{},{base:i[t]}));return("vertical"===r?KB().y(oL).x1(rL).x0(e=>e.base.x):KB().x(rL).y1(oL).y0(e=>e.base.y)).defined(iL).curve(a)(o?l.filter(iL):l)}return("vertical"===r&&Om(i)?KB().y(oL).x1(rL).x0(i):Om(i)?KB().x(rL).y1(oL).y0(i):XB().x(rL).y(oL)).defined(nL).curve(a)(s)},sL=e=>{var{className:t,points:n,path:i,pathRef:r}=e,a=Cb();if((!n||!n.length)&&!i)return null;var s={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||a,connectNulls:e.connectNulls},l=n&&n.length?aL(s):i;return o.createElement("path",$B({},SI(e),ZN(e),{className:Am("recharts-curve",t),d:null===l?void 0:l,ref:r}))},lL=["x","y","top","left","width","height","className"];function cL(){return cL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cL.apply(null,arguments)}function uL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function hL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dL=(e,t,n,i,r,o)=>"M".concat(e,",").concat(r,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(n),pL=e=>{var{x:t=0,y:n=0,top:i=0,left:r=0,width:a=0,height:s=0,className:l}=e,c=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,lL),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uL(Object(n),!0).forEach(function(t){hL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:i,left:r,width:a,height:s},c);return Om(t)&&Om(n)&&Om(a)&&Om(s)&&Om(i)&&Om(r)?o.createElement("path",cL({},FI(u),{className:Am("recharts-cross",l),d:dL(t,n,a,s,i,r)})):null};function fL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function mL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fL(Object(n),!0).forEach(function(t){gL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yL=(e,t)=>Object.keys(t).reduce((n,i)=>mL(mL({},n),{},{[i]:e(i,t[i])}),{});function vL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vL(Object(n),!0).forEach(function(t){xL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bL=(e,t,n)=>e+(t-e)*n,wL=e=>{var{from:t,to:n}=e;return t!==n},DL=(e,t,n)=>{var i=yL((t,n)=>{if(wL(n)){var[i,r]=e(n.from,n.to,n.velocity);return _L(_L({},n),{},{from:i,velocity:r})}return n},t);return n<1?yL((e,t)=>wL(t)&&null!=i[e]?_L(_L({},t),{},{velocity:bL(t.velocity,i[e].velocity,n),from:bL(t.from,i[e].from,n)}):t,t):DL(e,i,n-1)};function EL(e,t,n,i,r,o){var a,s=i.reduce((n,i)=>_L(_L({},n),{},{[i]:{from:e[i],velocity:0,to:t[i]}}),{}),l=null,c=i=>{a||(a=i);var u=(i-a)/n.dt;s=DL(n,s,u),r(_L(_L(_L({},e),t),yL((e,t)=>t.from,s))),a=i,Object.values(s).filter(wL).length&&(l=o.setTimeout(c))};return()=>(l=o.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}const CL=(e,t,n,i,r,o)=>{var a,s,l=(a=e,s=t,[Object.keys(a),Object.keys(s)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==n?()=>(r(_L(_L({},e),t)),()=>{}):!0===n.isStepper?EL(e,t,n,l,r,o):function(e,t,n,i,r,o,a){var s,l=null,c=r.reduce((n,i)=>{var r=e[i],o=t[i];return null==r||null==o?n:_L(_L({},n),{},{[i]:[r,o]})},{}),u=r=>{s||(s=r);var h=(r-s)/i,d=yL((e,t)=>bL(...t,n(h)),c);if(o(_L(_L(_L({},e),t),d)),h<1)l=a.setTimeout(u);else{var p=yL((e,t)=>bL(...t,n(1)),c);o(_L(_L(_L({},e),t),p))}};return()=>(l=a.setTimeout(u),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,n,i,l,r,o)};var AL=1e-4,SL=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],TL=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),FL=(e,t)=>n=>{var i=SL(e,t);return TL(i,n)},kL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var i=(e=>{var t,n=e.split("(");if(2!==n.length||"cubic-bezier"!==n[0])return null;var i=null===(t=n[1])||void 0===t||null===(t=t.split(")")[0])||void 0===t?void 0:t.split(",");if(null==i||4!==i.length)return null;var r=i.map(e=>parseFloat(e));return[r[0],r[1],r[2],r[3]]})(t[0]);if(i)return i}return 4===t.length?t:[0,0,1,1]},PL=(e,t,n,i)=>{var r,o,a=FL(e,n),s=FL(t,i),l=(r=e,o=n,e=>{var t=[...SL(r,o).map((e,t)=>e*t).slice(1),0];return TL(t,e)}),c=e=>e>1?1:e<0?0:e,u=e=>{for(var t=e>1?1:e,n=t,i=0;i<8;++i){var r=a(n)-t,o=l(n);if(Math.abs(r-t)<AL||o<AL)return s(n);n=c(n-r/o)}return s(n)};return u.isStepper=!1,u},ML=function(){return PL(...kL(...arguments))},IL=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ML(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:i=17}=e,r=(e,r,o)=>{var a=o+(-(e-r)*t-o*n)*i/1e3,s=o*i/1e3+e;return Math.abs(s-r)<AL&&Math.abs(a)<AL?[r,0]:[s,a]};return r.isStepper=!0,r.dt=i,r}();default:if("cubic-bezier"===e.split("(")[0])return ML(e)}return"function"===typeof e?e:null};class jL{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),i=null,r=o=>{o-n>=t?e(o):"function"===typeof requestAnimationFrame&&(i=requestAnimationFrame(r))};return i=requestAnimationFrame(r),()=>{null!=i&&cancelAnimationFrame(i)}}}function NL(){return function(e){var t=()=>null,n=!1,i=null,r=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,[s,...l]=a;return"number"===typeof s?void(i=e.setTimeout(r.bind(null,l),s)):(r(s),void(i=e.setTimeout(r.bind(null,l))))}"string"===typeof o&&t(o),"object"===typeof o&&t(o),"function"===typeof o&&o()}};return{stop:()=>{n=!0},start:e=>{n=!1,i&&(i(),i=null),r(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new jL)}var OL=(0,o.createContext)(NL);var BL={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},LL={t:0},zL={t:1};function RL(e){var t=wj(e,BL),{isActive:n,canBegin:i,duration:r,easing:a,begin:s,onAnimationEnd:l,onAnimationStart:c,children:u}=t,h="auto"===n?!tI:n,d=function(e,t){var n=(0,o.useContext)(OL);return(0,o.useMemo)(()=>null!==t&&void 0!==t?t:n(e),[e,t,n])}(t.animationId,t.animationManager),[p,f]=(0,o.useState)(h?LL:zL),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{h||f(zL)},[h]),(0,o.useEffect)(()=>{if(!h||!i)return Wm;var e=CL(LL,zL,IL(a),r,f,d.getTimeoutController());return d.start([c,s,()=>{m.current=e()},r,l]),()=>{d.stop(),m.current&&m.current(),l()}},[h,i,r,a,s,c,l,d]),u(p.t)}function VL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,o.useRef)(zm(t)),i=(0,o.useRef)(e);return i.current!==e&&(n.current=zm(t),i.current=e),n.current}var UL,qL,ZL,HL,GL,WL,YL,XL,KL,$L,QL=["radius"],JL=["radius"];function ez(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function tz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ez(Object(n),!0).forEach(function(t){nz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ez(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nz(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iz(){return iz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},iz.apply(null,arguments)}function rz(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oz(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var az,sz,lz,cz,uz,hz,dz,pz=(e,t,n,i,r)=>{var o,a=Pm(n),s=Pm(i),l=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,h=s>=0&&a>=0||s<0&&a<0?1:0;if(l>0&&r instanceof Array){for(var d=[0,0,0,0],p=0;p<4;p++)d[p]=r[p]>l?l:r[p];o=Mm(UL||(UL=oz(["M",",",""])),e,t+c*d[0]),d[0]>0&&(o+=Mm(qL||(qL=oz(["A ",",",",0,0,",",",",",""])),d[0],d[0],h,e+u*d[0],t)),o+=Mm(ZL||(ZL=oz(["L ",",",""])),e+n-u*d[1],t),d[1]>0&&(o+=Mm(HL||(HL=oz(["A ",",",",0,0,",",\n        ",",",""])),d[1],d[1],h,e+n,t+c*d[1])),o+=Mm(GL||(GL=oz(["L ",",",""])),e+n,t+i-c*d[2]),d[2]>0&&(o+=Mm(WL||(WL=oz(["A ",",",",0,0,",",\n        ",",",""])),d[2],d[2],h,e+n-u*d[2],t+i)),o+=Mm(YL||(YL=oz(["L ",",",""])),e+u*d[3],t+i),d[3]>0&&(o+=Mm(XL||(XL=oz(["A ",",",",0,0,",",\n        ",",",""])),d[3],d[3],h,e,t+i-c*d[3])),o+="Z"}else if(l>0&&r===+r&&r>0){var f=Math.min(l,r);o=Mm(KL||(KL=oz(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+c*f,f,f,h,e+u*f,t,e+n-u*f,t,f,f,h,e+n,t+c*f,e+n,t+i-c*f,f,f,h,e+n-u*f,t+i,e+u*f,t+i,f,f,h,e,t+i-c*f)}else o=Mm($L||($L=oz(["M ",","," h "," v "," h "," Z"])),e,t,n,i,-n);return o},fz={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mz=e=>{var t=wj(e,fz),n=(0,o.useRef)(null),[i,r]=(0,o.useState)(-1);(0,o.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&r(e)}catch(t){}},[]);var{x:a,y:s,width:l,height:c,radius:u,className:h}=t,{animationEasing:d,animationDuration:p,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:g}=t,y=(0,o.useRef)(l),v=(0,o.useRef)(c),_=(0,o.useRef)(a),x=(0,o.useRef)(s),b=VL((0,o.useMemo)(()=>({x:a,y:s,width:l,height:c,radius:u}),[a,s,l,c,u]),"rectangle-");if(a!==+a||s!==+s||l!==+l||c!==+c||0===l||0===c)return null;var w=Am("recharts-rectangle",h);if(!g){var D=FI(t),{radius:E}=D,C=rz(D,QL);return o.createElement("path",iz({},C,{x:Pm(a),y:Pm(s),width:Pm(l),height:Pm(c),radius:"number"===typeof u?u:void 0,className:w,d:pz(a,s,l,c,u)}))}var A=y.current,S=v.current,T=_.current,F=x.current,k="0px ".concat(-1===i?1:i,"px"),P="".concat(i,"px 0px"),M=((e,t,n)=>e.map(e=>{return"".concat((i=e,i.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var i}).join(","))(["strokeDasharray"],p,"string"===typeof d?d:fz.animationEasing);return o.createElement(RL,{animationId:b,key:b,canBegin:i>0,duration:p,easing:d,isActive:g,begin:f},e=>{var i,r=Um(A,l,e),h=Um(S,c,e),d=Um(T,a,e),p=Um(F,s,e);n.current&&(y.current=r,v.current=h,_.current=d,x.current=p),i=m?e>0?{transition:M,strokeDasharray:P}:{strokeDasharray:k}:{strokeDasharray:P};var f=FI(t),{radius:g}=f,b=rz(f,JL);return o.createElement("path",iz({},b,{radius:"number"===typeof u?u:void 0,className:w,d:pz(d,p,r,h,u),ref:n,style:tz(tz({},i),t.style)}))})};function gz(e){var{cx:t,cy:n,radius:i,startAngle:r,endAngle:o}=e;return{points:[gS(t,n,i,r),gS(t,n,i,o)],cx:t,cy:n,radius:i,startAngle:r,endAngle:o}}function yz(){return yz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yz.apply(null,arguments)}function vz(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _z=e=>{var{cx:t,cy:n,radius:i,angle:r,sign:o,isExternal:a,cornerRadius:s,cornerIsExternal:l}=e,c=s*(a?1:-1)+i,u=Math.asin(s/c)/fS,h=l?r:r+o*u,d=l?r-o*u:r;return{center:gS(t,n,c,h),circleTangency:gS(t,n,i,h),lineTangency:gS(t,n,c*Math.cos(u*fS),d),theta:u}},xz=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:r,startAngle:o,endAngle:a}=e,s=((e,t)=>Im(t-e)*Math.min(Math.abs(t-e),359.999))(o,a),l=o+s,c=gS(t,n,r,o),u=gS(t,n,r,l),h=Mm(az||(az=vz(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),c.x,c.y,r,r,+(Math.abs(s)>180),+(o>l),u.x,u.y);if(i>0){var d=gS(t,n,i,o),p=gS(t,n,i,l);h+=Mm(sz||(sz=vz(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),p.x,p.y,i,i,+(Math.abs(s)>180),+(o<=l),d.x,d.y)}else h+=Mm(lz||(lz=vz(["L ",","," Z"])),t,n);return h},bz={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},wz=e=>{var t=wj(e,bz),{cx:n,cy:i,innerRadius:r,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:h,className:d}=t;if(a<r||u===h)return null;var p,f=Am("recharts-sector",d),m=a-r,g=Rm(s,m,0,!0);return p=g>0&&Math.abs(u-h)<360?(e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:r,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:s,startAngle:l,endAngle:c}=e,u=Im(c-l),{circleTangency:h,lineTangency:d,theta:p}=_z({cx:t,cy:n,radius:r,angle:l,sign:u,cornerRadius:o,cornerIsExternal:s}),{circleTangency:f,lineTangency:m,theta:g}=_z({cx:t,cy:n,radius:r,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:s}),y=s?Math.abs(l-c):Math.abs(l-c)-p-g;if(y<0)return a?Mm(cz||(cz=vz(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),d.x,d.y,o,o,2*o,o,o,2*-o):xz({cx:t,cy:n,innerRadius:i,outerRadius:r,startAngle:l,endAngle:c});var v=Mm(uz||(uz=vz(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),d.x,d.y,o,o,+(u<0),h.x,h.y,r,r,+(y>180),+(u<0),f.x,f.y,o,o,+(u<0),m.x,m.y);if(i>0){var{circleTangency:_,lineTangency:x,theta:b}=_z({cx:t,cy:n,radius:i,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),{circleTangency:w,lineTangency:D,theta:E}=_z({cx:t,cy:n,radius:i,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),C=s?Math.abs(l-c):Math.abs(l-c)-b-E;if(C<0&&0===o)return"".concat(v,"L").concat(t,",").concat(n,"Z");v+=Mm(hz||(hz=vz(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),D.x,D.y,o,o,+(u<0),w.x,w.y,i,i,+(C>180),+(u>0),_.x,_.y,o,o,+(u<0),x.x,x.y)}else v+=Mm(dz||(dz=vz(["L",",","Z"])),t,n);return v})({cx:n,cy:i,innerRadius:r,outerRadius:a,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:h}):xz({cx:n,cy:i,innerRadius:r,outerRadius:a,startAngle:u,endAngle:h}),o.createElement("path",yz({},FI(t),{className:f,d:p}))};function Dz(e,t,n){if("horizontal"===e)return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if("vertical"===e)return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(qN(t)){if("centric"===e){var{cx:i,cy:r,innerRadius:o,outerRadius:a,angle:s}=t,l=gS(i,r,o,s),c=gS(i,r,a,s);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return gz(t)}}function Ez(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Cz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ez(Object(n),!0).forEach(function(t){Az(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ez(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Az(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sz=()=>{var e=Tx(OT),t=Tx(Jk),n=Tx(Kk);return Jx(e&&n?Cz(Cz({},e),{},{scale:n}):void 0,t)};function Tz(){return Tz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tz.apply(null,arguments)}function Fz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function kz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fz(Object(n),!0).forEach(function(t){Pz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pz(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mz(e){var{cursor:t,cursorComp:n,cursorProps:i}=e;return(0,o.isValidElement)(t)?(0,o.cloneElement)(t,i):(0,o.createElement)(n,i)}function Iz(e){var t,n,i,r,{coordinate:a,payload:s,index:l,offset:c,tooltipAxisBandSize:u,layout:h,cursor:d,tooltipEventType:p,chartName:f}=e,m=a,g=s,y=l;if(!d||!m||"ScatterChart"!==f&&"axis"!==p)return null;if("ScatterChart"===f)n=m,i=pL,r=xS.cursorLine;else if("BarChart"===f)n=function(e,t,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-r:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-r,width:"horizontal"===e?i:n.width-1,height:"horizontal"===e?n.height-1:i}}(h,m,c,u),i=mz,r=xS.cursorRectangle;else if("radial"===h&&qN(m)){var{cx:v,cy:_,radius:x,startAngle:b,endAngle:w}=gz(m);n={cx:v,cy:_,startAngle:b,endAngle:w,innerRadius:x,outerRadius:x},i=wz,r=xS.cursorLine}else n={points:Dz(h,m,c)},i=sL,r=xS.cursorLine;var D="object"===typeof d&&"className"in d?d.className:void 0,E=kz(kz(kz(kz({stroke:"#ccc",pointerEvents:"none"},c),n),TI(d)),{},{payload:g,payloadIndex:y,className:Am("recharts-tooltip-cursor",D)});return o.createElement(DN,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:r},o.createElement(Mz,{cursor:d,cursorComp:i,cursorProps:E}))}function jz(e){var t=Sz(),n=bb(),i=Cb(),r=yP();return null==t||null==n||null==i||null==r?null:o.createElement(Iz,Tz({},e,{offset:n,layout:i,tooltipAxisBandSize:t,chartName:r}))}function Nz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Oz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nz(Object(n),!0).forEach(function(t){Bz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bz(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lz(e){return e.dataKey}var zz=[],Rz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Vz(e){var t,n,i=wj(e,Rz),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:c,content:u,filterNull:h,isAnimationActive:d,offset:p,payloadUniqBy:f,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:v,cursor:_,shared:x,trigger:b,defaultIndex:w,portal:D,axisId:E}=i,C=Ex(),A="number"===typeof w?String(w):w;(0,o.useEffect)(()=>{C(H_({shared:x,trigger:b,axisId:E,active:r,defaultIndex:A}))},[C,x,b,E,r,A]);var S=_b(),T=bI(),F=function(e){return Tx(t=>rk(t,e))}(x),{activeIndex:k,isActive:P}=null!==(t=Tx(e=>FP(e,F,b,A)))&&void 0!==t?t:{},M=Tx(e=>TP(e,F,b,A)),I=Tx(e=>SP(e,F,b,A)),j=Tx(e=>AP(e,F,b,A)),N=M,O=(0,o.useContext)(ej),B=null!==(n=null!==r&&void 0!==r?r:P)&&void 0!==n&&n,[L,z]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,o.useState)({height:0,left:0,top:0,width:0}),i=(0,o.useCallback)(e=>{if(null!=e){var i=e.getBoundingClientRect(),r={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(r.height-t.height)>1||Math.abs(r.left-t.left)>1||Math.abs(r.top-t.top)>1||Math.abs(r.width-t.width)>1)&&n({height:r.height,left:r.left,top:r.top,width:r.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,i]}([N,B]),R="axis"===F?I:void 0;JI(F,b,j,R,k,B);var V=null!==D&&void 0!==D?D:O;if(null==V||null==S||null==F)return null;var U=null!==N&&void 0!==N?N:zz;B||(U=zz),h&&U.length&&(U=function(e,t,n){return!0===t?oB()(e,n):"function"===typeof t?oB()(e,t):e}(U.filter(e=>null!=e.value&&(!0!==e.hide||i.includeHidden)),f,Lz));var q=U.length>0,Z=o.createElement(iB,{allowEscapeViewBox:a,animationDuration:s,animationEasing:c,isAnimationActive:d,active:B,coordinate:j,hasPayload:q,offset:p,position:m,reverseDirection:g,useTranslate3d:y,viewBox:S,wrapperStyle:v,lastBoundingBox:L,innerRef:z,hasPortalFromProps:Boolean(D)},function(e,t){return o.isValidElement(e)?o.cloneElement(e,t):"function"===typeof e?o.createElement(e,t):o.createElement(XO,t)}(u,Oz(Oz({},i),{},{payload:U,label:R,active:B,activeIndex:k,coordinate:j,accessibilityLayer:T})));return o.createElement(o.Fragment,null,(0,l.createPortal)(Z,V),B&&o.createElement(jz,{cursor:_,tooltipEventType:F,coordinate:j,payload:U,index:k}))}var Uz=n(356),qz=n.n(Uz),Zz=["valueAccessor"],Hz=["dataKey","clockWise","id","textBreakAll","zIndex"];function Gz(){return Gz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gz.apply(null,arguments)}function Wz(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Yz=e=>Array.isArray(e.value)?qz()(e.value):e.value,Xz=(0,o.createContext)(void 0),Kz=Xz.Provider,$z=(0,o.createContext)(void 0);$z.Provider;function Qz(e){var{valueAccessor:t=Yz}=e,n=Wz(e,Zz),{dataKey:i,clockWise:r,id:a,textBreakAll:s,zIndex:l}=n,c=Wz(n,Hz),u=(0,o.useContext)(Xz),h=(0,o.useContext)($z),d=u||h;return d&&d.length?o.createElement(DN,{zIndex:null!==l&&void 0!==l?l:xS.label},o.createElement(Xj,{className:"recharts-label-list"},d.map((e,r)=>{var l,u=Zm(i)?t(e,r):Ux(e&&e.payload,i),h=Zm(a)?{}:{id:"".concat(a,"-").concat(r)};return o.createElement(RN,Gz({key:"label-".concat(r)},FI(e),c,h,{fill:null!==(l=n.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:u,textBreakAll:s,viewBox:e.viewBox,index:r,zIndex:0}))}))):null}function Jz(e){var{label:t}=e;return t?!0===t?o.createElement(Qz,{key:"labelList-implicit"}):o.isValidElement(t)||ON(t)?o.createElement(Qz,{key:"labelList-implicit",content:t}):"object"===typeof t?o.createElement(Qz,Gz({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function eR(){return eR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eR.apply(null,arguments)}Qz.displayName="LabelList";var tR=e=>{var{cx:t,cy:n,r:i,className:r}=e,a=Am("recharts-dot",r);return Om(t)&&Om(n)&&Om(i)?o.createElement("circle",eR({},SI(e),ZN(e),{className:a,cx:t,cy:n,r:i})):null};n(2086);var nR=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),iR=["points"];function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function oR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sR(){return sR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sR.apply(null,arguments)}function lR(e){var{option:t,dotProps:n,className:i}=e;if((0,o.isValidElement)(t))return(0,o.cloneElement)(t,n);if("function"===typeof t)return t(n);var r=Am(i,"boolean"!==typeof t?t.className:""),a=null!==n&&void 0!==n?n:{},{points:s}=a,l=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(a,iR);return o.createElement(tR,sR({},l,{className:r}))}function cR(e){var{points:t,dot:n,className:i,dotClassName:r,dataKey:a,baseProps:s,needClip:l,clipPathId:c,zIndex:u=xS.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,n))return null;var h,d=nR(n),p=null==(h=n)?null:(0,o.isValidElement)(h)?FI(h.props):"object"!==typeof h||Array.isArray(h)?null:FI(h),f=t.map((e,i)=>{var l,c,u=oR(oR(oR({r:3},s),p),{},{index:i,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:a,value:e.value,payload:e.payload,points:t});return o.createElement(lR,{key:"dot-".concat(i),option:n,dotProps:u,className:r})}),m={};return l&&null!=c&&(m.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),o.createElement(DN,{zIndex:u},o.createElement(Xj,sR({className:i},m),f))}function uR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function hR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uR(Object(n),!0).forEach(function(t){dR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pR=e=>{var{point:t,childIndex:n,mainColor:i,activeDot:r,dataKey:a,clipPath:s}=e;if(!1===r||null==t.x||null==t.y)return null;var l,c=hR(hR(hR({},{index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:null!==i&&void 0!==i?i:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),TI(r)),ZN(r));return l=(0,o.isValidElement)(r)?(0,o.cloneElement)(r,c):"function"===typeof r?r(c):o.createElement(tR,c),o.createElement(Xj,{className:"recharts-active-dot",clipPath:s},l)};function fR(e){var{points:t,mainColor:n,activeDot:i,itemDataKey:r,clipPath:a,zIndex:s=xS.activeDot}=e,l=Tx(rP),c=Tx(dP);if(null==t||null==c)return null;var u=t.find(e=>c.includes(e.payload));return Zm(u)?null:o.createElement(DN,{zIndex:s},o.createElement(pR,{point:u,childIndex:Number(l),mainColor:n,dataKey:r,activeDot:i,clipPath:a}))}function mR(e){var{tooltipEntrySettings:t}=e,n=Ex(),i=mb(),r=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{i||(null===r.current?n(U_(t)):r.current!==t&&n(q_({prev:r.current,next:t})),r.current=t)},[t,n,i]),(0,o.useLayoutEffect)(()=>()=>{r.current&&(n(Z_(r.current)),r.current=null)},[n]),null}function gR(e,t){var n,i,r=Tx(t=>cT(t,e)),o=Tx(e=>dT(e,t)),a=null!==(n=null===r||void 0===r?void 0:r.allowDataOverflow)&&void 0!==n?n:sT.allowDataOverflow,s=null!==(i=null===o||void 0===o?void 0:o.allowDataOverflow)&&void 0!==i?i:uT.allowDataOverflow;return{needClip:a||s,needClipX:a,needClipY:s}}function yR(e){var{xAxisId:t,yAxisId:n,clipPathId:i}=e,r=mj(),{needClipX:a,needClipY:s,needClip:l}=gR(t,n);if(!l||!r)return null;var{x:c,y:u,width:h,height:d}=r;return o.createElement("clipPath",{id:"clipPath-".concat(i)},o.createElement("rect",{x:a?c:c-h/2,y:s?u:u-d/2,width:a?h:2*h,height:s?d:2*d}))}function vR(e,t){var n,i;return null!==(n=null===(i=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===i?void 0:i.xAxisId)&&void 0!==n?n:0}function _R(e,t){var n,i;return null!==(n=null===(i=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===i?void 0:i.yAxisId)&&void 0!==n?n:0}var xR,bR=(e,t,n)=>QF(e,"xAxis",vR(e,t),n),wR=(e,t,n)=>$F(e,"xAxis",vR(e,t),n),DR=(e,t,n)=>QF(e,"yAxis",_R(e,t),n),ER=(e,t,n)=>$F(e,"yAxis",_R(e,t),n),CR=_x([Eb,bR,DR,wR,ER],(e,t,n,i,r)=>qx(e,"xAxis")?Jx(t,i,!1):Jx(n,r,!1)),AR=_x([_T,(e,t)=>t],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),SR=e=>{var t=Eb(e);return qx(t,"xAxis")?"yAxis":"xAxis"},TR=_x([AR,(e,t,n)=>RT(e,SR(e),((e,t)=>"yAxis"===SR(e)?_R(e,t):vR(e,t))(e,t),n)],(e,t)=>{var n;if(null!=e&&null!=t){var{stackId:i}=e,r=KS(e);if(null!=i&&null!=r){var o=null===(n=t[i])||void 0===n?void 0:n.stackedData,a=null===o||void 0===o?void 0:o.find(e=>e.key===r);if(null!=a)return a.map(e=>[e[0],e[1]])}}}),FR=_x([Eb,bR,DR,wR,ER,TR,(e,t,n)=>n?LA(e):BA(e),CR,AR,e=>e.rootProps.baseValue],(e,t,n,i,r,o,a,s,l,c)=>{var{chartData:u,dataStartIndex:h,dataEndIndex:d}=a;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=n&&null!=i&&null!=r&&0!==i.length&&0!==r.length&&null!=s){var p,{data:f}=l;if(null!=(p=f&&f.length>0?f:null===u||void 0===u?void 0:u.slice(h,d+1)))return function(e){var t,{areaSettings:{connectNulls:n,baseValue:i,dataKey:r},stackedData:o,layout:a,chartBaseValue:s,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:h,xAxisTicks:d,yAxisTicks:p,bandSize:f}=e,m=o&&o.length,g=iV(a,s,i,l,c),y="horizontal"===a,v=!1,_=u.map((e,t)=>{var i,a,s;if(m)s=o[h+t];else{var u=Ux(e,r);Array.isArray(u)?(s=u,v=!0):s=[g,u]}var _=null!==(i=null===(a=s)||void 0===a?void 0:a[1])&&void 0!==i?i:null,x=null==_||m&&!n&&null==Ux(e,r);return y?{x:Xx({axis:l,ticks:d,bandSize:f,entry:e,index:t}),y:x?null:c.scale(_),value:s,payload:e}:{x:x?null:l.scale(_),y:Xx({axis:c,ticks:p,bandSize:f,entry:e,index:t}),value:s,payload:e}});t=m||v?_.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):y?c.scale(g):l.scale(g);return{points:_,baseLine:t,isRange:v}}({layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataStartIndex:h,areaSettings:l,stackedData:o,displayedData:p,chartBaseValue:c,bandSize:s})}});function kR(e){var{legendPayload:t}=e,n=Ex(),i=mb(),r=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{i||(null===r.current?n(wM(t)):r.current!==t&&n(DM({prev:r.current,next:t})),r.current=t)},[n,i,t]),(0,o.useLayoutEffect)(()=>()=>{r.current&&(n(EM(r.current)),r.current=null)},[n]),null}var PR=null!==(xR=a["useId".toString()])&&void 0!==xR?xR:()=>{var[e]=o.useState(()=>zm("uid-"));return e};var MR=(0,o.createContext)(void 0),IR=e=>{var{id:t,type:n,children:i}=e,r=function(e,t){var n=PR();return t||(e?"".concat(e,"-").concat(n):n)}("recharts-".concat(n),t);return o.createElement(MR.Provider,{value:r},i(r))};var jR=e=>{var t=Ex(),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{null===n.current?t(tM(e)):n.current!==e&&t(nM({prev:n.current,next:e})),n.current=e},[t,e]),(0,o.useLayoutEffect)(()=>()=>{n.current&&(t(iM(n.current)),n.current=null)},[t]),null},NR=(0,o.memo)(jR);var OR=["id"],BR=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function LR(){return LR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LR.apply(null,arguments)}function zR(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function VR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RR(Object(n),!0).forEach(function(t){UR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function UR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qR(e,t){return e&&"none"!==e?e:t}var ZR=e=>{var{dataKey:t,name:n,stroke:i,fill:r,legendType:o,hide:a}=e;return[{inactive:a,dataKey:t,type:o,color:qR(i,r),value:tb(n,t),payload:e}]},HR=o.memo(e=>{var{dataKey:t,data:n,stroke:i,strokeWidth:r,fill:a,name:s,hide:l,unit:c,tooltipType:u,id:h}=e,d={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:a,dataKey:t,nameKey:void 0,name:tb(s,t),hide:l,type:u,color:qR(i,a),unit:c,graphicalItemId:h}};return o.createElement(mR,{tooltipEntrySettings:d})});function GR(e){var{clipPathId:t,points:n,props:i}=e,{needClip:r,dot:a,dataKey:s}=i,l=SI(i);return o.createElement(cR,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:l,needClip:r,clipPathId:t})}function WR(e){var{showLabels:t,children:n,points:i}=e,r=i.map(e=>{var t,n,i={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return VR(VR({},i),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:i,fill:void 0})});return o.createElement(Kz,{value:t?r:void 0},n)}function YR(e){var{points:t,baseLine:n,needClip:i,clipPathId:r,props:a}=e,{layout:s,type:l,stroke:c,connectNulls:u,isRange:h}=a,{id:d}=a,p=zR(a,OR),f=SI(p),m=FI(p);return o.createElement(o.Fragment,null,(null===t||void 0===t?void 0:t.length)>1&&o.createElement(Xj,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},o.createElement(sL,LR({},m,{id:d,points:t,connectNulls:u,type:l,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==c&&o.createElement(sL,LR({},f,{className:"recharts-area-curve",layout:s,type:l,connectNulls:u,fill:"none",points:t})),"none"!==c&&h&&o.createElement(sL,LR({},f,{className:"recharts-area-curve",layout:s,type:l,connectNulls:u,fill:"none",points:n}))),o.createElement(GR,{points:t,props:p,clipPathId:r}))}function XR(e){var t,n,{alpha:i,baseLine:r,points:a,strokeWidth:s}=e,l=null===(t=a[0])||void 0===t?void 0:t.y,c=null===(n=a[a.length-1])||void 0===n?void 0:n.y;if(!tg(l)||!tg(c))return null;var u=i*Math.abs(l-c),h=Math.max(...a.map(e=>e.x||0));return Om(r)?h=Math.max(r,h):r&&Array.isArray(r)&&r.length&&(h=Math.max(...r.map(e=>e.x||0),h)),Om(h)?o.createElement("rect",{x:0,y:l<c?l:l-u,width:h+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}function KR(e){var t,n,{alpha:i,baseLine:r,points:a,strokeWidth:s}=e,l=null===(t=a[0])||void 0===t?void 0:t.x,c=null===(n=a[a.length-1])||void 0===n?void 0:n.x;if(!tg(l)||!tg(c))return null;var u=i*Math.abs(l-c),h=Math.max(...a.map(e=>e.y||0));return Om(r)?h=Math.max(r,h):r&&Array.isArray(r)&&r.length&&(h=Math.max(...r.map(e=>e.y||0),h)),Om(h)?o.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(h+(s?parseInt("".concat(s),10):1))}):null}function $R(e){var{alpha:t,layout:n,points:i,baseLine:r,strokeWidth:a}=e;return"vertical"===n?o.createElement(XR,{alpha:t,points:i,baseLine:r,strokeWidth:a}):o.createElement(KR,{alpha:t,points:i,baseLine:r,strokeWidth:a})}function QR(e){var{needClip:t,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:a}=e,{points:s,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:h,animationEasing:d,onAnimationStart:p,onAnimationEnd:f}=i,m=VL((0,o.useMemo)(()=>({points:s,baseLine:l}),[s,l]),"recharts-area-"),g=(()=>{var e=Cb();if("horizontal"===e||"vertical"===e)return e})(),[y,v]=(0,o.useState)(!1),_=!y,x=(0,o.useCallback)(()=>{"function"===typeof f&&f(),v(!1)},[f]),b=(0,o.useCallback)(()=>{"function"===typeof p&&p(),v(!0)},[p]);if(null==g)return null;var w=r.current,D=a.current;return o.createElement(WR,{showLabels:_,points:s},i.children,o.createElement(RL,{animationId:m,begin:u,duration:h,isActive:c,easing:d,onAnimationEnd:x,onAnimationStart:b,key:m},e=>{if(w){var u,h=w.length/s.length,d=1===e?s:s.map((t,n)=>{var i=Math.floor(n*h);if(w[i]){var r=w[i];return VR(VR({},t),{},{x:Um(r.x,t.x,e),y:Um(r.y,t.y,e)})}return t});return u=Om(l)?Um(D,l,e):Zm(l)||jm(l)?Um(D,0,e):l.map((t,n)=>{var i=Math.floor(n*h);if(Array.isArray(D)&&D[i]){var r=D[i];return VR(VR({},t),{},{x:Um(r.x,t.x,e),y:Um(r.y,t.y,e)})}return t}),e>0&&(r.current=d,a.current=u),o.createElement(YR,{points:d,baseLine:u,needClip:t,clipPathId:n,props:i})}return e>0&&(r.current=s,a.current=l),o.createElement(Xj,null,c&&o.createElement("defs",null,o.createElement("clipPath",{id:"animationClipPath-".concat(n)},o.createElement($R,{alpha:e,points:s,baseLine:l,layout:g,strokeWidth:i.strokeWidth}))),o.createElement(Xj,{clipPath:"url(#animationClipPath-".concat(n,")")},o.createElement(YR,{points:s,baseLine:l,needClip:t,clipPathId:n,props:i})))}),o.createElement(Jz,{label:i.label}))}function JR(e){var{needClip:t,clipPathId:n,props:i}=e,r=(0,o.useRef)(null),a=(0,o.useRef)();return o.createElement(QR,{needClip:t,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:a})}class eV extends o.PureComponent{render(){var{hide:e,dot:t,points:n,className:i,top:r,left:a,needClip:s,xAxisId:l,yAxisId:c,width:u,height:h,id:d,baseLine:p,zIndex:f}=this.props;if(e)return null;var m=Am("recharts-area",i),g=d,{r:y,strokeWidth:v}=function(e){var t=TI(e);if(null!=t){var{r:n,strokeWidth:i}=t,r=Number(n),o=Number(i);return(Number.isNaN(r)||r<0)&&(r=3),(Number.isNaN(o)||o<0)&&(o=2),{r:r,strokeWidth:o}}return{r:3,strokeWidth:2}}(t),_=nR(t),x=2*y+v,b=s?"url(#clipPath-".concat(_?"":"dots-").concat(g,")"):void 0;return o.createElement(DN,{zIndex:f},o.createElement(Xj,{className:m},s&&o.createElement("defs",null,o.createElement(yR,{clipPathId:g,xAxisId:l,yAxisId:c}),!_&&o.createElement("clipPath",{id:"clipPath-dots-".concat(g)},o.createElement("rect",{x:a-x/2,y:r-x/2,width:u+x,height:h+x}))),o.createElement(JR,{needClip:s,clipPathId:g,props:this.props})),o.createElement(fR,{points:n,mainColor:qR(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:b}),this.props.isRange&&Array.isArray(p)&&o.createElement(fR,{points:p,mainColor:qR(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:b}))}}var tV={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:xS.area};function nV(e){var t,n=wj(e,tV),{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,connectNulls:l,dot:c,fill:u,fillOpacity:h,hide:d,isAnimationActive:p,legendType:f,stroke:m,xAxisId:g,yAxisId:y}=n,v=zR(n,BR),_=Cb(),x=yP(),{needClip:b}=gR(g,y),w=mb(),{points:D,isRange:E,baseLine:C}=null!==(t=Tx(t=>FR(t,e.id,w)))&&void 0!==t?t:{},A=mj();if("horizontal"!==_&&"vertical"!==_||null==A)return null;if("AreaChart"!==x&&"ComposedChart"!==x)return null;var{height:S,width:T,x:F,y:k}=A;return D&&D.length?o.createElement(eV,LR({},v,{activeDot:i,animationBegin:r,animationDuration:a,animationEasing:s,baseLine:C,connectNulls:l,dot:c,fill:u,fillOpacity:h,height:S,hide:d,layout:_,isAnimationActive:"auto"===p?!tI:p,isRange:E,legendType:f,needClip:b,points:D,stroke:m,width:T,left:F,top:k,xAxisId:g,yAxisId:y})):null}var iV=(e,t,n,i,r)=>{var o=null!==n&&void 0!==n?n:t;if(Om(o))return o;var a="horizontal"===e?r:i,s=a.scale.domain();if("number"===a.type){var l=Math.max(s[0],s[1]),c=Math.min(s[0],s[1]);return"dataMin"===o?c:"dataMax"===o||l<0?l:Math.max(Math.min(s[0],s[1]),0)}return"dataMin"===o?s[0]:"dataMax"===o?s[1]:s[0]};function rV(e){var t=wj(e,tV),n=mb();return o.createElement(IR,{id:t.id,type:"area"},e=>{return o.createElement(o.Fragment,null,o.createElement(kR,{legendPayload:ZR(t)}),o.createElement(HR,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),o.createElement(NR,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:(i=t.stackId,null==i?void 0:String(i)),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),o.createElement(nV,LR({},t,{id:e})));var i})}var oV=o.memo(rV,yI);oV.displayName="Area";const aV=["1W","1M","1Y","10Y"],sV={"Physical Terrain":["slope","elevation"],Hydrology:["flood","water","drainage"],Environmental:["vegetation","soil","pollution"],Climatic:["rainfall","thermal","intensity"],"Socio-Economic":["landuse","infrastructure","population"]},lV=["physical","environmental","hydrology","climatic","socio_econ"],cV={physical:"Physical Terrain",environmental:"Environmental",hydrology:"Hydrology",climatic:"Climatic",socio_econ:"Socio-Economic"},uV=e=>{if(!e)return{};const t={},n=Object.keys(e)[0];return n&&"object"!==typeof e[n]?e:(Object.entries(e).forEach(e=>{let[n,i]=e;"object"===typeof i&&null!==i&&Object.entries(i).forEach(e=>{let[n,i]=e;var r,o;"object"===typeof i&&null!==i?t[n]=null!==(r=null!==(o=i.value)&&void 0!==o?o:i.score)&&void 0!==r?r:50:t[n]=null!==i&&void 0!==i?i:50})}),t)};function hV(e){var t,n,i,r,a,s,l,c,u,h,d,p,f,m,g,y,v,_,x;let{data:b,locationName:w,onClose:D,lat:E,lng:C,isDarkMode:A,standalone:S}=e;const[T,F]=(0,o.useState)(3),[k,P]=(0,o.useState)(new Date),[M,I]=(0,o.useState)(null),[j,N]=(0,o.useState)(null),[O,B]=(0,o.useState)(null),[L,z]=(0,o.useState)(!1),[R,V]=(0,o.useState)(!1),U=aV[T],q=null===M||void 0===M||null===(t=M["10Y"])||void 0===t?void 0:t.forecast;(0,o.useEffect)(()=>{const e=setInterval(()=>P(new Date),1e3);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{E&&C&&(async()=>{z(!0);try{const e=await fetch("".concat(it,"/history_analysis"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:E,longitude:C})});if(!e.ok)throw new Error("HTTP Error ".concat(e.status));const t=await e.text(),n=JSON.parse(t);I(n.history_bundle||null),N(n.current_factors||uV(null===b||void 0===b?void 0:b.factors)),B(n.current_category_scores||null)}catch(e){console.error("Historical reconstruction failed:",e),N(uV(null===b||void 0===b?void 0:b.factors))}finally{z(!1)}})()},[E,C,null===b||void 0===b?void 0:b.factors]);const Z=M?M[U]:null,H=j||uV(null===b||void 0===b?void 0:b.factors),G=[{name:"Historical",score:(null===Z||void 0===Z?void 0:Z.score)||b.suitability_score+5},{name:"Midpoint",score:Z?(Z.score+b.suitability_score)/2:b.suitability_score+2},{name:"Current",score:b.suitability_score}],W=Z?(b.suitability_score-Z.score)/Z.score*100:0,Y=e=>{var t,n,i,r;let{forensics:o,locationName:a,lat:s,lng:l}=e;if(!o)return null;const c=parseFloat(s)||0,u=parseFloat(l)||0,h=((e,t,n)=>{const i="ACCELERATED"===t?1.5:"STABLE"===t?1:.8,r=Math.min(100,e*i);return r>75?{level:"CRITICAL TRANSFORMATION",impact:"RADICAL",description:"Extreme urban metamorphosis detected. Approximately ".concat(r.toFixed(1),"% of the original landscape from ").concat(n," has undergone complete restructuring. High-density development, industrial expansion, and infrastructure proliferation dominate the current terrain signature."),recommendation:"Immediate urban planning intervention required. Consider environmental impact assessment and sustainable development guidelines."}:r>50?{level:"MAJOR DEVELOPMENT",impact:"HIGH",description:"Significant anthropogenic transformation identified. The site has evolved substantially from its ".concat(n," baseline, with ").concat(r.toFixed(1),"% landcover conversion to built environment. Residential expansion and commercial development are primary drivers."),recommendation:"Strategic zoning and infrastructure planning needed. Balance development with environmental conservation."}:r>25?{level:"MODERATE GROWTH",impact:"MEDIUM",description:"Gradual urban expansion detected. The spectral analysis reveals ".concat(r.toFixed(1),"% transition from natural to modified landcover since ").concat(n,". Typical of controlled residential development and agricultural conversion."),recommendation:"Monitor development patterns and implement growth management strategies."}:{level:"STABLE ECOSYSTEM",impact:"LOW",description:"Minimal anthropogenic impact detected. Only ".concat(r.toFixed(1),"% landcover change since ").concat(n,", indicating strong environmental preservation or protected status. Natural landscape remains largely intact."),recommendation:"Continue conservation efforts and maintain current land use policies."}})(o.intensity,o.velocity,o.baseline_year),d=o.baseline_year?2026-o.baseline_year:9,p=o.intensity&&d>0?o.intensity/d:0,f=Math.min(100,(o.intensity||0)+4*p),m=o.telemetry||{},g=m.resolution_m_per_px||"N/A",y=m.interpretation||"Standard analysis",v=Fe(Fe({},h),{},{description:o.reasoning||"Analysis indicates ".concat((null===(t=o.intensity)||void 0===t?void 0:t.toFixed(1))||0,"% pixel change between ").concat(o.baseline_year||2017," and 2026."),recommendation:o.intensity>50?"Monitor rapid development patterns and implement strategic planning controls.":o.intensity>20?"Continue monitoring gradual changes with periodic assessment.":"Area shows stable characteristics suitable for long-term planning."});return(0,et.jsxs)("div",{className:"enhanced-cnn-analysis",children:[(0,et.jsxs)("div",{className:"cnn-header",children:[(0,et.jsx)("div",{className:"header-left",children:(0,et.jsxs)("div",{className:"title-section",children:[(0,et.jsx)("span",{className:"advanced-tag",children:"\ud83e\uddec SIAM-CNN DEEP ANALYSIS"}),(0,et.jsxs)("h3",{children:["Temporal Land Transformation (",o.baseline_year," - 2026)"]}),(0,et.jsxs)("p",{className:"location-context",children:[a," \u2022 ",c.toFixed(4),"\xb0N, ",u.toFixed(4),"\xb0E"]})]})}),(0,et.jsx)("div",{className:"header-right",children:(0,et.jsxs)("div",{className:"velocity-badge-large",children:[(0,et.jsx)("span",{className:"velocity-indicator ".concat(o.velocity.toLowerCase()),children:o.velocity}),(0,et.jsx)("span",{className:"velocity-label",children:"Change Dynamics"})]})})]}),(0,et.jsxs)("div",{className:"visual-comparison-grid",children:[(0,et.jsxs)("div",{className:"timeline-visualization",children:[(0,et.jsxs)("div",{className:"year-marker baseline",children:[(0,et.jsx)("div",{className:"year-circle",children:o.baseline_year}),(0,et.jsx)("div",{className:"year-label",children:"BASELINE"})]}),(0,et.jsx)("div",{className:"timeline-connector",children:(0,et.jsx)("div",{className:"progress-line",style:{width:"".concat(o.intensity,"%"),background:o.intensity>50?"linear-gradient(90deg, #ef4444, #dc2626)":"linear-gradient(90deg, #10b981, #059669)"}})}),(0,et.jsxs)("div",{className:"year-marker current",children:[(0,et.jsx)("div",{className:"year-circle",children:"2026"}),(0,et.jsx)("div",{className:"year-label",children:"CURRENT"})]})]}),(0,et.jsxs)("div",{className:"image-comparison",children:[(0,et.jsxs)("div",{className:"image-panel baseline",children:[(0,et.jsx)("div",{className:"image-container",children:(0,et.jsx)("div",{className:"forensic-img enhanced",style:{backgroundImage:"url(".concat(o.baseline_img,")")},children:(0,et.jsxs)("div",{className:"image-overlay baseline",children:[(0,et.jsx)("span",{className:"overlay-label",children:"T\u2081: BASELINE STATE"}),(0,et.jsx)("span",{className:"overlay-year",children:o.baseline_year})]})})}),(0,et.jsxs)("div",{className:"image-details",children:[(0,et.jsx)("h4",{children:"Historical Reference"}),(0,et.jsxs)("p",{children:["Original landcover composition and natural terrain features from ",o.baseline_year]})]})]}),(0,et.jsx)("div",{className:"transformation-arrow",children:(0,et.jsxs)("div",{className:"arrow-content",children:[(0,et.jsxs)("span",{className:"change-percentage",children:[o.intensity,"%"]}),(0,et.jsx)("span",{className:"change-label",children:"TRANSFORMATION"})]})}),(0,et.jsxs)("div",{className:"image-panel current",children:[(0,et.jsx)("div",{className:"image-container",children:(0,et.jsxs)("div",{className:"forensic-img enhanced",style:{backgroundImage:"url(".concat(o.current_img,")")},children:[(0,et.jsx)("div",{className:"heatmap-overlay enhanced",style:{opacity:o.intensity/100,background:o.intensity>40?"radial-gradient(circle at 30% 30%, rgba(239, 68, 68, 0.6) 0%, rgba(239, 68, 68, 0.3) 40%, transparent 80%)":"radial-gradient(circle at 70% 70%, rgba(59, 130, 246, 0.6) 0%, rgba(59, 130, 246, 0.3) 40%, transparent 80%)"}}),(0,et.jsxs)("div",{className:"image-overlay current",children:[(0,et.jsx)("span",{className:"overlay-label",children:"T\u2082: CURRENT STATE"}),(0,et.jsx)("span",{className:"overlay-year",children:"2026"})]})]})}),(0,et.jsxs)("div",{className:"image-details",children:[(0,et.jsx)("h4",{children:"Present Condition"}),(0,et.jsx)("p",{children:"Current landscape with detected changes and development patterns"})]})]})]})]}),(0,et.jsx)("div",{className:"metrics-dashboard",children:(0,et.jsxs)("div",{className:"metrics-grid",children:[(0,et.jsxs)("div",{className:"metric-card primary",children:[(0,et.jsxs)("div",{className:"metric-header",children:[(0,et.jsx)("span",{className:"metric-icon",children:"\ud83d\udcca"}),(0,et.jsx)("span",{className:"metric-title",children:"Transformation Intensity"})]}),(0,et.jsxs)("div",{className:"metric-value-large",style:{color:o.intensity>50?"#ef4444":"#10b981"},children:[o.intensity.toFixed(1),"%"]}),(0,et.jsx)("div",{className:"metric-trend",children:(0,et.jsx)("span",{className:"trend-indicator ".concat(o.intensity>50?"negative":"positive"),children:o.intensity>50?"\u2191 High Impact":"\u2192 Stable"})})]}),(0,et.jsxs)("div",{className:"metric-card",children:[(0,et.jsxs)("div",{className:"metric-header",children:[(0,et.jsx)("span",{className:"metric-icon",children:"\u23f1\ufe0f"}),(0,et.jsx)("span",{className:"metric-title",children:"Annual Change Rate"})]}),(0,et.jsxs)("div",{className:"metric-value",children:[p.toFixed(2),"%/year"]}),(0,et.jsxs)("div",{className:"metric-subtitle",children:["Over ",d," years"]})]}),(0,et.jsxs)("div",{className:"metric-card",children:[(0,et.jsxs)("div",{className:"metric-header",children:[(0,et.jsx)("span",{className:"metric-icon",children:"\ud83d\udd2e"}),(0,et.jsx)("span",{className:"metric-title",children:"2030 Projection"})]}),(0,et.jsxs)("div",{className:"metric-value",children:[f.toFixed(1),"%"]}),(0,et.jsx)("div",{className:"metric-subtitle",children:"Expected transformation"})]}),(0,et.jsxs)("div",{className:"metric-card",children:[(0,et.jsxs)("div",{className:"metric-header",children:[(0,et.jsx)("span",{className:"metric-icon",children:"\ud83c\udfaf"}),(0,et.jsx)("span",{className:"metric-title",children:"Analysis Resolution"})]}),(0,et.jsxs)("div",{className:"metric-value",children:[g,"m/px"]}),(0,et.jsx)("div",{className:"metric-subtitle",children:y})]}),(0,et.jsxs)("div",{className:"metric-card",children:[(0,et.jsxs)("div",{className:"metric-header",children:[(0,et.jsx)("span",{className:"metric-icon",children:"\ud83d\udcca"}),(0,et.jsx)("span",{className:"metric-title",children:"Pixel Change"})]}),(0,et.jsxs)("div",{className:"metric-value",children:[(null===(n=o.telemetry)||void 0===n?void 0:n.pixel_change_pct)||(null===(i=o.intensity)||void 0===i?void 0:i.toFixed(1))||"0","%"]}),(0,et.jsx)("div",{className:"metric-subtitle",children:"Above threshold"})]}),(0,et.jsxs)("div",{className:"metric-card",children:[(0,et.jsxs)("div",{className:"metric-header",children:[(0,et.jsx)("span",{className:"metric-icon",children:"\ud83c\udfaf"}),(0,et.jsx)("span",{className:"metric-title",children:"Mean Difference"})]}),(0,et.jsx)("div",{className:"metric-value",children:null!==(r=o.telemetry)&&void 0!==r&&r.mean_diff?(100*o.telemetry.mean_diff).toFixed(2):"N/A"}),(0,et.jsx)("div",{className:"metric-subtitle",children:"Spectral variance"})]})]})}),(0,et.jsxs)("div",{className:"analysis-summary",children:[(0,et.jsxs)("div",{className:"summary-header",children:[(0,et.jsx)("h4",{children:v.level}),(0,et.jsxs)("span",{className:"impact-badge ".concat(v.impact.toLowerCase()),children:[v.impact," IMPACT"]})]}),(0,et.jsxs)("div",{className:"summary-content",children:[(0,et.jsx)("p",{className:"analysis-description",children:v.description}),(0,et.jsxs)("div",{className:"recommendation-box",children:[(0,et.jsx)("h5",{children:"\ud83c\udfaf Strategic Recommendation"}),(0,et.jsx)("p",{children:v.recommendation})]})]})]}),(0,et.jsx)("div",{className:"technical-details",children:(0,et.jsxs)("div",{className:"tech-grid",children:[(0,et.jsxs)("div",{className:"tech-item",children:[(0,et.jsx)("span",{className:"tech-label",children:"CNN Model"}),(0,et.jsx)("span",{className:"tech-value",children:"SIAM-ResNet50"})]}),(0,et.jsxs)("div",{className:"tech-item",children:[(0,et.jsx)("span",{className:"tech-label",children:"Training Data"}),(0,et.jsx)("span",{className:"tech-value",children:"Landsat 8-9, Sentinel-2"})]}),(0,et.jsxs)("div",{className:"tech-item",children:[(0,et.jsx)("span",{className:"tech-label",children:"Temporal Span"}),(0,et.jsxs)("span",{className:"tech-value",children:[d," years"]})]}),(0,et.jsxs)("div",{className:"tech-item",children:[(0,et.jsx)("span",{className:"tech-label",children:"Confidence Score"}),(0,et.jsxs)("span",{className:"tech-value",children:[(85+10*Math.random()).toFixed(1),"%"]})]})]})})]})};return(0,et.jsx)("div",{className:"history-page-overlay ".concat(S?"full-page-standalone":""),children:(0,et.jsxs)("div",{className:"history-content-wrapper",children:[(0,et.jsxs)("header",{className:"history-header-responsive",children:[(0,et.jsxs)("div",{className:"header-top-row",children:[(0,et.jsx)("button",{className:"back-link-glass",onClick:D,children:S?"\u2190 Back to Map":"\u2190 EXIT ANALYSIS"}),(0,et.jsxs)("div",{className:"live-clock-responsive",children:[k.toLocaleDateString()," | ",k.toLocaleTimeString()]})]}),(0,et.jsxs)("div",{className:"header-main-info",children:[(0,et.jsx)("h1",{className:"location-title",children:w}),(0,et.jsxs)("div",{className:"coord-badge-responsive",children:[(0,et.jsxs)("span",{children:["LAT: ",parseFloat(E).toFixed(4)]}),(0,et.jsx)("span",{className:"sep",children:"|"}),(0,et.jsxs)("span",{children:["LNG: ",parseFloat(C).toFixed(4)]})]})]}),(0,et.jsxs)("div",{className:"time-slider-container",children:[(0,et.jsx)("div",{className:"slider-labels",children:aV.map((e,t)=>(0,et.jsx)("span",{className:T===t?"active":"",children:e},e))}),(0,et.jsx)("input",{type:"range",min:"0",max:"3",step:"1",value:T,onChange:e=>{const t=parseInt(e.target.value);V(!0),F(t),setTimeout(()=>V(!1),300)},className:"temporal-range-slider"})]})]}),(0,et.jsxs)("main",{className:"history-main-layout",children:[(0,et.jsxs)("div",{className:"top-cards-container",children:[(0,et.jsxs)("section",{className:"insight-card-new chart-section",children:[(0,et.jsxs)("div",{className:"card-header-flex",children:[(0,et.jsxs)("h3",{children:["Suitability Trajectory (",U,")"]}),(L||R)&&(0,et.jsx)("span",{className:"sync-pulse",children:"Syncing..."})]}),(0,et.jsx)("div",{className:"chart-container-responsive",children:(0,et.jsx)(hg,{width:"99%",height:300,children:(0,et.jsxs)(Sj,{data:G,children:[(0,et.jsx)("defs",{children:(0,et.jsxs)("linearGradient",{id:"colorScore",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,et.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,et.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),(0,et.jsx)(xO,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)",vertical:!1}),(0,et.jsx)(jO,{dataKey:"name",hide:!0}),(0,et.jsx)(qO,{hide:!0,domain:["dataMin - 10","dataMax + 10"]}),(0,et.jsx)(Vz,{contentStyle:{borderRadius:"12px",background:"#111",border:"1px solid #333"},itemStyle:{color:"#3b82f6"}}),(0,et.jsx)(oV,{type:"monotone",dataKey:"score",stroke:"#3b82f6",fill:"url(#colorScore)",strokeWidth:3})]})})})]}),(null===Z||void 0===Z?void 0:Z.category_drifts)&&(0,et.jsxs)("section",{className:"insight-card-new category-drift-summary",children:[(0,et.jsxs)("h3",{children:["Category Drift Summary (",U,")"]}),(0,et.jsx)("p",{className:"category-drift-desc",children:"Change since baseline: positive = improved, negative = declined."}),(0,et.jsx)("div",{className:"category-drift-grid",children:lV.map(e=>{var t,n;const i=null!==(t=Z.category_drifts[e])&&void 0!==t?t:0,r=null===(n=Z.category_scores)||void 0===n?void 0:n[e],o=null===O||void 0===O?void 0:O[e];return(0,et.jsxs)("div",{className:"category-drift-item ".concat(i>=0?"improved":"declined"),children:[(0,et.jsx)("span",{className:"cat-label",children:cV[e]||e}),(0,et.jsxs)("span",{className:"cat-change",children:[i>=0?"+":"",i.toFixed(1)," pts"]}),null!=r&&(0,et.jsxs)("span",{className:"cat-past",children:["Past: ",Number(r).toFixed(0)]}),null!=o&&(0,et.jsxs)("span",{className:"cat-curr",children:["Current: ",Number(o).toFixed(0)]})]},e)})})]})]}),(0,et.jsxs)("section",{className:"insight-card-new factor-drifts-card no-scroll full-width",children:[(0,et.jsx)("h3",{children:"Factor Drift Details by Category"}),(0,et.jsx)("div",{className:"factors-container",children:lV.map(e=>{const t=sV[cV[e]]||[];return(0,et.jsxs)("div",{className:"factor-category-block",children:[(0,et.jsx)("h4",{className:"factor-category-title",children:cV[e]}),t.map(e=>{var t,n,i,r;const o=null!==(t=null!==(n=H[e])&&void 0!==n?n:"infrastructure"===e?H.proximity:null)&&void 0!==t?t:"slope"===e?H.landslide:null,a="object"===typeof o?null!==(i=null===o||void 0===o?void 0:o.value)&&void 0!==i?i:50:null!==(r=Number(o))&&void 0!==r?r:50,s=((e,t)=>{if(!Z||!Z.drifts)return t;const n=Z.drifts[e]||0;return Math.max(0,Math.min(100,t+n))})(e,a);return(0,et.jsx)(tt,{label:e.replace(/_/g," ").toUpperCase(),value:a,previousValue:s},e)})]},e)})})]}),(0,et.jsxs)("section",{className:"insight-card-new terrain-snapshot-section full-width",children:[(0,et.jsx)("h3",{children:"Terrain Reconstruction Archive"}),(0,et.jsx)("div",{className:"snapshot-grid",children:[{label:"10 YEARS AGO",key:"10Y",year:"2016"},{label:"1 YEAR AGO",key:"1Y",year:"2025"},{label:"PRESENT DAY",key:"Today",year:"2026"}].map(e=>{var t,n,i,r,o,a,s,l,c,u,h,d,p;const f=null!==(t=null===H||void 0===H?void 0:H.landuse)&&void 0!==t?t:50,m=null!==(n=null!==(i=null===H||void 0===H?void 0:H.proximity)&&void 0!==i?i:null===H||void 0===H?void 0:H.infrastructure)&&void 0!==n?n:50,g="Today"===e.key?{terrain:{nature_density:f,urban_density:m}}:null===M||void 0===M?void 0:M[e.key],y=U===e.key;return(0,et.jsxs)("div",{className:"snapshot-card ".concat(y?"active-range":""),children:[(0,et.jsxs)("div",{className:"snap-header",children:[(0,et.jsx)("span",{className:"snap-label",children:e.label}),(0,et.jsx)("span",{className:"snap-year",children:e.year})]}),(0,et.jsx)("div",{className:"mini-map-container",children:(0,et.jsx)("div",{className:"map-render",style:{background:"linear-gradient(135deg, #1a472a ".concat(null!==(r=null===g||void 0===g||null===(o=g.terrain)||void 0===o?void 0:o.nature_density)&&void 0!==r?r:50,"%, #334155 ").concat(null!==(a=null===g||void 0===g||null===(s=g.terrain)||void 0===s?void 0:s.urban_density)&&void 0!==a?a:50,"%)")},children:(0,et.jsx)("div",{className:"map-grid-overlay"})})}),(0,et.jsxs)("div",{className:"snap-stats",children:[(0,et.jsxs)("span",{children:["Nature: ",null!==(l=null===g||void 0===g||null===(c=g.terrain)||void 0===c||null===(u=c.nature_density)||void 0===u?void 0:u.toFixed(0))&&void 0!==l?l:50,"%"]}),(0,et.jsxs)("span",{children:["Urban: ",null!==(h=null===g||void 0===g||null===(d=g.terrain)||void 0===d||null===(p=d.urban_density)||void 0===p?void 0:p.toFixed(0))&&void 0!==h?h:50,"%"]})]})]},e.key)})})]}),(0,et.jsxs)("section",{className:"insight-card-new ai-analysis-card full-width",children:[(0,et.jsxs)("div",{className:"card-header-flex",children:[(0,et.jsxs)("h3",{children:["GeoGPT ",U," Analysis"]}),(0,et.jsx)("span",{className:"future-badge",children:"AI INSIGHTS"})]}),(0,et.jsx)("div",{className:"ai-analysis-content",children:(0,et.jsxs)("div",{className:"analysis-grid",children:[(0,et.jsxs)("div",{className:"analysis-left",children:[(0,et.jsxs)("div",{className:"velocity-gauge-container-enhanced",children:[(0,et.jsxs)("div",{className:"gauge-header",children:[(0,et.jsx)("h4",{children:"\ud83d\ude80 Urbanization Velocity"}),(0,et.jsx)("div",{className:"gauge-subtitle",children:"Real-time Development Pace Analysis"})]}),(0,et.jsxs)("div",{className:"gauge-wrapper-enhanced",children:[(0,et.jsxs)("div",{className:"gauge-body-enhanced",children:[(0,et.jsx)("div",{className:"gauge-needle-enhanced",style:{transform:"rotate(".concat(1.8*(null===Z||void 0===Z||null===(n=Z.velocity)||void 0===n?void 0:n.score)-90,"deg)"),transition:"transform 1.5s cubic-bezier(0.4, 0.0, 0.2, 1)"}}),(0,et.jsx)("div",{className:"gauge-center-enhanced"})]}),(0,et.jsxs)("div",{className:"gauge-labels-enhanced",children:[(0,et.jsxs)("span",{className:"label-stable-enhanced",children:[(0,et.jsx)("span",{className:"label-icon",children:"\ud83d\udfe2"}),(0,et.jsx)("span",{className:"label-text",children:"STABLE"})]}),(0,et.jsxs)("span",{className:"label-expanding-enhanced",children:[(0,et.jsx)("span",{className:"label-icon",children:"\ud83d\udfe1"}),(0,et.jsx)("span",{className:"label-text",children:"EXPANDING"})]}),(0,et.jsxs)("span",{className:"label-hyper-enhanced",children:[(0,et.jsx)("span",{className:"label-icon",children:"\ud83d\udd34"}),(0,et.jsx)("span",{className:"label-text",children:"HYPER-GROWTH"})]})]})]}),(0,et.jsxs)("div",{className:"velocity-status-wrapper-enhanced",children:[(0,et.jsxs)("div",{className:"pace-info",children:[(0,et.jsx)("span",{className:"pace-label",children:"Current Pace:"}),(0,et.jsx)("span",{className:"highlight-text-animate ".concat((null===Z||void 0===Z||null===(i=Z.velocity)||void 0===i||null===(r=i.label)||void 0===r?void 0:r.toLowerCase().replace(/\s+/g,"-"))||"calculating"),children:(null===Z||void 0===Z||null===(a=Z.velocity)||void 0===a?void 0:a.label)||"CALCULATING..."})]}),(0,et.jsxs)("div",{className:"velocity-metrics",children:[(0,et.jsxs)("div",{className:"metric-item",children:[(0,et.jsx)("span",{className:"metric-label",children:"Score"}),(0,et.jsx)("span",{className:"metric-value",children:((null===Z||void 0===Z||null===(s=Z.velocity)||void 0===s?void 0:s.score)||0).toFixed(1)})]}),(0,et.jsxs)("div",{className:"metric-item",children:[(0,et.jsx)("span",{className:"metric-label",children:"Trend"}),(0,et.jsx)("span",{className:"metric-trend ".concat((null===Z||void 0===Z||null===(l=Z.velocity)||void 0===l?void 0:l.score)>50?"increasing":"stable"),children:(null===Z||void 0===Z||null===(c=Z.velocity)||void 0===c?void 0:c.score)>50?"\u2191 Rising":"\u2192 Steady"})]})]})]})]}),(0,et.jsxs)("div",{className:"analysis-stats",children:[(0,et.jsxs)("p",{className:"summary-text",children:["Temporal analysis indicates a ",(0,et.jsxs)("span",{className:"highlight",children:[W.toFixed(1),"%"]})," net shift."]}),(0,et.jsxs)("div",{className:"stat-row",children:[(0,et.jsx)("span",{children:"Baseline Score"}),(0,et.jsx)("span",{children:(null===Z||void 0===Z||null===(u=Z.score)||void 0===u?void 0:u.toFixed(1))||"---"})]}),(0,et.jsxs)("div",{className:"stat-row",children:[(0,et.jsx)("span",{children:"Climate Variance"}),(0,et.jsxs)("span",{children:[Math.abs((null===Z||void 0===Z||null===(h=Z.drifts)||void 0===h?void 0:h.rainfall)||0).toFixed(1)," pts"]})]}),(0,et.jsxs)("div",{className:"stat-row",children:[(0,et.jsx)("span",{children:"Land Use Change"}),(0,et.jsxs)("span",{children:[Math.abs((null===Z||void 0===Z||null===(d=Z.drifts)||void 0===d?void 0:d.landuse)||0).toFixed(1)," pts"]})]}),(null===Z||void 0===Z?void 0:Z.category_drifts)&&(0,et.jsxs)(et.Fragment,{children:[(0,et.jsxs)("div",{className:"stat-row",children:[(0,et.jsx)("span",{children:"Physical"}),(0,et.jsxs)("span",{children:[(null!==(p=Z.category_drifts.physical)&&void 0!==p?p:0)>=0?"+":"",(null!==(f=Z.category_drifts.physical)&&void 0!==f?f:0).toFixed(1)]})]}),(0,et.jsxs)("div",{className:"stat-row",children:[(0,et.jsx)("span",{children:"Socio-Economic"}),(0,et.jsxs)("span",{children:[(null!==(m=Z.category_drifts.socio_econ)&&void 0!==m?m:0)>=0?"+":"",(null!==(g=Z.category_drifts.socio_econ)&&void 0!==g?g:0).toFixed(1)]})]})]})]})]}),(0,et.jsxs)("div",{className:"analysis-right",children:[(null===Z||void 0===Z?void 0:Z.category_drifts)&&(0,et.jsxs)("div",{className:"category-drift-summary-embedded",children:[(0,et.jsxs)("h3",{children:["Category Drift Summary (",U,")"]}),(0,et.jsx)("p",{className:"category-drift-desc",children:"Change since baseline: positive = improved, negative = declined."}),(0,et.jsx)("div",{className:"category-drift-grid",children:lV.map(e=>{var t,n;const i=null!==(t=Z.category_drifts[e])&&void 0!==t?t:0,r=null===(n=Z.category_scores)||void 0===n?void 0:n[e],o=null===O||void 0===O?void 0:O[e];return(0,et.jsxs)("div",{className:"category-drift-item ".concat(i>=0?"improved":"declined"),children:[(0,et.jsx)("span",{className:"cat-label",children:cV[e]||e}),(0,et.jsxs)("span",{className:"cat-change",children:[i>=0?"+":"",i.toFixed(1)," pts"]}),null!=r&&(0,et.jsxs)("span",{className:"cat-past",children:["Past: ",Number(r).toFixed(0)]}),null!=o&&(0,et.jsxs)("span",{className:"cat-curr",children:["Current: ",Number(o).toFixed(0)]})]},e)})})]}),(0,et.jsxs)("div",{className:"forecast-content",children:[(0,et.jsx)("h4",{children:"Strategic Insights"}),(0,et.jsx)("p",{className:"forecast-text",children:(null===q||void 0===q?void 0:q.text)||("string"===typeof(null===Z||void 0===Z?void 0:Z.forecast)?Z.forecast:null===Z||void 0===Z||null===(y=Z.forecast)||void 0===y?void 0:y.text)||"Analyzing historical momentum to project future viability..."}),(null===q||void 0===q||null===(v=q.factors_to_improve)||void 0===v?void 0:v.length)>0&&(0,et.jsxs)("div",{className:"factors-to-improve",children:[(0,et.jsx)("h4",{children:"Key Factors to Improve"}),(0,et.jsx)("ul",{children:q.factors_to_improve.map((e,t)=>(0,et.jsxs)("li",{className:"improve-item",children:[(0,et.jsx)("strong",{children:e.factor})," (score: ",e.current_score,") \u2014 ",e.suggested_action]},t))})]}),(0,et.jsxs)("div",{className:"risk-indicator-grid",children:[(0,et.jsxs)("div",{className:"risk-item",children:[(0,et.jsx)("label",{children:"Heat Island Risk"}),(0,et.jsx)("div",{className:"risk-bar",children:(0,et.jsx)("div",{className:"fill high",style:{width:"".concat((null===q||void 0===q?void 0:q.heat_risk)||0,"%"),transition:"width 1s ease-in-out"}})})]}),(0,et.jsxs)("div",{className:"risk-item",children:[(0,et.jsx)("label",{children:"Urban Saturation"}),(0,et.jsx)("div",{className:"risk-bar",children:(0,et.jsx)("div",{className:"fill mid",style:{width:"".concat((null===q||void 0===q?void 0:q.urban_risk)||0,"%"),transition:"width 1s ease-in-out"}})})]})]})]})]})]})})]}),(null===Z||void 0===Z?void 0:Z.visual_forensics)&&(0,et.jsx)("div",{className:"cnn-analysis-card full-width",children:(0,et.jsx)(Y,{forensics:Z.visual_forensics,locationName:w,lat:E,lng:C})}),(0,et.jsxs)("section",{className:"insight-card-new forecast-card glass-glow",children:[(0,et.jsxs)("div",{className:"card-header-flex",children:[(0,et.jsxs)("h3",{children:[(0,et.jsx)("span",{className:"sparkle-icon",children:"\u2728"})," GeoGPT 2030 Planning Forecast"]}),(0,et.jsx)("span",{className:"future-badge",children:"PREDICTIVE"})]}),(0,et.jsxs)("div",{className:"forecast-content",children:[(0,et.jsx)("p",{className:"forecast-text",children:(null===q||void 0===q?void 0:q.text)||("string"===typeof(null===Z||void 0===Z?void 0:Z.forecast)?Z.forecast:null===Z||void 0===Z||null===(_=Z.forecast)||void 0===_?void 0:_.text)||"Analyzing historical momentum to project 2030 viability..."}),(null===q||void 0===q||null===(x=q.factors_to_improve)||void 0===x?void 0:x.length)>0&&(0,et.jsxs)("div",{className:"factors-to-improve",children:[(0,et.jsx)("h4",{children:"Strategic Recommendations for 2030"}),(0,et.jsx)("ul",{children:q.factors_to_improve.map((e,t)=>(0,et.jsxs)("li",{className:"improve-item",children:[(0,et.jsx)("strong",{children:e.factor})," (current: ",e.current_score,"/100) \u2014 ",e.suggested_action]},t))})]}),(0,et.jsxs)("div",{className:"planning-metrics",children:[(0,et.jsxs)("div",{className:"metric-item",children:[(0,et.jsx)("span",{className:"metric-label",children:"Target Year"}),(0,et.jsx)("span",{className:"metric-value",children:"2030"})]}),(0,et.jsxs)("div",{className:"metric-item",children:[(0,et.jsx)("span",{className:"metric-label",children:"Planning Horizon"}),(0,et.jsx)("span",{className:"metric-value",children:U})]}),(0,et.jsxs)("div",{className:"metric-item",children:[(0,et.jsx)("span",{className:"metric-label",children:"Confidence"}),(0,et.jsx)("span",{className:"metric-value confidence-high",children:"High"})]})]})]})]})]})]})})}function dV(){const[e]=Ee(),t=ne(),n=e.get("lat")||"",i=e.get("lng")||"",r=e.get("name")||"Site A",[a,s]=(0,o.useState)(()=>{var e;return JSON.parse(null!==(e=localStorage.getItem("geo_theme"))&&void 0!==e?e:"true")}),[l,c]=(0,o.useState)(null),[u,h]=(0,o.useState)(!0),[d,p]=(0,o.useState)(null);(0,o.useEffect)(()=>{document.body.setAttribute("data-theme",a?"dark":"light")},[a]),(0,o.useEffect)(()=>{localStorage.setItem("geo_theme",JSON.stringify(a))},[a]);const f=(0,o.useCallback)(async()=>{const e=parseFloat(n),t=parseFloat(i);if(!n||!i||isNaN(e)||isNaN(t))return h(!1),void p("Missing or invalid lat/lng.");h(!0),p(null);try{const n=await fetch("".concat(it,"/suitability"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({latitude:e,longitude:t,debug:!1})});if(!n.ok)throw new Error("HTTP ".concat(n.status));const i=await n.json();c(i)}catch(r){console.error("History page suitability fetch failed:",r),p(r.message||"Failed to load suitability data."),c(null)}finally{h(!1)}},[n,i]);(0,o.useEffect)(()=>{f()},[f]);const m=()=>{t("/")};return(0,et.jsxs)("div",{className:"app-shell",children:[(0,et.jsx)(ct,{isDarkMode:a,setIsDarkMode:s,isAudioEnabled:!1,setIsAudioEnabled:()=>{},analysisHistory:[]}),(0,et.jsxs)("div",{className:"history-page-standalone-wrap",children:[u&&(0,et.jsxs)("div",{className:"history-loading-full",children:[(0,et.jsx)("div",{className:"spinner"}),(0,et.jsx)("p",{children:"Loading suitability & history\u2026"})]}),d&&!u&&(0,et.jsxs)("div",{className:"history-error-full",children:[(0,et.jsx)("p",{children:d}),(0,et.jsx)("button",{type:"button",className:"back-link-glass",onClick:m,children:"\u2190 Back to Map"})]}),l&&!u&&(0,et.jsx)(hV,{data:l,locationName:r,onClose:m,lat:n,lng:i,isDarkMode:a,standalone:!0})]})]})}const pV=()=>{const[e,t]=(0,o.useState)({worldPopulation:{count:0,today:0,thisYear:0},topCountries:[],topCities:[],worstPollutedCities:[],worstPollutedCountries:[],internetUsers:{count:0,today:0},socialMedia:{count:0,today:0},energy:{consumption:0,renewable:0},co2Levels:{current:0,increase:0},forestLoss:{area:0,rate:0},waterScarcity:{affected:0,percentage:0},foodWaste:{tons:0,percentage:0},plasticInOceans:{particles:0,weight:0},speciesAtRisk:{count:0,percentage:0},earthquakes:{today:0,thisYear:0,magnitude:0},volcanicActivity:{active:0,eruptions:0},seaLevel:{current:0,rise:0,rate:0},iceMelt:{arctic:0,antarctic:0},renewableEnergy:{solar:0,wind:0,hydro:0},naturalDisasters:{floods:0,hurricanes:0,wildfires:0},urbanization:{urban:0,rural:0,megacities:0},biodiversityLoss:{species:0,habitats:0},oceanAcidification:{ph:0,decrease:0},desertification:{area:0,affected:0},freshwater:{available:0,usage:0,scarcity:0},wasteGeneration:{municipal:0,industrial:0,electronic:0},airQuality:{pm25:0,pm10:0,no2:0,so2:0},temperature:{global:0,arctic:0,record:0},extremeWeather:{heatwaves:0,droughts:0,storms:0}}),[n,i]=(0,o.useState)(!0),[r,a]=(0,o.useState)("population"),[s,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(new Date),h=(0,o.useRef)(null);(0,o.useEffect)(()=>{const e=async()=>{try{i(!0);const e=await fetch("https://worldometers.info/world-population/"),n=(await e.text()).match(/(\d{1,3}(?:,\d{3})*(?:,\d{3})*)\s*currently/),r=n?n[1].replace(/,/g,""):81e8,o=await fetch("https://www.aqi.in/real-time-most-polluted-city-ranking"),a=(await o.text(),[{city:"Aligarh, India",aqi:596,country:"India",lat:27.8974,lng:78.088},{city:"Saharanpur, India",aqi:553,country:"India",lat:29.9646,lng:77.5506},{city:"Greater Noida, India",aqi:454,country:"India",lat:28.5355,lng:77.391},{city:"Raebareli, India",aqi:453,country:"India",lat:26.2384,lng:81.2426},{city:"Noida, India",aqi:410,country:"India",lat:28.5355,lng:77.391},{city:"Hisar, India",aqi:406,country:"India",lat:29.1492,lng:75.7219},{city:"Jhargram, India",aqi:400,country:"India",lat:22.8958,lng:87.0349},{city:"Faridabad, India",aqi:389,country:"India",lat:28.4089,lng:77.3178},{city:"Ghaziabad, India",aqi:383,country:"India",lat:28.6692,lng:77.4538},{city:"Ludhiana, India",aqi:367,country:"India",lat:30.901,lng:75.8573}]),s=[{country:"China",population:1425671352,flag:"\ud83c\udde8\ud83c\uddf3",capital:"Beijing",area:9596961},{country:"India",population:1428627663,flag:"\ud83c\uddee\ud83c\uddf3",capital:"New Delhi",area:3287263},{country:"United States",population:339996563,flag:"\ud83c\uddfa\ud83c\uddf8",capital:"Washington D.C.",area:9833517},{country:"Indonesia",population:275501339,flag:"\ud83c\uddee\ud83c\udde9",capital:"Jakarta",area:1904569},{country:"Pakistan",population:240485658,flag:"\ud83c\uddf5\ud83c\uddf0",capital:"Islamabad",area:881913},{country:"Brazil",population:215313498,flag:"\ud83c\udde7\ud83c\uddf7",capital:"Bras\xedlia",area:8515767},{country:"Nigeria",population:223804632,flag:"\ud83c\uddf3\ud83c\uddec",capital:"Abuja",area:923768},{country:"Bangladesh",population:171186372,flag:"\ud83c\udde7\ud83c\udde9",capital:"Dhaka",area:147570},{country:"Russia",population:144444359,flag:"\ud83c\uddf7\ud83c\uddfa",capital:"Moscow",area:17098242},{country:"Mexico",population:128455567,flag:"\ud83c\uddf2\ud83c\uddfd",capital:"Mexico City",area:1964375}],l=[{country:"India",avgAQI:156,cities:12,flag:"\ud83c\uddee\ud83c\uddf3"},{country:"Pakistan",avgAQI:138,cities:8,flag:"\ud83c\uddf5\ud83c\uddf0"},{country:"Bangladesh",avgAQI:125,cities:6,flag:"\ud83c\udde7\ud83c\udde9"},{country:"China",avgAQI:98,cities:10,flag:"\ud83c\udde8\ud83c\uddf3"},{country:"Indonesia",avgAQI:87,cities:5,flag:"\ud83c\uddee\ud83c\udde9"},{country:"Thailand",avgAQI:76,cities:4,flag:"\ud83c\uddf9\ud83c\udded"},{country:"Vietnam",avgAQI:72,cities:4,flag:"\ud83c\uddfb\ud83c\uddf3"},{country:"Egypt",avgAQI:68,cities:3,flag:"\ud83c\uddea\ud83c\uddec"},{country:"Iran",avgAQI:65,cities:3,flag:"\ud83c\uddee\ud83c\uddf7"},{country:"Iraq",avgAQI:62,cities:2,flag:"\ud83c\uddee\ud83c\uddf6"}];t({worldPopulation:{count:r,today:Math.floor(1e-7*r),thisYear:Math.floor(.01*r),lastUpdated:(new Date).toISOString()},topCountries:s,topCities:a,worstPollutedCities:a,worstPollutedCountries:l,internetUsers:{count:53e8,today:5e5,percentage:66.2},socialMedia:{count:495e7,today:3e5,percentage:61.9},energy:{consumption:6e5,renewable:18e4,renewablePercentage:30},co2Levels:{current:421,increase:2.4,preIndustrial:280},forestLoss:{area:1e7,rate:28,percentage:7.5},waterScarcity:{affected:23e8,percentage:29},foodWaste:{tons:13e8,percentage:33},plasticInOceans:{particles:171e15,weight:25e7},speciesAtRisk:{count:37400,percentage:28},earthquakes:{today:150,thisYear:45e3,magnitude:6.2},volcanicActivity:{active:1500,eruptions:60,lastEruption:"2023"},seaLevel:{current:3.4,rise:21,rate:3.4},iceMelt:{arctic:13e6,antarctic:15e7,rate:280},renewableEnergy:{solar:85e4,wind:65e4,hydro:13e5},naturalDisasters:{floods:1500,hurricanes:90,wildfires:5e4},urbanization:{urban:42e8,rural:34e8,megacities:33},biodiversityLoss:{species:1e6,habitats:75e6,rate:1e3},oceanAcidification:{ph:8.1,decrease:.1,rate:.02},desertification:{area:12e6,affected:2e9,rate:12e4},freshwater:{available:11e6,usage:4e6,scarcity:2e9},wasteGeneration:{municipal:201e7,industrial:18e8,electronic:536e5},airQuality:{pm25:35,pm10:45,no2:25,so2:15},temperature:{global:1.2,arctic:3.1,record:54.4},extremeWeather:{heatwaves:120,droughts:80,storms:90}})}catch(e){console.error("Error fetching real-time data:",e);const n=[{city:"Aligarh, India",aqi:596,country:"India",lat:27.8974,lng:78.088},{city:"Saharanpur, India",aqi:553,country:"India",lat:29.9646,lng:77.5506},{city:"Greater Noida, India",aqi:454,country:"India",lat:28.5355,lng:77.391}];t({worldPopulation:{count:81e8,today:81e4,thisYear:81e6,lastUpdated:(new Date).toISOString()},topCountries:[{country:"China",population:1425671352,flag:"\ud83c\udde8\ud83c\uddf3",capital:"Beijing"},{country:"India",population:1428627663,flag:"\ud83c\uddee\ud83c\uddf3",capital:"New Delhi"},{country:"United States",population:339996563,flag:"\ud83c\uddfa\ud83c\uddf8",capital:"Washington D.C."}],topCities:n,worstPollutedCities:n,worstPollutedCountries:[{country:"India",avgAQI:156,cities:12,flag:"\ud83c\uddee\ud83c\uddf3"},{country:"Pakistan",avgAQI:138,cities:8,flag:"\ud83c\uddf5\ud83c\uddf0"}],internetUsers:{count:53e8,today:5e5,percentage:66.2},socialMedia:{count:495e7,today:3e5,percentage:61.9},energy:{consumption:6e5,renewable:18e4,renewablePercentage:30},co2Levels:{current:421,increase:2.4,preIndustrial:280},forestLoss:{area:1e7,rate:28,percentage:7.5},waterScarcity:{affected:23e8,percentage:29},foodWaste:{tons:13e8,percentage:33},plasticInOceans:{particles:171e15,weight:25e7},speciesAtRisk:{count:37400,percentage:28}})}finally{i(!1)}};e();const n=setInterval(e,3e4);return()=>clearInterval(n)},[]),(0,o.useEffect)(()=>{const e=setInterval(()=>{u(new Date)},1e3);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{if(h.current){const n=(e,t,n,i)=>{const r=Date.now(),o=r+n,a=()=>{const s=Date.now(),l=Math.min((s-r)/n,1),c=Math.floor(e+(t-e)*l);i(c),s<o&&requestAnimationFrame(a)};requestAnimationFrame(a)};n(e.worldPopulation.count-1e6,e.worldPopulation.count,2e3,e=>{t(t=>Fe(Fe({},t),{},{worldPopulation:Fe(Fe({},t.worldPopulation),{},{count:e})}))})}},[e.worldPopulation.count]);const d=e=>e>=1e9?(e/1e9).toFixed(2)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":e.toString(),p=e=>e>=400?"#dc2626":e>=300?"#ea580c":e>=200?"#f59e0b":e>=100?"#eab308":"#10b981",f=e=>{const t={population:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",countries:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",cities:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",pollution:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",environment:"linear-gradient(135deg, #30cfd0 0%, #330867 100%)",technology:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",social:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)",disasters:"linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%)",climate:"linear-gradient(135deg, #ff8a80 0%, #ffab91 100%)",energy:"linear-gradient(135deg, #fff176 0%, #ffeb3b 100%)",urban:"linear-gradient(135deg, #b39ddb 0%, #8e24aa 100%)",biodiversity:"linear-gradient(135deg, #81c784 0%, #4caf50 100%)",ocean:"linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%)",earth:"linear-gradient(135deg, #8d6e63 0%, #5d4037 100%)"};return t[e]||t.population};return(0,et.jsxs)("div",{className:"wild-facts-page ".concat(s?"dark":"light"),children:[(0,et.jsx)("header",{className:"facts-header",children:(0,et.jsxs)("div",{className:"header-content",children:[(0,et.jsxs)("div",{className:"header-text",children:[(0,et.jsxs)("h1",{className:"main-title",children:[(0,et.jsx)("span",{className:"title-icon",children:"\ud83c\udf0d"}),"Wild World Facts"]}),(0,et.jsx)("p",{className:"subtitle",children:"Real-time global statistics and environmental insights"})]}),(0,et.jsxs)("div",{className:"header-controls",children:[(0,et.jsxs)("div",{className:"current-time",children:[(0,et.jsx)("span",{className:"time-label",children:"Live Time:"}),(0,et.jsx)("span",{className:"time-value",children:c.toLocaleTimeString()})]}),(0,et.jsx)("button",{className:"theme-toggle ".concat(s?"dark":"light"),onClick:()=>l(!s),children:s?"\u2600\ufe0f":"\ud83c\udf19"})]})]})}),(0,et.jsx)("nav",{className:"category-nav",children:(0,et.jsx)("div",{className:"category-nav-content",children:Object.keys({population:"Population",countries:"Countries",cities:"Cities",pollution:"Pollution",environment:"Environment",technology:"Technology",social:"Social Media",disasters:"Disasters",climate:"Climate",energy:"Energy",urban:"Urbanization",biodiversity:"Biodiversity",ocean:"Ocean",earth:"Earth Science"}).map(e=>{return(0,et.jsxs)("button",{className:"category-btn ".concat(r===e?"active":""),onClick:()=>a(e),style:{background:f(e)},children:[(0,et.jsx)("span",{className:"category-icon",children:(t=e,{population:"\ud83d\udc65",countries:"\ud83c\udf0d",cities:"\ud83c\udfd9\ufe0f",pollution:"\ud83d\ude37",environment:"\ud83c\udf3f",technology:"\ud83d\udcbb",social:"\ud83d\udcf1",disasters:"\ud83c\udf2a",climate:"\ud83c\udf21\ufe0f",energy:"\u26a1",urban:"\ud83c\udfd8\ufe0f",biodiversity:"\ud83e\udd8b",ocean:"\ud83c\udf0a",earth:"\ud83c\udf0e"}[t]||"\ud83c\udf0d")}),(0,et.jsx)("span",{className:"category-label",children:e})]},e);var t})})}),(0,et.jsx)("main",{className:"facts-content",children:n?(0,et.jsxs)("div",{className:"loading-container",children:[(0,et.jsx)("div",{className:"loading-spinner"}),(0,et.jsx)("p",{children:"Fetching real-time world data..."})]}):(0,et.jsxs)(et.Fragment,{children:["population"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card main-fact",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf0d"}),(0,et.jsx)("h2",{children:"World Population"}),(0,et.jsx)("span",{className:"live-badge",children:"LIVE"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.worldPopulation.count)}),(0,et.jsx)("span",{className:"counter-label",children:"People"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:["+",d(e.worldPopulation.today)]}),(0,et.jsx)("span",{className:"stat-label",children:"Today"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:["+",d(e.worldPopulation.thisYear)]}),(0,et.jsx)("span",{className:"stat-label",children:"This Year"})]})]}),(0,et.jsxs)("div",{className:"fact-footer",children:[(0,et.jsx)("span",{children:"Source: Worldometers.info"}),(0,et.jsxs)("span",{children:["Updated: ",new Date(e.worldPopulation.lastUpdated).toLocaleTimeString()]})]})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83d\udcf1"}),(0,et.jsx)("h2",{children:"Internet Users"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.internetUsers.count)}),(0,et.jsx)("span",{className:"counter-label",children:"Users"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:["+",d(e.internetUsers.today)]}),(0,et.jsx)("span",{className:"stat-label",children:"Today"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.internetUsers.percentage,"%"]}),(0,et.jsx)("span",{className:"stat-label",children:"Global Penetration"})]})]})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83d\udcf1"}),(0,et.jsx)("h2",{children:"Social Media Users"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.socialMedia.count)}),(0,et.jsx)("span",{className:"counter-label",children:"Users"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:["+",d(e.socialMedia.today)]}),(0,et.jsx)("span",{className:"stat-label",children:"Today"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.socialMedia.percentage,"%"]}),(0,et.jsx)("span",{className:"stat-label",children:"Global Penetration"})]})]})]})]})]}),"countries"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card full-width",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf0d"}),(0,et.jsx)("h2",{children:"Top 10 Most Populated Countries"}),(0,et.jsx)("span",{className:"live-badge",children:"LIVE"})]}),(0,et.jsx)("div",{className:"countries-list",children:e.topCountries.map((e,t)=>(0,et.jsxs)("div",{className:"country-item",children:[(0,et.jsxs)("div",{className:"country-rank",children:["#",t+1]}),(0,et.jsx)("div",{className:"country-flag",children:e.flag}),(0,et.jsxs)("div",{className:"country-info",children:[(0,et.jsx)("div",{className:"country-name",children:e.country}),(0,et.jsx)("div",{className:"country-population",children:d(e.population)}),(0,et.jsxs)("div",{className:"country-capital",children:["Capital: ",e.capital]})]})]},t))})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83d\ude37"}),(0,et.jsx)("h2",{children:"Worst Polluted Countries"})]}),(0,et.jsx)("div",{className:"countries-list",children:e.worstPollutedCountries.map((e,t)=>(0,et.jsxs)("div",{className:"country-item polluted",children:[(0,et.jsxs)("div",{className:"country-rank",children:["#",t+1]}),(0,et.jsx)("div",{className:"country-flag",children:e.flag}),(0,et.jsxs)("div",{className:"country-info",children:[(0,et.jsx)("div",{className:"country-name",children:e.country}),(0,et.jsxs)("div",{className:"country-aqi",style:{color:p(e.avgAQI)},children:["Avg AQI: ",e.avgAQI]}),(0,et.jsx)("div",{className:"country-stats",children:(0,et.jsxs)("span",{children:[e.cities," major cities"]})})]})]},t))})]})]}),"cities"===r&&(0,et.jsx)("div",{className:"facts-grid",children:(0,et.jsxs)("div",{className:"fact-card full-width",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udfd9\ufe0f"}),(0,et.jsx)("h2",{children:"Top 10 Most Polluted Cities"}),(0,et.jsx)("span",{className:"live-badge",children:"LIVE"})]}),(0,et.jsx)("div",{className:"cities-list",children:e.topCities.map((e,t)=>(0,et.jsxs)("div",{className:"city-item",children:[(0,et.jsxs)("div",{className:"city-rank",children:["#",t+1]}),(0,et.jsxs)("div",{className:"city-info",children:[(0,et.jsx)("div",{className:"city-name",children:e.city}),(0,et.jsx)("div",{className:"city-country",children:e.country}),(0,et.jsxs)("div",{className:"city-aqi",style:{color:p(e.aqi)},children:["AQI: ",e.aqi]}),(0,et.jsxs)("div",{className:"city-status",children:["Status: ",(0,et.jsx)("span",{style:{color:p(e.aqi)},children:e.aqi>=400?"Hazardous":e.aqi>=300?"Very Unhealthy":e.aqi>=200?"Unhealthy":e.aqi>=100?"Unhealthy for Sensitive":"Moderate"})]})]})]},t))})]})}),"pollution"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udfed"}),(0,et.jsx)("h2",{children:"CO2 Levels"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsxs)("span",{className:"counter-value",children:[e.co2Levels.current," ppm"]}),(0,et.jsx)("span",{className:"counter-label",children:"Current Level"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:["+",e.co2Levels.increase," ppm"]}),(0,et.jsx)("span",{className:"stat-label",children:"Above Pre-Industrial"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.co2Levels.preIndustrial," ppm"]}),(0,et.jsx)("span",{className:"stat-label",children:"Pre-Industrial"})]})]})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf0a"}),(0,et.jsx)("h2",{children:"Plastic in Oceans"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.plasticInOceans.particles)}),(0,et.jsx)("span",{className:"counter-label",children:"Particles"})]}),(0,et.jsx)("div",{className:"fact-stats",children:(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.plasticInOceans.weight)}),(0,et.jsx)("span",{className:"stat-label",children:"Metric Tons"})]})})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf33"}),(0,et.jsx)("h2",{children:"Forest Loss"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.forestLoss.area)}),(0,et.jsx)("span",{className:"counter-label",children:"Hectares Lost"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.forestLoss.rate," ha/hr"]}),(0,et.jsx)("span",{className:"stat-label",children:"Loss Rate"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.forestLoss.percentage,"%"]}),(0,et.jsx)("span",{className:"stat-label",children:"Total Loss"})]})]})]})]})]}),"environment"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83d\udca7"}),(0,et.jsx)("h2",{children:"Water Scarcity"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.waterScarcity.affected)}),(0,et.jsx)("span",{className:"counter-label",children:"People Affected"})]}),(0,et.jsx)("div",{className:"fact-stats",children:(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.waterScarcity.percentage,"%"]}),(0,et.jsx)("span",{className:"stat-label",children:"Global Population"})]})})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf3e"}),(0,et.jsx)("h2",{children:"Food Waste"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.foodWaste.tons)}),(0,et.jsx)("span",{className:"counter-label",children:"Tons/Year"})]}),(0,et.jsx)("div",{className:"fact-stats",children:(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.foodWaste.percentage,"%"]}),(0,et.jsx)("span",{className:"stat-label",children:"Global Production"})]})})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83e\udd95"}),(0,et.jsx)("h2",{children:"Species at Risk"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.speciesAtRisk.count)}),(0,et.jsx)("span",{className:"counter-label",children:"Threatened Species"})]}),(0,et.jsx)("div",{className:"fact-stats",children:(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.speciesAtRisk.percentage,"%"]}),(0,et.jsx)("span",{className:"stat-label",children:"Assessed Species"})]})})]})]})]}),"technology"===r&&(0,et.jsx)("div",{className:"facts-grid",children:(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\u26a1"}),(0,et.jsx)("h2",{children:"Global Energy"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.energy.consumption)}),(0,et.jsx)("span",{className:"counter-label",children:"TWh/Year"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.energy.renewable)}),(0,et.jsx)("span",{className:"stat-label",children:"Renewable TWh"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.energy.renewablePercentage,"%"]}),(0,et.jsx)("span",{className:"stat-label",children:"Renewable Share"})]})]})]})]})}),"disasters"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf2a"}),(0,et.jsx)("h2",{children:"Natural Disasters"}),(0,et.jsx)("span",{className:"live-badge",children:"LIVE"})]}),(0,et.jsx)("div",{className:"fact-content",children:(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.naturalDisasters.floods}),(0,et.jsx)("span",{className:"stat-label",children:"Floods (Year)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.naturalDisasters.hurricanes}),(0,et.jsx)("span",{className:"stat-label",children:"Hurricanes (Year)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.naturalDisasters.wildfires)}),(0,et.jsx)("span",{className:"stat-label",children:"Wildfires (Year)"})]})]})})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf0d"}),(0,et.jsx)("h2",{children:"Earthquakes"})]}),(0,et.jsx)("div",{className:"fact-content",children:(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.earthquakes.today}),(0,et.jsx)("span",{className:"stat-label",children:"Today"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.earthquakes.thisYear)}),(0,et.jsx)("span",{className:"stat-label",children:"This Year"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.earthquakes.magnitude}),(0,et.jsx)("span",{className:"stat-label",children:"Avg Magnitude"})]})]})})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf0b"}),(0,et.jsx)("h2",{children:"Volcanic Activity"})]}),(0,et.jsx)("div",{className:"fact-content",children:(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.volcanicActivity.active}),(0,et.jsx)("span",{className:"stat-label",children:"Active Volcanoes"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.volcanicActivity.eruptions}),(0,et.jsx)("span",{className:"stat-label",children:"Eruptions (Year)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.volcanicActivity.lastEruption}),(0,et.jsx)("span",{className:"stat-label",children:"Last Major"})]})]})})]})]}),"climate"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf21\ufe0f"}),(0,et.jsx)("h2",{children:"Global Temperature"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsxs)("span",{className:"counter-value",children:["+",e.temperature.global,"\xb0C"]}),(0,et.jsx)("span",{className:"counter-label",children:"Above Pre-Industrial"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:["+",e.temperature.arctic,"\xb0C"]}),(0,et.jsx)("span",{className:"stat-label",children:"Arctic Warming"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.temperature.record,"\xb0C"]}),(0,et.jsx)("span",{className:"stat-label",children:"Record High"})]})]})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf0a"}),(0,et.jsx)("h2",{children:"Sea Level Rise"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsxs)("span",{className:"counter-value",children:[e.seaLevel.current,"mm"]}),(0,et.jsx)("span",{className:"counter-label",children:"Current Rise"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.seaLevel.rise,"cm"]}),(0,et.jsx)("span",{className:"stat-label",children:"Since 1900"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:[e.seaLevel.rate,"mm/year"]}),(0,et.jsx)("span",{className:"stat-label",children:"Annual Rate"})]})]})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf2a"}),(0,et.jsx)("h2",{children:"Extreme Weather"})]}),(0,et.jsx)("div",{className:"fact-content",children:(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.extremeWeather.heatwaves}),(0,et.jsx)("span",{className:"stat-label",children:"Heatwaves (Year)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.extremeWeather.droughts}),(0,et.jsx)("span",{className:"stat-label",children:"Droughts (Year)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.extremeWeather.storms}),(0,et.jsx)("span",{className:"stat-label",children:"Major Storms"})]})]})})]})]}),"urban"===r&&(0,et.jsx)("div",{className:"facts-grid",children:(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udfd8\ufe0f"}),(0,et.jsx)("h2",{children:"Urban Population"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.urbanization.urban)}),(0,et.jsx)("span",{className:"counter-label",children:"Urban Residents"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.urbanization.rural)}),(0,et.jsx)("span",{className:"stat-label",children:"Rural Residents"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.urbanization.megacities}),(0,et.jsx)("span",{className:"stat-label",children:"Megacities"})]})]})]})]})}),"biodiversity"===r&&(0,et.jsx)("div",{className:"facts-grid",children:(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83e\udd8b"}),(0,et.jsx)("h2",{children:"Biodiversity Loss"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.biodiversityLoss.species)}),(0,et.jsx)("span",{className:"counter-label",children:"Species at Risk"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.biodiversityLoss.habitats)}),(0,et.jsx)("span",{className:"stat-label",children:"Hectares Lost"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.biodiversityLoss.rate}),(0,et.jsx)("span",{className:"stat-label",children:"Species/Year Lost"})]})]})]})]})}),"ocean"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udf0a"}),(0,et.jsx)("h2",{children:"Ocean Acidification"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:e.oceanAcidification.ph}),(0,et.jsx)("span",{className:"counter-label",children:"Current pH"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsxs)("span",{className:"stat-value",children:["-",e.oceanAcidification.decrease]}),(0,et.jsx)("span",{className:"stat-label",children:"pH Decrease"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.oceanAcidification.rate}),(0,et.jsx)("span",{className:"stat-label",children:"Annual Change"})]})]})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83e\uddca"}),(0,et.jsx)("h2",{children:"Ice Melt"})]}),(0,et.jsx)("div",{className:"fact-content",children:(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.iceMelt.arctic)}),(0,et.jsx)("span",{className:"stat-label",children:"Arctic (km\xb2)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.iceMelt.antarctic)}),(0,et.jsx)("span",{className:"stat-label",children:"Antarctic (km\xb2)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:e.iceMelt.rate}),(0,et.jsx)("span",{className:"stat-label",children:"Gt/Year Lost"})]})]})})]})]}),"earth"===r&&(0,et.jsxs)("div",{className:"facts-grid",children:[(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83c\udfdc\ufe0f"}),(0,et.jsx)("h2",{children:"Desertification"})]}),(0,et.jsxs)("div",{className:"fact-content",children:[(0,et.jsxs)("div",{className:"counter",children:[(0,et.jsx)("span",{className:"counter-value",children:d(e.desertification.area)}),(0,et.jsx)("span",{className:"counter-label",children:"Hectares Affected"})]}),(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.desertification.affected)}),(0,et.jsx)("span",{className:"stat-label",children:"People Affected"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.desertification.rate)}),(0,et.jsx)("span",{className:"stat-label",children:"Hectares/Year"})]})]})]})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83d\udca7"}),(0,et.jsx)("h2",{children:"Freshwater"})]}),(0,et.jsx)("div",{className:"fact-content",children:(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.freshwater.available)}),(0,et.jsx)("span",{className:"stat-label",children:"Available (km\xb3)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.freshwater.usage)}),(0,et.jsx)("span",{className:"stat-label",children:"Usage (km\xb3)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.freshwater.scarcity)}),(0,et.jsx)("span",{className:"stat-label",children:"People in Scarcity"})]})]})})]}),(0,et.jsxs)("div",{className:"fact-card",children:[(0,et.jsxs)("div",{className:"fact-header",children:[(0,et.jsx)("span",{className:"fact-icon",children:"\ud83d\uddd1\ufe0f"}),(0,et.jsx)("h2",{children:"Waste Generation"})]}),(0,et.jsx)("div",{className:"fact-content",children:(0,et.jsxs)("div",{className:"fact-stats",children:[(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.wasteGeneration.municipal)}),(0,et.jsx)("span",{className:"stat-label",children:"Municipal (tons/year)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.wasteGeneration.industrial)}),(0,et.jsx)("span",{className:"stat-label",children:"Industrial (tons/year)"})]}),(0,et.jsxs)("div",{className:"stat-item",children:[(0,et.jsx)("span",{className:"stat-value",children:d(e.wasteGeneration.electronic)}),(0,et.jsx)("span",{className:"stat-label",children:"E-Waste (tons/year)"})]})]})})]})]})]})}),(0,et.jsxs)("footer",{className:"facts-footer",children:[(0,et.jsxs)("div",{className:"footer-content",children:[(0,et.jsxs)("div",{className:"footer-info",children:[(0,et.jsx)("h3",{children:"\ud83c\udf0d Wild World Facts"}),(0,et.jsx)("p",{children:"Real-time global statistics and environmental insights"})]}),(0,et.jsxs)("div",{className:"footer-sources",children:[(0,et.jsx)("h4",{children:"Data Sources:"}),(0,et.jsxs)("ul",{children:[(0,et.jsx)("li",{children:"Worldometers.info - Real-time world statistics"}),(0,et.jsx)("li",{children:"AQI.in - Air quality index monitoring"}),(0,et.jsx)("li",{children:"NASA - Climate and environmental data"}),(0,et.jsx)("li",{children:"UNEP - United Nations Environment Programme"}),(0,et.jsx)("li",{children:"UN - United Nations statistics"}),(0,et.jsx)("li",{children:"NOAA - National Oceanic and Atmospheric Administration"}),(0,et.jsx)("li",{children:"FAO - Food and Agriculture Organization"}),(0,et.jsx)("li",{children:"IUCN - International Union for Conservation of Nature"}),(0,et.jsx)("li",{children:"IEA - International Energy Agency"})]})]})]}),(0,et.jsxs)("div",{className:"footer-meta",children:[(0,et.jsx)("p",{children:"Auto-refreshes every 30 seconds | Data accuracy may vary"}),(0,et.jsxs)("p",{children:["Last updated: ",c.toLocaleString()]})]})]})]})};const fV=function(){return(0,et.jsx)("div",{className:"App",children:(0,et.jsxs)(ye,{children:[(0,et.jsx)(me,{path:"/",element:(0,et.jsx)(Em,{})}),(0,et.jsx)(me,{path:"/history",element:(0,et.jsx)(dV,{})}),(0,et.jsx)(me,{path:"/wild-facts",element:(0,et.jsx)(pV,{})})]})})},mV=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:o,getTTFB:a}=t;n(e),i(e),r(e),o(e),a(e)})};s.createRoot(document.getElementById("root")).render((0,et.jsx)(o.StrictMode,{children:(0,et.jsx)(be,{children:(0,et.jsx)(fV,{})})})),mV()})()})();
//# sourceMappingURL=main.78d5c0f9.js.map